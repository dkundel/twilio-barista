{"version":3,"sources":["webpack:///debug.f49f7.js","webpack:///webpack/bootstrap eb606320f235aaaa9346","webpack:///../node_modules/twilio-sync/browser/network.js","webpack:///../node_modules/core-js/library/modules/es6.set.js","webpack:///../node_modules/twilio-sync/browser/configuration.js","webpack:///../node_modules/twilio-sync/browser/retryingqueue.js","webpack:///../node_modules/core-js/library/modules/_shared-key.js","webpack:///../node_modules/core-js/library/fn/object/freeze.js","webpack:///../node_modules/babel-runtime/core-js/object/freeze.js","webpack:///../node_modules/core-js/library/modules/_property-desc.js","webpack:///../node_modules/twilsock/lib/index.js","webpack:///../node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///../node_modules/core-js/library/modules/_library.js","webpack:///../node_modules/core-js/library/modules/es7.map.to-json.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///../node_modules/twilio-sync/browser/utils/deferred.js","webpack:///../node_modules/core-js/library/fn/object/define-property.js","webpack:///../node_modules/core-js/library/modules/_ctx.js","webpack:///../node_modules/twilio-sync/browser/synclist.js","webpack:///../node_modules/core-js/library/modules/_descriptors.js","webpack:///../node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///../node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///../node_modules/babel-runtime/core-js/set.js","webpack:///../node_modules/twilsock/lib/configuration.js","webpack:///../node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///../node_modules/twilsock/lib/client.js","webpack:///../node_modules/core-js/library/modules/es6.promise.js","webpack:///../node_modules/core-js/library/modules/_dom-create.js","webpack:///../node_modules/core-js/library/fn/promise.js","webpack:///../node_modules/twilio-ems-client/browser/persistentState.js","webpack:///../node_modules/core-js/library/modules/es6.symbol.js","webpack:///../node_modules/core-js/library/modules/_collection-strong.js","webpack:///../node_modules/precond/lib/errors.js","webpack:///../node_modules/bottleneck/lib/Bottleneck.js","webpack:///../node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///../node_modules/twilio-sync/browser/services/storage.js","webpack:///../node_modules/core-js/library/modules/_species-constructor.js","webpack:///../node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///../node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///../node_modules/twilio-notifications/lib/twilsock.connector.js","webpack:///../node_modules/core-js/library/modules/es6.object.freeze.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///../node_modules/core-js/library/modules/_is-object.js","webpack:///../node_modules/core-js/library/modules/core.is-iterable.js","webpack:///../node_modules/backoff/lib/strategy/strategy.js","webpack:///../node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./debug.js","webpack:///../node_modules/bottleneck/lib/DLList.js","webpack:///../node_modules/bottleneck/lib/Cluster.js","webpack:///../node_modules/precond/index.js","webpack:///../node_modules/twilio-notifications/lib/registrar.js","webpack:///../node_modules/backoff/lib/backoff.js","webpack:///../node_modules/twilio-sync/browser/logger.js","webpack:///../node_modules/core-js/library/modules/_iobject.js","webpack:///../node_modules/core-js/library/modules/_to-primitive.js","webpack:///../node_modules/twilio-notifications/lib/logger.js","webpack:///../node_modules/babel-runtime/core-js/object/define-property.js","webpack:///../node_modules/core-js/library/modules/_set-species.js","webpack:///../node_modules/events/events.js","webpack:///../node_modules/core-js/library/modules/es6.object.define-properties.js","webpack:///../node_modules/twilio-sync/browser/entity.js","webpack:///../node_modules/core-js/library/modules/_object-dp.js","webpack:///../node_modules/babel-runtime/helpers/typeof.js","webpack:///../node_modules/core-js/library/modules/_microtask.js","webpack:///../node_modules/twilio-notifications/lib/index.js","webpack:///../node_modules/core-js/library/modules/_object-gpo.js","webpack:///../node_modules/babel-runtime/core-js/json/stringify.js","webpack:///../node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///../node_modules/twilio-transport/lib/transport.js","webpack:///../node_modules/cuint/lib/uint64.js","webpack:///../node_modules/twilio-sync/browser/entitiesCache.js","webpack:///../node_modules/ieee754/index.js","webpack:///../node_modules/core-js/library/fn/map.js","webpack:///../node_modules/core-js/library/modules/_an-instance.js","webpack:///../node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///../node_modules/core-js/library/fn/symbol/index.js","webpack:///../node_modules/babel-runtime/core-js/promise.js","webpack:///../node_modules/twilio-notifications/lib/registrar.connector.js","webpack:///../node_modules/core-js/library/modules/_array-includes.js","webpack:///../node_modules/twilio-ems-client/browser/client.js","webpack:///../node_modules/babel-runtime/core-js/object/define-properties.js","webpack:///../node_modules/core-js/library/modules/_iter-detect.js","webpack:///../node_modules/core-js/library/fn/get-iterator.js","webpack:///../node_modules/core-js/library/modules/_to-integer.js","webpack:///../node_modules/core-js/library/modules/_to-index.js","webpack:///../node_modules/core-js/library/modules/es6.array.from.js","webpack:///../node_modules/core-js/library/modules/_shared.js","webpack:///../node_modules/twilio-sync/browser/paginator.js","webpack:///../node_modules/xxhashjs/lib/xxhash.js","webpack:///../node_modules/core-js/library/modules/_object-gopn.js","webpack:///../node_modules/core-js/library/fn/array/from.js","webpack:///../node_modules/core-js/library/modules/_redefine-all.js","webpack:///../node_modules/xxhashjs/lib/xxhash64.js","webpack:///../node_modules/twilio-sync/browser/router.js","webpack:///../node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///../node_modules/core-js/library/modules/_object-gops.js","webpack:///../node_modules/cuint/index.js","webpack:///../node_modules/twilio-sync/browser/utils.js","webpack:///../node_modules/backoff/index.js","webpack:///../node_modules/core-js/library/fn/json/stringify.js","webpack:///../node_modules/regenerator-runtime/runtime.js","webpack:///../node_modules/regenerator-runtime/runtime-module.js","webpack:///../node_modules/twilio-sync/browser/mapitem.js","webpack:///../node_modules/twilio-sync/browser/clientInfo.js","webpack:///../node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///../node_modules/isarray/index.js","webpack:///../node_modules/core-js/library/modules/_to-length.js","webpack:///../node_modules/core-js/library/modules/es6.map.js","webpack:///../node_modules/core-js/library/modules/_cof.js","webpack:///../node_modules/babel-runtime/helpers/extends.js","webpack:///../node_modules/loglevel/lib/loglevel.js","webpack:///../node_modules/core-js/library/modules/_array-species-create.js","webpack:///../node_modules/core-js/library/fn/is-iterable.js","webpack:///../node_modules/core-js/library/modules/_object-create.js","webpack:///../node_modules/twilio-notifications/lib/client.js","webpack:///../node_modules/core-js/library/modules/_defined.js","webpack:///../node_modules/core-js/library/modules/_wks.js","webpack:///../node_modules/backoff/lib/function_call.js","webpack:///../node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/twilio-sync/browser/client.js","webpack:///../node_modules/babel-runtime/core-js/array/from.js","webpack:///../node_modules/core-js/library/modules/_to-iobject.js","webpack:///../node_modules/core-js/library/modules/_uid.js","webpack:///../node_modules/babel-runtime/core-js/get-iterator.js","webpack:///../node_modules/core-js/library/modules/es7.set.to-json.js","webpack:///../node_modules/backoff/lib/strategy/fibonacci.js","webpack:///../node_modules/twilio-sync/browser/syncerror.js","webpack:///../node_modules/core-js/library/modules/es6.object.assign.js","webpack:///../node_modules/core-js/library/modules/_array-from-iterable.js","webpack:///../node_modules/babel-runtime/core-js/map.js","webpack:///../node_modules/twilio-ems-client/browser/configuration.js","webpack:///../node_modules/core-js/library/modules/_classof.js","webpack:///../node_modules/babel-runtime/helpers/inherits.js","webpack:///../node_modules/twilio-sync/browser/cache.js","webpack:///../node_modules/core-js/library/modules/_set-proto.js","webpack:///../node_modules/core-js/library/modules/_wks-ext.js","webpack:///../node_modules/babel-runtime/regenerator/index.js","webpack:///../node_modules/core-js/library/modules/_is-array-iter.js","webpack:///../node_modules/core-js/library/modules/_hide.js","webpack:///../node_modules/twilio-sync/browser/syncmap.js","webpack:///../node_modules/core-js/library/modules/_is-array.js","webpack:///../node_modules/rfc6902/rfc6902.js","webpack:///../node_modules/backoff/lib/strategy/exponential.js","webpack:///../node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///../node_modules/core-js/library/modules/_iter-create.js","webpack:///../node_modules/core-js/library/modules/_wks-define.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///../node_modules/twilio-sync/browser/subscriptions.js","webpack:///../node_modules/core-js/library/modules/_object-sap.js","webpack:///../node_modules/core-js/library/modules/_collection.js","webpack:///../node_modules/core-js/library/fn/object/create.js","webpack:///../node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///../node_modules/twilio-sync/browser/index.js","webpack:///../node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///../node_modules/core-js/library/modules/_iterators.js","webpack:///../node_modules/core-js/library/modules/_meta.js","webpack:///../node_modules/twilio-sync/browser/syncNetworkError.js","webpack:///../node_modules/core-js/library/modules/_html.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/twilsock/lib/packetinterface.js","webpack:///../node_modules/bluebird/js/browser/bluebird.js","webpack:///../node_modules/core-js/library/modules/_a-function.js","webpack:///../node_modules/precond/lib/checks.js","webpack:///../node_modules/babel-runtime/core-js/object/assign.js","webpack:///../node_modules/util/util.js","webpack:///../node_modules/core-js/library/modules/_object-dps.js","webpack:///../node_modules/babel-runtime/core-js/is-iterable.js","webpack:///../node_modules/core-js/library/modules/_redefine.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/core-js/library/modules/_iter-call.js","webpack:///../node_modules/uuid/v1.js","webpack:///../node_modules/uuid/v4.js","webpack:///../node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///../node_modules/twilio-sync/browser/syncdocument.js","webpack:///../node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///../node_modules/operation-retrier/lib/retrier.js","webpack:///../node_modules/core-js/library/modules/_global.js","webpack:///../node_modules/twilio-transport/lib/httprequest.js","webpack:///../node_modules/babel-runtime/core-js/symbol.js","webpack:///../node_modules/babel-runtime/helpers/createClass.js","webpack:///../node_modules/core-js/library/modules/_object-keys.js","webpack:///../node_modules/platform/platform.js","webpack:///../node_modules/twilsock/lib/twilsock.js","webpack:///../node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///../node_modules/webpack/buildin/module.js","webpack:///../node_modules/karibu/browser/tree.js","webpack:///../node_modules/twilio-ems-client/browser/logger.js","webpack:///../node_modules/core-js/library/modules/_string-at.js","webpack:///../node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///../node_modules/core-js/library/modules/_to-object.js","webpack:///../node_modules/cuint/lib/uint32.js","webpack:///../node_modules/core-js/library/fn/symbol/iterator.js","webpack:///../node_modules/core-js/library/modules/_invoke.js","webpack:///../node_modules/twilsock/lib/logger.js","webpack:///../node_modules/core-js/library/modules/_for-of.js","webpack:///../node_modules/core-js/library/modules/_keyof.js","webpack:///../node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///../node_modules/twilio-sync/package.json","webpack:///../node_modules/uuid/index.js","webpack:///../node_modules/twilio-sync/browser/listitem.js","webpack:///../node_modules/xxhashjs/lib/index.js","webpack:///../node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///../node_modules/core-js/library/modules/_object-gopd.js","webpack:///../node_modules/core-js/library/modules/_array-methods.js","webpack:///../node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///../node_modules/core-js/library/fn/object/define-properties.js","webpack:///../node_modules/core-js/library/modules/_iter-define.js","webpack:///../node_modules/core-js/library/modules/core.get-iterator.js","webpack:///../node_modules/core-js/library/modules/_object-assign.js","webpack:///../node_modules/javascript-state-machine/state-machine.js","webpack:///../node_modules/core-js/library/modules/_task.js","webpack:///../node_modules/core-js/library/modules/_export.js","webpack:///../node_modules/core-js/library/modules/_create-property.js","webpack:///../node_modules/core-js/library/fn/object/assign.js","webpack:///../node_modules/util/support/isBufferBrowser.js","webpack:///../node_modules/core-js/library/fn/set.js","webpack:///../node_modules/core-js/library/modules/_fails.js","webpack:///../node_modules/core-js/library/modules/_collection-to-json.js","webpack:///../node_modules/core-js/library/modules/_iter-step.js","webpack:///../node_modules/bottleneck/lib/index.js","webpack:///../node_modules/core-js/library/modules/es6.object.create.js","webpack:///../node_modules/core-js/library/modules/_has.js","webpack:///../node_modules/core-js/library/modules/_enum-keys.js","webpack:///../node_modules/babel-runtime/core-js/object/create.js","webpack:///../node_modules/base64-js/index.js","webpack:///../node_modules/core-js/library/modules/_object-pie.js","webpack:///../node_modules/core-js/library/modules/_core.js","webpack:///../node_modules/twilio-notifications/lib/configuration.js","webpack:///../node_modules/core-js/library/modules/_an-object.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","+/Dx","_interopRequireDefault","obj","default","messageFromErrorBody","trasportError","body","message","status","codeFromErrorBody","code","mapTransportError","transportError","syncNetworkError_1","SyncNetworkError","syncerror_1","SyncError","twilio_transport_1","TwilsockUnavailableError","_promise","_promise2","_extends2","_extends3","_stringify","_stringify2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","value","uuid","logger_1","operation_retrier_1","Network","productId","clientInfo","config","transport","this","key","Content-Type","Twilio-Sync-Client-Info","Twilio-Request-Id","v4","replace","X-Twilio-Product-Id","X-Twilio-Token","token","min","max","maxAttemptsTime","randomness","backoffConfig","request","_this","retryWhenThrottled","arguments","length","undefined","resolve","reject","codesToRetryOn","push","retrier","on","then","result","succeeded","catch","err","indexOf","delayOverride","parseInt","headers","failed","isNaN","removeAllListeners","cancel","start","uri","_this2","createHeaders","debug","executeWithRetry","revision","twilsockOnly","_this3","post","_this4","put","_this5","delete","+o4f","strong","add","def","/GKJ","getWithDefault","container","defaultValue","Configuration","options","Sync","DataSync","baseUri","cdsUri","_token","settings","subscriptionsUri","documentsUri","listsUri","mapsUri","sessionStorageEnabled","/lpw","_freeze","_freeze2","RetryingQueue","queue","Array","isActive","setTimeout","executeTask","shift","arg","task","context","pickNext","error","handle","pickSame","e","errorHandler","wakeupQueue","/wuY","shared","uid","0","0KnF","freeze","0Qy9","0WCH","bitmap","writable","0Zys","_client","1","11Ut","f","has","TAG","it","tag","stat","1kq3","2SH0","$export","P","R","toJSON","2mwf","3Y9o","Deferred","_resolve","_reject","current","3v7p","$Object","desc","3zRh","aFunction","fn","that","a","b","apply","6Hp8","_regenerator","_regenerator2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","__awaiter","thisArg","_arguments","generator","fulfilled","step","next","rejected","done","utils_1","entity_1","retryingqueue_1","listitem_1","paginator_1","cache_1","SyncList","_entity_1$SyncEntity","services","descriptor","removalHandler","__proto__","actionQueue","cache","Cache","location","param","mark","_callee","response","wrap","_context","prev","network","data","sent","abrupt","stop","_callee2","index","item","_context2","links","items","Number","store","ListItem","lastEventId","last_event_id","url","emit","_actualSet","resolver","_callee4","updatedItemDescriptor","_resolver","_context4","__set","_callee3","refreshedItem","_context3","_get","deepClone","bind","update","mutator","_callee5","_context5","_callee6","_context6","mutate","remote","_callee7","_context7","_callee8","cachedItem","_context8","_callee9","_context9","queryItems","Error","_callee10","meta","_context10","UriBuilder","queryParam","from","limit","pageToken","order","build","map","el","_handleItemUpdated","Paginator","previous_token","next_token","args","_callee11","_context11","pageSize","_callee12","_context12","_callee13","_context13","t0","_callee14","_context14","onRemoved","locally","_unsubscribe","type","sid","uniqueName","eventId","isKnown","isStrictlyOrdered","itemIndex","item_index","_handleItemAdded","item_url","id","item_revision","item_data","_handleItemRemoved","_handleContextUpdate","context_data","_advanceLastEventId","list_revision","shouldIgnoreEvent","unique_name","SyncEntity","6MLN","6t7t","7AqT","classof","ITERATOR","Iterators","getIteratorMethod","7Zlx","7ruU","_defineProperties","_defineProperties2","TwilsockConfig","_twilsockWsHost","Twilsock","wsServer","twilsockUri","7tZR","isObject","isArray","SPECIES","original","C","constructor","7xPs","_set","_set2","_map","_map2","_events","_events2","_logger","_logger2","_uuid","_uuid2","_configuration","_configuration2","_twilsock","_twilsock2","_packetinterface","_packetinterface2","TwilsockClient","_EventEmitter","logLevel","setLevel","twilsock","packetInterface","_config","_socket","_packet","_registrations","_registrationsInProgress","isConnected","connected","state","_updateRegistrations","window","addEventListener","isRetrying","reconnect","send","to","info","updateToken","contextId","registrationAttempts","set","attemptId","putNotificationContext","size","_c","forEach","_updateRegistration","deleteNotificationContext","connect","disconnect","9kJF","Internal","GenericPromiseCapability","Wrapper","LIBRARY","global","ctx","anInstance","forOf","speciesConstructor","microtask","TypeError","process","$Promise","isNode","empty","USE_NATIVE","promise","FakePromise","exec","PromiseRejectionEvent","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","$$resolve","$$reject","perform","notify","isReject","_n","chain","_v","ok","_s","reaction","handler","fail","domain","_h","onHandleUnhandled","enter","exit","onUnhandled","console","isUnhandled","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","slice","$resolve","wrapper","executor","onFulfilled","onRejected","G","W","F","Promise","S","r","capability","x","iter","all","iterable","values","remaining","$index","alreadyCalled","race","9kxq","document","is","createElement","9u1Q","AMYL","PersistentState","cachedContinuationToken","myInstanceNumber","initializeInstanceId","cachedInstancesCount","sessionStorage","getItem","instancesCounter","setItem","toString","removeItem","shouldUsePersistentToken","continuationToken","Aa2f","DESCRIPTORS","redefine","META","KEY","$fails","setToStringTag","wks","wksExt","wksDefine","keyOf","enumKeys","anObject","toIObject","toPrimitive","createDesc","_create","gOPNExt","$GOPD","$DP","$keys","gOPD","dP","gOPN","$Symbol","Symbol","$JSON","JSON","stringify","HIDDEN","TO_PRIMITIVE","isEnum","propertyIsEnumerable","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","QObject","setter","findChild","setSymbolDesc","D","protoDesc","sym","_k","isSymbol","iterator","$defineProperty","$defineProperties","keys","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","$getOwnPropertySymbols","IS_OP","$set","symbols","split","for","keyFor","useSetter","useSimple","create","defineProperties","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","replacer","$replacer","valueOf","Math","AePr","redefineAll","defined","$iterDefine","setSpecies","fastKey","SIZE","getEntry","entry","_i","_f","k","getConstructor","NAME","IS_MAP","ADDER","_l","clear","callbackfn","v","setStrong","iterated","kind","_t","AgUv","IllegalArgumentError","IllegalStateError","util","inherits","An/8","Bottleneck","MIDDLE_PRIORITY","NB_PRIORITIES","me","maxNb","minTime","highWater","strategy","rejectOnDrop","LEAK","schedulePriority","submitPriority","submit","_nextRequest","Date","now","_nbRunning","_queues","_makeQueues","_running","_nextIndex","_unblockTime","penalty","interrupt","reservoir","limiter","events","OVERFLOW","OVERFLOW_PRIORITY","BLOCK","Cluster","DLList","_trigger","cb","ref","j","results","isBlocked","_sanitizePriority","priority","sProperty","_find","arr","len","nbQueued","reduce","nbRunning","_getFirst","_conditionsCheck","check","_tryToRun","queued","wait","timeout","completed","concat","job","reachedHighWaterMark","shifted","reverse","schedule","wrapped","changeSettings","changePenalty","changeReservoir","incrementReservoir","incr","stopAll","len1","clearTimeout","Aq8W","AwcA","SessionStorage","storage","storageId","isReady","_store","storageKey","_read","patch","_apply","storedData","parse","B1ls","O","B9Lq","arrayIndexOf","IE_PROTO","BX4+","BYJX","toArray","_set3","TwilsockConnector","_messageTypes","removeNotificationsContext","_updateContext","messageType","trace","messageTypes","product_id","notification_protocol_version","endpoint_platform","platform","ttl","message_types","setNotificationsContext","Bdru","onFreeze","$freeze","BtHH","toObject","$getPrototypeOf","BxvP","By4a","isIterable","C6lX","isDef","BackoffStrategy","initialDelay","maxDelay","initialDelay_","maxDelay_","randomisationFactor","randomisationFactor_","getMaxDelay","getInitialDelay","backoffDelay","next_","randomisationMultiple","random","round","reset","reset_","COf8","hide","TO_STRING_TAG","collections","Collection","proto","CjMg","__webpack_exports__","clientConnected","client","doc","configurationDoc","setData","list","orderQueueList","displayAllItems","allOrdersList","customersMap","querySelector","innerText","getItems","page","__WEBPACK_IMPORTED_MODULE_0_twilio_sync__","fetch","credentials","resp","json","_ref","log","Cp6S","_first","_last","node","ref1","getArray","Cv+O","hasProp","limiters","startAutoCleanup","deleteKey","base","stopAutoCleanup","interval","setInterval","time","unref","clearInterval","changeTimeout","Dygy","E07s","_registrar","_registrar2","Registrar","_conf","_connectors","_detectPlatform","channelType","notificationId","_connector","setNotificationId","subscribe","unsubscribe","connector","_platform","navigator","product","userAgent","substring","E1ih","Backoff","backoffStrategy","EventEmitter","backoffStrategy_","maxNumberOfRetry_","backoffNumber_","backoffDelay_","timeoutID_","handlers","backoff","onBackoff_","precond","failAfter","maxNumberOfRetry","checkArgument","checkState","E56Z","prepareLine","prefix","_from2","_from","level","_len","_key","_len2","_key2","_len3","_key3","warn","_len4","_key4","_len5","_key5","E5Ce","cof","EKwp","val","EwCr","_loglevel","_loglevel2","FFZn","FGzK","core","FRpO","_maxListeners","isFunction","isNumber","isUndefined","defaultMaxListeners","setMaxListeners","er","listeners","addListener","listener","newListener","warned","once","g","removeListener","fired","position","splice","listenerCount","evlistener","emitter","FshL","GBRx","events_1","_events_1$EventEmitte","router","Gfzd","IE8_DOM_DEFINE","Attributes","GyB/","_iterator","_iterator2","_symbol","_symbol2","_typeof","H109","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","last","flush","parent","nextTick","toggle","createTextNode","observe","characterData","H3OR","HHE0","getPrototypeOf","HxWs","ID6i","JE0K","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","parseUri","match","uriStruct","protocol","host","hostname","port","pathname","search","hash","params","curr","twilsockAddress","method","parsedUri","path","twilsockParams","adaptTwilsockResponse","header","http_status","http_headers","httpParams","adaptHttpResponse","lowercaseHeaders","toLowerCase","Transport","_createClass","target","props","Constructor","protoProps","staticProps","_httprequest","_httprequest2","_extendableBuiltin2","cls","ExtendableBuiltin","instance","Reflect","construct","_activeGetRequests","Map","_http","_twilsockIsAvailable","_concurrentHttpRequestLimit","concurrentHttpRequestLimit","Infinity","_concurrentHttpRequestCount","_requestQueue","_processQueuedRequests","forceTwilsock","sendingOptions","paths","sendViaTwilsock","sendDirectHttp","_oneOfBasedOnChannelAvailability","_this6","_this7","_this8","JWsA","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","UINT64","a00","a16","a32","a48","remainder","fromString","fromNumber","fromBits","_a00","_a16","_a32","_a48","radix","radixUint","radixPowerCache","pow","multiply","16","10","2","radixCache","toNumber","gt","clone","res","div","join","other","subtract","negate","b00","b16","b32","b48","c00","c16","c32","c48","eq","_other","lt","shiftLeft","shiftRight","equals","greaterThan","lessThan","or","and","xor","not","shiftr","shiftl","allowOverflow","rotateLeft","rotl","high","low","_high","_low","rotateRight","rotr","Jb0q","EntitiesCache","entities","entity","stored","resolvedSid","getResolved","cached","JgNJ","read","buffer","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","write","rt","abs","floor","LN2","K+F3","KUik","forbiddenField","KxjL","Ky5l","L3Vt","LGMx","_javascriptStateMachine","_javascriptStateMachine2","_backoff","_backoff2","RegistrarConnector","fsm","initial","event","defer","callbacks","onregistering","_register","onunregistering","_unregister","onregistered","_onRegistered","onunregistered","_onUnregistered","onretrying","_initRetry","onfailure","exponential","_retry","_transport","_url","registrarUri","_fsm","_channelType","_registrationId","_notificationId","_pendingUpdate","init","_removeRegistration","_update","regData","userUpdate","_setPendingUpdate","pendingUpdate","_checkPendingUpdate","registrarRequest","channel_type","version","registration_id","_registrationData","registered","failure","unregistered","LNnS","toLength","toIndex","IS_INCLUDES","$this","fromIndex","LUBQ","configuration_1","persistentState_1","TokenRequest","EmsClient","twilsockClient","fpaToken","oldTokenRequest","currentFpaToken","currentTokenRequest","establishToken","notifyRejected","tokenRequest","establishTokenImpl","run","requestRtdToken","exception","continuation_token","rtdToken","twilio_rtd_token","identity","accountSid","account_sid","serviceSids","instance_sids","fpa_token","description","EMSClient","LlWG","Lli7","SAFE_CLOSING","riter","skipClosing","safe","Lvd3","MpYs","ceil","N1kU","toInteger","N484","isArrayIter","createProperty","getIterFn","arrayLike","aLen","mapfn","mapping","iterFn","NB7d","NQ19","source","prevToken","nextToken","hasNextPage","hasPrevPage","Nf0/","Buffer","toUTF8Array","str","utf8","charcode","charCodeAt","Uint8Array","XXH","digest","seed","UINT32","v1","PRIME32_1","PRIME32_2","v2","v3","total_len","memsize","memory","xxh_update","PRIME32_3","PRIME32_4","PRIME32_5","input","isArrayBuffer","isString","ArrayBuffer","bEnd","subarray","copy","p32","h32","h","u","Ni5N","hiddenKeys","O35A","O6kh","src","OFjk","XXH64","PRIME64_1","PRIME64_2","PRIME64_3","PRIME64_4","PRIME64_5","p64","h64","OLak","SYNC_DOCUMENT_NOTIFICATION_TYPE","SYNC_LIST_NOTIFICATION_TYPE","SYNC_MAP_NOTIFICATION_TYPE","SYNC_NOTIFICATION_TYPE","Router","subscriptions","notifications","payload","onMessage","onConnectionStateChanged","acceptMessage","remove","OYXR","addToUnscopables","Arguments","Ocr3","P5jY","PD3G","encodeURIComponent","PvFw","ExponentialBackoffStrategy","FibonacciBackoffStrategy","FunctionCall","FibonacciStrategy","ExponentialStrategy","fibonacci","vargs","callback","Q17y","QVnC","innerFn","outerFn","tryLocsList","protoGenerator","Generator","_invoke","makeInvokeMethod","Context","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","GenStateSuspendedYield","return","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","iteratorSymbol","Op","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime","regeneratorRuntime","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","awrap","async","pop","skipTempReset","charAt","rootEntry","rootRecord","rval","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","QYzI","hadRuntime","oldRuntime","QlMj","MapItem","R1bg","ClientInfo","sdk","sdkVer","os","family","osVer","pl","plVer","R6c1","REa7","S7IM","SKjJ","ShN9","T4f3","_assign","T51w","__WEBPACK_AMD_DEFINE_FACTORY__","root","definition","realMethod","methodName","undefinedType","bindMethod","noop","Function","enableLoggingWhenConsoleArrives","loggerName","replaceLoggingMethods","logMethods","methodFactory","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","toUpperCase","localStorage","ignore","cookie","getPersistedLevel","storedLevel","levels","currentLevel","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","getLevel","persist","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","TD/Z","TEgB","TNJq","dPs","enumBugKeys","Empty","createDict","iframeDocument","iframe","style","display","appendChild","contentWindow","open","close","Properties","TpZJ","per","_bottleneck2","unshift","_bottleneck","_twilioTransport","_twilioTransport2","_twilioEmsClient","Client","minTokenRefreshInterval","emsClient","reliableTransportState","overall","registration","lastEmitted","_emsClient","_reliableTransportState","_updateToken","connectionState","setToken","_onTransportStateChange","_onRegistrationStateChange","_onNeedReliableTransport","_routeMessage","isNeeded","_updateTransportState","overallState","msg","registrationId","_fpaToken","U72i","Ug9I","USE_SYMBOL","V5Fu","checkIsFunction","checkIsArray","function_","arguments_","callback_","lastResult_","numRetries_","backoff_","strategy_","failAfter_","retryPredicate_","DEFAULT_RETRY_PREDICATE_","state_","State_","PENDING","RUNNING","COMPLETED","ABORTED","isPending","isRunning","isCompleted","isAborted","setStrategy","retryIf","retryPredicate","getLastResult","getNumRetries","abort","doCallback_","backoffFactory","doCall_","handleBackoff_","isRetry","eventArgs","handleFunctionCallback_","number","delay","VOrx","_typeof2","_typeof3","Vroa","subscribable","_subscribe","createPayload","purpose","decompose","mode","optimistic","xxhashjs_1","twilio_ems_client_1","Notifications","subscriptions_1","router_1","network_1","syncdocument_1","synclist_1","syncmap_1","clientInfo_1","entitiesCache_1","storage_1","utils_2","deferred_1","SYNC_PRODUCT_ID","SDK_VERSION","SyncClient","notificationsClient","localStorageId","authData","handleEmsResponse","Subscriptions","serviceSid","updateStorageId","valueToStore","SyncDocument","pathSegment","readRootFromSessionCache","SyncMap","_decompose","docFromInMemoryCache","docDescriptor","syncDocument","ensureReady","getCached","_getDocument","_createDocument","storeRootInSessionCache","removeFromCacheAndSession","_decompose2","mapFromInMemoryCache","mapDescriptor","syncMap","_getMap","_createMap","_decompose3","listFromInMemoryCache","listDescriptor","syncList","_getList","_createList","shutdown","VuZO","Wyka","IObject","X6va","px","X9RM","XMdB","XdV9","nextBackoffDelay_","XzVR","_Error","YD0x","assign","YLmZ","YZrv","ZAcJ","emsConfig","realm","DEFAULT_EMS_HOST","emsUri","emsUrl","ZHvQ","ARG","tryGet","T","B","callee","ZKjc","_setPrototypeOf","_setPrototypeOf2","_create2","ZUV3","karibu_1","Entry","Tombstone","TreeMap","isValid","ZaKr","test","buggy","ZxII","aIIw","af0K","ArrayProto","akPY","al4s","mapitem_1","itemDescriptor","keyValue","existingItemLocation","_response","resolvedData","_value","added","addOrUpdateResult","_tryAddOrUpdate","processPage","nextPage","item_key","map_revision","ayXv","b0lL","require","t","_dereq_","isDestructive","op","add_key","del_key","intersection","objects","key_counts","threshold","objectType","isArrayAdd","array_operation","isArrayRemove","diffArrays","output","ptr","dist","memoized","memo","compare","alternatives","remove_alternative","operations","cost","add_alternative","replace_alternative","sort","0,0","input_length","output_length","array_operations","_array_operations$reduce","_ref2","_slicedToArray","padding","padded_index","index_token","String","operation","replace_ptr","replace_operations","diffAny","_toConsumableArray","_array_operations$reduce2","diffObjects","diffValues","input_type","output_type","_step","_arr","arr2","./equal","zip","zipped","compareArrays","left","right","every","pair","compareObjects","left_keys","3","receiver","MissingError","InvalidOperationError","_Error2","TestError","_Error3","actual","expected","4","applyPatch","operationFunction","operationFunctions","createPatch","Pointer","createTest","endpoint","fromJSON","evaluate","createTests","tests","filter","pathTest","fromTest","_diff","./diff","./errors","./patch","./pointer","5","_add","_remove","move","from_endpoint","_errors","6","unescape","escape","prop","tokens","b1KJ","factor_","DEFAULT_FACTOR","factor","b1tA","b7Q2","c2zY","c6mp","cFQ4","_slicedToArray2","_slicedToArray3","_getIterator2","_getIterator3","SubscribedEntity","localObject","pendingCorrelationId","established","retryCount","isStrictlyOrderd","rejectedWithError","reportFailure","maxBatchSize","persisted","latestPokeResponseArrivalTimestampByCorrelationId","_getSubscriptionUpdat","getSubscriptionUpdateBatch","action","subscriptionRequests","applyNewSubscriptionUpdateBatch","substract","these","those","ignoreCurrentOp","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step$value","thisKey","thisValue","isInTransition","listToAdd","listToRemove","requests","correlationId","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","subscribed","newMaxBatchSize","estimatedDeliveryInMs","isNumeric","isValidTimeout","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","attemptedSubscription","processLocalActions","getTime","recordActionAttemptOn","max_batch_size","isFinite","estimated_delivery_in_ms","parseFloat","verifyPokeDelivery","t1","recordActionFailureOn","t2","lastReceived","silencePeriod","timeoutExtension","persistedSubscription","object_sid","object_type","retriedRequests","event_protocol_version","correlation_id","retried_requests","existingSubscription","event_type","applySubscriptionEstablishedMessage","applySubscriptionCancelledMessage","applySubscriptionFailedMessage","applyEventToSubscribedEntity","map_sid","list_sid","document_sid","subscriptionIntent","replay_status","subscription","markAsFailed","isEstablished","poke","failedSubscriptions","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_it","cOHw","fails","exp","cYD/","each","methods","common","IS_WEAK","Base","entries","IS_ADDER","NEED","cjsw","dACh","dAjQ","bytesToUuid","buf","bth","byteToHex","substr","dVxL","client_1","SyncListItem","SyncMapItem","dXs8","dhak","e8vu","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","w","getWeak","eDHa","_syncerror_1$SyncErro","ebIA","documentElement","f+DB","rng","crypto","msCrypto","getRandomValues","rnds8","rnds","f/lV","isHttpSuccess","isHttpReply","packet","PacketInterface","socket","_activeRequests","_processReply","reply","requestDescriptor","address","sendUpstreamMessage","_storeRequest","notification_ctx_id","fp6q","define","any","promises","ret","SomePromiseArray","setHowMany","setUnwrap","_SomePromiseArray","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","AsyncInvokeLater","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","setScheduler","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","stderr","stack","throwLater","invokeLater","settlePromises","_settlePromises","_drainQueue","_reset","./queue","./schedule","./util","INTERNAL","tryConvertToPromise","calledBind","rejectThis","_","targetRejected","promiseRejectionQueued","bindingPromise","_then","bindingResolved","_bitField","_resolveCallback","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","bluebird","old","./promise","cr","callerCache","getterCache","ensureMethod","classString","caller","namedGetter","indexedGetter","getGetter","canEvaluate","propertyName","isIndex","maybeGetter","PromiseArray","apiRejection","errorObj","_async","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","boundTo","predicateLoop","matchesPredicate","getKeys","./es5","8","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","9","generatePromiseLifecycleEventObject","defaultFireEvent","cancellationExecute","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","cleanStack","line","nodeFramePattern","lineMatches","parseLinePattern","firstUserLine","deprecated","replacement","shouldUseOwnTrace","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","removeCommonRoots","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","stackFramesAsArray","title","isSoft","formatStack","printWarning","fireRejectionEvent","localHandler","localEventFired","formatNonError","snip","maxChars","longStackTracesIsSupported","captureStackTrace","parseLineInfo","matches","parseLineInfoRegex","fileName","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","bluebirdFramePattern","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","env","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","dispatchEvent","domEvent","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","nodes","stackToIndex","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","isTTY","color","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","catchReturn","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","mapSeries","12","subError","nameProperty","defaultMessage","SubError","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","CancellationError","TimeoutError","AggregateError","RangeError","indent","lines","errorTypes","RejectionError","13","isES5","getDescriptor","propertyIsWritable","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","ObjectFreeze","ObjectGetPrototypeOf","14","PromiseMap","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_yieldedPromise","_cancellationPhase","errors","_isResolved","_cleanup","_fulfill","_promiseCancelled","implementsReturn","coroutine","returnSentinel","_continue","_promiseFulfilled","_promiseRejected","_run","_rejectCallback","bitField","_proxy","PromiseSpawn$","spawn","addYieldHandler","17","spread","18","MappingPromiseArray","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","_init$","_init","_values","preservedValues","_totalResolved","booleans","19","_resolveFromSyncValue","attempt","20","isUntypedError","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","nodebackForPromise","multiArgs","maybeWrapAsError","21","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","reflect","didFulfill","didReject","_setIsFinal","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","pending","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","resolveValueIfEmpty","asArray","_resolveEmptyArray","_iterate","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","noCopyProps","isIdentifier","copyDescriptors","isClass","25","PropertiesPromiseArray","isMap","Es6Map","mapToEntries","_isMap","castValue","extractEntry","entriesToMap","keyOffset","26","arrayMove","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","27","raceLater","array","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","getNativePromise","GlobalSetImmediate","setImmediate","ProcessNextTick","isRecentNode","nativePromise","standalone","cordova","attributes","toggleScheduled","div2","classList","scheduleToggle","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","34","HandleWrapper","successClear","failureClear","afterValue","ms","afterTimeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","tryDispose","Disposer","_data","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","isError","hasEnvVariables","globalObject","Child","Parent","excludedPrototypes","isExcludedProto","visitedKeys","enumeration","ArrayFrom","itResult","chrome","loadTimes","versions","g31e","g7Jl","failCheck","ExceptionConstructor","messageFormat","formatArgs","format","failArgumentCheck","failStateCheck","typeOf","typeCheck","expect","checkIsDef","checkIsDefAndNotNull","checkIsString","checkIsNumber","checkIsBoolean","checkIsObject","gc0D","gfUn","inspect","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","formatError","isRegExp","isDate","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","isNull","numLinesEst","cur","ar","isNullOrUndefined","re","objectToString","pad","timestamp","getHours","getMinutes","getSeconds","getDate","months","getMonth","formatRegExp","deprecate","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","string","date","regexp","isBuffer","origin","gjjs","gkZy","gojl","h6ac","eval","hEIm","hVVj","clockseq","_clockseq","msecs","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","_nodeId","_seedBytes","hYHi","ii","htFH","hznj","rfc6902_1","originalData","document_revision","document_data","traverse","updatedData","isLocalEvent","row","conditional","conflictResolver","softSync","i+u+","$at","point","i/BB","__extends","extendStatics","Retrier","_super","minDelay","maxAttemptsCount","inProgress","attemptNum","prevDelay","currDelay","nextDelay","randomize","area","corr","scheduleAttempt","cleanup","startTimestamp","nextAttemptDelayOverride","i1Q6","__g","iSVM","parseResponseHeaders","headerString","extractBody","xhr","contentType","getResponseHeader","responseText","XHR","XMLHttpRequest","Request","onreadystatechange","readyState","getAllResponseHeaders","statusText","headerName","setRequestHeader","ibPW","jx4H","_defineProperty","_defineProperty2","knrM","kohK","capitalize","cleanupOS","pattern","label","10.0","6.4","6.3","6.2","6.1","6.0","5.2","5.1","5.01","5.0","4.0","4.90","maxSafeInteger","forOwn","trim","getClassOf","isHostType","qualify","accumulator","ua","getProduct","guesses","guess","toStringPlatform","isCustomContext","nav","isSpecialCasedOS","likeChrome","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","opera","operamini","operaClass","reOpera","arch","prerelease","useFeatures","layout","manufacturer","Apple","iPad","iPhone","iPod","Archos","Amazon","Kindle","Kindle Fire","Asus","Transformer","Barnes & Noble","Nook","BlackBerry","PlayBook","Google","Google TV","Nexus","HP","TouchPad","HTC","LG","Microsoft","Xbox","Xbox One","Motorola","Xoom","Nintendo","Wii U","Wii","Nokia","Lumia","Samsung","Galaxy S","Galaxy S2","Galaxy S3","Galaxy S4","Sony","PlayStation","PlayStation Vita","patterns","lang","System","getProperty","system","browser","electron","nw","flash","Capabilities","phantom","major","minor","documentMode","toFixed","appMinorVersion","external","architecture","cpuClass","objectTypes","function","freeExports","freeModule","nodeType","freeGlobal","objectProto","kthq","byteLength","p1","fromCharCode","stringToUint8Array","escstr","binstr","ch","uint8ArrayToString","decodeURIComponent","getMagic","strMagic","idx","chr","magics","headerSize","preparePayload","getJsonObject","WebSocket","MozWebSocket","TwilsockChannel","_transportReady","_disconnectedPromiseResolve","_backoffDefault","_watchTimer","_timestamp","_activeToken","activeToken","enumberable","_getState","_isConnected","_disconnectingTimer","_isDeferredUpdate","onconnecting","_startWatchdogTimer","_setupSocket","onenterinitialising","_sendInit","onleaveinitialising","_cancelInit","onenterupdating","_sendUpdate","onleaveupdating","_cancelUpdate","onenterretrying","onenterconnected","_resetBackoff","_onConnected","onuserUpdateToken","ontokenRejected","_closeSocket","_finalizeSocket","onuserDisconnect","onenterdisconnecting","_startDisconnectTimer","onleavedisconnecting","_cancelDisconnectTimer","onenterwaitSocketClosed","onleavewaitSocketClosed","onenterwaitOffloadSocketClosed","onleavewaitOffloadSocketClosed","ondisconnected","onreceiveClose","_onCloseReceived","onreceiveOffload","_modifyBackoff","onunsupported","onerror","onenterstate","_changeState","backoffPolicy","backoff_policy","reconnect_min_ms","reconnect_max_ms","reqType","initSuccess","tokenRejected","initError","updateSuccess","updateError","timeoutMs","CONNECTED","DISCONNECTED","CONNECTING","REJECTED","DISCONNECTING","userRetry","_stopWatchdogTimer","_onDisconnected","binaryType","onopen","socketConnected","onclose","socketClosed","onmessage","dataView","magic","unsupportedProtocol","protocolError","payload_size","payloadOffset","payloadSize","payload_type","_updateActivityTimestamp","_confirmReceiving","message_type","receiveOffload","receiveFatalClose","receiveClose","_sendPacket","_step2$value","messageHeader","payloadString","magicString","userConnect","userDisconnect","userUpdateToken","httpRequest","twilsockHeader","http_request","ky2m","l262","webpackPolyfill","children","lmjd","Node","balanceFactor","less","equal","isLessThan","y","isEqual","getNode","insert","currNode","prevBalanceFactor","isLeftChild","rebalance","currentNode","maxLeft","isRoot","mlParent","mlLeft","pivot","getIterator","fromleft","getReverseIterator","fromright","luWe","lytE","TO_STRING","pos","m8OI","_isIterable2","_isIterable3","sliceIterator","_e","mbLO","mc9D","nFDa","o4G5","un","obon","ozpD","BREAK","RETURN","pFSU","peL6","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","encodingOrOffset","allocUnsafe","fromArrayBuffer","fromObject","assertSize","alloc","fill","encoding","checked","isEncoding","fromArrayLike","byteOffset","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","lastIndexOf","indexSize","readUInt16BE","arrLength","valLength","foundIndex","found","hexWrite","strLen","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","INSPECT_MAX_BYTES","foo","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","thisStart","thisEnd","thisCopy","targetCopy","includes","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","qEFr","_id","_inBundle","_integrity","_location","_phantomChildren","_requested","registry","raw","escapedName","rawSpec","saveSpec","fetchSpec","_requiredBy","_resolved","_shasum","_spec","_where","author","bundleDependencies","dependencies","babel-runtime","karibu","loglevel","operation-retrier","rfc6902","twilio-ems-client","twilio-notifications","twilio-transport","xxhashjs","devDependencies","@types/chai","@types/chai-as-promised","@types/loglevel","@types/mocha","@types/node","@types/sinon","@types/sinon-as-promised","@types/sinon-chai","async-test-tools","babel-cli","babel-plugin-add-module-exports","babel-plugin-array-includes","babel-plugin-transform-object-assign","babel-plugin-transform-runtime","babel-preset-es2015","babelify","browserify","chai","chai-as-promised","cheerio","del","gulp","gulp-babel","gulp-derequire","gulp-exit","gulp-insert","gulp-istanbul","gulp-mocha","gulp-rename","gulp-replace","gulp-tap","gulp-tslint","gulp-typescript","gulp-uglify","gulp-util","ink-docstrap","isparta","jsdoc","jsonwebtoken","karma","karma-browserify","karma-browserstack-launcher","karma-mocha","karma-mocha-reporter","run-sequence","sinon","sinon-as-promised","sinon-chai","ts-node","tslint","twilio","typescript","underscore","vinyl-buffer","vinyl-source-stream","watchify","engines","license","main","scripts","prepublish","qQO4","qXBc","r9SO","rMkZ","windowNames","getWindowNames","sxPs","pIE","tMiz","asc","TYPE","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","tcrG","superCtor","super_","TempCtor","tuDi","tvE3","uRfg","$iterCreate","BUGGY","returnThis","DEFAULT","IS_SET","FORCED","getMethod","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","ugM7","uj5A","gOPS","$assign","A","K","getSymbols","uxiv","StateMachine","VERSION","Result","SUCCEEDED","NOTRANSITION","CANCELLED","INVALID_TRANSITION","PENDING_TRANSITION","INVALID_CALLBACK","WILDCARD","ASYNC","cfg","terminal","transitions","buildEvent","can","transition","cannot","isFinished","states","doCallback","func","beforeAnyEvent","afterAnyEvent","leaveAnyState","enterAnyState","changeState","beforeThisEvent","afterThisEvent","leaveThisState","enterThisState","beforeEvent","afterEvent","leaveState","specific","general","enterState","leave","uzcO","channel","html","cel","setTask","clearTask","clearImmediate","MessageChannel","counter","port2","port1","postMessage","importScripts","removeChild","vSO4","own","IS_FORCED","IS_GLOBAL","IS_STATIC","IS_PROTO","IS_BIND","IS_WRAP","expProto","virtual","U","vUQk","vcHl","vexR","vvo2","Set","wLcK","x6MZ","xwD+","y9oC","yOG5","yS17","ycyv","yeEC","yh9p","placeHoldersCount","b64","tmp","placeHolders","Arr","L","revLookup","tripletToBase64","num","lookup","encodeChunk","uint8","extraBytes","parts","len2","z7R8","zKeE","__e","zWNa","NotificationConfig","Notification","_registrarUri","ersUri","zotD"],"mappings":"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","file":"debug.f49f7.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"CjMg\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"+/Dx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _stringify = __webpack_require__(\"HxWs\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar uuid = __webpack_require__(\"qQO4\");\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar syncerror_1 = __webpack_require__(\"XzVR\");\nvar syncNetworkError_1 = __webpack_require__(\"eDHa\");\nvar operation_retrier_1 = __webpack_require__(\"i/BB\");\nvar twilio_transport_1 = __webpack_require__(\"JE0K\");\nvar MINIMUM_RETRY_DELAY = 4000;\nvar MAXIMUM_RETRY_DELAY = 60000;\nvar MAXIMUM_ATTEMPTS_TIME = 90000;\nvar RETRY_DELAY_RANDOMNESS = 0.2;\nfunction messageFromErrorBody(trasportError) {\n    if (trasportError.body) {\n        if (trasportError.body.message) {\n            return trasportError.body.message;\n        }\n    }\n    switch (trasportError.status) {\n        case 429:\n            return 'Throttled by server';\n        case 404:\n            return 'Not found from server';\n        default:\n            return 'Error from server';\n    }\n}\nfunction codeFromErrorBody(trasportError) {\n    if (trasportError.body) {\n        return trasportError.body.code;\n    }\n    return 0;\n}\nfunction mapTransportError(transportError) {\n    if (transportError.status === 409) {\n        return new syncNetworkError_1.SyncNetworkError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError), transportError.body);\n    } else if (transportError.status) {\n        return new syncerror_1.SyncError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError));\n    } else if (transportError instanceof twilio_transport_1.TwilsockUnavailableError) {\n        return transportError;\n    } else {\n        return new syncerror_1.SyncError(transportError.message, 0, 0);\n    }\n}\n/**\n * @classdesc Incapsulates network operations to make it possible to add some optimization/caching strategies\n */\n\nvar Network = function () {\n    function Network(productId, clientInfo, config, transport) {\n        (0, _classCallCheck3.default)(this, Network);\n\n        this.productId = productId;\n        this.clientInfo = clientInfo;\n        this.config = config;\n        this.transport = transport;\n    }\n\n    (0, _createClass3.default)(Network, [{\n        key: \"createHeaders\",\n        value: function createHeaders() {\n            return {\n                'Content-Type': 'application/json',\n                'Twilio-Sync-Client-Info': (0, _stringify2.default)(this.clientInfo),\n                'Twilio-Request-Id': 'RQ' + uuid.v4().replace(/-/g, ''),\n                'X-Twilio-Product-Id': this.productId,\n                'X-Twilio-Token': this.config.token\n            };\n        }\n    }, {\n        key: \"backoffConfig\",\n        value: function backoffConfig() {\n            return (0, _extends3.default)({ min: MINIMUM_RETRY_DELAY,\n                max: MAXIMUM_RETRY_DELAY,\n                maxAttemptsTime: MAXIMUM_ATTEMPTS_TIME,\n                randomness: RETRY_DELAY_RANDOMNESS }, this.config.backoffConfig);\n        }\n    }, {\n        key: \"executeWithRetry\",\n        value: function executeWithRetry(request) {\n            var _this = this;\n\n            var retryWhenThrottled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            return new _promise2.default(function (resolve, reject) {\n                var codesToRetryOn = [502, 503, 504];\n                if (retryWhenThrottled) {\n                    codesToRetryOn.push(429);\n                }\n                var retrier = new operation_retrier_1.default(_this.backoffConfig());\n                retrier.on('attempt', function () {\n                    request().then(function (result) {\n                        return retrier.succeeded(result);\n                    }).catch(function (err) {\n                        if (codesToRetryOn.indexOf(err.status) !== -1) {\n                            var delayOverride = parseInt(err.headers ? err.headers['Retry-After'] : null);\n                            retrier.failed(mapTransportError(err), isNaN(delayOverride) ? null : delayOverride * 1000);\n                        } else if (err.message === 'Twilsock disconnected') {\n                            // Ugly hack. We must make a proper exceptions for twilsock\n                            retrier.failed(mapTransportError(err));\n                        } else {\n                            // Fatal error\n                            retrier.removeAllListeners();\n                            retrier.cancel();\n                            reject(mapTransportError(err));\n                        }\n                    });\n                });\n                retrier.on('succeeded', function (result) {\n                    resolve(result);\n                });\n                retrier.on('cancelled', function (err) {\n                    return reject(mapTransportError(err));\n                });\n                retrier.on('failed', function (err) {\n                    return reject(mapTransportError(err));\n                });\n                retrier.start();\n            });\n        }\n        /**\n         * Make a GET request by given URI\n         * @Returns Promise<Response> Result of successful get request\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(uri) {\n            var _this2 = this;\n\n            var headers = this.createHeaders();\n            logger_1.default.debug('GET', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this2.transport.get(uri, headers);\n            }, true);\n        }\n    }, {\n        key: \"post\",\n        value: function post(uri, body, revision, twilsockOnly) {\n            var _this3 = this;\n\n            var headers = this.createHeaders();\n            if (typeof revision !== 'undefined' && revision !== null) {\n                headers['If-Match'] = revision;\n            }\n            logger_1.default.debug('POST', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this3.transport.post(uri, headers, body, twilsockOnly);\n            }, false);\n        }\n    }, {\n        key: \"put\",\n        value: function put(uri, body, revision) {\n            var _this4 = this;\n\n            var headers = this.createHeaders();\n            if (typeof revision !== 'undefined' && revision !== null) {\n                headers['If-Match'] = revision;\n            }\n            logger_1.default.debug('PUT', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this4.transport.put(uri, headers, body);\n            }, false);\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(uri) {\n            var _this5 = this;\n\n            var headers = this.createHeaders();\n            logger_1.default.debug('DELETE', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this5.transport.delete(uri, headers);\n            }, false);\n        }\n    }]);\n    return Network;\n}();\n\nexports.Network = Network;\nexports.default = Network;\n\n/***/ }),\n\n/***/ \"+o4f\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar strong = __webpack_require__(\"AePr\");\n\n// 23.2 Set Objects\nmodule.exports = __webpack_require__(\"cYD/\")('Set', function (get) {\n  return function Set() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n/***/ }),\n\n/***/ \"/GKJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CDS_URI = 'https://cds.twilio.com';\nvar SUBSCRIPTIONS_PATH = '/v4/Subscriptions';\nvar MAPS_PATH = '/v3/Maps';\nvar LISTS_PATH = '/v3/Lists';\nvar DOCUMENTS_PATH = '/v3/Documents';\nfunction getWithDefault(container, key, defaultValue) {\n    if (container && typeof container[key] !== 'undefined') {\n        return container[key];\n    }\n    return defaultValue;\n}\n/**\n * Settings container for Sync library\n */\n\nvar Configuration = function () {\n    /**\n     * @param {String} token - authentication token\n     */\n    function Configuration(token, options) {\n        (0, _classCallCheck3.default)(this, Configuration);\n\n        options = options || {};\n        options = options.Sync || options.DataSync || {};\n        var baseUri = options.cdsUri || CDS_URI;\n        this._token = token;\n        this.settings = {\n            subscriptionsUri: baseUri + SUBSCRIPTIONS_PATH,\n            documentsUri: baseUri + DOCUMENTS_PATH,\n            listsUri: baseUri + LISTS_PATH,\n            mapsUri: baseUri + MAPS_PATH,\n            sessionStorageEnabled: getWithDefault(options, 'enableSessionStorage', true)\n        };\n    }\n\n    (0, _createClass3.default)(Configuration, [{\n        key: \"updateToken\",\n        value: function updateToken(token) {\n            this._token = token;\n        }\n    }, {\n        key: \"token\",\n        get: function get() {\n            return this._token;\n        }\n    }, {\n        key: \"subscriptionsUri\",\n        get: function get() {\n            return this.settings.subscriptionsUri;\n        }\n    }, {\n        key: \"documentsUri\",\n        get: function get() {\n            return this.settings.documentsUri;\n        }\n    }, {\n        key: \"listsUri\",\n        get: function get() {\n            return this.settings.listsUri;\n        }\n    }, {\n        key: \"mapsUri\",\n        get: function get() {\n            return this.settings.mapsUri;\n        }\n    }, {\n        key: \"backoffConfig\",\n        get: function get() {\n            return this.settings.backoffConfig || {};\n        }\n    }, {\n        key: \"sessionStorageEnabled\",\n        get: function get() {\n            return this.settings.sessionStorageEnabled;\n        }\n    }]);\n    return Configuration;\n}();\n\nexports.Configuration = Configuration;\n\n/***/ }),\n\n/***/ \"/lpw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar RetryingQueue = function () {\n    function RetryingQueue() {\n        (0, _classCallCheck3.default)(this, RetryingQueue);\n\n        this.queue = new Array();\n        this.isActive = false;\n    }\n\n    (0, _createClass3.default)(RetryingQueue, [{\n        key: \"wakeupQueue\",\n        value: function wakeupQueue() {\n            var _this = this;\n\n            if (!this.isActive && this.queue.length > 0) {\n                this.isActive = true;\n                setTimeout(function () {\n                    return _this.executeTask(_this.queue[0]);\n                }, 0);\n            }\n        }\n    }, {\n        key: \"pickNext\",\n        value: function pickNext() {\n            var _this2 = this;\n\n            this.queue.shift();\n            if (this.queue.length === 0) {\n                this.isActive = false;\n                return;\n            }\n            setTimeout(function () {\n                return _this2.executeTask(_this2.queue[0]);\n            }, 0);\n        }\n    }, {\n        key: \"pickSame\",\n        value: function pickSame(arg) {\n            var _this3 = this;\n\n            this.queue[0].arg = arg;\n            setTimeout(function () {\n                return _this3.executeTask(_this3.queue[0]);\n            }, 0);\n        }\n    }, {\n        key: \"executeTask\",\n        value: function executeTask(task) {\n            var _this4 = this;\n\n            task.task(task.context, task.arg).then(function (result) {\n                _this4.pickNext();\n                task.resolve(result);\n            }).catch(function (error) {\n                try {\n                    if (task.handle) {\n                        task.handle(error).then(function (result) {\n                            return _this4.pickSame(result);\n                        }).catch(task.reject);\n                    } else {\n                        throw error;\n                    }\n                } catch (e) {\n                    task.reject(error);\n                }\n            });\n        }\n    }, {\n        key: \"add\",\n        value: function add(task, context, arg, errorHandler) {\n            var _this5 = this;\n\n            return new _promise2.default(function (resolve, reject) {\n                _this5.queue.push({\n                    task: task,\n                    context: context,\n                    arg: arg,\n                    handle: errorHandler,\n                    resolve: resolve,\n                    reject: reject\n                });\n                _this5.wakeupQueue();\n            });\n        }\n    }]);\n    return RetryingQueue;\n}();\n\nexports.RetryingQueue = RetryingQueue;\n(0, _freeze2.default)(RetryingQueue);\nexports.default = RetryingQueue;\n\n/***/ }),\n\n/***/ \"/wuY\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(\"NB7d\")('keys'),\n    uid = __webpack_require__(\"X6va\");\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ \"0KnF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"Bdru\");\nmodule.exports = __webpack_require__(\"zKeE\").Object.freeze;\n\n/***/ }),\n\n/***/ \"0Qy9\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"0KnF\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"0WCH\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n/***/ }),\n\n/***/ \"0Zys\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _client = __webpack_require__(\"7xPs\");\n\nvar _client2 = _interopRequireDefault(_client);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = _client2.default;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ \"11Ut\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(\"Gfzd\").f,\n    has = __webpack_require__(\"yS17\"),\n    TAG = __webpack_require__(\"Ug9I\")('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n/***/ }),\n\n/***/ \"1kq3\":\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n/***/ }),\n\n/***/ \"2SH0\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = __webpack_require__(\"vSO4\");\n\n$export($export.P + $export.R, 'Map', { toJSON: __webpack_require__(\"x6MZ\")('Map') });\n\n/***/ }),\n\n/***/ \"2mwf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"c2zY\")('observable');\n\n/***/ }),\n\n/***/ \"3Y9o\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Deferred = function () {\n    function Deferred() {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Deferred);\n\n        this._promise = new _promise2.default(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n\n    (0, _createClass3.default)(Deferred, [{\n        key: \"update\",\n        value: function update(value) {\n            this._resolve(value);\n        }\n    }, {\n        key: \"set\",\n        value: function set(value) {\n            this.current = value;\n            this._resolve(value);\n        }\n    }, {\n        key: \"fail\",\n        value: function fail(e) {\n            this._reject(e);\n        }\n    }, {\n        key: \"promise\",\n        get: function get() {\n            return this._promise;\n        }\n    }]);\n    return Deferred;\n}();\n\nexports.Deferred = Deferred;\n\n/***/ }),\n\n/***/ \"3v7p\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"htFH\");\nvar $Object = __webpack_require__(\"zKeE\").Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n/***/ }),\n\n/***/ \"3zRh\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(\"g31e\");\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1:\n      return function (a) {\n        return fn.call(that, a);\n      };\n    case 2:\n      return function (a, b) {\n        return fn.call(that, a, b);\n      };\n    case 3:\n      return function (a, b, c) {\n        return fn.call(that, a, b, c);\n      };\n  }\n  return function () /* ...args */{\n    return fn.apply(that, arguments);\n  };\n};\n\n/***/ }),\n\n/***/ \"6Hp8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = __webpack_require__(\"PD3G\");\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar entity_1 = __webpack_require__(\"GBRx\");\nvar retryingqueue_1 = __webpack_require__(\"/lpw\");\nvar listitem_1 = __webpack_require__(\"qXBc\");\nvar paginator_1 = __webpack_require__(\"NQ19\");\nvar cache_1 = __webpack_require__(\"ZUV3\");\n/**\n * @alias List\n * @classdesc List collection to store an ordered list of values\n * @property {String} sid - List unique id\n * @property {String} uniqueName - List unique name\n *\n * @fires List#itemAdded\n * @fires List#itemAddedRemotely\n * @fires List#itemUpdated\n * @fires List#itemUpdatedRemotely\n * @fires List#itemRemoved\n * @fires List#itemRemovedRemotely\n * @fires List#collectionRemoved\n * @fires List#collectionRemovedRemotely\n */\n\nvar SyncList = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncList, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncList(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncList);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncList.__proto__ || (0, _getPrototypeOf2.default)(SyncList)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.cache = new cache_1.Cache();\n        _this.descriptor = descriptor;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncList, [{\n        key: \"__set\",\n        value: function __set(location, param) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var response;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.services.network.post(location, { data: param.data }, param.revision);\n\n                            case 2:\n                                response = _context.sent;\n\n                                response.body.data = param.data;\n                                return _context.abrupt(\"return\", response.body);\n\n                            case 5:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Add element to the List\n         * @param {Object} value - value to add\n         * @returns {Promise<Item>} A new item\n         */\n\n    }, {\n        key: \"push\",\n        value: function push(value) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var response, index, item;\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return this.services.network.post(this.links.items, { data: value });\n\n                            case 2:\n                                response = _context2.sent;\n                                index = Number(response.body.index);\n                                item = this.cache.store(index, new listitem_1.ListItem({ index: index,\n                                    revision: response.body.revision,\n                                    lastEventId: response.body.last_event_id,\n                                    uri: response.body.url,\n                                    value: value }), response.body.last_event_id);\n\n                                this.emit('itemAdded', item, true);\n                                return _context2.abrupt(\"return\", item);\n\n                            case 7:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Update existing item in a List\n         * @param {Number} index - index in the List\n         * @param {Object} value - value to set\n         * If true, promise will be rejected if value was remotely modified\n         * @returns {Promise<Item>} - A new element\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(index, value) {\n            return this._actualSet(index, value);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(index, value, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                var _this2 = this;\n\n                var item, updatedItemDescriptor, _resolver;\n\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context4.sent;\n                                updatedItemDescriptor = void 0;\n\n                                if (resolver) {\n                                    _context4.next = 10;\n                                    break;\n                                }\n\n                                _context4.next = 7;\n                                return this.__set(item.uri, { data: value, revision: undefined });\n\n                            case 7:\n                                updatedItemDescriptor = _context4.sent;\n                                _context4.next = 14;\n                                break;\n\n                            case 10:\n                                _resolver = function _resolver(err) {\n                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                                        var refreshedItem;\n                                        return _regenerator2.default.wrap(function _callee3$(_context3) {\n                                            while (1) {\n                                                switch (_context3.prev = _context3.next) {\n                                                    case 0:\n                                                        if (!(err.status === 412)) {\n                                                            _context3.next = 5;\n                                                            break;\n                                                        }\n\n                                                        _context3.next = 3;\n                                                        return this._get(item.index);\n\n                                                    case 3:\n                                                        refreshedItem = _context3.sent;\n                                                        return _context3.abrupt(\"return\", {\n                                                            revision: refreshedItem.revision,\n                                                            data: resolver(utils_1.deepClone(refreshedItem.value))\n                                                        });\n\n                                                    case 5:\n                                                        throw err;\n\n                                                    case 6:\n                                                    case \"end\":\n                                                        return _context3.stop();\n                                                }\n                                            }\n                                        }, _callee3, this);\n                                    }));\n                                };\n\n                                _context4.next = 13;\n                                return this.actionQueue.add(this.__set.bind(this), item.uri, { revision: item.revision, data: value }, _resolver);\n\n                            case 13:\n                                updatedItemDescriptor = _context4.sent;\n\n                            case 14:\n                                item = this.cache.get(item.index);\n                                if (item && updatedItemDescriptor.last_event_id > item.lastEventId) {\n                                    item.update(updatedItemDescriptor.last_event_id, updatedItemDescriptor.revision, updatedItemDescriptor.data);\n                                    this.emit('itemUpdated', item, true);\n                                }\n                                return _context4.abrupt(\"return\", item);\n\n                            case 17:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n        /**\n         * Updates the existing item value\n         *\n         * @param {Number} Index Item key\n         * @param {List~Mutator} Mutator Function performing value mutation\n         * @returns {Promise}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(index, mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                var item;\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                _context5.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context5.sent;\n                                return _context5.abrupt(\"return\", this._actualSet(index, mutator(utils_1.deepClone(item.value)), mutator));\n\n                            case 4:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n        /**\n         * @param {Number} Index Item key\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Item>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(index, obj) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                return _context6.abrupt(\"return\", this.mutate(index, function (remote) {\n                                    return (0, _extends3.default)(remote, obj);\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this);\n            }));\n        }\n        /**\n         * Remove List item by index\n         * @param {Number} index - item index\n         * @returns Promise to remove, which may fail\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var item, response;\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                _context7.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context7.sent;\n                                _context7.next = 5;\n                                return this.services.network.delete(item.uri);\n\n                            case 5:\n                                response = _context7.sent;\n\n                                this.cache.delete(index, response.body.last_event_id);\n                                this.emit('itemRemoved', index, true);\n\n                            case 8:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this);\n            }));\n        }\n        /**\n         * Retrieve item by index\n         * @param {Number} index - item index\n         * @returns {Promise<Item>}\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var cachedItem;\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                cachedItem = this.cache.get(index);\n\n                                if (!cachedItem) {\n                                    _context8.next = 3;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", cachedItem);\n\n                            case 3:\n                                return _context8.abrupt(\"return\", this._get(index));\n\n                            case 4:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this);\n            }));\n        }\n    }, {\n        key: \"_get\",\n        value: function _get(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                var result;\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                _context9.next = 2;\n                                return this.queryItems({ index: index });\n\n                            case 2:\n                                result = _context9.sent;\n\n                                if (!(result.items.length < 1)) {\n                                    _context9.next = 5;\n                                    break;\n                                }\n\n                                throw new Error('No item with index ' + index + ' found');\n\n                            case 5:\n                                return _context9.abrupt(\"return\", result.items[0]);\n\n                            case 6:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Query items from the List\n         * @private\n         */\n\n    }, {\n        key: \"queryItems\",\n        value: function queryItems(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var _this3 = this;\n\n                var url, response, items, meta;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                arg = arg || {};\n                                url = new utils_1.UriBuilder(this.links.items).queryParam('From', arg.from).queryParam('PageSize', arg.limit).queryParam('Index', arg.index).queryParam('PageToken', arg.pageToken).queryParam('Order', arg.order).build();\n                                _context10.next = 4;\n                                return this.services.network.get(url);\n\n                            case 4:\n                                response = _context10.sent;\n                                items = response.body.items.map(function (el) {\n                                    var itemInCache = _this3.cache.get(el.index);\n                                    if (itemInCache) {\n                                        _this3._handleItemUpdated(el.index, el.url, el.last_event_id, el.revision, el.data);\n                                    } else {\n                                        _this3.cache.store(Number(el.index), new listitem_1.ListItem({ index: Number(el.index),\n                                            uri: el.url,\n                                            revision: el.revision,\n                                            lastEventId: el.last_event_id,\n                                            value: el.data }), el.last_event_id);\n                                    }\n                                    return _this3.cache.get(el.index);\n                                });\n                                meta = response.body.meta;\n                                return _context10.abrupt(\"return\", new paginator_1.Paginator(items, function (pageToken) {\n                                    return _this3.queryItems({ pageToken: pageToken });\n                                }, meta.previous_token, meta.next_token));\n\n                            case 8:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n        /**\n         * Query items from List\n         * @param {Object} args Arguments for items query\n         * @param {String} args.from Item, which should be used as an anchor. If undefined, starts from the beginning or end depending on args.order\n         * @param {Number} args.pageSize Results page size\n         * @param {String} args.order Order of results, should be 'asc' or 'desc'\n         * @returns {Promise<Paginator>}\n         * @public\n         */\n\n    }, {\n        key: \"getItems\",\n        value: function getItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {\n                return _regenerator2.default.wrap(function _callee11$(_context11) {\n                    while (1) {\n                        switch (_context11.prev = _context11.next) {\n                            case 0:\n                                args = args || {};\n                                args.limit = args.pageSize || args.limit || 50;\n                                args.order = args.order || 'asc';\n                                return _context11.abrupt(\"return\", this.queryItems(args));\n\n                            case 4:\n                            case \"end\":\n                                return _context11.stop();\n                        }\n                    }\n                }, _callee11, this);\n            }));\n        }\n        /**\n         * @return {Promise<Object>} Context of List\n         * @private\n         */\n\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {\n                var response;\n                return _regenerator2.default.wrap(function _callee12$(_context12) {\n                    while (1) {\n                        switch (_context12.prev = _context12.next) {\n                            case 0:\n                                if (!this.context) {\n                                    _context12.next = 2;\n                                    break;\n                                }\n\n                                return _context12.abrupt(\"return\", this.context);\n\n                            case 2:\n                                _context12.next = 4;\n                                return this.services.network.get(this.links.context);\n\n                            case 4:\n                                response = _context12.sent;\n\n                                this.context = response.body.data;\n                                return _context12.abrupt(\"return\", this.context);\n\n                            case 7:\n                            case \"end\":\n                                return _context12.stop();\n                        }\n                    }\n                }, _callee12, this);\n            }));\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"updateContext\",\n        value: function updateContext(context) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {\n                return _regenerator2.default.wrap(function _callee13$(_context13) {\n                    while (1) {\n                        switch (_context13.prev = _context13.next) {\n                            case 0:\n                                _context13.prev = 0;\n                                _context13.next = 3;\n                                return this.services.network.post(this.links.context, { data: context });\n\n                            case 3:\n                                this.context = context;\n                                this.emit('contextUpdated', context, true);\n                                return _context13.abrupt(\"return\", this);\n\n                            case 8:\n                                _context13.prev = 8;\n                                _context13.t0 = _context13[\"catch\"](0);\n\n                                logger_1.default.error('Failed to update context', _context13.t0);\n                                throw _context13.t0;\n\n                            case 12:\n                            case \"end\":\n                                return _context13.stop();\n                        }\n                    }\n                }, _callee13, this, [[0, 8]]);\n            }));\n        }\n        /**\n         * Remove list from service. It will be impossible to restore it.\n         * @return {Promise} Promise to delete the collection\n         * @public\n         */\n\n    }, {\n        key: \"removeList\",\n        value: function removeList() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee14() {\n                return _regenerator2.default.wrap(function _callee14$(_context14) {\n                    while (1) {\n                        switch (_context14.prev = _context14.next) {\n                            case 0:\n                                _context14.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context14.stop();\n                        }\n                    }\n                }, _callee14, this);\n            }));\n        }\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            // Should also do some cleanup here\n            this.emit('collectionRemoved', locally);\n            if (!locally) {\n                this.emit('collectionRemovedRemotely');\n            }\n        }\n    }, {\n        key: \"shouldIgnoreEvent\",\n        value: function shouldIgnoreEvent(key, eventId) {\n            return this.cache.isKnown(key, eventId);\n        }\n        /**\n         * Handle update, which came from the server\n         * @private\n         */\n\n    }, {\n        key: \"_update\",\n        value: function _update(update, isStrictlyOrdered) {\n            var itemIndex = Number(update.item_index);\n            switch (update.type) {\n                case 'list_item_added':\n                    {\n                        this._handleItemAdded(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'list_item_updated':\n                    {\n                        this._handleItemUpdated(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'list_item_removed':\n                    {\n                        this._handleItemRemoved(itemIndex, update.id);\n                    }\n                    break;\n                case 'list_context_updated':\n                    {\n                        this._handleContextUpdate(update.context_data, update.id);\n                    }\n                    break;\n                case 'list_removed':\n                    {\n                        this.onRemoved(false);\n                    }\n                    break;\n            }\n            if (isStrictlyOrdered) {\n                this._advanceLastEventId(update.id, update.list_revision);\n            }\n        }\n    }, {\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {\n            if (this.lastEventId < eventId) {\n                this.descriptor.last_event_id = eventId;\n                if (revision) {\n                    this.descriptor.revision = revision;\n                }\n            }\n        }\n        /**\n         * Handle item insertion event, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemAdded\",\n        value: function _handleItemAdded(index, uri, eventId, revision, value) {\n            if (!this.cache.isKnown(index, eventId)) {\n                var item = new listitem_1.ListItem({ index: index, uri: uri, lastEventId: eventId, revision: revision, value: value });\n                this.cache.store(index, item, eventId);\n                this.emit('itemAdded', item, false);\n                this.emit('itemAddedRemotely', item);\n            }\n        }\n        /**\n         * Handle new value of item, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemUpdated\",\n        value: function _handleItemUpdated(index, uri, eventId, revision, value) {\n            var item = this.cache.get(index);\n            if (!item && !this.shouldIgnoreEvent(index, eventId)) {\n                item = this.cache.store(index, new listitem_1.ListItem({ index: index, uri: uri, lastEventId: eventId, revision: revision, value: value }), eventId);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            } else if (item && eventId > item.lastEventId) {\n                item.update(eventId, revision, value);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            }\n        }\n    }, {\n        key: \"_handleItemRemoved\",\n        value: function _handleItemRemoved(index, eventId) {\n            this.cache.delete(index, eventId);\n            this.emit('itemRemoved', index, false);\n            this.emit('itemRemovedRemotely', index);\n        }\n    }, {\n        key: \"_handleContextUpdate\",\n        value: function _handleContextUpdate(data, eventId) {\n            if (this.lastEventId < eventId) {\n                this.context = data;\n                this.emit('contextUpdated', data, false);\n                this.emit('contextUpdatedRemotely', data);\n            }\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"links\",\n        get: function get() {\n            return this.descriptor.links;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'list';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'list';\n        }\n    }]);\n    return SyncList;\n}(entity_1.SyncEntity);\n\nexports.SyncList = SyncList;\nexports.default = SyncList;\n/**\n * Applies a transformation to the item value\n * @callback List~Mutator\n * @param {Object} data current value of an item\n * @return {Object} Modified data for an item\n */\n/**\n * Fired when item is added to the List\n * @event List#itemAdded\n * @type {Item} Added item\n */\n/**\n * Fired when item is added to List by remote actor\n * @event List#itemAddedRemotely\n * @type {Item} Added item\n */\n/**\n * Fired when item is updated\n * @event List#itemUpdated\n * @type {Item} Updated item\n */\n/**\n * Fired when item is updated by remote actor\n * @event List#itemUpdatedRemotely\n * @type {Item} Updated item\n */\n/**\n * Fired when item is removed from the List\n * @event List#itemRemoved\n * @type {String} item key\n */\n/**\n * Fired when item is removed from the List by remote actor\n * @event List#itemRemovedRemotely\n * @type {String} item key\n */\n/**\n * Fired when List is removed from server\n * @event List#collectionRemoved\n */\n/**\n * Fired when List is removed from server by remote actor\n * @event List#collectionRemovedRemotely\n */\n\n/***/ }),\n\n/***/ \"6MLN\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(\"wLcK\")(function () {\n  return Object.defineProperty({}, 'a', { get: function get() {\n      return 7;\n    } }).a != 7;\n});\n\n/***/ }),\n\n/***/ \"6t7t\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"nFDa\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"7AqT\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(\"ZHvQ\"),\n    ITERATOR = __webpack_require__(\"Ug9I\")('iterator'),\n    Iterators = __webpack_require__(\"dhak\");\nmodule.exports = __webpack_require__(\"zKeE\").getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR] || it['@@iterator'] || Iterators[classof(it)];\n};\n\n/***/ }),\n\n/***/ \"7Zlx\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"vvo2\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"7ruU\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar TWILSOCK_URI = 'wss://tsock.twilio.com';\nvar TWILSOCK_PATH = '/v3/wsconnect';\n\n/**\n * @param {String} token - authentication token\n * @param {Object} options - options to override defaults\n *\n * @class TwilsockConfig\n * @classdesc Settings container for the Twilsock client library\n */\n\nvar TwilsockConfig = function () {\n  function TwilsockConfig(token, options) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, TwilsockConfig);\n\n    options = options || {};\n    var _options = options.Twilsock || {};\n    var twilsockUri = _options.uri || options.wsServer || TWILSOCK_URI;\n\n    (0, _defineProperties2.default)(this, {\n      _twilsockWsHost: { value: twilsockUri + TWILSOCK_PATH },\n      _token: { value: token, writable: true },\n\n      twilsockUri: { get: function get() {\n          return _this._twilsockWsHost;\n        } },\n      token: { get: function get() {\n          return _this._token;\n        } }\n    });\n  }\n\n  (0, _createClass3.default)(TwilsockConfig, [{\n    key: 'updateToken',\n    value: function updateToken(token) {\n      this._token = token;\n    }\n  }]);\n  return TwilsockConfig;\n}();\n\nexports.default = TwilsockConfig;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"7tZR\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(\"BxvP\"),\n    isArray = __webpack_require__(\"ayXv\"),\n    SPECIES = __webpack_require__(\"Ug9I\")('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  }return C === undefined ? Array : C;\n};\n\n/***/ }),\n\n/***/ \"7xPs\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _set = __webpack_require__(\"7Zlx\");\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = __webpack_require__(\"obon\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _uuid = __webpack_require__(\"qQO4\");\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _configuration = __webpack_require__(\"7ruU\");\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nvar _twilsock = __webpack_require__(\"kthq\");\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nvar _packetinterface = __webpack_require__(\"f/lV\");\n\nvar _packetinterface2 = _interopRequireDefault(_packetinterface);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\n/**\n * @class\n * @alias Twilsock\n * @classdesc Client library for the Twilsock protocol\n * @property {Boolean} connected Indicates the twilsock connection state\n *\n * @constructor\n * @param {string} Token Twilio access token\n */\nvar TwilsockClient = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockClient, _EventEmitter);\n\n  function TwilsockClient(token, options) {\n    (0, _classCallCheck3.default)(this, TwilsockClient);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockClient.__proto__ || (0, _getPrototypeOf2.default)(TwilsockClient)).call(this));\n\n    options = options || {};\n    options.logLevel = options.logLevel || 'error';\n    _logger2.default.setLevel(options.logLevel);\n\n    var config = new _configuration2.default(token, options);\n    var twilsock = new _twilsock2.default(config);\n    var packetInterface = new _packetinterface2.default(twilsock);\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _socket: { value: twilsock },\n      _packet: { value: packetInterface },\n      _registrations: { value: new _map2.default() },\n      _registrationsInProgress: { value: new _map2.default() },\n\n      isConnected: { get: function get() {\n          return _this._socket.isConnected;\n        } },\n      connected: { get: function get() {\n          return _this._socket.isConnected;\n        } },\n      state: { get: function get() {\n          return _this._socket.state;\n        } }\n    });\n\n    _this._socket.on('message', function (type, message) {\n      return setTimeout(function () {\n        _this.emit('message', type, message);\n      }, 0);\n    });\n    _this._socket.on('connected', function () {\n      return _this._updateRegistrations();\n    });\n    _this._socket.on('connected', function () {\n      return _this.emit('connected');\n    });\n    _this._socket.on('disconnected', function () {\n      return _this.emit('disconnected');\n    });\n    _this._socket.on('stateChanged', function (state) {\n      return _this.emit('stateChanged', state);\n    });\n\n    if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n      window.addEventListener('online', function () {\n        _logger2.default.debug('Got online');\n        if (twilsock.isRetrying()) {\n          twilsock.reconnect();\n        }\n      });\n    }\n    return _this;\n  }\n\n  /**\n   * Send a message\n   * @param {Twilsock#Message} message Message structure with header, body and remote address\n   * @public\n   * @returns {Promise<Result>} Result from remote side\n   */\n\n  (0, _createClass3.default)(TwilsockClient, [{\n    key: 'send',\n    value: function send(message) {\n      return this._packet.send(message.to, message.headers, message.body);\n    }\n\n    /**\n     * Update token\n     * @param {String} token\n     * @public\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken(token) {\n      _logger2.default.info('updateToken');\n      if (this._config.token === token) {\n        return _promise2.default.resolve();\n      }\n\n      this._config.updateToken(token);\n      this._socket.updateToken();\n\n      return _promise2.default.resolve();\n    }\n  }, {\n    key: '_updateRegistration',\n    value: function _updateRegistration(contextId, context) {\n      var _this2 = this;\n\n      _logger2.default.info('update registration for context', contextId);\n      var registrationAttempts = this._registrationsInProgress.get(contextId);\n      if (!registrationAttempts) {\n        registrationAttempts = new _set2.default();\n        this._registrationsInProgress.set(contextId, registrationAttempts);\n      }\n\n      var attemptId = _uuid2.default.v4();\n      registrationAttempts.add(attemptId);\n\n      return this._packet.putNotificationContext(contextId, context).then(function () {\n        _logger2.default.info('registration attempt succeeded for context', context);\n        registrationAttempts.delete(attemptId);\n\n        // Hack for broken react-native polyfill\n        // Remove when not needed anymore\n        var attemptsSize = typeof registrationAttempts.size !== 'undefined' ? registrationAttempts.size : (registrationAttempts._c || {}).size;\n        if (attemptsSize === 0) {\n          _this2._registrationsInProgress.delete(contextId);\n          _this2.emit('registered', contextId);\n        }\n      }).catch(function (err) {\n        _logger2.default.info('registration attempt failed for context', context);\n        _logger2.default.debug(err);\n\n        registrationAttempts.delete(attemptId);\n\n        // Hack for broken react-native polyfill\n        // Remove when not needed anymore\n        var attemptsSize = typeof registrationAttempts.size !== 'undefined' ? registrationAttempts.size : (registrationAttempts._c || {}).size;\n        if (attemptsSize === 0) {\n          _this2._registrationsInProgress.delete(contextId);\n          _this2.emit('registrationFailed', contextId, err);\n        }\n      });\n    }\n  }, {\n    key: '_updateRegistrations',\n    value: function _updateRegistrations() {\n      var _this3 = this;\n\n      _logger2.default.info('refreshing all registrations');\n      this._registrations.forEach(function (context, id) {\n        _this3._updateRegistration(id, context);\n      });\n    }\n  }, {\n    key: 'setNotificationsContext',\n    value: function setNotificationsContext(contextId, context) {\n      if (!contextId || !context) {\n        throw new Error('Invalid arguments provided');\n      }\n\n      this._registrations.set(contextId, context);\n      if (this._socket.isConnected) {\n        this._updateRegistration(contextId, context);\n      }\n    }\n  }, {\n    key: 'removeNotificationsContext',\n    value: function removeNotificationsContext(contextId) {\n      if (!this._registrations.has(contextId)) {\n        return;\n      }\n\n      this._registrations.delete(contextId);\n      if (this._socket.isConnected) {\n        this._packet.deleteNotificationContext(contextId);\n      }\n    }\n\n    /**\n     * Connect to the server\n     * @fires TwilsockClient#connected\n     * @public\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect() {\n      return this._socket.connect();\n    }\n\n    /**\n     * Connect to the server\n     * @fires TwilsockClient#disconnected\n     * @public\n     */\n\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      return this._socket.disconnect();\n    }\n  }]);\n  return TwilsockClient;\n}(_events2.default);\n\nexports.default = TwilsockClient;\n\n(0, _freeze2.default)(TwilsockClient);\n\n/**\n * Twilsock destination address descriptor\n * @typedef {Object} Twilsock#Address\n * @property {String} method - HTTP method. (POST, PUT, etc)\n * @property {String} host - host name without path. (e.g. my.company.com)\n * @property {String} path - path on the host (e.g. /my/app/to/call.php)\n */\n\n/**\n * Twilsock upstream message\n * @typedef {Object} Twilsock#Message\n * @property {Twilsock#Address} to - destination address\n * @property {Object} headers - HTTP headers\n * @property {Object} body - Body\n */\n\n/**\n * Fired when new message received\n * @param {Object} message\n * @event TwilsockClient#message\n */\n\n/**\n * Fired when socket connected\n * @param {String} URI of endpoint\n * @event TwilsockClient#connected\n */\n\n/**\n * Fired when socket disconnected\n * @event TwilsockClient#disconnected\n */\n\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"9kJF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar LIBRARY = __webpack_require__(\"1kq3\"),\n    global = __webpack_require__(\"i1Q6\"),\n    ctx = __webpack_require__(\"3zRh\"),\n    classof = __webpack_require__(\"ZHvQ\"),\n    $export = __webpack_require__(\"vSO4\"),\n    isObject = __webpack_require__(\"BxvP\"),\n    aFunction = __webpack_require__(\"g31e\"),\n    anInstance = __webpack_require__(\"KUik\"),\n    forOf = __webpack_require__(\"ozpD\"),\n    speciesConstructor = __webpack_require__(\"B1ls\"),\n    task = __webpack_require__(\"uzcO\").set,\n    microtask = __webpack_require__(\"H109\")(),\n    PROMISE = 'Promise',\n    TypeError = global.TypeError,\n    process = global.process,\n    $Promise = global[PROMISE],\n    process = global.process,\n    isNode = classof(process) == 'process',\n    empty = function empty() {/* empty */},\n    Internal,\n    GenericPromiseCapability,\n    Wrapper;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1),\n        FakePromise = (promise.constructor = {})[__webpack_require__(\"Ug9I\")('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch (e) {/* empty */}\n}();\n\n// helpers\nvar sameConstructor = function sameConstructor(a, b) {\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function isThenable(it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function newPromiseCapability(C) {\n  return sameConstructor($Promise, C) ? new PromiseCapability(C) : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function GenericPromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\nvar perform = function perform(exec) {\n  try {\n    exec();\n  } catch (e) {\n    return { error: e };\n  }\n};\nvar notify = function notify(promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v,\n        ok = promise._s == 1,\n        i = 0;\n    var run = function run(reaction) {\n      var handler = ok ? reaction.ok : reaction.fail,\n          resolve = reaction.resolve,\n          reject = reaction.reject,\n          domain = reaction.domain,\n          result,\n          then;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;else {\n            if (domain) domain.enter();\n            result = handler(value);\n            if (domain) domain.exit();\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        reject(e);\n      }\n    };\n    while (chain.length > i) {\n      run(chain[i++]);\n    } // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function onUnhandled(promise) {\n  task.call(global, function () {\n    var value = promise._v,\n        abrupt,\n        handler,\n        console;\n    if (isUnhandled(promise)) {\n      abrupt = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    }promise._a = undefined;\n    if (abrupt) throw abrupt.error;\n  });\n};\nvar isUnhandled = function isUnhandled(promise) {\n  if (promise._h == 1) return false;\n  var chain = promise._a || promise._c,\n      i = 0,\n      reaction;\n  while (chain.length > i) {\n    reaction = chain[i++];\n    if (reaction.fail || !isUnhandled(reaction.promise)) return false;\n  }return true;\n};\nvar onHandleUnhandled = function onHandleUnhandled(promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function $reject(value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function $resolve(value) {\n  var promise = this,\n      then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor) {\n    this._c = []; // <- awaiting reactions\n    this._a = undefined; // <- checked in isUnhandled reactions\n    this._s = 0; // <- state\n    this._d = false; // <- done\n    this._v = undefined; // <- value\n    this._h = 0; // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false; // <- notify\n  };\n  Internal.prototype = __webpack_require__(\"O6kh\")($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function _catch(onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function PromiseCapability() {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\n__webpack_require__(\"11Ut\")($Promise, PROMISE);\n__webpack_require__(\"FGzK\")(PROMISE);\nWrapper = __webpack_require__(\"zKeE\")[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this),\n        $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if (x instanceof $Promise && sameConstructor(x.constructor, this)) return x;\n    var capability = newPromiseCapability(this),\n        $$resolve = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(\"Lli7\")(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this,\n        capability = newPromiseCapability(C),\n        resolve = capability.resolve,\n        reject = capability.reject;\n    var abrupt = perform(function () {\n      var values = [],\n          index = 0,\n          remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++,\n            alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (abrupt) reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this,\n        capability = newPromiseCapability(C),\n        reject = capability.reject;\n    var abrupt = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (abrupt) reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n/***/ }),\n\n/***/ \"9kxq\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(\"BxvP\"),\n    document = __webpack_require__(\"i1Q6\").document\n// in old IE typeof document.createElement is 'object'\n,\n    is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n/***/ }),\n\n/***/ \"9u1Q\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"tuDi\");\n__webpack_require__(\"i+u+\");\n__webpack_require__(\"COf8\");\n__webpack_require__(\"9kJF\");\nmodule.exports = __webpack_require__(\"zKeE\").Promise;\n\n/***/ }),\n\n/***/ \"AMYL\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = __webpack_require__(\"luWe\");\nvar TWILIO_INSTANCE_ID = 'Twilio::RTD::EmsClient::InstanceId';\nvar TWILIO_ENDPOINT_ID = 'Twilio::RTD::EndpointId';\n\nvar PersistentState = function () {\n    function PersistentState() {\n        (0, _classCallCheck3.default)(this, PersistentState);\n\n        this.cachedContinuationToken = null;\n        this.myInstanceNumber = this.initializeInstanceId();\n    }\n\n    (0, _createClass3.default)(PersistentState, [{\n        key: \"initializeInstanceId\",\n        value: function initializeInstanceId() {\n            // This method reads session storage in order to detect situation\n            // when Chrome's tab clone feature copies session storage\n            var cachedInstancesCount = function () {\n                try {\n                    if (sessionStorage) {\n                        return parseInt(sessionStorage.getItem(TWILIO_INSTANCE_ID)) || 0;\n                    }\n                } catch (e) {\n                    return 0;\n                }\n            }();\n            if (cachedInstancesCount > PersistentState.instancesCounter) {\n                PersistentState.instancesCounter = cachedInstancesCount;\n            }\n            var id = PersistentState.instancesCounter++;\n            try {\n                if (sessionStorage) {\n                    sessionStorage.setItem(TWILIO_INSTANCE_ID, PersistentState.instancesCounter.toString());\n                    if (window) {\n                        window.addEventListener('beforeunload', function () {\n                            sessionStorage.removeItem(TWILIO_INSTANCE_ID);\n                        });\n                    }\n                }\n            } catch (e) {}\n            return id;\n        }\n    }, {\n        key: \"shouldUsePersistentToken\",\n        get: function get() {\n            return this.myInstanceNumber === 0;\n        }\n    }, {\n        key: \"continuationToken\",\n        get: function get() {\n            if (this.cachedContinuationToken) {\n                return this.cachedContinuationToken;\n            }\n            try {\n                if (this.shouldUsePersistentToken && sessionStorage) {\n                    this.cachedContinuationToken = sessionStorage.getItem(TWILIO_ENDPOINT_ID);\n                    return this.cachedContinuationToken;\n                }\n            } catch (e) {\n                logger_1.default.info('Can\\'t access persistent storage', e.message);\n            }\n            return null;\n        },\n        set: function set(continuationToken) {\n            this.cachedContinuationToken = continuationToken;\n            try {\n                if (this.shouldUsePersistentToken && sessionStorage) {\n                    sessionStorage.setItem(TWILIO_ENDPOINT_ID, continuationToken);\n                }\n            } catch (e) {\n                logger_1.default.info('Can\\'t access persistent storage', e.message);\n            }\n        }\n    }]);\n    return PersistentState;\n}();\n\nPersistentState.instancesCounter = 0;\nexports.PersistentState = PersistentState;\n\n/***/ }),\n\n/***/ \"Aa2f\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\n\nvar global = __webpack_require__(\"i1Q6\"),\n    has = __webpack_require__(\"yS17\"),\n    DESCRIPTORS = __webpack_require__(\"6MLN\"),\n    $export = __webpack_require__(\"vSO4\"),\n    redefine = __webpack_require__(\"gojl\"),\n    META = __webpack_require__(\"e8vu\").KEY,\n    $fails = __webpack_require__(\"wLcK\"),\n    shared = __webpack_require__(\"NB7d\"),\n    setToStringTag = __webpack_require__(\"11Ut\"),\n    uid = __webpack_require__(\"X6va\"),\n    wks = __webpack_require__(\"Ug9I\"),\n    wksExt = __webpack_require__(\"ZxII\"),\n    wksDefine = __webpack_require__(\"c2zY\"),\n    keyOf = __webpack_require__(\"pFSU\"),\n    enumKeys = __webpack_require__(\"ycyv\"),\n    isArray = __webpack_require__(\"ayXv\"),\n    anObject = __webpack_require__(\"zotD\"),\n    toIObject = __webpack_require__(\"Wyka\"),\n    toPrimitive = __webpack_require__(\"EKwp\"),\n    createDesc = __webpack_require__(\"0WCH\"),\n    _create = __webpack_require__(\"TNJq\"),\n    gOPNExt = __webpack_require__(\"rMkZ\"),\n    $GOPD = __webpack_require__(\"sxPs\"),\n    $DP = __webpack_require__(\"Gfzd\"),\n    $keys = __webpack_require__(\"knrM\"),\n    gOPD = $GOPD.f,\n    dP = $DP.f,\n    gOPN = gOPNExt.f,\n    $Symbol = global.Symbol,\n    $JSON = global.JSON,\n    _stringify = $JSON && $JSON.stringify,\n    PROTOTYPE = 'prototype',\n    HIDDEN = wks('_hidden'),\n    TO_PRIMITIVE = wks('toPrimitive'),\n    isEnum = {}.propertyIsEnumerable,\n    SymbolRegistry = shared('symbol-registry'),\n    AllSymbols = shared('symbols'),\n    OPSymbols = shared('op-symbols'),\n    ObjectProto = Object[PROTOTYPE],\n    USE_NATIVE = typeof $Symbol == 'function',\n    QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function get() {\n      return dP(this, 'a', { value: 7 }).a;\n    }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function wrap(tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    }return setSymbolDesc(it, key, D);\n  }return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P)),\n      i = 0,\n      l = keys.length,\n      key;\n  while (l > i) {\n    $defineProperty(it, key = keys[i++], P[key]);\n  }return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it)),\n      result = [],\n      i = 0,\n      key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  }return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto,\n      names = gOPN(IS_OP ? OPSymbols : toIObject(it)),\n      result = [],\n      i = 0,\n      key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  }return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function $set(value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(\"Ni5N\").f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(\"z7R8\").f = $propertyIsEnumerable;\n  __webpack_require__(\"Ocr3\").f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(\"1kq3\")) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var symbols =\n// 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','), i = 0; symbols.length > i;) {\n  wks(symbols[i++]);\n}for (var symbols = $keys(wks.store), i = 0; symbols.length > i;) {\n  wksDefine(symbols[i++]);\n}$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function _for(key) {\n    return has(SymbolRegistry, key += '') ? SymbolRegistry[key] : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key) {\n    if (isSymbol(key)) return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function useSetter() {\n    setter = true;\n  },\n  useSimple: function useSimple() {\n    setter = false;\n  }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    var args = [it],\n        i = 1,\n        replacer,\n        $replacer;\n    while (arguments.length > i) {\n      args.push(arguments[i++]);\n    }replacer = args[1];\n    if (typeof replacer == 'function') $replacer = replacer;\n    if ($replacer || !isArray(replacer)) replacer = function replacer(key, value) {\n      if ($replacer) value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(\"akPY\")($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n/***/ }),\n\n/***/ \"AePr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar dP = __webpack_require__(\"Gfzd\").f,\n    create = __webpack_require__(\"TNJq\"),\n    redefineAll = __webpack_require__(\"O6kh\"),\n    ctx = __webpack_require__(\"3zRh\"),\n    anInstance = __webpack_require__(\"KUik\"),\n    defined = __webpack_require__(\"U72i\"),\n    forOf = __webpack_require__(\"ozpD\"),\n    $iterDefine = __webpack_require__(\"uRfg\"),\n    step = __webpack_require__(\"xwD+\"),\n    setSpecies = __webpack_require__(\"FGzK\"),\n    DESCRIPTORS = __webpack_require__(\"6MLN\"),\n    fastKey = __webpack_require__(\"e8vu\").fastKey,\n    SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function getEntry(that, key) {\n  // fast case\n  var index = fastKey(key),\n      entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function getConstructor(wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined; // first entry\n      that._l = undefined; // last entry\n      that[SIZE] = 0; // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = this, data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function _delete(key) {\n        var that = this,\n            entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n,\n              prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        }return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */) {\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3),\n            entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) {\n            entry = entry.p;\n          }\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function get() {\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function def(that, key, value) {\n    var entry = getEntry(that, key),\n        prev,\n        index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n      // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key, // <- key\n        v: value, // <- value\n        p: prev = that._l, // <- previous entry\n        n: undefined, // <- next entry\n        r: false // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    }return that;\n  },\n  getEntry: getEntry,\n  setStrong: function setStrong(C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = iterated; // target\n      this._k = kind; // kind\n      this._l = undefined; // previous\n    }, function () {\n      var that = this,\n          kind = that._k,\n          entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) {\n        entry = entry.p;\n      } // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n/***/ }),\n\n/***/ \"AgUv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nvar util = __webpack_require__(\"gfUn\");\n\nfunction IllegalArgumentError(message) {\n    Error.call(this, message);\n    this.message = message;\n}\nutil.inherits(IllegalArgumentError, Error);\n\nIllegalArgumentError.prototype.name = 'IllegalArgumentError';\n\nfunction IllegalStateError(message) {\n    Error.call(this, message);\n    this.message = message;\n}\nutil.inherits(IllegalStateError, Error);\n\nIllegalStateError.prototype.name = 'IllegalStateError';\n\nmodule.exports.IllegalStateError = IllegalStateError;\nmodule.exports.IllegalArgumentError = IllegalArgumentError;\n\n/***/ }),\n\n/***/ \"An/8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// Generated by CoffeeScript 1.11.0\n(function () {\n  var Bottleneck,\n      MIDDLE_PRIORITY,\n      NB_PRIORITIES,\n      bind = function bind(fn, me) {\n    return function () {\n      return fn.apply(me, arguments);\n    };\n  },\n      slice = [].slice;\n\n  NB_PRIORITIES = 10;\n\n  MIDDLE_PRIORITY = 5;\n\n  Bottleneck = function () {\n    var e;\n\n    Bottleneck[\"default\"] = Bottleneck;\n\n    Bottleneck.strategy = Bottleneck.prototype.strategy = {\n      LEAK: 1,\n      OVERFLOW: 2,\n      OVERFLOW_PRIORITY: 4,\n      BLOCK: 3\n    };\n\n    Bottleneck.Cluster = Bottleneck.prototype.Cluster = __webpack_require__(\"Cv+O\");\n\n    Bottleneck.DLList = Bottleneck.prototype.DLList = __webpack_require__(\"Cp6S\");\n\n    Bottleneck.Promise = Bottleneck.prototype.Promise = function () {\n      try {\n        return __webpack_require__(\"fp6q\");\n      } catch (error) {\n        e = error;\n        return typeof Promise !== \"undefined\" && Promise !== null ? Promise : function () {\n          throw new Error(\"Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support\");\n        };\n      }\n    }();\n\n    function Bottleneck(maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb != null ? maxNb : 0;\n      this.minTime = minTime != null ? minTime : 0;\n      this.highWater = highWater != null ? highWater : -1;\n      this.strategy = strategy != null ? strategy : Bottleneck.prototype.strategy.LEAK;\n      this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : false;\n      this.schedulePriority = bind(this.schedulePriority, this);\n      this.submitPriority = bind(this.submitPriority, this);\n      this.submit = bind(this.submit, this);\n      this._nextRequest = Date.now();\n      this._nbRunning = 0;\n      this._queues = this._makeQueues();\n      this._running = {};\n      this._nextIndex = 0;\n      this._unblockTime = 0;\n      this.penalty = 15 * this.minTime || 5000;\n      this.interrupt = false;\n      this.reservoir = null;\n      this.limiter = null;\n      this.events = {};\n    }\n\n    Bottleneck.prototype._trigger = function (name, args) {\n      if (this.rejectOnDrop && name === \"dropped\") {\n        args[0].cb.apply({}, [new Error(\"This job has been dropped by Bottleneck\")]);\n      }\n      return setTimeout(function (_this) {\n        return function () {\n          var ref;\n          return (ref = _this.events[name]) != null ? ref.forEach(function (e) {\n            return e.apply({}, args);\n          }) : void 0;\n        };\n      }(this), 0);\n    };\n\n    Bottleneck.prototype._makeQueues = function () {\n      var i, j, ref, results;\n      results = [];\n      for (i = j = 1, ref = NB_PRIORITIES; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(new Bottleneck.prototype.DLList());\n      }\n      return results;\n    };\n\n    Bottleneck.prototype.chain = function (limiter) {\n      this.limiter = limiter;\n      return this;\n    };\n\n    Bottleneck.prototype.isBlocked = function () {\n      return this._unblockTime >= Date.now();\n    };\n\n    Bottleneck.prototype._sanitizePriority = function (priority) {\n      var sProperty;\n      sProperty = ~~priority !== priority ? MIDDLE_PRIORITY : priority;\n      if (sProperty < 0) {\n        return 0;\n      } else if (sProperty > NB_PRIORITIES - 1) {\n        return NB_PRIORITIES - 1;\n      } else {\n        return sProperty;\n      }\n    };\n\n    Bottleneck.prototype._find = function (arr, fn) {\n      var i, j, len, x;\n      for (i = j = 0, len = arr.length; j < len; i = ++j) {\n        x = arr[i];\n        if (fn(x)) {\n          return x;\n        }\n      }\n      return [];\n    };\n\n    Bottleneck.prototype.nbQueued = function (priority) {\n      if (priority != null) {\n        return this._queues[this._sanitizePriority(priority)].length;\n      } else {\n        return this._queues.reduce(function (a, b) {\n          return a + b.length;\n        }, 0);\n      }\n    };\n\n    Bottleneck.prototype.nbRunning = function () {\n      return this._nbRunning;\n    };\n\n    Bottleneck.prototype._getFirst = function (arr) {\n      return this._find(arr, function (x) {\n        return x.length > 0;\n      });\n    };\n\n    Bottleneck.prototype._conditionsCheck = function () {\n      return (this.nbRunning() < this.maxNb || this.maxNb <= 0) && (this.reservoir == null || this.reservoir > 0);\n    };\n\n    Bottleneck.prototype.check = function () {\n      return this._conditionsCheck() && this._nextRequest - Date.now() <= 0;\n    };\n\n    Bottleneck.prototype._tryToRun = function () {\n      var done, index, next, queued, wait;\n      if (this._conditionsCheck() && (queued = this.nbQueued()) > 0) {\n        this._nbRunning++;\n        if (this.reservoir != null) {\n          this.reservoir--;\n        }\n        wait = Math.max(this._nextRequest - Date.now(), 0);\n        this._nextRequest = Date.now() + wait + this.minTime;\n        next = this._getFirst(this._queues).shift();\n        if (queued === 1) {\n          this._trigger(\"empty\", []);\n        }\n        done = false;\n        index = this._nextIndex++;\n        this._running[index] = {\n          timeout: setTimeout(function (_this) {\n            return function () {\n              var completed;\n              completed = function completed() {\n                var ref;\n                if (!done) {\n                  done = true;\n                  delete _this._running[index];\n                  _this._nbRunning--;\n                  _this._tryToRun();\n                  if (_this.nbRunning() === 0 && _this.nbQueued() === 0) {\n                    _this._trigger(\"idle\", []);\n                  }\n                  if (!_this.interrupt) {\n                    return (ref = next.cb) != null ? ref.apply({}, Array.prototype.slice.call(arguments, 0)) : void 0;\n                  }\n                }\n              };\n              if (_this.limiter != null) {\n                return _this.limiter.submit.apply(_this.limiter, Array.prototype.concat(next.task, next.args, completed));\n              } else {\n                return next.task.apply({}, next.args.concat(completed));\n              }\n            };\n          }(this), wait),\n          job: next\n        };\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    Bottleneck.prototype.submit = function () {\n      var args;\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return this.submitPriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));\n    };\n\n    Bottleneck.prototype.submitPriority = function () {\n      var args, cb, j, job, priority, reachedHighWaterMark, shifted, task;\n      priority = arguments[0], task = arguments[1], args = 4 <= arguments.length ? slice.call(arguments, 2, j = arguments.length - 1) : (j = 2, []), cb = arguments[j++];\n      job = {\n        task: task,\n        args: args,\n        cb: cb\n      };\n      priority = this._sanitizePriority(priority);\n      reachedHighWaterMark = this.highWater >= 0 && this.nbQueued() === this.highWater && !this.check();\n      if (this.strategy === Bottleneck.prototype.strategy.BLOCK && (reachedHighWaterMark || this.isBlocked())) {\n        this._unblockTime = Date.now() + this.penalty;\n        this._nextRequest = this._unblockTime + this.minTime;\n        this._queues = this._makeQueues();\n        this._trigger(\"dropped\", [job]);\n        return true;\n      } else if (reachedHighWaterMark) {\n        shifted = this.strategy === Bottleneck.prototype.strategy.LEAK ? this._getFirst(this._queues.slice(priority).reverse()).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW_PRIORITY ? this._getFirst(this._queues.slice(priority + 1).reverse()).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW ? job : void 0;\n        if (shifted != null) {\n          this._trigger(\"dropped\", [shifted]);\n        }\n        if (shifted == null || this.strategy === Bottleneck.prototype.strategy.OVERFLOW) {\n          return reachedHighWaterMark;\n        }\n      }\n      this._queues[priority].push(job);\n      this._tryToRun();\n      return reachedHighWaterMark;\n    };\n\n    Bottleneck.prototype.schedule = function () {\n      var args;\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return this.schedulePriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));\n    };\n\n    Bottleneck.prototype.schedulePriority = function () {\n      var args, priority, task, wrapped;\n      priority = arguments[0], task = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n      wrapped = function wrapped() {\n        var args, cb, j;\n        args = 2 <= arguments.length ? slice.call(arguments, 0, j = arguments.length - 1) : (j = 0, []), cb = arguments[j++];\n        return task.apply({}, args).then(function () {\n          var args;\n          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return cb.apply({}, Array.prototype.concat(null, args));\n        })[\"catch\"](function () {\n          var args;\n          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return cb.apply({}, args);\n        });\n      };\n      return new Bottleneck.prototype.Promise(function (_this) {\n        return function (resolve, reject) {\n          return _this.submitPriority.apply({}, Array.prototype.concat(priority, wrapped, args, function () {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return (args[0] != null ? reject : (args.shift(), resolve)).apply({}, args);\n          }));\n        };\n      }(this));\n    };\n\n    Bottleneck.prototype.changeSettings = function (maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb != null ? maxNb : this.maxNb;\n      this.minTime = minTime != null ? minTime : this.minTime;\n      this.highWater = highWater != null ? highWater : this.highWater;\n      this.strategy = strategy != null ? strategy : this.strategy;\n      this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : this.rejectOnDrop;\n      while (this._tryToRun()) {}\n      return this;\n    };\n\n    Bottleneck.prototype.changePenalty = function (penalty) {\n      this.penalty = penalty != null ? penalty : this.penalty;\n      return this;\n    };\n\n    Bottleneck.prototype.changeReservoir = function (reservoir) {\n      this.reservoir = reservoir;\n      while (this._tryToRun()) {}\n      return this;\n    };\n\n    Bottleneck.prototype.incrementReservoir = function (incr) {\n      if (incr == null) {\n        incr = 0;\n      }\n      this.changeReservoir(this.reservoir + incr);\n      return this;\n    };\n\n    Bottleneck.prototype.on = function (name, cb) {\n      if (this.events[name] != null) {\n        this.events[name].push(cb);\n      } else {\n        this.events[name] = [cb];\n      }\n      return this;\n    };\n\n    Bottleneck.prototype.removeAllListeners = function (name) {\n      if (name == null) {\n        name = null;\n      }\n      if (name != null) {\n        delete this.events[name];\n      } else {\n        this.events = {};\n      }\n      return this;\n    };\n\n    Bottleneck.prototype.stopAll = function (interrupt) {\n      var j, job, k, keys, l, len, len1;\n      this.interrupt = interrupt != null ? interrupt : this.interrupt;\n      keys = Object.keys(this._running);\n      for (j = 0, len = keys.length; j < len; j++) {\n        k = keys[j];\n        clearTimeout(this._running[k].timeout);\n      }\n      this._tryToRun = function () {};\n      this.check = function () {\n        return false;\n      };\n      this.submit = this.submitPriority = function () {\n        var args, cb, l;\n        args = 2 <= arguments.length ? slice.call(arguments, 0, l = arguments.length - 1) : (l = 0, []), cb = arguments[l++];\n        return cb(new Error(\"This limiter is stopped\"));\n      };\n      this.schedule = this.schedulePriority = function () {\n        return Promise.reject(new Error(\"This limiter is stopped\"));\n      };\n      if (this.interrupt) {\n        for (l = 0, len1 = keys.length; l < len1; l++) {\n          k = keys[l];\n          this._trigger(\"dropped\", [this._running[k].job]);\n        }\n      }\n      while (job = this._getFirst(this._queues).shift()) {\n        this._trigger(\"dropped\", [job]);\n      }\n      this._trigger(\"empty\", []);\n      if (this.nbRunning() === 0) {\n        this._trigger(\"idle\", []);\n      }\n      return this;\n    };\n\n    return Bottleneck;\n  }();\n\n  module.exports = Bottleneck;\n}).call(this);\n\n/***/ }),\n\n/***/ \"Aq8W\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"dXs8\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"AwcA\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _stringify = __webpack_require__(\"HxWs\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar SessionStorage = function () {\n    function SessionStorage(config, storage) {\n        (0, _classCallCheck3.default)(this, SessionStorage);\n\n        this.config = config;\n        this.storageId = null;\n        try {\n            this.storage = storage || sessionStorage;\n        } catch (e) {}\n    }\n\n    (0, _createClass3.default)(SessionStorage, [{\n        key: \"storageKey\",\n        value: function storageKey(type, key) {\n            return this.storageId + \"::\" + type + \"::\" + key;\n        }\n    }, {\n        key: \"updateStorageId\",\n        value: function updateStorageId(storageId) {\n            this.storageId = storageId;\n        }\n    }, {\n        key: \"store\",\n        value: function store(type, id, value) {\n            if (!this.isReady) {\n                return null;\n            }\n            return this._store(this.storageKey(type, id), value);\n        }\n    }, {\n        key: \"read\",\n        value: function read(type, id) {\n            if (!this.isReady) {\n                return null;\n            }\n            return this._read(this.storageKey(type, id));\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(type, sid, uniqueName) {\n            if (!this.isReady) {\n                return null;\n            }\n            try {\n                this.storage.removeItem(this.storageKey(type, sid));\n                if (uniqueName) {\n                    this.storage.removeItem(this.storageKey(type, uniqueName));\n                }\n            } catch (e) {}\n        }\n    }, {\n        key: \"update\",\n        value: function update(type, sid, uniqueName, patch) {\n            if (!this.isReady) {\n                return null;\n            }\n            // Currently cache may have root stored twice - by sid and by uniqueName\n            // Maybe need to create some index if needed\n            this._apply(this.storageKey(type, sid), patch);\n            if (uniqueName) {\n                this._apply(this.storageKey(type, uniqueName), patch);\n            }\n        }\n    }, {\n        key: \"_store\",\n        value: function _store(key, value) {\n            try {\n                this.storage.setItem(key, (0, _stringify2.default)(value));\n            } catch (e) {}\n        }\n    }, {\n        key: \"_read\",\n        value: function _read(key) {\n            try {\n                var storedData = this.storage.getItem(key);\n                if (storedData) {\n                    return JSON.parse(storedData);\n                }\n            } catch (e) {}\n            return null;\n        }\n    }, {\n        key: \"_apply\",\n        value: function _apply(key, patch) {\n            var value = this._read(key);\n            if (!value) {\n                return false;\n            }\n            this._store(key, (0, _extends3.default)(value, patch));\n        }\n    }, {\n        key: \"isReady\",\n        get: function get() {\n            return this.config.sessionStorageEnabled && !!this.storageId;\n        }\n    }]);\n    return SessionStorage;\n}();\n\nexports.SessionStorage = SessionStorage;\n\n/***/ }),\n\n/***/ \"B1ls\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(\"zotD\"),\n    aFunction = __webpack_require__(\"g31e\"),\n    SPECIES = __webpack_require__(\"Ug9I\")('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor,\n      S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n/***/ }),\n\n/***/ \"B9Lq\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(\"yS17\"),\n    toIObject = __webpack_require__(\"Wyka\"),\n    arrayIndexOf = __webpack_require__(\"LNnS\")(false),\n    IE_PROTO = __webpack_require__(\"/wuY\")('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object),\n      i = 0,\n      result = [],\n      key;\n  for (key in O) {\n    if (key != IE_PROTO) has(O, key) && result.push(key);\n  } // Don't enum bug & hidden keys\n  while (names.length > i) {\n    if (has(O, key = names[i++])) {\n      ~arrayIndexOf(result, key) || result.push(key);\n    }\n  }return result;\n};\n\n/***/ }),\n\n/***/ \"BX4+\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"ky2m\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"BYJX\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _set2 = __webpack_require__(\"7Zlx\");\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _uuid = __webpack_require__(\"qQO4\");\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _logger = __webpack_require__(\"EwCr\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar DEFAULT_TTL = 60 * 60 * 48;\n\nfunction toArray(_set) {\n  var arr = [];\n  _set.forEach(function (v) {\n    return arr.push(v);\n  });\n  return arr;\n}\n\n/**\n * @class\n * @classdesc Registrar connector implementation for twilsock\n *\n * @constructor\n */\n\nvar TwilsockConnector = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockConnector, _EventEmitter);\n\n  function TwilsockConnector(context, twilsock, config) {\n    (0, _classCallCheck3.default)(this, TwilsockConnector);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockConnector.__proto__ || (0, _getPrototypeOf2.default)(TwilsockConnector)).call(this));\n\n    context.id = _uuid2.default.v4();\n\n    (0, _defineProperties2.default)(_this, {\n      _twilsock: { value: twilsock },\n      _messageTypes: { value: new _set3.default() },\n\n      config: { value: config },\n      context: { value: context }\n    });\n\n    twilsock.on('stateChanged', function (state) {\n      if (state !== 'connected') {\n        _this.emit('transportReady', false);\n      }\n    });\n\n    twilsock.on('registered', function (id) {\n      if (context && id === context.id && twilsock.state === 'connected') {\n        _this.emit('transportReady', true);\n      }\n    });\n    return _this;\n  }\n\n  /**\n   * @public\n   */\n\n  (0, _createClass3.default)(TwilsockConnector, [{\n    key: 'setNotificationId',\n    value: function setNotificationId() {\n      return false;\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      this._twilsock.removeNotificationsContext(this.context.id);\n      this.context.id = _uuid2.default.v4();\n      this._updateContext();\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'has',\n    value: function has(messageType) {\n      return this._messageTypes.has(messageType);\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType) {\n      if (this._messageTypes.has(messageType)) {\n        _logger2.default.trace('Message type already registered ', messageType);\n        return false;\n      }\n\n      this._messageTypes.add(messageType);\n      this._updateContext();\n      return true;\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType) {\n      if (!this._messageTypes.has(messageType)) {\n        return false;\n      }\n\n      this._messageTypes.delete(messageType);\n\n      if (this._messageTypes.size > 0) {\n        this._updateContext();\n      } else {\n        this._twilsock.removeNotificationsContext(this.context.id);\n      }\n\n      return true;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_updateContext',\n    value: function _updateContext() {\n      if (!this.config.token) {\n        // no token, can't do anything, ignore\n        return;\n      }\n\n      var messageTypes = toArray(this._messageTypes);\n\n      /* eslint-disable camelcase */\n      var context = {\n        product_id: this.context.productId,\n        notification_protocol_version: 4,\n        endpoint_platform: this.context.platform,\n        ttl: DEFAULT_TTL,\n        token: this.config.token,\n        message_types: messageTypes\n      };\n      /* eslint-enable camelcase */\n\n      this.emit('transportReady', false);\n      this._twilsock.setNotificationsContext(this.context.id, context);\n    }\n  }]);\n  return TwilsockConnector;\n}(_events2.default);\n\nexports.default = TwilsockConnector;\n\n(0, _freeze2.default)(TwilsockConnector);\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"Bdru\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.5 Object.freeze(O)\nvar isObject = __webpack_require__(\"BxvP\"),\n    meta = __webpack_require__(\"e8vu\").onFreeze;\n\n__webpack_require__(\"cOHw\")('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\n/***/ }),\n\n/***/ \"BtHH\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(\"mbLO\"),\n    $getPrototypeOf = __webpack_require__(\"HHE0\");\n\n__webpack_require__(\"cOHw\")('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n/***/ }),\n\n/***/ \"BxvP\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n/***/ }),\n\n/***/ \"By4a\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(\"ZHvQ\"),\n    ITERATOR = __webpack_require__(\"Ug9I\")('iterator'),\n    Iterators = __webpack_require__(\"dhak\");\nmodule.exports = __webpack_require__(\"zKeE\").isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined || '@@iterator' in O || Iterators.hasOwnProperty(classof(O));\n};\n\n/***/ }),\n\n/***/ \"C6lX\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = __webpack_require__(\"FRpO\");\nvar util = __webpack_require__(\"gfUn\");\n\nfunction isDef(value) {\n    return value !== undefined && value !== null;\n}\n\n// Abstract class defining the skeleton for the backoff strategies. Accepts an\n// object holding the options for the backoff strategy:\n//\n//  * `randomisationFactor`: The randomisation factor which must be between 0\n//     and 1 where 1 equates to a randomization factor of 100% and 0 to no\n//     randomization.\n//  * `initialDelay`: The backoff initial delay in milliseconds.\n//  * `maxDelay`: The backoff maximal delay in milliseconds.\nfunction BackoffStrategy(options) {\n    options = options || {};\n\n    if (isDef(options.initialDelay) && options.initialDelay < 1) {\n        throw new Error('The initial timeout must be greater than 0.');\n    } else if (isDef(options.maxDelay) && options.maxDelay < 1) {\n        throw new Error('The maximal timeout must be greater than 0.');\n    }\n\n    this.initialDelay_ = options.initialDelay || 100;\n    this.maxDelay_ = options.maxDelay || 10000;\n\n    if (this.maxDelay_ <= this.initialDelay_) {\n        throw new Error('The maximal backoff delay must be ' + 'greater than the initial backoff delay.');\n    }\n\n    if (isDef(options.randomisationFactor) && (options.randomisationFactor < 0 || options.randomisationFactor > 1)) {\n        throw new Error('The randomisation factor must be between 0 and 1.');\n    }\n\n    this.randomisationFactor_ = options.randomisationFactor || 0;\n}\n\n// Gets the maximal backoff delay.\nBackoffStrategy.prototype.getMaxDelay = function () {\n    return this.maxDelay_;\n};\n\n// Gets the initial backoff delay.\nBackoffStrategy.prototype.getInitialDelay = function () {\n    return this.initialDelay_;\n};\n\n// Template method that computes and returns the next backoff delay in\n// milliseconds.\nBackoffStrategy.prototype.next = function () {\n    var backoffDelay = this.next_();\n    var randomisationMultiple = 1 + Math.random() * this.randomisationFactor_;\n    var randomizedDelay = Math.round(backoffDelay * randomisationMultiple);\n    return randomizedDelay;\n};\n\n// Computes and returns the next backoff delay. Intended to be overridden by\n// subclasses.\nBackoffStrategy.prototype.next_ = function () {\n    throw new Error('BackoffStrategy.next_() unimplemented.');\n};\n\n// Template method that resets the backoff delay to its initial value.\nBackoffStrategy.prototype.reset = function () {\n    this.reset_();\n};\n\n// Resets the backoff delay to its initial value. Intended to be overridden by\n// subclasses.\nBackoffStrategy.prototype.reset_ = function () {\n    throw new Error('BackoffStrategy.reset_() unimplemented.');\n};\n\nmodule.exports = BackoffStrategy;\n\n/***/ }),\n\n/***/ \"COf8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"OYXR\");\nvar global = __webpack_require__(\"i1Q6\"),\n    hide = __webpack_require__(\"akPY\"),\n    Iterators = __webpack_require__(\"dhak\"),\n    TO_STRING_TAG = __webpack_require__(\"Ug9I\")('toStringTag');\n\nfor (var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++) {\n  var NAME = collections[i],\n      Collection = global[NAME],\n      proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n/***/ }),\n\n/***/ \"CjMg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_twilio_sync__ = __webpack_require__(\"dVxL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_twilio_sync___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_twilio_sync__);\n\n\nvar client;\n\nwindow.orderQueueList = undefined;\nwindow.configurationDoc = undefined;\nwindow.customersMap = undefined;\nwindow.allOrdersList = undefined;\n\nfetch('/api/token', {\n  credentials: 'include'\n}).then(function (resp) {\n  return resp.json();\n}).then(function (_ref) {\n  var token = _ref.token;\n\n  console.log(token);\n  client = new __WEBPACK_IMPORTED_MODULE_0_twilio_sync__[\"SyncClient\"](token);\n  return client;\n}).then(function (client) {\n  clientConnected();\n}).catch(function (err) {\n  return console.error(err);\n});\n\nfunction clientConnected() {\n  client.document('configuration').then(function (doc) {\n    window.configurationDoc = doc;\n    setData('configuration', doc.value);\n    window.configurationDoc.on('updated', function (data) {\n      setData('configuration', data);\n    });\n  });\n\n  client.list('orderQueue').then(function (list) {\n    window.orderQueueList = list;\n    displayAllItems('orderQueue', window.orderQueueList);\n    window.orderQueueList.on('itemAdded', function () {\n      return displayAllItems('orderQueue', window.orderQueueList);\n    });\n    window.orderQueueList.on('itemRemoved', function () {\n      return displayAllItems('orderQueue', window.orderQueueList);\n    });\n    window.orderQueueList.on('itemUpdated', function () {\n      return displayAllItems('orderQueue', window.orderQueueList);\n    });\n  });\n\n  client.list('allOrders').then(function (list) {\n    window.allOrdersList = list;\n    displayAllItems('allOrders', window.allOrdersList);\n    window.allOrdersList.on('itemAdded', function () {\n      return displayAllItems('allOrders', window.allOrdersList);\n    });\n    window.allOrdersList.on('itemRemoved', function () {\n      return displayAllItems('allOrders', window.allOrdersList);\n    });\n    window.allOrdersList.on('itemUpdated', function () {\n      return displayAllItems('allOrders', window.allOrdersList);\n    });\n  });\n\n  client.map('customers').then(function (map) {\n    window.customersMap = map;\n    displayAllItems('customers', window.customersMap);\n    window.customersMap.on('itemAdded', function () {\n      return displayAllItems('customers', window.customersMap);\n    });\n    window.customersMap.on('itemRemoved', function () {\n      return displayAllItems('customers', window.customersMap);\n    });\n    window.customersMap.on('itemUpdated', function () {\n      return displayAllItems('customers', window.customersMap);\n    });\n  });\n}\n\nfunction setData(name, data) {\n  document.querySelector('#' + name).innerText = JSON.stringify(data, undefined, 2);\n}\n\nfunction displayAllItems(name, list) {\n  return list.getItems({ pageSize: 1000 }).then(function (page) {\n    setData(name, page.items);\n  });\n}\n\n/***/ }),\n\n/***/ \"Cp6S\":\n/***/ (function(module, exports) {\n\n// Generated by CoffeeScript 1.11.0\n(function () {\n  var DLList;\n\n  DLList = function () {\n    function DLList() {\n      this._first = null;\n      this._last = null;\n      this.length = 0;\n    }\n\n    DLList.prototype.push = function (value) {\n      var node;\n      this.length++;\n      node = {\n        value: value,\n        next: null\n      };\n      if (this._last != null) {\n        this._last.next = node;\n        this._last = node;\n      } else {\n        this._first = this._last = node;\n      }\n      return void 0;\n    };\n\n    DLList.prototype.shift = function () {\n      var ref1, value;\n      if (this._first == null) {\n        return void 0;\n      } else {\n        this.length--;\n      }\n      value = this._first.value;\n      this._first = (ref1 = this._first.next) != null ? ref1 : this._last = null;\n      return value;\n    };\n\n    DLList.prototype.getArray = function () {\n      var node, ref, results;\n      node = this._first;\n      results = [];\n      while (node != null) {\n        results.push((ref = node, node = node.next, ref.value));\n      }\n      return results;\n    };\n\n    return DLList;\n  }();\n\n  module.exports = DLList;\n}).call(this);\n\n/***/ }),\n\n/***/ \"Cv+O\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// Generated by CoffeeScript 1.11.0\n(function () {\n  var Cluster,\n      hasProp = {}.hasOwnProperty;\n\n  Cluster = function () {\n    function Cluster(maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb;\n      this.minTime = minTime;\n      this.highWater = highWater;\n      this.strategy = strategy;\n      this.rejectOnDrop = rejectOnDrop;\n      this.limiters = {};\n      this.Bottleneck = __webpack_require__(\"An/8\");\n      this.timeout = 1000 * 60 * 5;\n      this.startAutoCleanup();\n    }\n\n    Cluster.prototype.key = function (key) {\n      var ref;\n      if (key == null) {\n        key = \"\";\n      }\n      return (ref = this.limiters[key]) != null ? ref : this.limiters[key] = new this.Bottleneck(this.maxNb, this.minTime, this.highWater, this.strategy, this.rejectOnDrop);\n    };\n\n    Cluster.prototype.deleteKey = function (key) {\n      if (key == null) {\n        key = \"\";\n      }\n      return delete this.limiters[key];\n    };\n\n    Cluster.prototype.all = function (cb) {\n      var k, ref, results, v;\n      ref = this.limiters;\n      results = [];\n      for (k in ref) {\n        if (!hasProp.call(ref, k)) continue;\n        v = ref[k];\n        results.push(cb(v));\n      }\n      return results;\n    };\n\n    Cluster.prototype.keys = function () {\n      return Object.keys(this.limiters);\n    };\n\n    Cluster.prototype.startAutoCleanup = function () {\n      var base;\n      this.stopAutoCleanup();\n      return typeof (base = this.interval = setInterval(function (_this) {\n        return function () {\n          var k, ref, results, time, v;\n          time = Date.now();\n          ref = _this.limiters;\n          results = [];\n          for (k in ref) {\n            v = ref[k];\n            if (v._nextRequest + _this.timeout < time) {\n              results.push(_this.deleteKey(k));\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        };\n      }(this), this.timeout / 10)).unref === \"function\" ? base.unref() : void 0;\n    };\n\n    Cluster.prototype.stopAutoCleanup = function () {\n      return clearInterval(this.interval);\n    };\n\n    Cluster.prototype.changeTimeout = function (timeout) {\n      this.timeout = timeout;\n      return this.startAutoCleanup();\n    };\n\n    return Cluster;\n  }();\n\n  module.exports = Cluster;\n}).call(this);\n\n/***/ }),\n\n/***/ \"Dygy\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nmodule.exports = __webpack_require__(\"g7Jl\");\n\n/***/ }),\n\n/***/ \"E07s\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _registrar = __webpack_require__(\"LGMx\");\n\nvar _registrar2 = _interopRequireDefault(_registrar);\n\nvar _twilsock = __webpack_require__(\"BYJX\");\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\n/**\n * Creates the new instance of ERS registrar client\n *\n * @class Registrar\n * @classdesc Provides an interface to the ERS registrar\n */\nvar Registrar = function (_EventEmitter) {\n  (0, _inherits3.default)(Registrar, _EventEmitter);\n\n  function Registrar(productId, transport, twilsock, config) {\n    (0, _classCallCheck3.default)(this, Registrar);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Registrar.__proto__ || (0, _getPrototypeOf2.default)(Registrar)).call(this));\n\n    (0, _defineProperties2.default)(_this, {\n      _conf: { value: config },\n      _connectors: { value: new _map2.default() }\n    });\n\n    var platform = _this._detectPlatform();\n\n    _this._connectors.set('twilsock', new _twilsock2.default({ productId: productId, platform: platform }, twilsock, config));\n    _this._connectors.set('gcm', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'gcm'));\n    _this._connectors.set('fcm', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'fcm'));\n    _this._connectors.set('apn', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'apn'));\n\n    _this._connectors.get('twilsock').on('transportReady', function (state) {\n      return _this.emit('transportReady', state);\n    });\n\n    return _this;\n  }\n\n  /**\n   *  Sets notification ID.\n   *  If new URI is different from previous, it triggers updating of registration for given channel\n   *\n   *  @param {string} channelType channel type (apn|gcm|fcm|twilsock)\n   *  @param {string} notificationId The notification ID\n   */\n\n  (0, _createClass3.default)(Registrar, [{\n    key: 'setNotificationId',\n    value: function setNotificationId(channelType, notificationId) {\n      this._connector(channelType).setNotificationId(notificationId);\n    }\n\n    /**\n     * Checks if subscription for given message and channel already exists\n     */\n\n  }, {\n    key: 'hasSubscription',\n    value: function hasSubscription(messageType, channelType) {\n      this._connector(channelType).has(messageType);\n    }\n\n    /**\n     * Subscribe for given type of message\n     *\n     * @param {String} messageType Message type identifier\n     * @param {String} channelType Channel type, can be 'twilsock', 'gcm' or 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType, channelType) {\n      this._connector(channelType).subscribe(messageType);\n    }\n\n    /**\n     * Remove subscription\n     * @param {String} messageType Message type\n     * @param {String} channelType Channel type (twilsock or gcm/fcm)\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType, channelType) {\n      this._connector(channelType).unsubscribe(messageType);\n    }\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      this._connectors.forEach(function (connector) {\n        return connector.updateToken();\n      });\n    }\n\n    /**\n     * @param {String} type Channel type\n     * @throws {Error} Error with description\n     * @private\n     */\n\n  }, {\n    key: '_connector',\n    value: function _connector(type) {\n      var connector = this._connectors.get(type);\n      if (!connector) {\n        throw new Error('Unknown channel type: ' + type);\n      }\n      return connector;\n    }\n\n    /**\n     * Returns platform string limited to max 128 chars\n     * @private\n     */\n\n  }, {\n    key: '_detectPlatform',\n    value: function _detectPlatform() {\n      var _platform = '';\n      if (typeof navigator !== 'undefined') {\n        _platform = 'unknown';\n        if (typeof navigator.product !== 'undefined') {\n          _platform = navigator.product;\n        }\n        if (typeof navigator.userAgent !== 'undefined') {\n          _platform = navigator.userAgent;\n        }\n      } else {\n        _platform = 'web';\n      }\n\n      return _platform.substring(0, 128);\n    }\n  }]);\n  return Registrar;\n}(_events2.default);\n\nexports.default = Registrar;\n\n(0, _freeze2.default)(Registrar);\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"E1ih\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = __webpack_require__(\"FRpO\");\nvar precond = __webpack_require__(\"Dygy\");\nvar util = __webpack_require__(\"gfUn\");\n\n// A class to hold the state of a backoff operation. Accepts a backoff strategy\n// to generate the backoff delays.\nfunction Backoff(backoffStrategy) {\n    events.EventEmitter.call(this);\n\n    this.backoffStrategy_ = backoffStrategy;\n    this.maxNumberOfRetry_ = -1;\n    this.backoffNumber_ = 0;\n    this.backoffDelay_ = 0;\n    this.timeoutID_ = -1;\n\n    this.handlers = {\n        backoff: this.onBackoff_.bind(this)\n    };\n}\nutil.inherits(Backoff, events.EventEmitter);\n\n// Sets a limit, greater than 0, on the maximum number of backoffs. A 'fail'\n// event will be emitted when the limit is reached.\nBackoff.prototype.failAfter = function (maxNumberOfRetry) {\n    precond.checkArgument(maxNumberOfRetry > 0, 'Expected a maximum number of retry greater than 0 but got %s.', maxNumberOfRetry);\n\n    this.maxNumberOfRetry_ = maxNumberOfRetry;\n};\n\n// Starts a backoff operation. Accepts an optional parameter to let the\n// listeners know why the backoff operation was started.\nBackoff.prototype.backoff = function (err) {\n    precond.checkState(this.timeoutID_ === -1, 'Backoff in progress.');\n\n    if (this.backoffNumber_ === this.maxNumberOfRetry_) {\n        this.emit('fail', err);\n        this.reset();\n    } else {\n        this.backoffDelay_ = this.backoffStrategy_.next();\n        this.timeoutID_ = setTimeout(this.handlers.backoff, this.backoffDelay_);\n        this.emit('backoff', this.backoffNumber_, this.backoffDelay_, err);\n    }\n};\n\n// Handles the backoff timeout completion.\nBackoff.prototype.onBackoff_ = function () {\n    this.timeoutID_ = -1;\n    this.emit('ready', this.backoffNumber_, this.backoffDelay_);\n    this.backoffNumber_++;\n};\n\n// Stops any backoff operation and resets the backoff delay to its inital value.\nBackoff.prototype.reset = function () {\n    this.backoffNumber_ = 0;\n    this.backoffStrategy_.reset();\n    clearTimeout(this.timeoutID_);\n    this.timeoutID_ = -1;\n};\n\nmodule.exports = Backoff;\n\n/***/ }),\n\n/***/ \"E56Z\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _from = __webpack_require__(\"VuZO\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar log = __webpack_require__(\"T51w\");\nfunction prepareLine(prefix, args) {\n    return [prefix].concat((0, _from2.default)(args));\n}\nexports.default = {\n    setLevel: function setLevel(level) {\n        log.setLevel(level);\n    },\n    trace: function trace() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        log.trace.apply(null, prepareLine('Sync T:', args));\n    },\n    debug: function debug() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        log.debug.apply(null, prepareLine('Sync D:', args));\n    },\n    info: function info() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        log.info.apply(null, prepareLine('Sync I:', args));\n    },\n    warn: function warn() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n        }\n\n        log.warn.apply(null, prepareLine('Sync W:', args));\n    },\n    error: function error() {\n        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n        }\n\n        log.error.apply(null, prepareLine('Sync E:', args));\n    }\n};\n\n/***/ }),\n\n/***/ \"E5Ce\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(\"ShN9\");\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n/***/ }),\n\n/***/ \"EKwp\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(\"BxvP\");\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n/***/ }),\n\n/***/ \"EwCr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _from = __webpack_require__(\"VuZO\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _loglevel = __webpack_require__(\"T51w\");\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction prepareLine(prefix, args) {\n  return [prefix].concat((0, _from2.default)(args));\n}\n\nexports.default = {\n  setLevel: function setLevel(level) {\n    _loglevel2.default.setLevel(level);\n  },\n\n  trace: function trace() {\n    _loglevel2.default.trace.apply(null, prepareLine('Notify T:', arguments));\n  },\n  debug: function debug() {\n    _loglevel2.default.debug.apply(null, prepareLine('Notify D:', arguments));\n  },\n  info: function info() {\n    _loglevel2.default.info.apply(null, prepareLine('Notify I:', arguments));\n  },\n  warn: function warn() {\n    _loglevel2.default.warn.apply(null, prepareLine('Notify W:', arguments));\n  },\n  error: function error() {\n    _loglevel2.default.error.apply(null, prepareLine('Notify E:', arguments));\n  }\n};\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"FFZn\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"3v7p\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"FGzK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar global = __webpack_require__(\"i1Q6\"),\n    core = __webpack_require__(\"zKeE\"),\n    dP = __webpack_require__(\"Gfzd\"),\n    DESCRIPTORS = __webpack_require__(\"6MLN\"),\n    SPECIES = __webpack_require__(\"Ug9I\")('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function get() {\n      return this;\n    }\n  });\n};\n\n/***/ }),\n\n/***/ \"FRpO\":\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function (n) {\n  if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function (type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events) this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler)) return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function (type, listener) {\n  var m;\n\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  if (!this._events) this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function (type, listener) {\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function (type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type]) return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener || isFunction(list.listener) && list.listener === listener) {\n    delete this._events[type];\n    if (this._events.removeListener) this.emit('removeListener', type, listener);\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener) this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function (type) {\n  var key, listeners;\n\n  if (!this._events) return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length) {\n      this.removeListener(type, listeners[listeners.length - 1]);\n    }\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function (type) {\n  var ret;\n  if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function (type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n/***/ }),\n\n/***/ \"FshL\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(\"vSO4\");\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !__webpack_require__(\"6MLN\"), 'Object', { defineProperties: __webpack_require__(\"gjjs\") });\n\n/***/ }),\n\n/***/ \"GBRx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = __webpack_require__(\"FRpO\");\n\nvar SyncEntity = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(SyncEntity, _events_1$EventEmitte);\n\n    function SyncEntity(services, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncEntity);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncEntity.__proto__ || (0, _getPrototypeOf2.default)(SyncEntity)).call(this));\n\n        _this.services = services;\n        _this.removalHandler = removalHandler;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncEntity, [{\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {}\n    }, {\n        key: \"reportFailure\",\n        value: function reportFailure(err) {\n            if (err.status === 404) {\n                // assume that 404 means that entity has been removed while we were away\n                this.onRemoved(false);\n            } else {\n                this.emit('failure', err);\n            }\n        }\n        /**\n         * Subscribe to changes of data entity\n         * @private\n         */\n\n    }, {\n        key: \"_subscribe\",\n        value: function _subscribe() {\n            this.services.router.subscribe(this.sid, this);\n            return this;\n        }\n        /**\n         * Unsubscribe from changes of current data entity\n         * @private\n         */\n\n    }, {\n        key: \"_unsubscribe\",\n        value: function _unsubscribe() {\n            this.services.router.unsubscribe(this.sid, this);\n            return this;\n        }\n        /**\n         * @public\n         */\n\n    }, {\n        key: \"close\",\n        value: function close() {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n        }\n    }]);\n    return SyncEntity;\n}(events_1.EventEmitter);\n\nexports.SyncEntity = SyncEntity;\nexports.default = SyncEntity;\n\n/***/ }),\n\n/***/ \"Gfzd\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(\"zotD\"),\n    IE8_DOM_DEFINE = __webpack_require__(\"R6c1\"),\n    toPrimitive = __webpack_require__(\"EKwp\"),\n    dP = Object.defineProperty;\n\nexports.f = __webpack_require__(\"6MLN\") ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) {/* empty */}\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n/***/ }),\n\n/***/ \"GyB/\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(\"6t7t\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(\"ibPW\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n\n/***/ \"H109\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(\"i1Q6\"),\n    macrotask = __webpack_require__(\"uzcO\").set,\n    Observer = global.MutationObserver || global.WebKitMutationObserver,\n    process = global.process,\n    Promise = global.Promise,\n    isNode = __webpack_require__(\"ShN9\")(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function flush() {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();else last = undefined;\n        throw e;\n      }\n    }last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function notify() {\n      process.nextTick(flush);\n    };\n    // browsers with MutationObserver\n  } else if (Observer) {\n    var toggle = true,\n        node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function notify() {\n      node.data = toggle = !toggle;\n    };\n    // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    var promise = Promise.resolve();\n    notify = function notify() {\n      promise.then(flush);\n    };\n    // for other environments - macrotask based on:\n    // - setImmediate\n    // - MessageChannel\n    // - window.postMessag\n    // - onreadystatechange\n    // - setTimeout\n  } else {\n    notify = function notify() {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    }last = task;\n  };\n};\n\n/***/ }),\n\n/***/ \"H3OR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _client = __webpack_require__(\"TpZJ\");\n\nvar _client2 = _interopRequireDefault(_client);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = _client2.default;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"HHE0\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(\"yS17\"),\n    toObject = __webpack_require__(\"mbLO\"),\n    IE_PROTO = __webpack_require__(\"/wuY\")('IE_PROTO'),\n    ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  }return O instanceof Object ? ObjectProto : null;\n};\n\n/***/ }),\n\n/***/ \"HxWs\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"Q17y\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"ID6i\":\n/***/ (function(module, exports) {\n\nmodule.exports = function () {/* empty */};\n\n/***/ }),\n\n/***/ \"JE0K\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TwilsockUnavailableError = exports.Transport = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nvar _httprequest = __webpack_require__(\"iSVM\");\n\nvar _httprequest2 = _interopRequireDefault(_httprequest);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nfunction parseUri(uri) {\n  var match = uri.match(/^(https?\\:)\\/\\/(([^:\\/?#]*)(?:\\:([0-9]+))?)(\\/[^?#]*)(\\?[^#]*|)(#.*|)$/);\n  if (match) {\n    var uriStruct = {\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    };\n\n    if (uriStruct.search.length > 0) {\n      var paramsString = uriStruct.search.substring(1);\n      uriStruct.params = paramsString.split('&').map(function (el) {\n        return el.split('=');\n      }).reduce(function (prev, curr) {\n        if (!prev.hasOwnProperty(curr[0])) {\n          prev[curr[0]] = curr[1];\n        } else if (Array.isArray(prev[curr[0]])) {\n          prev[curr[0]].push(curr[1]);\n        } else {\n          prev[curr[0]] = [prev[curr[0]], curr[1]];\n        }\n        return prev;\n      }, {});\n    }\n    return uriStruct;\n  }\n  throw new Error('Incorrect URI: ' + uri);\n}\n\nfunction twilsockAddress(method, uri) {\n  var parsedUri = parseUri(uri);\n  var to = {\n    method: method,\n    host: parsedUri.host,\n    path: parsedUri.pathname\n  };\n  if (parsedUri.params) {\n    to.params = parsedUri.params;\n  }\n  return to;\n}\n\nfunction twilsockParams(type, uri, headers, body) {\n  return {\n    to: twilsockAddress(type, uri),\n    headers: headers,\n    body: body\n  };\n}\n\nfunction adaptTwilsockResponse(response) {\n  return { status: response.header.http_status,\n    headers: response.header.http_headers,\n    body: response.body };\n}\n\nfunction httpParams(uri, headers, body) {\n  return {\n    url: uri,\n    headers: headers,\n    body: body\n  };\n}\n\nfunction adaptHttpResponse(response) {\n  try {\n    response.body = JSON.parse(response.body);\n  } catch (e) {} // eslint-disable-line no-empty\n  return response;\n}\n\n/**\n * By RFC header names are case-insensitive\n * though it is much easier to work with them in code\n * when they have any specific case.\n * So we forcefully lowercase all headers\n */\nfunction lowercaseHeaders(response) {\n  var keys = Object.keys(response.headers);\n  var n = keys.length;\n  var headers = {};\n  while (n--) {\n    var key = keys[n];\n    headers[key.toLowerCase()] = response.headers[key];\n  }\n  response.headers = headers;\n  return response;\n}\n\n/**\n * Transport specific error.\n * Being fired when twilsock-only transmission requested but not available\n * @inherits Error\n */\n\nvar TwilsockUnavailableError = function (_extendableBuiltin2) {\n  _inherits(TwilsockUnavailableError, _extendableBuiltin2);\n\n  function TwilsockUnavailableError() {\n    _classCallCheck(this, TwilsockUnavailableError);\n\n    return _possibleConstructorReturn(this, (TwilsockUnavailableError.__proto__ || Object.getPrototypeOf(TwilsockUnavailableError)).call(this));\n  }\n\n  return TwilsockUnavailableError;\n}(_extendableBuiltin(Error));\n\n/**\n * Provides generic network interface\n */\n\nvar Transport = function () {\n  function Transport(twilsock) {\n    var _this2 = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transport);\n\n    Object.defineProperties(this, {\n      _activeGetRequests: { value: new Map() },\n      _twilsock: { value: twilsock },\n      _http: { value: _httprequest2.default },\n      _twilsockIsAvailable: { get: function get() {\n          return _this2._twilsock && _this2._twilsock.isConnected;\n        } },\n\n      _concurrentHttpRequestLimit: { value: options.concurrentHttpRequestLimit || Infinity },\n      _concurrentHttpRequestCount: { value: 0, writable: true },\n      _requestQueue: { value: [] }\n    });\n\n    if (twilsock) {\n      twilsock.connect();\n      twilsock.on('connected', function () {\n        return _this2._processQueuedRequests();\n      });\n    }\n  }\n\n  /**\n   * Make a GET request by given URI\n   *\n   * This function applies \"multiplexing\" optimization.\n   * If several requests for the same URI happen on the same time,\n   * only one will really happen, but all clients will see th result.\n   *\n   * @Returns Promise<Response> Result of successful get request\n   */\n\n  _createClass(Transport, [{\n    key: 'get',\n    value: function get(uri, headers, forceTwilsock) {\n      var _this3 = this;\n\n      if (this._activeGetRequests.has(uri)) {\n        return this._activeGetRequests.get(uri);\n      }\n\n      var promise = this._get(uri, headers, forceTwilsock).then(function (response) {\n        _this3._activeGetRequests.delete(uri);\n        return response;\n      }).catch(function (error) {\n        _this3._activeGetRequests.delete(uri);\n        throw error;\n      });\n\n      this._activeGetRequests.set(uri, promise);\n      return promise;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_oneOfBasedOnChannelAvailability',\n    value: function _oneOfBasedOnChannelAvailability(sendingOptions, forceTwilsock) {\n      var _this4 = this;\n\n      var requestVia = function requestVia(paths) {\n        var sendViaTwilsock = paths.sendViaTwilsock,\n            sendDirectHttp = paths.sendDirectHttp;\n\n        if (_this4._twilsockIsAvailable) {\n          return sendViaTwilsock();\n        } else if (forceTwilsock) {\n          return Promise.reject(new TwilsockUnavailableError());\n        } else if (_this4._concurrentHttpRequestCount >= _this4._concurrentHttpRequestLimit) {\n          return new Promise(function (resolve, reject) {\n            return _this4._requestQueue.push({ sendingOptions: sendingOptions, resolve: resolve, reject: reject });\n          });\n        }\n\n        _this4._concurrentHttpRequestCount++;\n        return sendDirectHttp().then(function (r) {\n          _this4._concurrentHttpRequestCount--;\n          _this4._processQueuedRequests();\n          return r;\n        }).catch(function (err) {\n          _this4._concurrentHttpRequestCount--;\n          _this4._processQueuedRequests();\n          throw err;\n        });\n      };\n\n      return requestVia(sendingOptions).then(lowercaseHeaders);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_processQueuedRequests',\n    value: function _processQueuedRequests() {\n      while (this._requestQueue.length > 0 && (this._twilsockIsAvailable || this._concurrentHttpRequestCount < this._concurrentHttpRequestLimit)) {\n\n        var r = this._requestQueue.shift();\n        this._oneOfBasedOnChannelAvailability(r.sendingOptions, false).then(r.resolve).catch(r.reject);\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_get',\n    value: function _get(uri, headers, forceTwilsock) {\n      var _this5 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this5._twilsock.send(twilsockParams('GET', uri, headers)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this5._http.get(httpParams(uri, headers)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a POST request by given URI\n     * @returns {Promise<Response>} Result of successful request\n     */\n\n  }, {\n    key: 'post',\n    value: function post(uri, headers, body, forceTwilsock) {\n      var _this6 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this6._twilsock.send(twilsockParams('POST', uri, headers, body)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this6._http.post(httpParams(uri, headers, body)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a PUT request by given URI\n     * @returns Promise<Response> Result of successful request\n     */\n\n  }, {\n    key: 'put',\n    value: function put(uri, headers, body, forceTwilsock) {\n      var _this7 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this7._twilsock.send(twilsockParams('PUT', uri, headers, body)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this7._http.put(httpParams(uri, headers, body)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a DELETE request by given URI\n     * @returns {Promise<Response>} Result of successful request\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete(uri, headers, forceTwilsock) {\n      var _this8 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this8._twilsock.send(twilsockParams('DELETE', uri, headers)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this8._http.delete(httpParams(uri, headers)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n  }]);\n\n  return Transport;\n}();\n\nexports.default = Transport;\nexports.Transport = Transport;\nexports.TwilsockUnavailableError = TwilsockUnavailableError;\n\n/***/ }),\n\n/***/ \"JWsA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n\tC-like unsigned 64 bits integers in Javascript\n\tCopyright (C) 2013, Pierre Curto\n\tMIT license\n */\n;(function (root) {\n\n\t// Local cache for typical radices\n\tvar radixPowerCache = {\n\t\t16: UINT64(Math.pow(16, 5)),\n\t\t10: UINT64(Math.pow(10, 5)),\n\t\t2: UINT64(Math.pow(2, 5))\n\t};\n\tvar radixCache = {\n\t\t16: UINT64(16),\n\t\t10: UINT64(10),\n\t\t2: UINT64(2)\n\n\t\t/**\n   *\tRepresents an unsigned 64 bits integer\n   * @constructor\n   * @param {Number} first low bits (8)\n   * @param {Number} second low bits (8)\n   * @param {Number} first high bits (8)\n   * @param {Number} second high bits (8)\n   * or\n   * @param {Number} low bits (32)\n   * @param {Number} high bits (32)\n   * or\n   * @param {String|Number} integer as a string \t\t | integer as a number\n   * @param {Number|Undefined} radix (optional, default=10)\n   * @return \n   */\n\t};function UINT64(a00, a16, a32, a48) {\n\t\tif (!(this instanceof UINT64)) return new UINT64(a00, a16, a32, a48);\n\n\t\tthis.remainder = null;\n\t\tif (typeof a00 == 'string') return fromString.call(this, a00, a16);\n\n\t\tif (typeof a16 == 'undefined') return fromNumber.call(this, a00);\n\n\t\tfromBits.apply(this, arguments);\n\t}\n\n\t/**\n  * Set the current _UINT64_ object with its low and high bits\n  * @method fromBits\n  * @param {Number} first low bits (8)\n  * @param {Number} second low bits (8)\n  * @param {Number} first high bits (8)\n  * @param {Number} second high bits (8)\n  * or\n  * @param {Number} low bits (32)\n  * @param {Number} high bits (32)\n  * @return ThisExpression\n  */\n\tfunction fromBits(a00, a16, a32, a48) {\n\t\tif (typeof a32 == 'undefined') {\n\t\t\tthis._a00 = a00 & 0xFFFF;\n\t\t\tthis._a16 = a00 >>> 16;\n\t\t\tthis._a32 = a16 & 0xFFFF;\n\t\t\tthis._a48 = a16 >>> 16;\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._a00 = a00 | 0;\n\t\tthis._a16 = a16 | 0;\n\t\tthis._a32 = a32 | 0;\n\t\tthis._a48 = a48 | 0;\n\n\t\treturn this;\n\t}\n\tUINT64.prototype.fromBits = fromBits;\n\n\t/**\n  * Set the current _UINT64_ object from a number\n  * @method fromNumber\n  * @param {Number} number\n  * @return ThisExpression\n  */\n\tfunction fromNumber(value) {\n\t\tthis._a00 = value & 0xFFFF;\n\t\tthis._a16 = value >>> 16;\n\t\tthis._a32 = 0;\n\t\tthis._a48 = 0;\n\n\t\treturn this;\n\t}\n\tUINT64.prototype.fromNumber = fromNumber;\n\n\t/**\n  * Set the current _UINT64_ object from a string\n  * @method fromString\n  * @param {String} integer as a string\n  * @param {Number} radix (optional, default=10)\n  * @return ThisExpression\n  */\n\tfunction fromString(s, radix) {\n\t\tradix = radix || 10;\n\n\t\tthis._a00 = 0;\n\t\tthis._a16 = 0;\n\t\tthis._a32 = 0;\n\t\tthis._a48 = 0;\n\n\t\t/*\n  \tIn Javascript, bitwise operators only operate on the first 32 bits \n  \tof a number, even though parseInt() encodes numbers with a 53 bits \n  \tmantissa.\n  \tTherefore UINT64(<Number>) can only work on 32 bits.\n  \tThe radix maximum value is 36 (as per ECMA specs) (26 letters + 10 digits)\n  \tmaximum input value is m = 32bits as 1 = 2^32 - 1\n  \tSo the maximum substring length n is:\n  \t36^(n+1) - 1 = 2^32 - 1\n  \t36^(n+1) = 2^32\n  \t(n+1)ln(36) = 32ln(2)\n  \tn = 32ln(2)/ln(36) - 1\n  \tn = 5.189644915687692\n  \tn = 5\n   */\n\t\tvar radixUint = radixPowerCache[radix] || new UINT64(Math.pow(radix, 5));\n\n\t\tfor (var i = 0, len = s.length; i < len; i += 5) {\n\t\t\tvar size = Math.min(5, len - i);\n\t\t\tvar value = parseInt(s.slice(i, i + size), radix);\n\t\t\tthis.multiply(size < 5 ? new UINT64(Math.pow(radix, size)) : radixUint).add(new UINT64(value));\n\t\t}\n\n\t\treturn this;\n\t}\n\tUINT64.prototype.fromString = fromString;\n\n\t/**\n  * Convert this _UINT64_ to a number (last 32 bits are dropped)\n  * @method toNumber\n  * @return {Number} the converted UINT64\n  */\n\tUINT64.prototype.toNumber = function () {\n\t\treturn this._a16 * 65536 + this._a00;\n\t};\n\n\t/**\n  * Convert this _UINT64_ to a string\n  * @method toString\n  * @param {Number} radix (optional, default=10)\n  * @return {String} the converted UINT64\n  */\n\tUINT64.prototype.toString = function (radix) {\n\t\tradix = radix || 10;\n\t\tvar radixUint = radixCache[radix] || new UINT64(radix);\n\n\t\tif (!this.gt(radixUint)) return this.toNumber().toString(radix);\n\n\t\tvar self = this.clone();\n\t\tvar res = new Array(64);\n\t\tfor (var i = 63; i >= 0; i--) {\n\t\t\tself.div(radixUint);\n\t\t\tres[i] = self.remainder.toNumber().toString(radix);\n\t\t\tif (!self.gt(radixUint)) break;\n\t\t}\n\t\tres[i - 1] = self.toNumber().toString(radix);\n\n\t\treturn res.join('');\n\t};\n\n\t/**\n  * Add two _UINT64_. The current _UINT64_ stores the result\n  * @method add\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.add = function (other) {\n\t\tvar a00 = this._a00 + other._a00;\n\n\t\tvar a16 = a00 >>> 16;\n\t\ta16 += this._a16 + other._a16;\n\n\t\tvar a32 = a16 >>> 16;\n\t\ta32 += this._a32 + other._a32;\n\n\t\tvar a48 = a32 >>> 16;\n\t\ta48 += this._a48 + other._a48;\n\n\t\tthis._a00 = a00 & 0xFFFF;\n\t\tthis._a16 = a16 & 0xFFFF;\n\t\tthis._a32 = a32 & 0xFFFF;\n\t\tthis._a48 = a48 & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Subtract two _UINT64_. The current _UINT64_ stores the result\n  * @method subtract\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.subtract = function (other) {\n\t\treturn this.add(other.clone().negate());\n\t};\n\n\t/**\n  * Multiply two _UINT64_. The current _UINT64_ stores the result\n  * @method multiply\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.multiply = function (other) {\n\t\t/*\n  \ta = a00 + a16 + a32 + a48\n  \tb = b00 + b16 + b32 + b48\n  \ta*b = (a00 + a16 + a32 + a48)(b00 + b16 + b32 + b48)\n  \t\t= a00b00 + a00b16 + a00b32 + a00b48\n  \t\t+ a16b00 + a16b16 + a16b32 + a16b48\n  \t\t+ a32b00 + a32b16 + a32b32 + a32b48\n  \t\t+ a48b00 + a48b16 + a48b32 + a48b48\n  \t\ta16b48, a32b32, a48b16, a48b32 and a48b48 overflow the 64 bits\n  \tso it comes down to:\n  \ta*b\t= a00b00 + a00b16 + a00b32 + a00b48\n  \t\t+ a16b00 + a16b16 + a16b32\n  \t\t+ a32b00 + a32b16\n  \t\t+ a48b00\n  \t\t= a00b00\n  \t\t+ a00b16 + a16b00\n  \t\t+ a00b32 + a16b16 + a32b00\n  \t\t+ a00b48 + a16b32 + a32b16 + a48b00\n   */\n\t\tvar a00 = this._a00;\n\t\tvar a16 = this._a16;\n\t\tvar a32 = this._a32;\n\t\tvar a48 = this._a48;\n\t\tvar b00 = other._a00;\n\t\tvar b16 = other._a16;\n\t\tvar b32 = other._a32;\n\t\tvar b48 = other._a48;\n\n\t\tvar c00 = a00 * b00;\n\n\t\tvar c16 = c00 >>> 16;\n\t\tc16 += a00 * b16;\n\t\tvar c32 = c16 >>> 16;\n\t\tc16 &= 0xFFFF;\n\t\tc16 += a16 * b00;\n\n\t\tc32 += c16 >>> 16;\n\t\tc32 += a00 * b32;\n\t\tvar c48 = c32 >>> 16;\n\t\tc32 &= 0xFFFF;\n\t\tc32 += a16 * b16;\n\t\tc48 += c32 >>> 16;\n\t\tc32 &= 0xFFFF;\n\t\tc32 += a32 * b00;\n\n\t\tc48 += c32 >>> 16;\n\t\tc48 += a00 * b48;\n\t\tc48 &= 0xFFFF;\n\t\tc48 += a16 * b32;\n\t\tc48 &= 0xFFFF;\n\t\tc48 += a32 * b16;\n\t\tc48 &= 0xFFFF;\n\t\tc48 += a48 * b00;\n\n\t\tthis._a00 = c00 & 0xFFFF;\n\t\tthis._a16 = c16 & 0xFFFF;\n\t\tthis._a32 = c32 & 0xFFFF;\n\t\tthis._a48 = c48 & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Divide two _UINT64_. The current _UINT64_ stores the result.\n  * The remainder is made available as the _remainder_ property on\n  * the _UINT64_ object. It can be null, meaning there are no remainder.\n  * @method div\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.div = function (other) {\n\t\tif (other._a16 == 0 && other._a32 == 0 && other._a48 == 0) {\n\t\t\tif (other._a00 == 0) throw Error('division by zero');\n\n\t\t\t// other == 1: this\n\t\t\tif (other._a00 == 1) {\n\t\t\t\tthis.remainder = new UINT64(0);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\n\t\t// other > this: 0\n\t\tif (other.gt(this)) {\n\t\t\tthis.remainder = this.clone();\n\t\t\tthis._a00 = 0;\n\t\t\tthis._a16 = 0;\n\t\t\tthis._a32 = 0;\n\t\t\tthis._a48 = 0;\n\t\t\treturn this;\n\t\t}\n\t\t// other == this: 1\n\t\tif (this.eq(other)) {\n\t\t\tthis.remainder = new UINT64(0);\n\t\t\tthis._a00 = 1;\n\t\t\tthis._a16 = 0;\n\t\t\tthis._a32 = 0;\n\t\t\tthis._a48 = 0;\n\t\t\treturn this;\n\t\t}\n\n\t\t// Shift the divisor left until it is higher than the dividend\n\t\tvar _other = other.clone();\n\t\tvar i = -1;\n\t\twhile (!this.lt(_other)) {\n\t\t\t// High bit can overflow the default 16bits\n\t\t\t// Its ok since we right shift after this loop\n\t\t\t// The overflown bit must be kept though\n\t\t\t_other.shiftLeft(1, true);\n\t\t\ti++;\n\t\t}\n\n\t\t// Set the remainder\n\t\tthis.remainder = this.clone();\n\t\t// Initialize the current result to 0\n\t\tthis._a00 = 0;\n\t\tthis._a16 = 0;\n\t\tthis._a32 = 0;\n\t\tthis._a48 = 0;\n\t\tfor (; i >= 0; i--) {\n\t\t\t_other.shiftRight(1);\n\t\t\t// If shifted divisor is smaller than the dividend\n\t\t\t// then subtract it from the dividend\n\t\t\tif (!this.remainder.lt(_other)) {\n\t\t\t\tthis.remainder.subtract(_other);\n\t\t\t\t// Update the current result\n\t\t\t\tif (i >= 48) {\n\t\t\t\t\tthis._a48 |= 1 << i - 48;\n\t\t\t\t} else if (i >= 32) {\n\t\t\t\t\tthis._a32 |= 1 << i - 32;\n\t\t\t\t} else if (i >= 16) {\n\t\t\t\t\tthis._a16 |= 1 << i - 16;\n\t\t\t\t} else {\n\t\t\t\t\tthis._a00 |= 1 << i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Negate the current _UINT64_\n  * @method negate\n  * @return ThisExpression\n  */\n\tUINT64.prototype.negate = function () {\n\t\tvar v = (~this._a00 & 0xFFFF) + 1;\n\t\tthis._a00 = v & 0xFFFF;\n\t\tv = (~this._a16 & 0xFFFF) + (v >>> 16);\n\t\tthis._a16 = v & 0xFFFF;\n\t\tv = (~this._a32 & 0xFFFF) + (v >>> 16);\n\t\tthis._a32 = v & 0xFFFF;\n\t\tthis._a48 = ~this._a48 + (v >>> 16) & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n \t * @method eq\n  * @param {Object} other UINT64\n  * @return {Boolean}\n  */\n\tUINT64.prototype.equals = UINT64.prototype.eq = function (other) {\n\t\treturn this._a48 == other._a48 && this._a00 == other._a00 && this._a32 == other._a32 && this._a16 == other._a16;\n\t};\n\n\t/**\n  * Greater than (strict)\n  * @method gt\n  * @param {Object} other UINT64\n  * @return {Boolean}\n  */\n\tUINT64.prototype.greaterThan = UINT64.prototype.gt = function (other) {\n\t\tif (this._a48 > other._a48) return true;\n\t\tif (this._a48 < other._a48) return false;\n\t\tif (this._a32 > other._a32) return true;\n\t\tif (this._a32 < other._a32) return false;\n\t\tif (this._a16 > other._a16) return true;\n\t\tif (this._a16 < other._a16) return false;\n\t\treturn this._a00 > other._a00;\n\t};\n\n\t/**\n  * Less than (strict)\n  * @method lt\n  * @param {Object} other UINT64\n  * @return {Boolean}\n  */\n\tUINT64.prototype.lessThan = UINT64.prototype.lt = function (other) {\n\t\tif (this._a48 < other._a48) return true;\n\t\tif (this._a48 > other._a48) return false;\n\t\tif (this._a32 < other._a32) return true;\n\t\tif (this._a32 > other._a32) return false;\n\t\tif (this._a16 < other._a16) return true;\n\t\tif (this._a16 > other._a16) return false;\n\t\treturn this._a00 < other._a00;\n\t};\n\n\t/**\n  * Bitwise OR\n  * @method or\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.or = function (other) {\n\t\tthis._a00 |= other._a00;\n\t\tthis._a16 |= other._a16;\n\t\tthis._a32 |= other._a32;\n\t\tthis._a48 |= other._a48;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise AND\n  * @method and\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.and = function (other) {\n\t\tthis._a00 &= other._a00;\n\t\tthis._a16 &= other._a16;\n\t\tthis._a32 &= other._a32;\n\t\tthis._a48 &= other._a48;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise XOR\n  * @method xor\n  * @param {Object} other UINT64\n  * @return ThisExpression\n  */\n\tUINT64.prototype.xor = function (other) {\n\t\tthis._a00 ^= other._a00;\n\t\tthis._a16 ^= other._a16;\n\t\tthis._a32 ^= other._a32;\n\t\tthis._a48 ^= other._a48;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise NOT\n  * @method not\n  * @return ThisExpression\n  */\n\tUINT64.prototype.not = function () {\n\t\tthis._a00 = ~this._a00 & 0xFFFF;\n\t\tthis._a16 = ~this._a16 & 0xFFFF;\n\t\tthis._a32 = ~this._a32 & 0xFFFF;\n\t\tthis._a48 = ~this._a48 & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise shift right\n  * @method shiftRight\n  * @param {Number} number of bits to shift\n  * @return ThisExpression\n  */\n\tUINT64.prototype.shiftRight = UINT64.prototype.shiftr = function (n) {\n\t\tn %= 64;\n\t\tif (n >= 48) {\n\t\t\tthis._a00 = this._a48 >> n - 48;\n\t\t\tthis._a16 = 0;\n\t\t\tthis._a32 = 0;\n\t\t\tthis._a48 = 0;\n\t\t} else if (n >= 32) {\n\t\t\tn -= 32;\n\t\t\tthis._a00 = (this._a32 >> n | this._a48 << 16 - n) & 0xFFFF;\n\t\t\tthis._a16 = this._a48 >> n & 0xFFFF;\n\t\t\tthis._a32 = 0;\n\t\t\tthis._a48 = 0;\n\t\t} else if (n >= 16) {\n\t\t\tn -= 16;\n\t\t\tthis._a00 = (this._a16 >> n | this._a32 << 16 - n) & 0xFFFF;\n\t\t\tthis._a16 = (this._a32 >> n | this._a48 << 16 - n) & 0xFFFF;\n\t\t\tthis._a32 = this._a48 >> n & 0xFFFF;\n\t\t\tthis._a48 = 0;\n\t\t} else {\n\t\t\tthis._a00 = (this._a00 >> n | this._a16 << 16 - n) & 0xFFFF;\n\t\t\tthis._a16 = (this._a16 >> n | this._a32 << 16 - n) & 0xFFFF;\n\t\t\tthis._a32 = (this._a32 >> n | this._a48 << 16 - n) & 0xFFFF;\n\t\t\tthis._a48 = this._a48 >> n & 0xFFFF;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise shift left\n  * @method shiftLeft\n  * @param {Number} number of bits to shift\n  * @param {Boolean} allow overflow\n  * @return ThisExpression\n  */\n\tUINT64.prototype.shiftLeft = UINT64.prototype.shiftl = function (n, allowOverflow) {\n\t\tn %= 64;\n\t\tif (n >= 48) {\n\t\t\tthis._a48 = this._a00 << n - 48;\n\t\t\tthis._a32 = 0;\n\t\t\tthis._a16 = 0;\n\t\t\tthis._a00 = 0;\n\t\t} else if (n >= 32) {\n\t\t\tn -= 32;\n\t\t\tthis._a48 = this._a16 << n | this._a00 >> 16 - n;\n\t\t\tthis._a32 = this._a00 << n & 0xFFFF;\n\t\t\tthis._a16 = 0;\n\t\t\tthis._a00 = 0;\n\t\t} else if (n >= 16) {\n\t\t\tn -= 16;\n\t\t\tthis._a48 = this._a32 << n | this._a16 >> 16 - n;\n\t\t\tthis._a32 = (this._a16 << n | this._a00 >> 16 - n) & 0xFFFF;\n\t\t\tthis._a16 = this._a00 << n & 0xFFFF;\n\t\t\tthis._a00 = 0;\n\t\t} else {\n\t\t\tthis._a48 = this._a48 << n | this._a32 >> 16 - n;\n\t\t\tthis._a32 = (this._a32 << n | this._a16 >> 16 - n) & 0xFFFF;\n\t\t\tthis._a16 = (this._a16 << n | this._a00 >> 16 - n) & 0xFFFF;\n\t\t\tthis._a00 = this._a00 << n & 0xFFFF;\n\t\t}\n\t\tif (!allowOverflow) {\n\t\t\tthis._a48 &= 0xFFFF;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise rotate left\n  * @method rotl\n  * @param {Number} number of bits to rotate\n  * @return ThisExpression\n  */\n\tUINT64.prototype.rotateLeft = UINT64.prototype.rotl = function (n) {\n\t\tn %= 64;\n\t\tif (n == 0) return this;\n\t\tif (n >= 32) {\n\t\t\t// A.B.C.D\n\t\t\t// B.C.D.A rotl(16)\n\t\t\t// C.D.A.B rotl(32)\n\t\t\tvar v = this._a00;\n\t\t\tthis._a00 = this._a32;\n\t\t\tthis._a32 = v;\n\t\t\tv = this._a48;\n\t\t\tthis._a48 = this._a16;\n\t\t\tthis._a16 = v;\n\t\t\tif (n == 32) return this;\n\t\t\tn -= 32;\n\t\t}\n\n\t\tvar high = this._a48 << 16 | this._a32;\n\t\tvar low = this._a16 << 16 | this._a00;\n\n\t\tvar _high = high << n | low >>> 32 - n;\n\t\tvar _low = low << n | high >>> 32 - n;\n\n\t\tthis._a00 = _low & 0xFFFF;\n\t\tthis._a16 = _low >>> 16;\n\t\tthis._a32 = _high & 0xFFFF;\n\t\tthis._a48 = _high >>> 16;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise rotate right\n  * @method rotr\n  * @param {Number} number of bits to rotate\n  * @return ThisExpression\n  */\n\tUINT64.prototype.rotateRight = UINT64.prototype.rotr = function (n) {\n\t\tn %= 64;\n\t\tif (n == 0) return this;\n\t\tif (n >= 32) {\n\t\t\t// A.B.C.D\n\t\t\t// D.A.B.C rotr(16)\n\t\t\t// C.D.A.B rotr(32)\n\t\t\tvar v = this._a00;\n\t\t\tthis._a00 = this._a32;\n\t\t\tthis._a32 = v;\n\t\t\tv = this._a48;\n\t\t\tthis._a48 = this._a16;\n\t\t\tthis._a16 = v;\n\t\t\tif (n == 32) return this;\n\t\t\tn -= 32;\n\t\t}\n\n\t\tvar high = this._a48 << 16 | this._a32;\n\t\tvar low = this._a16 << 16 | this._a00;\n\n\t\tvar _high = high >>> n | low << 32 - n;\n\t\tvar _low = low >>> n | high << 32 - n;\n\n\t\tthis._a00 = _low & 0xFFFF;\n\t\tthis._a16 = _low >>> 16;\n\t\tthis._a32 = _high & 0xFFFF;\n\t\tthis._a48 = _high >>> 16;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Clone the current _UINT64_\n  * @method clone\n  * @return {Object} cloned UINT64\n  */\n\tUINT64.prototype.clone = function () {\n\t\treturn new UINT64(this._a00, this._a16, this._a32, this._a48);\n\t};\n\n\tif (true) {\n\t\t// AMD / RequireJS\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn UINT64;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof module != 'undefined' && module.exports) {\n\t\t// Node.js\n\t\tmodule.exports = UINT64;\n\t} else {\n\t\t// Browser\n\t\troot['UINT64'] = UINT64;\n\t}\n})(this);\n\n/***/ }),\n\n/***/ \"Jb0q\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Container for entities which are known by the client\n * It's needed for deduplication when client obtain the same object several times\n */\n\nvar EntitiesCache = function () {\n    function EntitiesCache() {\n        (0, _classCallCheck3.default)(this, EntitiesCache);\n\n        this.names = new _map2.default();\n        this.entities = new _map2.default();\n    }\n\n    (0, _createClass3.default)(EntitiesCache, [{\n        key: \"store\",\n        value: function store(entity) {\n            var stored = this.entities.get(entity.sid);\n            if (stored) {\n                return stored;\n            }\n            this.entities.set(entity.sid, entity);\n            if (entity.uniqueName) {\n                this.names.set(entity.type + '::' + entity.uniqueName, entity.sid);\n            }\n            return entity;\n        }\n    }, {\n        key: \"getResolved\",\n        value: function getResolved(id, type) {\n            var resolvedSid = this.names.get(type + '::' + id);\n            return resolvedSid ? this.entities.get(resolvedSid) : null;\n        }\n    }, {\n        key: \"get\",\n        value: function get(id, type) {\n            return this.entities.get(id) || this.getResolved(id, type) || null;\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(sid) {\n            var cached = this.entities.get(sid);\n            if (cached) {\n                this.entities.delete(sid);\n                if (cached.uniqueName) {\n                    this.names.delete(cached.type + '::' + cached.uniqueName);\n                }\n            }\n        }\n    }]);\n    return EntitiesCache;\n}();\n\nexports.EntitiesCache = EntitiesCache;\n\n/***/ }),\n\n/***/ \"JgNJ\":\n/***/ (function(module, exports) {\n\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};\n\n/***/ }),\n\n/***/ \"K+F3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"tuDi\");\n__webpack_require__(\"i+u+\");\n__webpack_require__(\"COf8\");\n__webpack_require__(\"SKjJ\");\n__webpack_require__(\"2SH0\");\nmodule.exports = __webpack_require__(\"zKeE\").Map;\n\n/***/ }),\n\n/***/ \"KUik\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || forbiddenField !== undefined && forbiddenField in it) {\n    throw TypeError(name + ': incorrect invocation!');\n  }return it;\n};\n\n/***/ }),\n\n/***/ \"KxjL\":\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = 'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');\n\n/***/ }),\n\n/***/ \"Ky5l\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"Aa2f\");\n__webpack_require__(\"tuDi\");\n__webpack_require__(\"c6mp\");\n__webpack_require__(\"2mwf\");\nmodule.exports = __webpack_require__(\"zKeE\").Symbol;\n\n/***/ }),\n\n/***/ \"L3Vt\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"9u1Q\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"LGMx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _set2 = __webpack_require__(\"7Zlx\");\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = __webpack_require__(\"EwCr\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _javascriptStateMachine = __webpack_require__(\"uxiv\");\n\nvar _javascriptStateMachine2 = _interopRequireDefault(_javascriptStateMachine);\n\nvar _backoff = __webpack_require__(\"PvFw\");\n\nvar _backoff2 = _interopRequireDefault(_backoff);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction toArray(_set) {\n  var arr = [];\n  _set.forEach(function (v) {\n    return arr.push(v);\n  });\n  return arr;\n}\n\n/**\n * Creates new instance of the ERS registrar\n *\n * @class RegistrarConnector\n * @classdesc Manages the registrations on ERS service.\n * It deduplicates registrations and manages them automatically\n *\n * @param Object configuration\n * @param string notificationId\n * @param string channelType\n * @param Array messageTypes\n */\n\nvar RegistrarConnector = function (_EventEmitter) {\n  (0, _inherits3.default)(RegistrarConnector, _EventEmitter);\n\n  function RegistrarConnector(context, transport, config, channelType) {\n    (0, _classCallCheck3.default)(this, RegistrarConnector);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (RegistrarConnector.__proto__ || (0, _getPrototypeOf2.default)(RegistrarConnector)).call(this));\n\n    var fsm = _javascriptStateMachine2.default.create({\n      initial: { state: 'unregistered', event: 'init', defer: true },\n      events: [{ name: 'userUpdate', from: ['unregistered'], to: 'registering' }, { name: 'userUpdate', from: ['registered'], to: 'unregistering' }, { name: 'registered', from: ['registering', 'retrying'], to: 'registered' }, { name: 'unregistered', from: ['unregistering'], to: 'unregistered' }, { name: 'retry', from: ['retrying'], to: 'retrying' }, { name: 'failure', from: ['registering'], to: 'retrying' }, { name: 'failure', from: ['retrying'], to: 'retrying' }, { name: 'failure', from: ['unregistering'], to: 'unregistered' }],\n      callbacks: {\n        onregistering: function onregistering(event, from, to, arg) {\n          return _this._register(arg);\n        },\n        onunregistering: function onunregistering() {\n          return _this._unregister();\n        },\n        onregistered: function onregistered() {\n          return _this._onRegistered();\n        },\n        onunregistered: function onunregistered() {\n          return _this._onUnregistered();\n        },\n        onretrying: function onretrying(event, from, to, arg) {\n          return _this._initRetry(arg);\n        },\n        onfailure: function onfailure(event, from, to, arg) {\n          if (from === 'retrying') {\n            _this._initRetry(arg);\n          }\n        }\n      }\n    });\n\n    var backoff = _backoff2.default.exponential({\n      randomisationFactor: 0.2,\n      initialDelay: 2 * 1000,\n      maxDelay: 2 * 60 * 1000\n    });\n\n    backoff.on('ready', function () {\n      _this._retry();\n    });\n\n    (0, _defineProperties2.default)(_this, {\n      _transport: { value: transport },\n      _context: { value: context },\n      _url: { value: config.registrarUri, writable: false },\n      _config: { value: config },\n      _fsm: { value: fsm },\n      _backoff: { value: backoff },\n      _channelType: { value: channelType },\n      _registrationId: { value: false, writable: true },\n      _notificationId: { value: false, writable: true },\n      _messageTypes: { value: new _set3.default(), writable: true },\n      _pendingUpdate: { value: null, writable: true }\n    });\n\n    fsm.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(RegistrarConnector, [{\n    key: 'setNotificationId',\n    value: function setNotificationId(notificationId) {\n      if (this._notificationId === notificationId) {\n        return;\n      }\n\n      this._notificationId = notificationId;\n      this._updateRegistration();\n    }\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      return this._updateRegistration();\n    }\n  }, {\n    key: 'has',\n    value: function has(messageType) {\n      return this._messageTypes.has(messageType);\n    }\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType) {\n      if (this._messageTypes.has(messageType)) {\n        _logger2.default.debug('Message type already registered ', messageType);\n        return false;\n      }\n\n      this._messageTypes.add(messageType);\n      this._updateRegistration();\n      return true;\n    }\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType) {\n      if (!this._messageTypes.has(messageType)) {\n        return false;\n      }\n\n      this._messageTypes.delete(messageType);\n\n      if (this._messageTypes.size > 0) {\n        this._updateRegistration();\n      } else {\n        this._removeRegistration();\n      }\n      return true;\n    }\n  }, {\n    key: '_updateRegistration',\n    value: function _updateRegistration() {\n      if (this._notificationId) {\n        this._update(this._notificationId, toArray(this._messageTypes));\n      }\n    }\n  }, {\n    key: '_removeRegistration',\n    value: function _removeRegistration() {\n      if (this._notificationId) {\n        this._update(this._notificationId, toArray(this._messageTypes));\n      }\n    }\n\n    /**\n     * Update service registration\n     * @param {Array} messageTypes Array of message type names\n     * @private\n     */\n\n  }, {\n    key: '_update',\n    value: function _update(notificationId, messageTypes) {\n      var regData = { notificationId: notificationId, messageTypes: messageTypes };\n\n      if (this._fsm.is('unregistered')) {\n        if (regData.notificationId && regData.messageTypes.length > 0) {\n          this._fsm.userUpdate(regData);\n        }\n      } else if (this._fsm.is('registered')) {\n        this._fsm.userUpdate(regData);\n        this._setPendingUpdate(regData);\n      } else {\n        this._setPendingUpdate(regData);\n      }\n    }\n  }, {\n    key: '_setPendingUpdate',\n    value: function _setPendingUpdate(regData) {\n      this._pendingUpdate = regData;\n    }\n  }, {\n    key: '_checkPendingUpdate',\n    value: function _checkPendingUpdate() {\n      if (!this._pendingUpdate) {\n        return;\n      }\n\n      var pendingUpdate = this._pendingUpdate;\n      this._pendingUpdate = null;\n\n      this._updateRegistration(pendingUpdate.notificationId, pendingUpdate.messageTypes);\n    }\n  }, {\n    key: '_initRetry',\n    value: function _initRetry(regData) {\n      if (!this._pendingUpdate) {\n        this._setPendingUpdate(regData);\n      }\n\n      this._backoff.backoff();\n    }\n  }, {\n    key: '_retry',\n    value: function _retry() {\n      if (!this._pendingUpdate) {\n        return;\n      }\n\n      var pendingUpdate = this._pendingUpdate;\n      this._pendingUpdate = null;\n\n      this._register(pendingUpdate);\n    }\n  }, {\n    key: '_onRegistered',\n    value: function _onRegistered() {\n      this._backoff.reset();\n      this.emit('stateChanged', 'registered');\n      this._checkPendingUpdate();\n    }\n  }, {\n    key: '_onUnregistered',\n    value: function _onUnregistered() {\n      this._backoff.reset();\n      this.emit('stateChanged', 'unregistered');\n      this._checkPendingUpdate();\n    }\n  }, {\n    key: '_register',\n    value: function _register(regData) {\n      var _this2 = this;\n\n      /* eslint-disable camelcase */\n      var registrarRequest = {\n        endpoint_platform: this._context.platform,\n        channel_type: this._channelType,\n        version: '2',\n        message_types: regData.messageTypes,\n        data: {},\n        ttl: 'PT24H'\n      };\n\n      if (this._channelType === 'twilsock') {\n        registrarRequest.data.url = regData.notificationId;\n      } else {\n        registrarRequest.data.registration_id = regData.notificationId;\n      }\n\n      var uri = this._url + '?productId=' + this._context.productId;\n      var headers = {\n        'Content-Type': 'application/json',\n        'X-Twilio-Token': this._config.token\n      };\n      /* eslint-enable camelcase */\n\n      _logger2.default.trace('Creating registration for channel ', this._channelType);\n      return this._transport.post(uri, headers, registrarRequest).then(function (response) {\n        _this2._registrationId = response.body.id;\n        _this2._registrationData = regData;\n\n        _logger2.default.debug('Registration created: ', response);\n        _this2._fsm.registered();\n      }).catch(function (error) {\n        _logger2.default.error('Registration failed: ', error);\n        _this2._fsm.failure(regData);\n        return error;\n      });\n    }\n  }, {\n    key: '_unregister',\n    value: function _unregister() {\n      var _this3 = this;\n\n      if (!this._registrationId) {\n        return _promise2.default.resolve();\n      }\n\n      var uri = this._url + '/' + this._registrationId + '?productId=' + this._context.productId;\n      var headers = {\n        'Content-Type': 'application/json',\n        'X-Twilio-Token': this._config.token\n      };\n\n      _logger2.default.trace('Removing registration for ', this._channelType);\n      return this._transport.delete(uri, headers).then(function () {\n        _logger2.default.debug('Registration removed for ', _this3._channelType);\n        _this3._registrationId = false;\n        _this3._fsm.unregistered();\n      }).catch(function (reason) {\n        // failure to remove registration since being treated as \"unregistered\" state\n        // because it is indicates that something wrong with server/connection\n        _logger2.default.error('Failed to remove of registration ', _this3.channelType, reason);\n        _this3._fsm.failure();\n        return reason;\n      });\n    }\n  }]);\n  return RegistrarConnector;\n}(_events2.default);\n\nexports.default = RegistrarConnector;\n\n(0, _freeze2.default)(RegistrarConnector);\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"LNnS\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(\"Wyka\"),\n    toLength = __webpack_require__(\"S7IM\"),\n    toIndex = __webpack_require__(\"N1kU\");\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this),\n        length = toLength(O.length),\n        index = toIndex(fromIndex, length),\n        value;\n    // Array#includes uses SameValueZero equality algorithm\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      if (value != value) return true;\n      // Array#toIndex ignores holes, Array#includes - not\n    } else for (; length > index; index++) {\n      if (IS_INCLUDES || index in O) {\n        if (O[index] === el) return IS_INCLUDES || index || 0;\n      }\n    }return !IS_INCLUDES && -1;\n  };\n};\n\n/***/ }),\n\n/***/ \"LUBQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = __webpack_require__(\"FRpO\");\nvar operation_retrier_1 = __webpack_require__(\"i/BB\");\nvar configuration_1 = __webpack_require__(\"ZAcJ\");\nvar logger_1 = __webpack_require__(\"luWe\");\nvar persistentState_1 = __webpack_require__(\"AMYL\");\nvar twilio_transport_1 = __webpack_require__(\"JE0K\");\nfunction createPromise() {\n    var pd = { promise: null, resolve: null, reject: null };\n    pd.promise = new _promise2.default(function (resolve, reject) {\n        pd.resolve = resolve;\n        pd.reject = reject;\n    });\n    return pd;\n}\n\nvar TokenRequest = function TokenRequest() {\n    (0, _classCallCheck3.default)(this, TokenRequest);\n};\n/**\n * Client for Twilio Endpoint Management service (EMS).\n */\n\nvar EmsClient = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(EmsClient, _events_1$EventEmitte);\n\n    /**\n     * @param config Configuration structure\n     */\n    function EmsClient(config) {\n        (0, _classCallCheck3.default)(this, EmsClient);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EmsClient.__proto__ || (0, _getPrototypeOf2.default)(EmsClient)).call(this));\n\n        config = config || {};\n        config.transport = config.transport || new twilio_transport_1.Transport(config.twilsockClient || null);\n        _this.state = new persistentState_1.PersistentState();\n        _this.config = new configuration_1.default(config);\n        _this.twilsock = config.twilsockClient;\n        _this.transport = config.transport;\n        return _this;\n    }\n    /**\n     * Set new FPA token\n     * @param fpaToken <String> new FPA token to use\n     * @return Promise<EMSClient#TokenInfo>\n     */\n\n    (0, _createClass3.default)(EmsClient, [{\n        key: \"setToken\",\n        value: function setToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var oldTokenRequest;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.currentFpaToken !== fpaToken) {\n                                    this.currentFpaToken = fpaToken;\n                                    oldTokenRequest = this.currentTokenRequest;\n\n                                    this.currentTokenRequest = this.establishToken(fpaToken);\n                                    this.notifyRejected(oldTokenRequest);\n                                }\n                                return _context.abrupt(\"return\", this.currentTokenRequest.promise);\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n    }, {\n        key: \"notifyRejected\",\n        value: function notifyRejected(request) {\n            if (request) {\n                setTimeout(function () {\n                    return request.reject(new Error('Operation has been cancelled by next token'));\n                }, 0);\n            }\n        }\n    }, {\n        key: \"establishToken\",\n        value: function establishToken(fpaToken) {\n            var _this2 = this;\n\n            var tokenRequest = new TokenRequest();\n            var promise = new _promise2.default(function (resolve, reject) {\n                _this2.establishTokenImpl(fpaToken).then(resolve).catch(reject);\n                tokenRequest.resolve = resolve;\n                tokenRequest.reject = reject;\n            });\n            tokenRequest.promise = promise;\n            return tokenRequest;\n        }\n    }, {\n        key: \"establishTokenImpl\",\n        value: function establishTokenImpl(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var _this3 = this;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                return _context2.abrupt(\"return\", new operation_retrier_1.default({ min: 500, max: 2000 }).run(function () {\n                                    return _this3.requestRtdToken(fpaToken);\n                                }).then(function (res) {\n                                    if (res.status != 'ok') {\n                                        throw res.exception;\n                                    }\n                                    if (_this3.currentFpaToken !== fpaToken) {\n                                        // user has already set new token. ignoring\n                                        return;\n                                    }\n                                    _this3.state.continuationToken = res.response.continuation_token;\n                                    var rtdToken = res.response.twilio_rtd_token;\n                                    if (res.response.status.status === 'NEW') {\n                                        _this3.emit('tokenCreated', rtdToken);\n                                    } else {\n                                        _this3.emit('tokenUpdated', rtdToken);\n                                    }\n                                    _this3.emit('token', rtdToken);\n                                    var response = {\n                                        token: res.response.twilio_rtd_token,\n                                        ttl: res.response.ttl,\n                                        status: res.response.status.status,\n                                        reason: res.response.status.reason || null,\n                                        identity: res.response.identity || null,\n                                        accountSid: res.response.account_sid,\n                                        serviceSids: res.response.instance_sids\n                                    };\n                                    _this3.emit('response', response);\n                                    return response;\n                                }).catch(function (e) {\n                                    logger_1.default.error(e);\n                                    throw e;\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n    }, {\n        key: \"requestRtdToken\",\n        value: function requestRtdToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var headers, body, response;\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                headers = { 'Content-Type': 'application/json' };\n                                body = {\n                                    fpa_token: fpaToken,\n                                    continuation_token: this.state.continuationToken\n                                };\n\n                                logger_1.default.debug('Token request', body);\n                                _context3.prev = 3;\n                                _context3.next = 6;\n                                return this.transport.post(this.config.url, headers, body);\n\n                            case 6:\n                                response = _context3.sent;\n\n                                logger_1.default.debug('Token response:', response);\n                                return _context3.abrupt(\"return\", { status: 'ok', token: fpaToken, response: response.body });\n\n                            case 11:\n                                _context3.prev = 11;\n                                _context3.t0 = _context3[\"catch\"](3);\n\n                                if (!(_context3.t0.status === 401 || _context3.t0.status === 403)) {\n                                    _context3.next = 16;\n                                    break;\n                                }\n\n                                // map transport error\n                                // TODO: remove me when transport fixed\n                                if (!(_context3.t0 instanceof Error)) {\n                                    if (_context3.t0.body) {\n                                        _context3.t0 = new Error(_context3.t0.body.message);\n                                    } else if (_context3.t0.description) {\n                                        _context3.t0 = new Error(_context3.t0.description);\n                                    }\n                                }\n                                return _context3.abrupt(\"return\", { status: 'denied', exception: _context3.t0, token: null, response: null });\n\n                            case 16:\n                                throw _context3.t0;\n\n                            case 17:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[3, 11]]);\n            }));\n        }\n    }]);\n    return EmsClient;\n}(events_1.EventEmitter);\n\nexports.EmsClient = EmsClient;\n/**\n * This structure describes an RTD token\n * @typedef {Object} EMSClient#TokenInfo\n * @property {String} token - RTD token generated for given FPA token\n * @property {Number} ttl - ttl to calculate expiration token time\n * @property {String} status - Indicates did server generated new token or extended existing. Valid values are ['NEW', 'UPDATED'].\n * @property {String} reason - If service issued a new RTD token, this field describes a reason\n */\n// for backward compatibility\nvar EMSClient = EmsClient;\nexports.EMSClient = EMSClient;\nexports.default = EMSClient;\n\n/***/ }),\n\n/***/ \"LlWG\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"tvE3\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"Lli7\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(\"Ug9I\")('iterator'),\n    SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () {\n    SAFE_CLOSING = true;\n  };\n  Array.from(riter, function () {\n    throw 2;\n  });\n} catch (e) {/* empty */}\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7],\n        iter = arr[ITERATOR]();\n    iter.next = function () {\n      return { done: safe = true };\n    };\n    arr[ITERATOR] = function () {\n      return iter;\n    };\n    exec(arr);\n  } catch (e) {/* empty */}\n  return safe;\n};\n\n/***/ }),\n\n/***/ \"Lvd3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"COf8\");\n__webpack_require__(\"i+u+\");\nmodule.exports = __webpack_require__(\"ugM7\");\n\n/***/ }),\n\n/***/ \"MpYs\":\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil,\n    floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n/***/ }),\n\n/***/ \"N1kU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(\"MpYs\"),\n    max = Math.max,\n    min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n/***/ }),\n\n/***/ \"N484\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar ctx = __webpack_require__(\"3zRh\"),\n    $export = __webpack_require__(\"vSO4\"),\n    toObject = __webpack_require__(\"mbLO\"),\n    call = __webpack_require__(\"hEIm\"),\n    isArrayIter = __webpack_require__(\"af0K\"),\n    toLength = __webpack_require__(\"S7IM\"),\n    createProperty = __webpack_require__(\"vUQk\"),\n    getIterFn = __webpack_require__(\"7AqT\");\n\n$export($export.S + $export.F * !__webpack_require__(\"Lli7\")(function (iter) {\n  Array.from(iter);\n}), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /*, mapfn = undefined, thisArg = undefined*/) {\n    var O = toObject(arrayLike),\n        C = typeof this == 'function' ? this : Array,\n        aLen = arguments.length,\n        mapfn = aLen > 1 ? arguments[1] : undefined,\n        mapping = mapfn !== undefined,\n        index = 0,\n        iterFn = getIterFn(O),\n        length,\n        result,\n        step,\n        iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n/***/ }),\n\n/***/ \"NB7d\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(\"i1Q6\"),\n    SHARED = '__core-js_shared__',\n    store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n/***/ }),\n\n/***/ \"NQ19\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class Paginator\n * @classdesc Pagination helper class\n *\n * @property {Array} items Array of elements on current page\n * @property {boolean} hasNextPage Indicates the existence of next page\n * @property {boolean} hasPrevPage Indicates the existence of previous page\n */\n\nvar Paginator = function () {\n    /*\n    * @constructor\n    * @param {Array} items Array of element for current page\n    * @param {Object} params\n    * @private\n    */\n    function Paginator(items, source, prevToken, nextToken) {\n        (0, _classCallCheck3.default)(this, Paginator);\n\n        this.prevToken = prevToken;\n        this.nextToken = nextToken;\n        this.items = items;\n        this.source = source;\n    }\n\n    (0, _createClass3.default)(Paginator, [{\n        key: \"nextPage\",\n\n        /**\n         * Request next page.\n         * Does not modify existing object\n         * @return {Promise<Paginator>}\n         */\n        value: function nextPage() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.hasNextPage) {\n                                    _context.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('No next page');\n\n                            case 2:\n                                return _context.abrupt(\"return\", this.source(this.nextToken));\n\n                            case 3:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Request previous page.\n         * Does not modify existing object\n         * @return {Promise<Paginator>}\n         */\n\n    }, {\n        key: \"prevPage\",\n        value: function prevPage() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (this.hasPrevPage) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('No previous page');\n\n                            case 2:\n                                return _context2.abrupt(\"return\", this.source(this.prevToken));\n\n                            case 3:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n    }, {\n        key: \"hasNextPage\",\n        get: function get() {\n            return !!this.nextToken;\n        }\n    }, {\n        key: \"hasPrevPage\",\n        get: function get() {\n            return !!this.prevToken;\n        }\n    }]);\n    return Paginator;\n}();\n\nexports.Paginator = Paginator;\nexports.default = Paginator;\n\n/***/ }),\n\n/***/ \"Nf0/\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(Buffer) {/**\nxxHash implementation in pure Javascript\n\nCopyright (C) 2013, Pierre Curto\nMIT license\n*/\nvar UINT32 = __webpack_require__(\"P5jY\").UINT32;\n\n/*\n\tMerged this sequence of method calls as it speeds up\n\tthe calculations by a factor of 2\n */\n// this.v1.add( other.multiply(PRIME32_2) ).rotl(13).multiply(PRIME32_1);\nUINT32.prototype.xxh_update = function (low, high) {\n\tvar b00 = PRIME32_2._low;\n\tvar b16 = PRIME32_2._high;\n\n\tvar c16, c00;\n\tc00 = low * b00;\n\tc16 = c00 >>> 16;\n\n\tc16 += high * b00;\n\tc16 &= 0xFFFF; // Not required but improves performance\n\tc16 += low * b16;\n\n\tvar a00 = this._low + (c00 & 0xFFFF);\n\tvar a16 = a00 >>> 16;\n\n\ta16 += this._high + (c16 & 0xFFFF);\n\n\tvar v = a16 << 16 | a00 & 0xFFFF;\n\tv = v << 13 | v >>> 19;\n\n\ta00 = v & 0xFFFF;\n\ta16 = v >>> 16;\n\n\tb00 = PRIME32_1._low;\n\tb16 = PRIME32_1._high;\n\n\tc00 = a00 * b00;\n\tc16 = c00 >>> 16;\n\n\tc16 += a16 * b00;\n\tc16 &= 0xFFFF; // Not required but improves performance\n\tc16 += a00 * b16;\n\n\tthis._low = c00 & 0xFFFF;\n\tthis._high = c16 & 0xFFFF;\n};\n\n/*\n * Constants\n */\nvar PRIME32_1 = UINT32('2654435761');\nvar PRIME32_2 = UINT32('2246822519');\nvar PRIME32_3 = UINT32('3266489917');\nvar PRIME32_4 = UINT32('668265263');\nvar PRIME32_5 = UINT32('374761393');\n\n/**\n* Convert string to proper UTF-8 array\n* @param str Input string\n* @returns {Uint8Array} UTF8 array is returned as uint8 array\n*/\nfunction toUTF8Array(str) {\n\tvar utf8 = [];\n\tfor (var i = 0, n = str.length; i < n; i++) {\n\t\tvar charcode = str.charCodeAt(i);\n\t\tif (charcode < 0x80) utf8.push(charcode);else if (charcode < 0x800) {\n\t\t\tutf8.push(0xc0 | charcode >> 6, 0x80 | charcode & 0x3f);\n\t\t} else if (charcode < 0xd800 || charcode >= 0xe000) {\n\t\t\tutf8.push(0xe0 | charcode >> 12, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n\t\t}\n\t\t// surrogate pair\n\t\telse {\n\t\t\t\ti++;\n\t\t\t\t// UTF-16 encodes 0x10000-0x10FFFF by\n\t\t\t\t// subtracting 0x10000 and splitting the\n\t\t\t\t// 20 bits of 0x0-0xFFFFF into two halves\n\t\t\t\tcharcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n\t\t\t\tutf8.push(0xf0 | charcode >> 18, 0x80 | charcode >> 12 & 0x3f, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n\t\t\t}\n\t}\n\n\treturn new Uint8Array(utf8);\n}\n\n/**\n * XXH object used as a constructor or a function\n * @constructor\n * or\n * @param {Object|String} input data\n * @param {Number|UINT32} seed\n * @return ThisExpression\n * or\n * @return {UINT32} xxHash\n */\nfunction XXH() {\n\tif (arguments.length == 2) return new XXH(arguments[1]).update(arguments[0]).digest();\n\n\tif (!(this instanceof XXH)) return new XXH(arguments[0]);\n\n\tinit.call(this, arguments[0]);\n}\n\n/**\n * Initialize the XXH instance with the given seed\n * @method init\n * @param {Number|Object} seed as a number or an unsigned 32 bits integer\n * @return ThisExpression\n */\nfunction init(seed) {\n\tthis.seed = seed instanceof UINT32 ? seed.clone() : UINT32(seed);\n\tthis.v1 = this.seed.clone().add(PRIME32_1).add(PRIME32_2);\n\tthis.v2 = this.seed.clone().add(PRIME32_2);\n\tthis.v3 = this.seed.clone();\n\tthis.v4 = this.seed.clone().subtract(PRIME32_1);\n\tthis.total_len = 0;\n\tthis.memsize = 0;\n\tthis.memory = null;\n\n\treturn this;\n}\nXXH.prototype.init = init;\n\n/**\n * Add data to be computed for the XXH hash\n * @method update\n * @param {String|Buffer|ArrayBuffer} input as a string or nodejs Buffer or ArrayBuffer\n * @return ThisExpression\n */\nXXH.prototype.update = function (input) {\n\tvar isString = typeof input == 'string';\n\tvar isArrayBuffer;\n\n\t// Convert all strings to utf-8 first (issue #5)\n\tif (isString) {\n\t\tinput = toUTF8Array(input);\n\t\tisString = false;\n\t\tisArrayBuffer = true;\n\t}\n\n\tif (typeof ArrayBuffer !== \"undefined\" && input instanceof ArrayBuffer) {\n\t\tisArrayBuffer = true;\n\t\tinput = new Uint8Array(input);\n\t}\n\n\tvar p = 0;\n\tvar len = input.length;\n\tvar bEnd = p + len;\n\n\tif (len == 0) return this;\n\n\tthis.total_len += len;\n\n\tif (this.memsize == 0) {\n\t\tif (isString) {\n\t\t\tthis.memory = '';\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory = new Uint8Array(16);\n\t\t} else {\n\t\t\tthis.memory = new Buffer(16);\n\t\t}\n\t}\n\n\tif (this.memsize + len < 16) // fill in tmp buffer\n\t\t{\n\t\t\t// XXH_memcpy(this.memory + this.memsize, input, len)\n\t\t\tif (isString) {\n\t\t\t\tthis.memory += input;\n\t\t\t} else if (isArrayBuffer) {\n\t\t\t\tthis.memory.set(input.subarray(0, len), this.memsize);\n\t\t\t} else {\n\t\t\t\tinput.copy(this.memory, this.memsize, 0, len);\n\t\t\t}\n\n\t\t\tthis.memsize += len;\n\t\t\treturn this;\n\t\t}\n\n\tif (this.memsize > 0) // some data left from previous update\n\t\t{\n\t\t\t// XXH_memcpy(this.memory + this.memsize, input, 16-this.memsize);\n\t\t\tif (isString) {\n\t\t\t\tthis.memory += input.slice(0, 16 - this.memsize);\n\t\t\t} else if (isArrayBuffer) {\n\t\t\t\tthis.memory.set(input.subarray(0, 16 - this.memsize), this.memsize);\n\t\t\t} else {\n\t\t\t\tinput.copy(this.memory, this.memsize, 0, 16 - this.memsize);\n\t\t\t}\n\n\t\t\tvar p32 = 0;\n\t\t\tif (isString) {\n\t\t\t\tthis.v1.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2));\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v2.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2));\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v3.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2));\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v4.xxh_update(this.memory.charCodeAt(p32 + 1) << 8 | this.memory.charCodeAt(p32), this.memory.charCodeAt(p32 + 3) << 8 | this.memory.charCodeAt(p32 + 2));\n\t\t\t} else {\n\t\t\t\tthis.v1.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]);\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v2.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]);\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v3.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]);\n\t\t\t\tp32 += 4;\n\t\t\t\tthis.v4.xxh_update(this.memory[p32 + 1] << 8 | this.memory[p32], this.memory[p32 + 3] << 8 | this.memory[p32 + 2]);\n\t\t\t}\n\n\t\t\tp += 16 - this.memsize;\n\t\t\tthis.memsize = 0;\n\t\t\tif (isString) this.memory = '';\n\t\t}\n\n\tif (p <= bEnd - 16) {\n\t\tvar limit = bEnd - 16;\n\n\t\tdo {\n\t\t\tif (isString) {\n\t\t\t\tthis.v1.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2));\n\t\t\t\tp += 4;\n\t\t\t\tthis.v2.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2));\n\t\t\t\tp += 4;\n\t\t\t\tthis.v3.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2));\n\t\t\t\tp += 4;\n\t\t\t\tthis.v4.xxh_update(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2));\n\t\t\t} else {\n\t\t\t\tthis.v1.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]);\n\t\t\t\tp += 4;\n\t\t\t\tthis.v2.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]);\n\t\t\t\tp += 4;\n\t\t\t\tthis.v3.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]);\n\t\t\t\tp += 4;\n\t\t\t\tthis.v4.xxh_update(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]);\n\t\t\t}\n\t\t\tp += 4;\n\t\t} while (p <= limit);\n\t}\n\n\tif (p < bEnd) {\n\t\t// XXH_memcpy(this.memory, p, bEnd-p);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(p);\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set(input.subarray(p, bEnd), this.memsize);\n\t\t} else {\n\t\t\tinput.copy(this.memory, this.memsize, p, bEnd);\n\t\t}\n\n\t\tthis.memsize = bEnd - p;\n\t}\n\n\treturn this;\n};\n\n/**\n * Finalize the XXH computation. The XXH instance is ready for reuse for the given seed\n * @method digest\n * @return {UINT32} xxHash\n */\nXXH.prototype.digest = function () {\n\tvar input = this.memory;\n\tvar isString = typeof input == 'string';\n\tvar p = 0;\n\tvar bEnd = this.memsize;\n\tvar h32, h;\n\tvar u = new UINT32();\n\n\tif (this.total_len >= 16) {\n\t\th32 = this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18))));\n\t} else {\n\t\th32 = this.seed.clone().add(PRIME32_5);\n\t}\n\n\th32.add(u.fromNumber(this.total_len));\n\n\twhile (p <= bEnd - 4) {\n\t\tif (isString) {\n\t\t\tu.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2));\n\t\t} else {\n\t\t\tu.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2]);\n\t\t}\n\t\th32.add(u.multiply(PRIME32_3)).rotl(17).multiply(PRIME32_4);\n\t\tp += 4;\n\t}\n\n\twhile (p < bEnd) {\n\t\tu.fromBits(isString ? input.charCodeAt(p++) : input[p++], 0);\n\t\th32.add(u.multiply(PRIME32_5)).rotl(11).multiply(PRIME32_1);\n\t}\n\n\th = h32.clone().shiftRight(15);\n\th32.xor(h).multiply(PRIME32_2);\n\n\th = h32.clone().shiftRight(13);\n\th32.xor(h).multiply(PRIME32_3);\n\n\th = h32.clone().shiftRight(16);\n\th32.xor(h);\n\n\t// Reset the state\n\tthis.init(this.seed);\n\n\treturn h32;\n};\n\nmodule.exports = XXH;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"peL6\").Buffer))\n\n/***/ }),\n\n/***/ \"Ni5N\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(\"B9Lq\"),\n    hiddenKeys = __webpack_require__(\"KxjL\").concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n/***/ }),\n\n/***/ \"O35A\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"i+u+\");\n__webpack_require__(\"N484\");\nmodule.exports = __webpack_require__(\"zKeE\").Array.from;\n\n/***/ }),\n\n/***/ \"O6kh\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hide = __webpack_require__(\"akPY\");\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];else hide(target, key, src[key]);\n  }return target;\n};\n\n/***/ }),\n\n/***/ \"OFjk\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(Buffer) {/**\nxxHash64 implementation in pure Javascript\n\nCopyright (C) 2016, Pierre Curto\nMIT license\n*/\nvar UINT64 = __webpack_require__(\"P5jY\").UINT64;\n\n/*\n * Constants\n */\nvar PRIME64_1 = UINT64('11400714785074694791');\nvar PRIME64_2 = UINT64('14029467366897019727');\nvar PRIME64_3 = UINT64('1609587929392839161');\nvar PRIME64_4 = UINT64('9650029242287828579');\nvar PRIME64_5 = UINT64('2870177450012600261');\n\n/**\n* Convert string to proper UTF-8 array\n* @param str Input string\n* @returns {Uint8Array} UTF8 array is returned as uint8 array\n*/\nfunction toUTF8Array(str) {\n\tvar utf8 = [];\n\tfor (var i = 0, n = str.length; i < n; i++) {\n\t\tvar charcode = str.charCodeAt(i);\n\t\tif (charcode < 0x80) utf8.push(charcode);else if (charcode < 0x800) {\n\t\t\tutf8.push(0xc0 | charcode >> 6, 0x80 | charcode & 0x3f);\n\t\t} else if (charcode < 0xd800 || charcode >= 0xe000) {\n\t\t\tutf8.push(0xe0 | charcode >> 12, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n\t\t}\n\t\t// surrogate pair\n\t\telse {\n\t\t\t\ti++;\n\t\t\t\t// UTF-16 encodes 0x10000-0x10FFFF by\n\t\t\t\t// subtracting 0x10000 and splitting the\n\t\t\t\t// 20 bits of 0x0-0xFFFFF into two halves\n\t\t\t\tcharcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n\t\t\t\tutf8.push(0xf0 | charcode >> 18, 0x80 | charcode >> 12 & 0x3f, 0x80 | charcode >> 6 & 0x3f, 0x80 | charcode & 0x3f);\n\t\t\t}\n\t}\n\n\treturn new Uint8Array(utf8);\n}\n\n/**\n * XXH64 object used as a constructor or a function\n * @constructor\n * or\n * @param {Object|String} input data\n * @param {Number|UINT64} seed\n * @return ThisExpression\n * or\n * @return {UINT64} xxHash\n */\nfunction XXH64() {\n\tif (arguments.length == 2) return new XXH64(arguments[1]).update(arguments[0]).digest();\n\n\tif (!(this instanceof XXH64)) return new XXH64(arguments[0]);\n\n\tinit.call(this, arguments[0]);\n}\n\n/**\n * Initialize the XXH64 instance with the given seed\n * @method init\n * @param {Number|Object} seed as a number or an unsigned 32 bits integer\n * @return ThisExpression\n */\nfunction init(seed) {\n\tthis.seed = seed instanceof UINT64 ? seed.clone() : UINT64(seed);\n\tthis.v1 = this.seed.clone().add(PRIME64_1).add(PRIME64_2);\n\tthis.v2 = this.seed.clone().add(PRIME64_2);\n\tthis.v3 = this.seed.clone();\n\tthis.v4 = this.seed.clone().subtract(PRIME64_1);\n\tthis.total_len = 0;\n\tthis.memsize = 0;\n\tthis.memory = null;\n\n\treturn this;\n}\nXXH64.prototype.init = init;\n\n/**\n * Add data to be computed for the XXH64 hash\n * @method update\n * @param {String|Buffer|ArrayBuffer} input as a string or nodejs Buffer or ArrayBuffer\n * @return ThisExpression\n */\nXXH64.prototype.update = function (input) {\n\tvar isString = typeof input == 'string';\n\tvar isArrayBuffer;\n\n\t// Convert all strings to utf-8 first (issue #5)\n\tif (isString) {\n\t\tinput = toUTF8Array(input);\n\t\tisString = false;\n\t\tisArrayBuffer = true;\n\t}\n\n\tif (typeof ArrayBuffer !== \"undefined\" && input instanceof ArrayBuffer) {\n\t\tisArrayBuffer = true;\n\t\tinput = new Uint8Array(input);\n\t}\n\n\tvar p = 0;\n\tvar len = input.length;\n\tvar bEnd = p + len;\n\n\tif (len == 0) return this;\n\n\tthis.total_len += len;\n\n\tif (this.memsize == 0) {\n\t\tif (isString) {\n\t\t\tthis.memory = '';\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory = new Uint8Array(32);\n\t\t} else {\n\t\t\tthis.memory = new Buffer(32);\n\t\t}\n\t}\n\n\tif (this.memsize + len < 32) // fill in tmp buffer\n\t\t{\n\t\t\t// XXH64_memcpy(this.memory + this.memsize, input, len)\n\t\t\tif (isString) {\n\t\t\t\tthis.memory += input;\n\t\t\t} else if (isArrayBuffer) {\n\t\t\t\tthis.memory.set(input.subarray(0, len), this.memsize);\n\t\t\t} else {\n\t\t\t\tinput.copy(this.memory, this.memsize, 0, len);\n\t\t\t}\n\n\t\t\tthis.memsize += len;\n\t\t\treturn this;\n\t\t}\n\n\tif (this.memsize > 0) // some data left from previous update\n\t\t{\n\t\t\t// XXH64_memcpy(this.memory + this.memsize, input, 16-this.memsize);\n\t\t\tif (isString) {\n\t\t\t\tthis.memory += input.slice(0, 32 - this.memsize);\n\t\t\t} else if (isArrayBuffer) {\n\t\t\t\tthis.memory.set(input.subarray(0, 32 - this.memsize), this.memsize);\n\t\t\t} else {\n\t\t\t\tinput.copy(this.memory, this.memsize, 0, 32 - this.memsize);\n\t\t\t}\n\n\t\t\tvar p64 = 0;\n\t\t\tif (isString) {\n\t\t\t\tvar other;\n\t\t\t\tother = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6));\n\t\t\t\tthis.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6));\n\t\t\t\tthis.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6));\n\t\t\t\tthis.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory.charCodeAt(p64 + 1) << 8 | this.memory.charCodeAt(p64), this.memory.charCodeAt(p64 + 3) << 8 | this.memory.charCodeAt(p64 + 2), this.memory.charCodeAt(p64 + 5) << 8 | this.memory.charCodeAt(p64 + 4), this.memory.charCodeAt(p64 + 7) << 8 | this.memory.charCodeAt(p64 + 6));\n\t\t\t\tthis.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t} else {\n\t\t\t\tvar other;\n\t\t\t\tother = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]);\n\t\t\t\tthis.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]);\n\t\t\t\tthis.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]);\n\t\t\t\tthis.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp64 += 8;\n\t\t\t\tother = UINT64(this.memory[p64 + 1] << 8 | this.memory[p64], this.memory[p64 + 3] << 8 | this.memory[p64 + 2], this.memory[p64 + 5] << 8 | this.memory[p64 + 4], this.memory[p64 + 7] << 8 | this.memory[p64 + 6]);\n\t\t\t\tthis.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t}\n\n\t\t\tp += 32 - this.memsize;\n\t\t\tthis.memsize = 0;\n\t\t\tif (isString) this.memory = '';\n\t\t}\n\n\tif (p <= bEnd - 32) {\n\t\tvar limit = bEnd - 32;\n\n\t\tdo {\n\t\t\tif (isString) {\n\t\t\t\tvar other;\n\t\t\t\tother = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6));\n\t\t\t\tthis.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6));\n\t\t\t\tthis.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6));\n\t\t\t\tthis.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6));\n\t\t\t\tthis.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t} else {\n\t\t\t\tvar other;\n\t\t\t\tother = UINT64(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]);\n\t\t\t\tthis.v1.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]);\n\t\t\t\tthis.v2.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]);\n\t\t\t\tthis.v3.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8;\n\t\t\t\tother = UINT64(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]);\n\t\t\t\tthis.v4.add(other.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);\n\t\t\t}\n\t\t\tp += 8;\n\t\t} while (p <= limit);\n\t}\n\n\tif (p < bEnd) {\n\t\t// XXH64_memcpy(this.memory, p, bEnd-p);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(p);\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set(input.subarray(p, bEnd), this.memsize);\n\t\t} else {\n\t\t\tinput.copy(this.memory, this.memsize, p, bEnd);\n\t\t}\n\n\t\tthis.memsize = bEnd - p;\n\t}\n\n\treturn this;\n};\n\n/**\n * Finalize the XXH64 computation. The XXH64 instance is ready for reuse for the given seed\n * @method digest\n * @return {UINT64} xxHash\n */\nXXH64.prototype.digest = function () {\n\tvar input = this.memory;\n\tvar isString = typeof input == 'string';\n\tvar p = 0;\n\tvar bEnd = this.memsize;\n\tvar h64, h;\n\tvar u = new UINT64();\n\n\tif (this.total_len >= 32) {\n\t\th64 = this.v1.clone().rotl(1);\n\t\th64.add(this.v2.clone().rotl(7));\n\t\th64.add(this.v3.clone().rotl(12));\n\t\th64.add(this.v4.clone().rotl(18));\n\n\t\th64.xor(this.v1.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1));\n\t\th64.multiply(PRIME64_1).add(PRIME64_4);\n\n\t\th64.xor(this.v2.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1));\n\t\th64.multiply(PRIME64_1).add(PRIME64_4);\n\n\t\th64.xor(this.v3.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1));\n\t\th64.multiply(PRIME64_1).add(PRIME64_4);\n\n\t\th64.xor(this.v4.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1));\n\t\th64.multiply(PRIME64_1).add(PRIME64_4);\n\t} else {\n\t\th64 = this.seed.clone().add(PRIME64_5);\n\t}\n\n\th64.add(u.fromNumber(this.total_len));\n\n\twhile (p <= bEnd - 8) {\n\t\tif (isString) {\n\t\t\tu.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), input.charCodeAt(p + 5) << 8 | input.charCodeAt(p + 4), input.charCodeAt(p + 7) << 8 | input.charCodeAt(p + 6));\n\t\t} else {\n\t\t\tu.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], input[p + 5] << 8 | input[p + 4], input[p + 7] << 8 | input[p + 6]);\n\t\t}\n\t\tu.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1);\n\t\th64.xor(u).rotl(27).multiply(PRIME64_1).add(PRIME64_4);\n\t\tp += 8;\n\t}\n\n\tif (p + 4 <= bEnd) {\n\t\tif (isString) {\n\t\t\tu.fromBits(input.charCodeAt(p + 1) << 8 | input.charCodeAt(p), input.charCodeAt(p + 3) << 8 | input.charCodeAt(p + 2), 0, 0);\n\t\t} else {\n\t\t\tu.fromBits(input[p + 1] << 8 | input[p], input[p + 3] << 8 | input[p + 2], 0, 0);\n\t\t}\n\t\th64.xor(u.multiply(PRIME64_1)).rotl(23).multiply(PRIME64_2).add(PRIME64_3);\n\t\tp += 4;\n\t}\n\n\twhile (p < bEnd) {\n\t\tu.fromBits(isString ? input.charCodeAt(p++) : input[p++], 0, 0, 0);\n\t\th64.xor(u.multiply(PRIME64_5)).rotl(11).multiply(PRIME64_1);\n\t}\n\n\th = h64.clone().shiftRight(33);\n\th64.xor(h).multiply(PRIME64_2);\n\n\th = h64.clone().shiftRight(29);\n\th64.xor(h).multiply(PRIME64_3);\n\n\th = h64.clone().shiftRight(32);\n\th64.xor(h);\n\n\t// Reset the state\n\tthis.init(this.seed);\n\n\treturn h64;\n};\n\nmodule.exports = XXH64;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"peL6\").Buffer))\n\n/***/ }),\n\n/***/ \"OLak\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar SYNC_DOCUMENT_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.document';\nvar SYNC_LIST_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.list';\nvar SYNC_MAP_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.map';\nvar SYNC_NOTIFICATION_TYPE = 'twilio.sync.event';\n/**\n * @class Router\n * @classdesc Routes all incoming messages to the consumers\n */\n\nvar Router = function () {\n    function Router(params) {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Router);\n\n        this.config = params.config;\n        this.subscriptions = params.subscriptions;\n        this.notifications = params.notifications;\n        this.notifications.subscribe(SYNC_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_DOCUMENT_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_LIST_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_MAP_NOTIFICATION_TYPE);\n        this.notifications.on('message', function (messageType, payload) {\n            return _this.onMessage(messageType, payload);\n        });\n        this.notifications.on('transportReady', function (isConnected) {\n            return _this.onConnectionStateChanged(isConnected);\n        });\n    }\n    /**\n     * Entry point for all incoming messages\n     * @param {String} type - Type of incoming message\n     * @param {Object} message - Message to route\n     */\n\n    (0, _createClass3.default)(Router, [{\n        key: \"onMessage\",\n        value: function onMessage(type, message) {\n            logger_1.default.trace('Notification type:', type, 'content:', message);\n            switch (type) {\n                case SYNC_DOCUMENT_NOTIFICATION_TYPE:\n                case SYNC_LIST_NOTIFICATION_TYPE:\n                case SYNC_MAP_NOTIFICATION_TYPE:\n                    this.subscriptions.acceptMessage(message, false);\n                    break;\n                case SYNC_NOTIFICATION_TYPE:\n                    this.subscriptions.acceptMessage(message, true);\n                    break;\n            }\n        }\n        /**\n         * Subscribe for events\n         */\n\n    }, {\n        key: \"subscribe\",\n        value: function subscribe(sid, entity) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.subscriptions.add(sid, entity);\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Unsubscribe from events\n         */\n\n    }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe(sid, entity) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return this.subscriptions.remove(sid);\n\n                            case 2:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Handle transport establishing event\n         * If we have any subscriptions - we should check object for modifications\n         */\n\n    }, {\n        key: \"onConnectionStateChanged\",\n        value: function onConnectionStateChanged(isConnected) {\n            this.subscriptions.onConnectionStateChanged(isConnected);\n        }\n    }]);\n    return Router;\n}();\n\nexports.Router = Router;\nexports.default = Router;\n\n/***/ }),\n\n/***/ \"OYXR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar addToUnscopables = __webpack_require__(\"ID6i\"),\n    step = __webpack_require__(\"xwD+\"),\n    Iterators = __webpack_require__(\"dhak\"),\n    toIObject = __webpack_require__(\"Wyka\");\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(\"uRfg\")(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0; // next index\n  this._k = kind; // kind\n  // 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t,\n      kind = this._k,\n      index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n/***/ }),\n\n/***/ \"Ocr3\":\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n/***/ }),\n\n/***/ \"P5jY\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.UINT32 = __webpack_require__(\"mc9D\");\nexports.UINT64 = __webpack_require__(\"JWsA\");\n\n/***/ }),\n\n/***/ \"PD3G\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _stringify = __webpack_require__(\"HxWs\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Deep-clone an object. Note that this does not work on object containing\n * functions.\n * @param {object} obj - the object to deep-clone\n * @returns {object}\n */\nfunction deepClone(obj) {\n    return JSON.parse((0, _stringify2.default)(obj));\n}\nexports.deepClone = deepClone;\n/**\n * Construct URI with query parameters\n */\n\nvar UriBuilder = function () {\n    function UriBuilder(base) {\n        (0, _classCallCheck3.default)(this, UriBuilder);\n\n        this.base = base;\n        this.args = new Array();\n        this.paths = new Array();\n    }\n\n    (0, _createClass3.default)(UriBuilder, [{\n        key: \"pathSegment\",\n        value: function pathSegment(name) {\n            this.paths.push(encodeURIComponent(name));\n            return this;\n        }\n    }, {\n        key: \"queryParam\",\n        value: function queryParam(name, value) {\n            if (typeof value !== 'undefined') {\n                this.args.push(encodeURIComponent(name) + '=' + encodeURIComponent(value));\n            }\n            return this;\n        }\n    }, {\n        key: \"build\",\n        value: function build() {\n            var result = this.base;\n            if (this.paths.length) {\n                result += '/' + this.paths.join('/');\n            }\n            if (this.args.length) {\n                result += '?' + this.args.join('&');\n            }\n            return result;\n        }\n    }]);\n    return UriBuilder;\n}();\n\nexports.UriBuilder = UriBuilder;\n\n/***/ }),\n\n/***/ \"PvFw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar Backoff = __webpack_require__(\"E1ih\");\nvar ExponentialBackoffStrategy = __webpack_require__(\"b1KJ\");\nvar FibonacciBackoffStrategy = __webpack_require__(\"XdV9\");\nvar FunctionCall = __webpack_require__(\"V5Fu\");\n\nmodule.exports.Backoff = Backoff;\nmodule.exports.FunctionCall = FunctionCall;\nmodule.exports.FibonacciStrategy = FibonacciBackoffStrategy;\nmodule.exports.ExponentialStrategy = ExponentialBackoffStrategy;\n\n// Constructs a Fibonacci backoff.\nmodule.exports.fibonacci = function (options) {\n    return new Backoff(new FibonacciBackoffStrategy(options));\n};\n\n// Constructs an exponential backoff.\nmodule.exports.exponential = function (options) {\n    return new Backoff(new ExponentialBackoffStrategy(options));\n};\n\n// Constructs a FunctionCall for the given function and arguments.\nmodule.exports.call = function (fn, vargs, callback) {\n    var args = Array.prototype.slice.call(arguments);\n    fn = args[0];\n    vargs = args.slice(1, args.length - 1);\n    callback = args[args.length - 1];\n    return new FunctionCall(fn, vargs, callback);\n};\n\n/***/ }),\n\n/***/ \"Q17y\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(\"zKeE\"),\n    $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) {\n  // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n/***/ }),\n\n/***/ \"QVnC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!function (global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction ||\n    // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  runtime.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function (arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n      // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n      // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n\n    return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function stop() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n}(\n// Among the various tricks for obtaining a reference to the global\n// object, this seems to be the most reliable technique that does not\n// use indirect eval (which violates Content Security Policy).\ntypeof global === \"object\" ? global : typeof window === \"object\" ? window : typeof self === \"object\" ? self : this);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"QYzI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = typeof global === \"object\" ? global : typeof window === \"object\" ? window : typeof self === \"object\" ? self : this;\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime && Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(\"QVnC\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch (e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"QlMj\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class\n * @classdesc Map item\n * Represents a data for each element in a collection\n * @alias MapItem\n * @property {String} key  - identifier of an item\n * @property {Object} value - value of an item\n */\n\nvar MapItem = function () {\n  /**\n   * @private\n   * @constructor\n   * @param {Object} data Item descriptor\n   * @param {String} data.key Item identifier\n   * @param {String} data.uri Item URI\n   * @param {Object} data.value Item data\n   */\n  function MapItem(descriptor) {\n    (0, _classCallCheck3.default)(this, MapItem);\n\n    this.descriptor = descriptor;\n  }\n\n  (0, _createClass3.default)(MapItem, [{\n    key: \"update\",\n\n    /**\n     * Update item data\n     * @param {Number} EventId Update event id\n     * @param {String} Revision Updated item revision\n     * @param {Object} Value Updated item data\n     * @private\n     */\n    value: function update(eventId, revision, value) {\n      this.descriptor.last_event_id = eventId;\n      this.descriptor.revision = revision;\n      this.descriptor.data = value;\n      return this;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      return this.descriptor.url;\n    }\n  }, {\n    key: \"revision\",\n    get: function get() {\n      return this.descriptor.revision;\n    }\n  }, {\n    key: \"lastEventId\",\n    get: function get() {\n      return this.descriptor.last_event_id;\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this.descriptor.key;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.descriptor.data;\n    }\n  }]);\n  return MapItem;\n}();\n\nexports.MapItem = MapItem;\nexports.default = MapItem;\n\n/***/ }),\n\n/***/ \"R1bg\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar platform = __webpack_require__(\"kohK\");\n\nvar ClientInfo = function ClientInfo(version) {\n    (0, _classCallCheck3.default)(this, ClientInfo);\n\n    this.sdk = 'js';\n    this.sdkVer = version;\n    this.os = platform.os.family;\n    this.osVer = platform.os.version;\n    this.pl = platform.name;\n    this.plVer = platform.version;\n};\n\nexports.ClientInfo = ClientInfo;\nexports.default = ClientInfo;\n\n/***/ }),\n\n/***/ \"R6c1\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(\"6MLN\") && !__webpack_require__(\"wLcK\")(function () {\n  return Object.defineProperty(__webpack_require__(\"9kxq\")('div'), 'a', { get: function get() {\n      return 7;\n    } }).a != 7;\n});\n\n/***/ }),\n\n/***/ \"REa7\":\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/***/ }),\n\n/***/ \"S7IM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(\"MpYs\"),\n    min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n/***/ }),\n\n/***/ \"SKjJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar strong = __webpack_require__(\"AePr\");\n\n// 23.1 Map Objects\nmodule.exports = __webpack_require__(\"cYD/\")('Map', function (get) {\n  return function Map() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n/***/ }),\n\n/***/ \"ShN9\":\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n/***/ }),\n\n/***/ \"T4f3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _assign = __webpack_require__(\"gc0D\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/***/ }),\n\n/***/ \"T51w\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n})(this, function () {\n    \"use strict\";\n\n    var noop = function noop() {};\n    var undefinedType = \"undefined\";\n\n    function realMethod(methodName) {\n        if (typeof console === undefinedType) {\n            return false; // We can't build a real method without a console to log to\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function () {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // these private functions always need `this` to be set properly\n\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = i < level ? noop : this.methodFactory(methodName, level, loggerName);\n        }\n    }\n\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) || enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    var logMethods = [\"trace\", \"debug\", \"info\", \"warn\", \"error\"];\n\n    function Logger(name, defaultLevel, factory) {\n        var self = this;\n        var currentLevel;\n        var storageKey = \"loglevel\";\n        if (name) {\n            storageKey += \":\" + name;\n        }\n\n        function persistLevelIfPossible(levelNum) {\n            var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n            // Use localStorage if available\n            try {\n                window.localStorage[storageKey] = levelName;\n                return;\n            } catch (ignore) {}\n\n            // Use session cookie as fallback\n            try {\n                window.document.cookie = encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n            } catch (ignore) {}\n        }\n\n        function getPersistedLevel() {\n            var storedLevel;\n\n            try {\n                storedLevel = window.localStorage[storageKey];\n            } catch (ignore) {}\n\n            if (typeof storedLevel === undefinedType) {\n                try {\n                    var cookie = window.document.cookie;\n                    var location = cookie.indexOf(encodeURIComponent(storageKey) + \"=\");\n                    if (location) {\n                        storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                    }\n                } catch (ignore) {}\n            }\n\n            // If the stored level is not valid, treat it as if nothing was stored.\n            if (self.levels[storedLevel] === undefined) {\n                storedLevel = undefined;\n            }\n\n            return storedLevel;\n        }\n\n        /*\n         *\n         * Public API\n         *\n         */\n\n        self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n            \"ERROR\": 4, \"SILENT\": 5 };\n\n        self.methodFactory = factory || defaultMethodFactory;\n\n        self.getLevel = function () {\n            return currentLevel;\n        };\n\n        self.setLevel = function (level, persist) {\n            if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n                level = self.levels[level.toUpperCase()];\n            }\n            if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n                currentLevel = level;\n                if (persist !== false) {\n                    // defaults to true\n                    persistLevelIfPossible(level);\n                }\n                replaceLoggingMethods.call(self, level, name);\n                if (typeof console === undefinedType && level < self.levels.SILENT) {\n                    return \"No console available for logging\";\n                }\n            } else {\n                throw \"log.setLevel() called with invalid level: \" + level;\n            }\n        };\n\n        self.setDefaultLevel = function (level) {\n            if (!getPersistedLevel()) {\n                self.setLevel(level, false);\n            }\n        };\n\n        self.enableAll = function (persist) {\n            self.setLevel(self.levels.TRACE, persist);\n        };\n\n        self.disableAll = function (persist) {\n            self.setLevel(self.levels.SILENT, persist);\n        };\n\n        // Initialize with the right level\n        var initialLevel = getPersistedLevel();\n        if (initialLevel == null) {\n            initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n        }\n        self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Package-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = typeof window !== undefinedType ? window.log : undefined;\n    defaultLogger.noConflict = function () {\n        if (typeof window !== undefinedType && window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    return defaultLogger;\n});\n\n/***/ }),\n\n/***/ \"TD/Z\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = __webpack_require__(\"7tZR\");\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n/***/ }),\n\n/***/ \"TEgB\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"COf8\");\n__webpack_require__(\"i+u+\");\nmodule.exports = __webpack_require__(\"By4a\");\n\n/***/ }),\n\n/***/ \"TNJq\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(\"zotD\"),\n    dPs = __webpack_require__(\"gjjs\"),\n    enumBugKeys = __webpack_require__(\"KxjL\"),\n    IE_PROTO = __webpack_require__(\"/wuY\")('IE_PROTO'),\n    Empty = function Empty() {/* empty */},\n    PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar _createDict = function createDict() {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(\"9kxq\")('iframe'),\n      i = enumBugKeys.length,\n      lt = '<',\n      gt = '>',\n      iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(\"ebIA\").appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  _createDict = iframeDocument.F;\n  while (i--) {\n    delete _createDict[PROTOTYPE][enumBugKeys[i]];\n  }return _createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = _createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n/***/ }),\n\n/***/ \"TpZJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _configuration = __webpack_require__(\"zWNa\");\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = __webpack_require__(\"EwCr\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _bottleneck = __webpack_require__(\"y9oC\");\n\nvar _bottleneck2 = _interopRequireDefault(_bottleneck);\n\nvar _registrar = __webpack_require__(\"E07s\");\n\nvar _registrar2 = _interopRequireDefault(_registrar);\n\nvar _twilsock = __webpack_require__(\"0Zys\");\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nvar _twilioTransport = __webpack_require__(\"JE0K\");\n\nvar _twilioTransport2 = _interopRequireDefault(_twilioTransport);\n\nvar _twilioEmsClient = __webpack_require__(\"LUBQ\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction limit(fn, to, per) {\n  // overflow since no token is passed to arguments\n  var limiter = new _bottleneck2.default(to, per, 1, _bottleneck2.default.strategy.LEAK);\n  return function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift(fn);\n    return limiter.schedule.apply(limiter, args);\n  };\n}\n\n/**\n * @class\n * @alias Notifications\n * @classdesc The helper library for the notification service.\n * Provides high level api for creating and managing notification subscriptions and receiving messages\n * Creates the instance of Notification helper library\n *\n * @constructor\n * @param {string} token - Twilio access token\n * @param {Notifications#ClientOptions} options - Options to customize client behavior\n */\n\nvar Client = function (_EventEmitter) {\n  (0, _inherits3.default)(Client, _EventEmitter);\n\n  function Client(fpaToken, options) {\n    (0, _classCallCheck3.default)(this, Client);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Client.__proto__ || (0, _getPrototypeOf2.default)(Client)).call(this));\n\n    if (!fpaToken) {\n      throw new Error('Token is required for Notifications client');\n    }\n\n    options = options || {};\n\n    options.logLevel = options.logLevel || 'error';\n    _logger2.default.setLevel(options.logLevel);\n\n    var minTokenRefreshInterval = options.minTokenRefreshInterval || 10000;\n    var productId = options.productId || 'notifications';\n\n    options.twilsockClient = options.twilsockClient || new _twilsock2.default(fpaToken, options);\n    options.transport = options.transport || new _twilioTransport2.default(options.twilsockClient);\n    options.emsClient = options.emsClient || new _twilioEmsClient.EMSClient(options);\n\n    var twilsock = options.twilsockClient;\n    var transport = options.transport;\n\n    var reliableTransportState = {\n      overall: false,\n      transport: false,\n      registration: false,\n      lastEmitted: null\n    };\n\n    var config = new _configuration2.default(null, options);\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _emsClient: { value: options.emsClient },\n      _registrar: { value: new _registrar2.default(productId, transport, twilsock, config) },\n      _twilsock: { value: twilsock },\n      _reliableTransportState: { value: reliableTransportState },\n\n      updateToken: { value: limit(_this._updateToken.bind(_this), 1, minTokenRefreshInterval), enumerable: true },\n      connectionState: {\n        get: function get() {\n          if (_this._twilsock.state === 'disconnected') {\n            return 'disconnected';\n          } else if (_this._twilsock.state === 'disconnecting') {\n            return 'disconnecting';\n          } else if (_this._twilsock.state === 'connected' && _this._reliableTransportState.registration) {\n            return 'connected';\n          } else if (_this._twilsock.state === 'rejected') {\n            return 'denied';\n          }\n\n          return 'connecting';\n        }\n      }\n    });\n\n    _this._emsClient.setToken(fpaToken).then(function (response) {\n      _this._config.updateToken(response.token);\n      _this._registrar.updateToken();\n    }).catch(function (e) {\n      _logger2.default.warn('Failed to set token', e);\n    });\n\n    _this._onTransportStateChange(_this._twilsock.connected);\n\n    _this._registrar.on('transportReady', function (state) {\n      _this._onRegistrationStateChange(state ? 'registered' : '');\n    });\n    _this._registrar.on('stateChanged', function (state) {\n      _this._onRegistrationStateChange(state);\n    });\n    _this._registrar.on('needReliableTransport', _this._onNeedReliableTransport.bind(_this));\n\n    _this._twilsock.on('message', function (type, message) {\n      return _this._routeMessage(type, message);\n    });\n    _this._twilsock.on('connected', function (notificationId) {\n      _this._onTransportStateChange(true);\n      _this._registrar.setNotificationId('twilsock', notificationId);\n    });\n    _this._twilsock.on('disconnected', function () {\n      _this._onTransportStateChange(false);\n    });\n    return _this;\n  }\n\n  /**\n   * Routes messages to the external subscribers\n   * @private\n   */\n\n  (0, _createClass3.default)(Client, [{\n    key: '_routeMessage',\n    value: function _routeMessage(type, message) {\n      _logger2.default.trace('Message arrived: ', type, message);\n      this.emit('message', type, message);\n    }\n  }, {\n    key: '_onNeedReliableTransport',\n    value: function _onNeedReliableTransport(isNeeded) {\n      if (isNeeded) {\n        this._twilsock.connect();\n      } else {\n        this._twilsock.disconnect();\n      }\n    }\n  }, {\n    key: '_onRegistrationStateChange',\n    value: function _onRegistrationStateChange(state) {\n      this._reliableTransportState.registration = state === 'registered';\n      this._updateTransportState();\n    }\n  }, {\n    key: '_onTransportStateChange',\n    value: function _onTransportStateChange(connected) {\n      this._reliableTransportState.transport = connected;\n      this._updateTransportState();\n    }\n  }, {\n    key: '_updateTransportState',\n    value: function _updateTransportState() {\n      var overallState = this._reliableTransportState.transport && this._reliableTransportState.registration;\n\n      if (this._reliableTransportState.overall !== overallState) {\n        this._reliableTransportState.overall = overallState;\n\n        _logger2.default.info('Transport ready ' + overallState);\n        this.emit('transportReady', overallState);\n      }\n\n      if (this._reliableTransportState.lastEmitted !== this.connectionState) {\n        this._reliableTransportState.lastEmitted = this.connectionState;\n        this.emit('connectionStateChanged', this.connectionState);\n      }\n    }\n\n    /**\n     * Adds the subscription for the given message type\n     * @param {string} messageType The type of message that you want to receive\n     * @param {string} channelType. Supported are 'twilsock', 'gcm' and 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType, channelType) {\n      channelType = channelType || 'twilsock';\n      _logger2.default.trace('Add subscriptions for message type: ', messageType, channelType);\n\n      return this._registrar.subscribe(messageType, channelType);\n    }\n\n    /**\n     * Remove the subscription for the particular message type\n     * @param {string} messageType The type of message that you don't want to receive anymore\n     * @param {string} channelType. Supported are 'twilsock', 'gcm' and 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType, channelType) {\n      channelType = channelType || 'twilsock';\n      _logger2.default.trace('Remove subscriptions for message type: ', messageType, channelType);\n\n      return this._registrar.unsubscribe(messageType, channelType);\n    }\n\n    /**\n     * Handle incoming push notification.\n     * Client application should call this method when it receives push notifications and pass the received data\n     * @param {Object} msg - push message object\n     * @public\n     */\n\n  }, {\n    key: 'handlePushNotification',\n    value: function handlePushNotification(msg) {\n      _logger2.default.warn('Push message passed, but no functionality implemented yet: ' + msg);\n    }\n\n    /**\n     * Set GCM/FCM token to enable application register for a push messages\n     * @param {string} gcmToken/fcmToken Token received from GCM/FCM system\n     * @public\n     */\n\n  }, {\n    key: 'setPushRegistrationId',\n    value: function setPushRegistrationId(registrationId, type) {\n      this._registrar.setNotificationId(type || 'gcm', registrationId);\n    }\n\n    /**\n     * Updates auth token for registration\n     * @param {string} token Authentication token for registrations\n     * @alias updateToken\n     * @public\n     */\n\n  }, {\n    key: '_updateToken',\n    value: function _updateToken(fpaToken) {\n      var _this2 = this;\n\n      _logger2.default.info('authTokenUpdated');\n      if (this._fpaToken === fpaToken) {\n        return _promise2.default.resolve();\n      }\n\n      this._twilsock.updateToken(fpaToken);\n      return this._emsClient.setToken(fpaToken).then(function (response) {\n        return response.token;\n      }).then(function (token) {\n        _this2._config.updateToken(token);\n        _this2._registrar.updateToken();\n      });\n    }\n  }]);\n  return Client;\n}(_events2.default);\n\n/**\n * Fired when new message arrived.\n * @param {Object} message`\n * @event NotificationsClient#message\n */\n\n/**\n * Fired when transport state has changed\n * @param {boolean} transport state\n * @event NotificationsClient#transportReady\n */\n\n/**\n * Fired when transport state has been changed\n * @param {string} transport state\n * @event NotificationsClient#connectionStateChanged\n */\n\n/**\n * These options can be passed to Client constructor\n * @typedef {Object} Notifications#ClientOptions\n * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n */\n\nexports.default = Client;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"U72i\":\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n/***/ }),\n\n/***/ \"Ug9I\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(\"NB7d\")('wks'),\n    uid = __webpack_require__(\"X6va\"),\n    Symbol = __webpack_require__(\"i1Q6\").Symbol,\n    USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] = USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n/***/ }),\n\n/***/ \"V5Fu\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = __webpack_require__(\"FRpO\");\nvar precond = __webpack_require__(\"Dygy\");\nvar util = __webpack_require__(\"gfUn\");\n\nvar Backoff = __webpack_require__(\"E1ih\");\nvar FibonacciBackoffStrategy = __webpack_require__(\"XdV9\");\n\n// Wraps a function to be called in a backoff loop.\nfunction FunctionCall(fn, args, callback) {\n    events.EventEmitter.call(this);\n\n    precond.checkIsFunction(fn, 'Expected fn to be a function.');\n    precond.checkIsArray(args, 'Expected args to be an array.');\n    precond.checkIsFunction(callback, 'Expected callback to be a function.');\n\n    this.function_ = fn;\n    this.arguments_ = args;\n    this.callback_ = callback;\n    this.lastResult_ = [];\n    this.numRetries_ = 0;\n\n    this.backoff_ = null;\n    this.strategy_ = null;\n    this.failAfter_ = -1;\n    this.retryPredicate_ = FunctionCall.DEFAULT_RETRY_PREDICATE_;\n\n    this.state_ = FunctionCall.State_.PENDING;\n}\nutil.inherits(FunctionCall, events.EventEmitter);\n\n// States in which the call can be.\nFunctionCall.State_ = {\n    // Call isn't started yet.\n    PENDING: 0,\n    // Call is in progress.\n    RUNNING: 1,\n    // Call completed successfully which means that either the wrapped function\n    // returned successfully or the maximal number of backoffs was reached.\n    COMPLETED: 2,\n    // The call was aborted.\n    ABORTED: 3\n};\n\n// The default retry predicate which considers any error as retriable.\nFunctionCall.DEFAULT_RETRY_PREDICATE_ = function (err) {\n    return true;\n};\n\n// Checks whether the call is pending.\nFunctionCall.prototype.isPending = function () {\n    return this.state_ == FunctionCall.State_.PENDING;\n};\n\n// Checks whether the call is in progress.\nFunctionCall.prototype.isRunning = function () {\n    return this.state_ == FunctionCall.State_.RUNNING;\n};\n\n// Checks whether the call is completed.\nFunctionCall.prototype.isCompleted = function () {\n    return this.state_ == FunctionCall.State_.COMPLETED;\n};\n\n// Checks whether the call is aborted.\nFunctionCall.prototype.isAborted = function () {\n    return this.state_ == FunctionCall.State_.ABORTED;\n};\n\n// Sets the backoff strategy to use. Can only be called before the call is\n// started otherwise an exception will be thrown.\nFunctionCall.prototype.setStrategy = function (strategy) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.strategy_ = strategy;\n    return this; // Return this for chaining.\n};\n\n// Sets the predicate which will be used to determine whether the errors\n// returned from the wrapped function should be retried or not, e.g. a\n// network error would be retriable while a type error would stop the\n// function call.\nFunctionCall.prototype.retryIf = function (retryPredicate) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.retryPredicate_ = retryPredicate;\n    return this;\n};\n\n// Returns all intermediary results returned by the wrapped function since\n// the initial call.\nFunctionCall.prototype.getLastResult = function () {\n    return this.lastResult_.concat();\n};\n\n// Returns the number of times the wrapped function call was retried.\nFunctionCall.prototype.getNumRetries = function () {\n    return this.numRetries_;\n};\n\n// Sets the backoff limit.\nFunctionCall.prototype.failAfter = function (maxNumberOfRetry) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.failAfter_ = maxNumberOfRetry;\n    return this; // Return this for chaining.\n};\n\n// Aborts the call.\nFunctionCall.prototype.abort = function () {\n    if (this.isCompleted() || this.isAborted()) {\n        return;\n    }\n\n    if (this.isRunning()) {\n        this.backoff_.reset();\n    }\n\n    this.state_ = FunctionCall.State_.ABORTED;\n    this.lastResult_ = [new Error('Backoff aborted.')];\n    this.emit('abort');\n    this.doCallback_();\n};\n\n// Initiates the call to the wrapped function. Accepts an optional factory\n// function used to create the backoff instance; used when testing.\nFunctionCall.prototype.start = function (backoffFactory) {\n    precond.checkState(!this.isAborted(), 'FunctionCall is aborted.');\n    precond.checkState(this.isPending(), 'FunctionCall already started.');\n\n    var strategy = this.strategy_ || new FibonacciBackoffStrategy();\n\n    this.backoff_ = backoffFactory ? backoffFactory(strategy) : new Backoff(strategy);\n\n    this.backoff_.on('ready', this.doCall_.bind(this, true /* isRetry */));\n    this.backoff_.on('fail', this.doCallback_.bind(this));\n    this.backoff_.on('backoff', this.handleBackoff_.bind(this));\n\n    if (this.failAfter_ > 0) {\n        this.backoff_.failAfter(this.failAfter_);\n    }\n\n    this.state_ = FunctionCall.State_.RUNNING;\n    this.doCall_(false /* isRetry */);\n};\n\n// Calls the wrapped function.\nFunctionCall.prototype.doCall_ = function (isRetry) {\n    if (isRetry) {\n        this.numRetries_++;\n    }\n    var eventArgs = ['call'].concat(this.arguments_);\n    events.EventEmitter.prototype.emit.apply(this, eventArgs);\n    var callback = this.handleFunctionCallback_.bind(this);\n    this.function_.apply(null, this.arguments_.concat(callback));\n};\n\n// Calls the wrapped function's callback with the last result returned by the\n// wrapped function.\nFunctionCall.prototype.doCallback_ = function () {\n    this.callback_.apply(null, this.lastResult_);\n};\n\n// Handles wrapped function's completion. This method acts as a replacement\n// for the original callback function.\nFunctionCall.prototype.handleFunctionCallback_ = function () {\n    if (this.isAborted()) {\n        return;\n    }\n\n    var args = Array.prototype.slice.call(arguments);\n    this.lastResult_ = args; // Save last callback arguments.\n    events.EventEmitter.prototype.emit.apply(this, ['callback'].concat(args));\n\n    var err = args[0];\n    if (err && this.retryPredicate_(err)) {\n        this.backoff_.backoff(err);\n    } else {\n        this.state_ = FunctionCall.State_.COMPLETED;\n        this.doCallback_();\n    }\n};\n\n// Handles the backoff event by reemitting it.\nFunctionCall.prototype.handleBackoff_ = function (number, delay, err) {\n    this.emit('backoff', number, delay, err);\n};\n\nmodule.exports = FunctionCall;\n\n/***/ }),\n\n/***/ \"VOrx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(\"GyB/\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n\n/***/ \"Vroa\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = __webpack_require__(\"FRpO\");\nvar xxhashjs_1 = __webpack_require__(\"r9SO\");\nvar Twilsock = __webpack_require__(\"0Zys\");\nvar twilio_transport_1 = __webpack_require__(\"JE0K\");\nvar twilio_ems_client_1 = __webpack_require__(\"LUBQ\");\nvar Notifications = __webpack_require__(\"H3OR\");\nvar utils_1 = __webpack_require__(\"PD3G\");\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar configuration_1 = __webpack_require__(\"/GKJ\");\nvar subscriptions_1 = __webpack_require__(\"cFQ4\");\nvar router_1 = __webpack_require__(\"OLak\");\nvar network_1 = __webpack_require__(\"+/Dx\");\nvar syncdocument_1 = __webpack_require__(\"hznj\");\nvar synclist_1 = __webpack_require__(\"6Hp8\");\nvar syncmap_1 = __webpack_require__(\"al4s\");\nvar clientInfo_1 = __webpack_require__(\"R1bg\");\nvar entitiesCache_1 = __webpack_require__(\"Jb0q\");\nvar storage_1 = __webpack_require__(\"AwcA\");\nvar utils_2 = __webpack_require__(\"PD3G\");\n// TODO: Pick some small library and use it instead\nvar deferred_1 = __webpack_require__(\"3Y9o\");\nvar syncerror_1 = __webpack_require__(\"XzVR\");\nvar SYNC_PRODUCT_ID = 'data_sync';\nvar SDK_VERSION = __webpack_require__(\"qEFr\").version;\nfunction subscribe(subscribable) {\n    subscribable._subscribe();\n    return subscribable;\n}\nfunction createPayload(name, purpose, context, data) {\n    return { unique_name: name,\n        purpose: purpose,\n        context: context,\n        data: data };\n}\nfunction decompose(arg) {\n    if (!arg) {\n        return { id: null, purpose: null, data: null, context: null, mode: null, optimistic: false };\n    }\n    if (typeof arg === 'string') {\n        return { id: arg, purpose: null, data: null, context: null, mode: null, optimistic: false };\n    }\n    return { id: arg.uniqueName || arg.sid || arg.id,\n        purpose: arg.purpose,\n        data: arg.data,\n        context: arg.context,\n        mode: arg.mode,\n        optimistic: !!arg.optimistic };\n}\n/**\n * @class Client\n * @classdesc\n * Client for the Twilio Sync service\n *\n * @property {Client#ConnectionState} connectionState - Contains current service connection state.\n * Valid options are ['connecting', 'connected', 'disconnecting', 'disconnected', 'denied', 'error'].\n */\n\nvar SyncClient = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(SyncClient, _events_1$EventEmitte);\n\n    /*\n     * @constructor\n     * @param {string} Token Twilio access token\n     * @param {Client#ClientOptions} options - Options to customize the Client\n     */\n    function SyncClient(fpaToken) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        (0, _classCallCheck3.default)(this, SyncClient);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncClient.__proto__ || (0, _getPrototypeOf2.default)(SyncClient)).call(this));\n\n        if (!fpaToken) {\n            throw new Error('Sync library needs a valid Twilio token to be passed');\n        }\n        if (options.hasOwnProperty('logLevel')) {\n            logger_1.default.setLevel(options.logLevel);\n        }\n        _this.productId = options.productId = options.productId || SYNC_PRODUCT_ID;\n        var twilsock = options.twilsockClient = options.twilsockClient || new Twilsock(fpaToken, options);\n        var transport = options.transport = options.transport || new twilio_transport_1.Transport(options.twilsockClient, { concurrentHttpRequestLimit: 20 });\n        var emsClient = options.emsClient = options.emsClient || new twilio_ems_client_1.EmsClient(options);\n        var notifications = options.notificationsClient = options.notificationsClient || new Notifications(fpaToken, options);\n        var config = new configuration_1.Configuration(null, options);\n        var network = new network_1.Network(_this.productId, new clientInfo_1.ClientInfo(SDK_VERSION), config, transport);\n        var storage = new storage_1.SessionStorage(config);\n        _this.localStorageId = null;\n        _this.fpaToken = fpaToken;\n        _this.authData = new deferred_1.Deferred();\n        _this.authData.promise.then(function (response) {\n            return _this.handleEmsResponse(response);\n        });\n        emsClient.once('response', function (response) {\n            return _this.authData.update(response);\n        });\n        emsClient.setToken(fpaToken).catch(function (e) {\n            logger_1.default.warn('Failed to set token', e);\n        });\n        twilsock.connect();\n        _this.services = {\n            config: config,\n            twilsock: twilsock,\n            notifications: notifications,\n            network: network,\n            emsClient: emsClient,\n            storage: storage,\n            router: null,\n            subscriptions: null\n        };\n        var subscriptions = new subscriptions_1.Subscriptions(_this.services);\n        var router = new router_1.Router({ config: config, subscriptions: subscriptions, notifications: notifications });\n        _this.services.router = router;\n        _this.services.subscriptions = subscriptions;\n        _this.entities = new entitiesCache_1.EntitiesCache();\n        notifications.on('connectionStateChanged', function () {\n            _this.emit('connectionStateChanged', _this.services.notifications.connectionState);\n        });\n        return _this;\n    }\n    /**\n     * Current version of Sync client.\n     * @name Client#version\n     * @type String\n     * @readonly\n     */\n\n    (0, _createClass3.default)(SyncClient, [{\n        key: \"handleEmsResponse\",\n        value: function handleEmsResponse(response) {\n            this.services.config.updateToken(response.token);\n            try {\n                var identity = response.identity;\n                var serviceSid = response.serviceSids[this.productId];\n                var storageId = xxhashjs_1.h64().update(\"TW::\" + identity + \"::\" + serviceSid).digest().toString(16);\n                this.services.storage.updateStorageId(storageId);\n            } catch (e) {\n                logger_1.default.error('Failed to initialize persistent storage', e);\n            }\n        }\n        /**\n         * Returns promise which resolves when library is correctly initialized\n         * Or throws if initialization is impossible\n         */\n\n    }, {\n        key: \"ensureReady\",\n        value: function ensureReady() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.authData.promise;\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n    }, {\n        key: \"storeRootInSessionCache\",\n        value: function storeRootInSessionCache(type, id, value) {\n            // can't store without id\n            if (!this.services.config.sessionStorageEnabled || !id) {\n                return;\n            }\n            var valueToStore = utils_2.deepClone(value);\n            if (type !== syncdocument_1.SyncDocument.type) {\n                valueToStore['last_event_id'] = null;\n                delete valueToStore['items'];\n            }\n            this.services.storage.store(type, id, valueToStore);\n        }\n    }, {\n        key: \"readRootFromSessionCache\",\n        value: function readRootFromSessionCache(type, id) {\n            if (!this.services.config.sessionStorageEnabled || !id) {\n                return null;\n            }\n            return this.services.storage.read(type, id);\n        }\n    }, {\n        key: \"_get\",\n        value: function _get(baseUri, id) {\n            var optimistic = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var uri, response;\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (id) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", null);\n\n                            case 2:\n                                uri = new utils_1.UriBuilder(baseUri).pathSegment(id).queryParam('Include', optimistic ? 'items' : undefined).build();\n                                _context2.prev = 3;\n                                _context2.next = 6;\n                                return this.services.network.get(uri);\n\n                            case 6:\n                                response = _context2.sent;\n                                return _context2.abrupt(\"return\", response.body);\n\n                            case 10:\n                                _context2.prev = 10;\n                                _context2.t0 = _context2[\"catch\"](3);\n\n                                if (!(_context2.t0.status === 404)) {\n                                    _context2.next = 14;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", null);\n\n                            case 14:\n                                throw _context2.t0;\n\n                            case 15:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this, [[3, 10]]);\n            }));\n        }\n    }, {\n        key: \"_createDocument\",\n        value: function _createDocument(id, data) {\n            var requestBody = {\n                unique_name: id,\n                data: data\n            };\n            return this.services.network.post(this.services.config.documentsUri, requestBody).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getDocument\",\n        value: function _getDocument(id) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                return _context3.abrupt(\"return\", this.readRootFromSessionCache(syncdocument_1.SyncDocument.type, id) || this._get(this.services.config.documentsUri, id));\n\n                            case 1:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this);\n            }));\n        }\n    }, {\n        key: \"_createList\",\n        value: function _createList(id, purpose, context) {\n            var payload = createPayload(id, purpose, context);\n            return this.services.network.post(this.services.config.listsUri, payload).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getList\",\n        value: function _getList(id) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                return _context4.abrupt(\"return\", this.readRootFromSessionCache(synclist_1.SyncList.type, id) || this._get(this.services.config.listsUri, id));\n\n                            case 1:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n    }, {\n        key: \"_createMap\",\n        value: function _createMap(id) {\n            var requestBody = {\n                unique_name: id\n            };\n            return this.services.network.post(this.services.config.mapsUri, requestBody).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getMap\",\n        value: function _getMap(id) {\n            var optimistic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                return _context5.abrupt(\"return\", this.readRootFromSessionCache(syncmap_1.SyncMap.type, id) || this._get(this.services.config.mapsUri, id, optimistic));\n\n                            case 1:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n    }, {\n        key: \"getCached\",\n        value: function getCached(id, type) {\n            if (id) {\n                return this.entities.get(id, type) || null;\n            }\n            return null;\n        }\n    }, {\n        key: \"removeFromCacheAndSession\",\n        value: function removeFromCacheAndSession(type, sid, uniqueName) {\n            this.entities.remove(sid);\n            if (this.services.config.sessionStorageEnabled) {\n                this.services.storage.remove(type, sid, uniqueName);\n            }\n        }\n        /**\n         * Open a SyncDocument by identifier, or create one if none exists\n         * @param {string} id Document identifier. Unique name or sid.\n         * @return {Promise<Document>}\n         * @public\n         */\n\n    }, {\n        key: \"document\",\n        value: function document(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                var _this2 = this;\n\n                var _decompose, id, data, mode, docFromInMemoryCache, docDescriptor, syncDocument;\n\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                _context6.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose = decompose(arg), id = _decompose.id, data = _decompose.data, mode = _decompose.mode;\n                                docFromInMemoryCache = this.getCached(id, 'document');\n\n                                if (!docFromInMemoryCache) {\n                                    _context6.next = 8;\n                                    break;\n                                }\n\n                                return _context6.abrupt(\"return\", docFromInMemoryCache);\n\n                            case 8:\n                                _context6.next = 10;\n                                return this._getDocument(id);\n\n                            case 10:\n                                docDescriptor = _context6.sent;\n\n                                if (docDescriptor) {\n                                    _context6.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context6.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context6.prev = 16;\n                                _context6.next = 19;\n                                return this._createDocument(id, data);\n\n                            case 19:\n                                docDescriptor = _context6.sent;\n                                _context6.next = 29;\n                                break;\n\n                            case 22:\n                                _context6.prev = 22;\n                                _context6.t0 = _context6[\"catch\"](16);\n\n                                if (!(_context6.t0.status === 409)) {\n                                    _context6.next = 28;\n                                    break;\n                                }\n\n                                return _context6.abrupt(\"return\", this.document(arg));\n\n                            case 28:\n                                throw _context6.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(syncdocument_1.SyncDocument.type, id, docDescriptor);\n                                syncDocument = new syncdocument_1.SyncDocument(this.services, docDescriptor, function (type, sid, uniqueName) {\n                                    return _this2.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncDocument = this.entities.store(syncDocument);\n                                return _context6.abrupt(\"return\", subscribe(syncDocument));\n\n                            case 33:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Open a Map by identifier, or create one if none exists\n         * @param {string} id Map identifier. Unique name or sid.\n         * @return {Promise<Map>}\n         * @public\n         */\n\n    }, {\n        key: \"map\",\n        value: function map(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var _this3 = this;\n\n                var _decompose2, id, mode, optimistic, mapFromInMemoryCache, mapDescriptor, syncMap;\n\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                _context7.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose2 = decompose(arg), id = _decompose2.id, mode = _decompose2.mode, optimistic = _decompose2.optimistic;\n                                mapFromInMemoryCache = this.getCached(id, 'map');\n\n                                if (!mapFromInMemoryCache) {\n                                    _context7.next = 8;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", mapFromInMemoryCache);\n\n                            case 8:\n                                _context7.next = 10;\n                                return this._getMap(id, optimistic);\n\n                            case 10:\n                                mapDescriptor = _context7.sent;\n\n                                if (mapDescriptor) {\n                                    _context7.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context7.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context7.prev = 16;\n                                _context7.next = 19;\n                                return this._createMap(id);\n\n                            case 19:\n                                mapDescriptor = _context7.sent;\n                                _context7.next = 29;\n                                break;\n\n                            case 22:\n                                _context7.prev = 22;\n                                _context7.t0 = _context7[\"catch\"](16);\n\n                                if (!(_context7.t0.status === 409)) {\n                                    _context7.next = 28;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", this.map(arg));\n\n                            case 28:\n                                throw _context7.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(syncmap_1.SyncMap.type, id, mapDescriptor);\n                                syncMap = new syncmap_1.SyncMap(this.services, mapDescriptor, function (type, sid, uniqueName) {\n                                    return _this3.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncMap = this.entities.store(syncMap);\n                                return _context7.abrupt(\"return\", subscribe(syncMap));\n\n                            case 33:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Open a List by identifier, or create one if none exists\n         * @param {string} id List identifier. Unique name or sid.\n         * @return {Promise<List>}\n         * @public\n         */\n\n    }, {\n        key: \"list\",\n        value: function list(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var _this4 = this;\n\n                var _decompose3, id, purpose, context, mode, listFromInMemoryCache, listDescriptor, syncList;\n\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                _context8.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose3 = decompose(arg), id = _decompose3.id, purpose = _decompose3.purpose, context = _decompose3.context, mode = _decompose3.mode;\n                                listFromInMemoryCache = this.getCached(id, 'list');\n\n                                if (!listFromInMemoryCache) {\n                                    _context8.next = 8;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", listFromInMemoryCache);\n\n                            case 8:\n                                _context8.next = 10;\n                                return this._getList(id);\n\n                            case 10:\n                                listDescriptor = _context8.sent;\n\n                                if (listDescriptor) {\n                                    _context8.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context8.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context8.prev = 16;\n                                _context8.next = 19;\n                                return this._createList(id, purpose, context);\n\n                            case 19:\n                                listDescriptor = _context8.sent;\n                                _context8.next = 29;\n                                break;\n\n                            case 22:\n                                _context8.prev = 22;\n                                _context8.t0 = _context8[\"catch\"](16);\n\n                                if (!(_context8.t0.status === 409)) {\n                                    _context8.next = 28;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", this.list(arg));\n\n                            case 28:\n                                throw _context8.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(synclist_1.SyncList.type, id, listDescriptor);\n                                syncList = new synclist_1.SyncList(this.services, listDescriptor, function (type, sid, uniqueName) {\n                                    return _this4.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncList = this.entities.store(syncList);\n                                return _context8.abrupt(\"return\", subscribe(syncList));\n\n                            case 33:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Gracefully shutdown the libray\n         * Currently it is not properly implemented and being used only in tests\n         * But should be made a part of public API\n         * @private\n         */\n\n    }, {\n        key: \"shutdown\",\n        value: function shutdown() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                _context9.next = 2;\n                                return this.services.subscriptions.shutdown();\n\n                            case 2:\n                                _context9.next = 4;\n                                return this.services.twilsock.disconnect();\n\n                            case 4:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Set new auth token\n         * @param {string} token New token to set\n         * @return {Promise}\n         * @public\n         */\n\n    }, {\n        key: \"updateToken\",\n        value: function updateToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var response;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                _context10.next = 2;\n                                return this.services.emsClient.setToken(fpaToken);\n\n                            case 2:\n                                response = _context10.sent;\n                                this.services.config.updateToken(response.token);\n                                _context10.next = 6;\n                                return _promise2.default.all([this.services.notifications.updateToken(fpaToken), this.services.twilsock.updateToken(fpaToken)]);\n\n                            case 6:\n                                this.fpaToken = fpaToken;\n\n                            case 7:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n    }, {\n        key: \"connectionState\",\n        get: function get() {\n            return this.services.notifications.connectionState;\n        }\n    }], [{\n        key: \"version\",\n        get: function get() {\n            return SDK_VERSION;\n        }\n    }]);\n    return SyncClient;\n}(events_1.EventEmitter);\n\nexports.SyncClient = SyncClient;\nexports.Client = SyncClient;\nexports.default = SyncClient;\n/**\n * Indicates current state of connection between the client and Sync service.\n * <p>Valid options are as follows:\n * <li>'connecting' - client is offline and connection attempt is in process.\n * <li>'connected' - client is online and ready.\n * <li>'disconnecting' - client is going offline as disconnection is in process.\n * <li>'disconnected' - client is offline and no connection attempt is in process.\n * <li>'denied' - client connection is denied because of invalid JWT access token. User must refresh token in order to proceed.\n * <li>'error' - client connection is in a permanent erroneous state. Client re-initialization is required.\n * @typedef {String} Client#ConnectionState\n */\n/**\n * These options can be passed to Client constructor\n * @typedef {Object} Client#ClientOptions\n * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n */\n/**\n * Fired when connection state has been changed.\n * @param {Client#ConnectionState} connectionState Contains current service connection state.\n * @event Client#connectionStateChanged\n */\n\n/***/ }),\n\n/***/ \"VuZO\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"O35A\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"Wyka\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(\"E5Ce\"),\n    defined = __webpack_require__(\"U72i\");\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n/***/ }),\n\n/***/ \"X6va\":\n/***/ (function(module, exports) {\n\nvar id = 0,\n    px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n/***/ }),\n\n/***/ \"X9RM\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"Lvd3\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"XMdB\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = __webpack_require__(\"vSO4\");\n\n$export($export.P + $export.R, 'Set', { toJSON: __webpack_require__(\"x6MZ\")('Set') });\n\n/***/ }),\n\n/***/ \"XdV9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar util = __webpack_require__(\"gfUn\");\n\nvar BackoffStrategy = __webpack_require__(\"C6lX\");\n\n// Fibonacci backoff strategy.\nfunction FibonacciBackoffStrategy(options) {\n    BackoffStrategy.call(this, options);\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n}\nutil.inherits(FibonacciBackoffStrategy, BackoffStrategy);\n\nFibonacciBackoffStrategy.prototype.next_ = function () {\n    var backoffDelay = Math.min(this.nextBackoffDelay_, this.getMaxDelay());\n    this.nextBackoffDelay_ += this.backoffDelay_;\n    this.backoffDelay_ = backoffDelay;\n    return backoffDelay;\n};\n\nFibonacciBackoffStrategy.prototype.reset_ = function () {\n    this.nextBackoffDelay_ = this.getInitialDelay();\n    this.backoffDelay_ = 0;\n};\n\nmodule.exports = FibonacciBackoffStrategy;\n\n/***/ }),\n\n/***/ \"XzVR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Generic SyncLibrary error class\n */\n\nvar SyncError = function (_Error) {\n    (0, _inherits3.default)(SyncError, _Error);\n\n    function SyncError(message) {\n        var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        (0, _classCallCheck3.default)(this, SyncError);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncError.__proto__ || (0, _getPrototypeOf2.default)(SyncError)).call(this));\n\n        _this.name = _this.constructor.name;\n        _this.message = message;\n        _this.status = status;\n        _this.code = code;\n        return _this;\n    }\n\n    return SyncError;\n}(Error);\n\nexports.SyncError = SyncError;\nexports.default = SyncError;\n\n/***/ }),\n\n/***/ \"YD0x\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(\"vSO4\");\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(\"uj5A\") });\n\n/***/ }),\n\n/***/ \"YLmZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar forOf = __webpack_require__(\"ozpD\");\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n/***/ }),\n\n/***/ \"YZrv\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"K+F3\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"ZAcJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Configuration = function Configuration(config) {\n    (0, _classCallCheck3.default)(this, Configuration);\n\n    var emsConfig = config.emsClient || {};\n    var realm = config.realm || 'us1';\n    var DEFAULT_EMS_HOST = \"https://ems.\" + realm + \".twilio.com\";\n    var EMS_PATH = '/v1/token';\n    var host = emsConfig.url || emsConfig.emsUri || emsConfig.emsUrl || DEFAULT_EMS_HOST + EMS_PATH;\n    this.url = host;\n};\n\nexports.default = Configuration;\n\n/***/ }),\n\n/***/ \"ZHvQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(\"ShN9\"),\n    TAG = __webpack_require__(\"Ug9I\")('toStringTag')\n// ES3 wrong here\n,\n    ARG = cof(function () {\n  return arguments;\n}()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function tryGet(it, key) {\n  try {\n    return it[key];\n  } catch (e) {/* empty */}\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n  // @@toStringTag case\n  : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n  // builtinTag case\n  : ARG ? cof(O)\n  // ES3 arguments fallback\n  : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n/***/ }),\n\n/***/ \"ZKjc\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(\"Aq8W\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(\"yeEC\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(\"GyB/\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n\n/***/ \"ZUV3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar karibu_1 = __webpack_require__(\"lmjd\");\n\nvar Entry = function () {\n    function Entry(value, revision) {\n        (0, _classCallCheck3.default)(this, Entry);\n\n        this.value = value;\n        this.revision = revision || 0;\n    }\n\n    (0, _createClass3.default)(Entry, [{\n        key: \"isValid\",\n        get: function get() {\n            return true;\n        }\n    }]);\n    return Entry;\n}();\n\nvar Tombstone = function () {\n    function Tombstone(revision) {\n        (0, _classCallCheck3.default)(this, Tombstone);\n\n        this.revision = revision;\n    }\n\n    (0, _createClass3.default)(Tombstone, [{\n        key: \"isValid\",\n        get: function get() {\n            return false;\n        }\n    }]);\n    return Tombstone;\n}();\n\nvar Cache = function () {\n    function Cache() {\n        (0, _classCallCheck3.default)(this, Cache);\n\n        this.items = new karibu_1.TreeMap();\n    }\n\n    (0, _createClass3.default)(Cache, [{\n        key: \"store\",\n        value: function store(key, value, revision) {\n            var entry = this.items.get(key);\n            if (entry && entry.revision > revision) {\n                if (entry.isValid) {\n                    return entry.value;\n                }\n                return null;\n            }\n            this.items.set(key, new Entry(value, revision));\n            return value;\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(key, revision) {\n            var curr = this.items.get(key);\n            if (!curr || curr.revision < revision) {\n                this.items.set(key, new Tombstone(revision));\n            }\n        }\n    }, {\n        key: \"isKnown\",\n        value: function isKnown(key, revision) {\n            var curr = this.items.get(key);\n            return curr && curr.revision >= revision;\n        }\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            var entry = this.items.get(key);\n            if (entry && entry.isValid) {\n                return entry.value;\n            }\n            return null;\n        }\n    }, {\n        key: \"has\",\n        value: function has(key) {\n            var entry = this.items.get(key);\n            return entry && entry.isValid;\n        }\n    }]);\n    return Cache;\n}();\n\nexports.Cache = Cache;\nexports.default = Cache;\n\n/***/ }),\n\n/***/ \"ZaKr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(\"BxvP\"),\n    anObject = __webpack_require__(\"zotD\");\nvar check = function check(O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n  function (test, buggy, set) {\n    try {\n      set = __webpack_require__(\"3zRh\")(Function.call, __webpack_require__(\"sxPs\").f(Object.prototype, '__proto__').set, 2);\n      set(test, []);\n      buggy = !(test instanceof Array);\n    } catch (e) {\n      buggy = true;\n    }\n    return function setPrototypeOf(O, proto) {\n      check(O, proto);\n      if (buggy) O.__proto__ = proto;else set(O, proto);\n      return O;\n    };\n  }({}, false) : undefined),\n  check: check\n};\n\n/***/ }),\n\n/***/ \"ZxII\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(\"Ug9I\");\n\n/***/ }),\n\n/***/ \"aIIw\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"QYzI\");\n\n/***/ }),\n\n/***/ \"af0K\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(\"dhak\"),\n    ITERATOR = __webpack_require__(\"Ug9I\")('iterator'),\n    ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n/***/ }),\n\n/***/ \"akPY\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(\"Gfzd\"),\n    createDesc = __webpack_require__(\"0WCH\");\nmodule.exports = __webpack_require__(\"6MLN\") ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n/***/ }),\n\n/***/ \"al4s\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = __webpack_require__(\"PD3G\");\nvar entity_1 = __webpack_require__(\"GBRx\");\nvar retryingqueue_1 = __webpack_require__(\"/lpw\");\nvar mapitem_1 = __webpack_require__(\"QlMj\");\nvar paginator_1 = __webpack_require__(\"NQ19\");\nvar cache_1 = __webpack_require__(\"ZUV3\");\n/**\n * @class\n * @alias Map\n * @classdesc Map collection to store a set of Key:Value pairs\n * @property {String} sid - Map unique id\n * @property {String} uniqueName - Map unique name\n *\n * @fires Map#itemAdded\n * @fires Map#itemAddedRemotely\n * @fires Map#itemUpdated\n * @fires Map#itemUpdatedRemotely\n * @fires Map#itemRemoved\n * @fires Map#itemRemovedRemotely\n * @fires Map#collectionRemoved\n * @fires Map#collectionRemovedRemotely\n */\n\nvar SyncMap = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncMap, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncMap(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncMap);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncMap.__proto__ || (0, _getPrototypeOf2.default)(SyncMap)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.cache = new cache_1.Cache();\n        _this.descriptor = descriptor;\n        if (descriptor.items) {\n            descriptor.items.forEach(function (itemDescriptor) {\n                _this.cache.store(itemDescriptor.key, new mapitem_1.MapItem(itemDescriptor), itemDescriptor.last_event_id);\n            });\n        }\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncMap, [{\n        key: \"_get\",\n        value: function _get(key) {\n            return this.queryItems({ key: key }).then(function (result) {\n                if (result.items.length < 1) {\n                    throw new Error('No item with key ' + key + ' found');\n                }\n                return result.items[0];\n            });\n        }\n    }, {\n        key: \"__set\",\n        value: function __set(location, param) {\n            return this.services.network.post(location, { data: param.data }, param.revision).then(function (response) {\n                response = response.body;\n                response.data = param.data;\n                return response;\n            });\n        }\n        /**\n         * Update known existing element\n         * @private\n         */\n\n    }, {\n        key: \"_set\",\n        value: function _set(location, keyValue, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var _this2 = this;\n\n                var _resolver;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (resolver) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", this.__set(location, { data: keyValue.data }));\n\n                            case 2:\n                                _resolver = function _resolver(err) {\n                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                                        var item;\n                                        return _regenerator2.default.wrap(function _callee$(_context) {\n                                            while (1) {\n                                                switch (_context.prev = _context.next) {\n                                                    case 0:\n                                                        if (!(err.status === 412)) {\n                                                            _context.next = 5;\n                                                            break;\n                                                        }\n\n                                                        _context.next = 3;\n                                                        return this._get(keyValue.key);\n\n                                                    case 3:\n                                                        item = _context.sent;\n                                                        return _context.abrupt(\"return\", {\n                                                            revision: item.revision,\n                                                            data: resolver(utils_1.deepClone(item.value))\n                                                        });\n\n                                                    case 5:\n                                                        throw err;\n\n                                                    case 6:\n                                                    case \"end\":\n                                                        return _context.stop();\n                                                }\n                                            }\n                                        }, _callee, this);\n                                    }));\n                                };\n\n                                return _context2.abrupt(\"return\", this.actionQueue.add(this.__set.bind(this), location, { revision: keyValue.revision, data: keyValue.data }, _resolver));\n\n                            case 4:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Create element or update if already existing\n         * @private\n         */\n\n    }, {\n        key: \"_tryAddOrUpdate\",\n        value: function _tryAddOrUpdate(uri, keyValue, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var response, existingItemLocation, value, _response, resolvedData, _value;\n\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                _context3.prev = 0;\n                                _context3.next = 3;\n                                return this.services.network.post(uri, keyValue);\n\n                            case 3:\n                                response = _context3.sent;\n\n                                response.body.data = keyValue.data;\n                                return _context3.abrupt(\"return\", { added: true, value: response.body });\n\n                            case 8:\n                                _context3.prev = 8;\n                                _context3.t0 = _context3[\"catch\"](0);\n\n                                if (!(_context3.t0.status !== 409)) {\n                                    _context3.next = 12;\n                                    break;\n                                }\n\n                                throw _context3.t0;\n\n                            case 12:\n                                existingItemLocation = _context3.t0.body.links.item;\n\n                                if (resolver) {\n                                    _context3.next = 20;\n                                    break;\n                                }\n\n                                _context3.next = 16;\n                                return this._set(existingItemLocation, keyValue, resolver);\n\n                            case 16:\n                                value = _context3.sent;\n                                return _context3.abrupt(\"return\", { added: false, value: value });\n\n                            case 20:\n                                _context3.next = 22;\n                                return this.services.network.get(existingItemLocation);\n\n                            case 22:\n                                _response = _context3.sent;\n                                resolvedData = resolver(utils_1.deepClone(_response.body.data));\n                                _context3.next = 26;\n                                return this._set(existingItemLocation, {\n                                    key: _response.body.key,\n                                    revision: _response.body.revision,\n                                    data: resolvedData\n                                }, resolver);\n\n                            case 26:\n                                _value = _context3.sent;\n                                return _context3.abrupt(\"return\", { added: false, value: _value });\n\n                            case 28:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[0, 8]]);\n            }));\n        }\n        /**\n         * @return Promise<Object> Context of collection\n         * @private\n         */\n\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                var response;\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                if (!(typeof this.context !== 'undefined')) {\n                                    _context4.next = 2;\n                                    break;\n                                }\n\n                                return _context4.abrupt(\"return\", this.context);\n\n                            case 2:\n                                _context4.next = 4;\n                                return this.services.network.get(this.links.context);\n\n                            case 4:\n                                response = _context4.sent;\n\n                                this.context = response.body.data;\n                                return _context4.abrupt(\"return\", this.context);\n\n                            case 7:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n        /**\n         * @param context {Object} New context value\n         * @returns {Promise}\n         * @private\n         */\n\n    }, {\n        key: \"updateContext\",\n        value: function updateContext(context) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                _context5.next = 2;\n                                return this.services.network.post(this.links.context, { data: context });\n\n                            case 2:\n                                this.context = context;\n                                this.emit('contextUpdated', context, true);\n\n                            case 4:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n        /**\n         * Set key and value pair in map\n         * @param {String} key  Key identifier\n         * @param {Object} value Value to set\n         * @returns {Promise<Item>}\n         * @public\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(key, value) {\n            return this._actualSet(key, value);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(key, value, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                var descriptor, added, item, arg, addOrUpdateResult;\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                descriptor = void 0;\n                                added = void 0;\n                                item = this.cache.get(key);\n\n                                if (!item) {\n                                    _context6.next = 11;\n                                    break;\n                                }\n\n                                arg = { key: key, data: value, revision: item.revision || undefined };\n                                _context6.next = 7;\n                                return this._set(item.uri, arg, resolver);\n\n                            case 7:\n                                descriptor = _context6.sent;\n\n                                added = false;\n                                _context6.next = 16;\n                                break;\n\n                            case 11:\n                                _context6.next = 13;\n                                return this._tryAddOrUpdate(this.links.items, { key: key, data: value }, resolver);\n\n                            case 13:\n                                addOrUpdateResult = _context6.sent;\n\n                                descriptor = addOrUpdateResult.value;\n                                added = addOrUpdateResult.added;\n\n                            case 16:\n                                item = this.cache.get(key);\n                                if (item && descriptor.last_event_id > item.lastEventId) {\n                                    item.update(descriptor.last_event_id, descriptor.revision, descriptor.data);\n                                    this.emit('itemUpdated', item, true);\n                                } else if (!item) {\n                                    item = this.cache.store(key, new mapitem_1.MapItem(descriptor), descriptor.last_event_id);\n                                    if (added) {\n                                        this.emit('itemAdded', item, true);\n                                    } else {\n                                        this.emit('itemUpdated', item, true);\n                                    }\n                                }\n                                return _context6.abrupt(\"return\", item);\n\n                            case 19:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this);\n            }));\n        }\n        /**\n         * @param {String} key String identifier of entity in a map\n         * @return {Promise<Item>}\n         * @public\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var result;\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                if (!this.cache.has(key)) {\n                                    _context7.next = 2;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", this.cache.get(key));\n\n                            case 2:\n                                _context7.next = 4;\n                                return this.queryItems({ key: key });\n\n                            case 4:\n                                result = _context7.sent;\n\n                                if (!(result.items.length < 1)) {\n                                    _context7.next = 7;\n                                    break;\n                                }\n\n                                throw new Error('No item with key ' + key + ' found');\n\n                            case 7:\n                                return _context7.abrupt(\"return\", result.items[0]);\n\n                            case 8:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this);\n            }));\n        }\n        /**\n         * @param {String} Key Item key\n         * @param {Map~Mutator} Mutator Function performing value mutation\n         * @return {Promise<Item>}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(key, mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var value;\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                _context8.next = 2;\n                                return this.get(key).then(function (item) {\n                                    return item.value;\n                                }).catch(function () {\n                                    return {};\n                                });\n\n                            case 2:\n                                value = _context8.sent;\n                                return _context8.abrupt(\"return\", this._actualSet(key, mutator(utils_1.deepClone(value)), mutator));\n\n                            case 4:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this);\n            }));\n        }\n        /**\n         * @param {String} key Item key\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Item>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(key, obj) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                return _context9.abrupt(\"return\", this.mutate(key, function (remote) {\n                                    return (0, _extends3.default)(remote, obj);\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Delete an entity by given key\n         * @return {Promise}\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(key) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var item, response;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                if (!(typeof key === 'undefined')) {\n                                    _context10.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('Key argument is invalid');\n\n                            case 2:\n                                _context10.next = 4;\n                                return this.get(key);\n\n                            case 4:\n                                item = _context10.sent;\n                                _context10.next = 7;\n                                return this.services.network.delete(item.uri);\n\n                            case 7:\n                                response = _context10.sent;\n\n                                this.cache.delete(key, response.body.last_event_id);\n                                this.emit('itemRemoved', key, true);\n\n                            case 10:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"queryItems\",\n        value: function queryItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {\n                var _this3 = this;\n\n                var uri, response, items, meta;\n                return _regenerator2.default.wrap(function _callee11$(_context11) {\n                    while (1) {\n                        switch (_context11.prev = _context11.next) {\n                            case 0:\n                                args = args || {};\n                                uri = new utils_1.UriBuilder(this.links.items).queryParam('From', args.from).queryParam('PageSize', args.limit).queryParam('Key', args.key).queryParam('PageToken', args.pageToken).queryParam('Order', args.order).build();\n                                _context11.next = 4;\n                                return this.services.network.get(uri);\n\n                            case 4:\n                                response = _context11.sent;\n                                items = response.body.items.map(function (el) {\n                                    var itemInCache = _this3.cache.get(el.key);\n                                    if (itemInCache) {\n                                        _this3._handleItemUpdated(el.key, el.url, el.last_event_id, el.revision, el.data);\n                                    } else {\n                                        _this3.cache.store(el.key, new mapitem_1.MapItem(el), el.last_event_id);\n                                    }\n                                    return _this3.cache.get(el.key);\n                                });\n                                meta = response.body.meta;\n                                return _context11.abrupt(\"return\", new paginator_1.Paginator(items, function (pageToken) {\n                                    return _this3.queryItems({ pageToken: pageToken });\n                                }, meta.previous_token, meta.next_token));\n\n                            case 8:\n                            case \"end\":\n                                return _context11.stop();\n                        }\n                    }\n                }, _callee11, this);\n            }));\n        }\n        /**\n         * Get a list of items from the Map\n         * @param {Object} args Arguments for query\n         * @param {String} args.from Item, which should be used as an anchor. If undefined, starts from the beginning or end depending on args.order\n         * @param {Number} args.pageSize Result page size\n         * @param {String} args.order Order of results, should be 'asc' or 'desc'\n         * @return {Promise<Paginator>}\n         * @public\n         */\n\n    }, {\n        key: \"getItems\",\n        value: function getItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {\n                return _regenerator2.default.wrap(function _callee12$(_context12) {\n                    while (1) {\n                        switch (_context12.prev = _context12.next) {\n                            case 0:\n                                args = args || {};\n                                args.limit = args.pageSize || args.limit || 50;\n                                args.order = args.order || 'asc';\n                                return _context12.abrupt(\"return\", this.queryItems(args));\n\n                            case 4:\n                            case \"end\":\n                                return _context12.stop();\n                        }\n                    }\n                }, _callee12, this);\n            }));\n        }\n        /**\n         * Enumerate through all of maps items\n         * It always triggers server interaction when being called for the first time for an object, so could be slow\n         * This method not supported now and not meant to be used externally\n         * @param {Function} handler Function to handle each argument\n         * @private\n         */\n\n    }, {\n        key: \"forEach\",\n        value: function forEach(handler) {\n            var _this4 = this;\n\n            return new _promise2.default(function (resolve, reject) {\n                function processPage(page) {\n                    page.items.forEach(function (x) {\n                        return handler(x);\n                    });\n                    if (page.hasNextPage) {\n                        page.nextPage().then(processPage).catch(reject);\n                    } else {\n                        resolve();\n                    }\n                }\n                _this4.queryItems().then(processPage).catch(reject);\n            });\n        }\n    }, {\n        key: \"shouldIgnoreEvent\",\n        value: function shouldIgnoreEvent(key, eventId) {\n            return this.cache.isKnown(key, eventId);\n        }\n        /**\n         * Handle update from the server\n         * @private\n         */\n\n    }, {\n        key: \"_update\",\n        value: function _update(update, isStrictlyOrdered) {\n            switch (update.type) {\n                case 'map_item_added':\n                    {\n                        this._handleItemAdded(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'map_item_updated':\n                    {\n                        this._handleItemUpdated(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'map_item_removed':\n                    {\n                        this._handleItemRemoved(update.item_key, update.id);\n                    }\n                    break;\n                case 'map_context_updated':\n                    {\n                        this._handleContextUpdate(update.context_data, update.id);\n                    }\n                    break;\n                case 'map_removed':\n                    {\n                        this.onRemoved(false);\n                    }\n                    break;\n            }\n            if (isStrictlyOrdered) {\n                this._advanceLastEventId(update.id, update.map_revision);\n            }\n        }\n    }, {\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {\n            if (this.lastEventId < eventId) {\n                this.descriptor.last_event_id = eventId;\n                if (revision) {\n                    this.descriptor.revision = revision;\n                }\n            }\n        }\n        /**\n         * Handle entity insertion event, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemAdded\",\n        value: function _handleItemAdded(key, url, eventId, revision, value) {\n            if (!this.cache.has(key) && !this.shouldIgnoreEvent(key, eventId)) {\n                var item = new mapitem_1.MapItem({ key: key, url: url, last_event_id: eventId, revision: revision, data: value });\n                this.cache.store(key, item, eventId);\n                this.emit('itemAdded', item, false);\n                this.emit('itemAddedRemotely', item);\n            }\n        }\n        /**\n         * Handle new value of entity, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemUpdated\",\n        value: function _handleItemUpdated(key, url, eventId, revision, value) {\n            var item = this.cache.get(key);\n            if (!item && !this.shouldIgnoreEvent(key, eventId)) {\n                item = new mapitem_1.MapItem({ key: key, url: url, last_event_id: eventId, revision: revision, data: value });\n                this.cache.store(key, item, eventId);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            } else if (item && eventId > item.lastEventId) {\n                item.update(eventId, revision, value);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            }\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemRemoved\",\n        value: function _handleItemRemoved(key, eventId) {\n            this.cache.delete(key, eventId);\n            this.emit('itemRemoved', key, false);\n            this.emit('itemRemovedRemotely', key);\n        }\n    }, {\n        key: \"_handleContextUpdate\",\n        value: function _handleContextUpdate(data, eventId) {\n            if (this.lastEventId < eventId) {\n                this.context = data;\n                this.emit('contextUpdated', data, false);\n                this.emit('contextUpdatedRemotely', data);\n            }\n        }\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            //\n            // Should also do some cleanup here\n            this.emit('collectionRemoved', locally);\n            if (!locally) {\n                this.emit('collectionRemovedRemotely');\n            }\n        }\n        /**\n         * Delete map from server. It will be impossible to restore it.\n         * @return {Promise} Promise to delete the collection\n         * @public\n         */\n\n    }, {\n        key: \"removeMap\",\n        value: function removeMap() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {\n                return _regenerator2.default.wrap(function _callee13$(_context13) {\n                    while (1) {\n                        switch (_context13.prev = _context13.next) {\n                            case 0:\n                                _context13.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context13.stop();\n                        }\n                    }\n                }, _callee13, this);\n            }));\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"links\",\n        get: function get() {\n            return this.descriptor.links;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'map';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'map';\n        }\n    }]);\n    return SyncMap;\n}(entity_1.SyncEntity);\n\nexports.SyncMap = SyncMap;\n// export { SyncMap, MapDescriptor, Mutator };\nexports.default = SyncMap;\n/**\n * Applies a transformation to the item value\n * @callback Map~Mutator\n * @param {Object} data current value of an item\n * @return {Object} Modified data for an item\n */\n/**\n * Fired when item is added to the Map\n * @event Map#itemAdded\n * @type {Item} Added item\n */\n/**\n * Fired when item is added to the Map by remote actor\n * @event Map#itemAddedRemotely\n * @type {Item} Added item\n */\n/**\n * Fired when item is updated\n * @event Map#itemUpdated\n * @type {Item} Updated item\n */\n/**\n * Fired when item is updated by remote actor\n * @event Map#itemUpdatedRemotely\n * @type {Item} Updated item\n */\n/**\n * Fired when item is removed from the Map\n * @event Map#itemRemoved\n * @type {String} item key\n */\n/**\n * Fired when item is removed from the Map by remote actor\n * @event Map#itemRemovedRemotely\n * @type {String} item key\n */\n/**\n * Fired when Map is removed from server\n * @event Map#collectionRemoved\n */\n/**\n * Fired when Map is removed from server by remote actor\n * @event Map#collectionRemovedRemotely\n */\n\n/***/ }),\n\n/***/ \"ayXv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(\"ShN9\");\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n/***/ }),\n\n/***/ \"b0lL\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar require;var require;(function (f) {\n    if (true) {\n        module.exports = f();\n    } else if (typeof define === \"function\" && define.amd) {\n        define([], f);\n    } else {\n        var g;if (typeof window !== \"undefined\") {\n            g = window;\n        } else if (typeof global !== \"undefined\") {\n            g = global;\n        } else if (typeof self !== \"undefined\") {\n            g = self;\n        } else {\n            g = this;\n        }g.rfc6902 = f();\n    }\n})(function () {\n    var define, module, exports;return function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == \"function\" && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n                }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }return n[o].exports;\n        }var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n            s(r[o]);\n        }return s;\n    }({ 1: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var _slicedToArray = function _slicedToArray(arr, i) {\n                if (Array.isArray(arr)) {\n                    return arr;\n                } else if (Symbol.iterator in Object(arr)) {\n                    var _arr = [];for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n                        _arr.push(_step.value);if (i && _arr.length === i) break;\n                    }return _arr;\n                } else {\n                    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n                }\n            };\n\n            var _toConsumableArray = function _toConsumableArray(arr) {\n                if (Array.isArray(arr)) {\n                    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n                        arr2[i] = arr[i];\n                    }return arr2;\n                } else {\n                    return Array.from(arr);\n                }\n            };\n\n            exports.isDestructive = isDestructive;\n\n            /**\n            subtract(a, b) returns the keys in `a` that are not in `b`.\n            */\n            exports.subtract = subtract;\n\n            /**\n            intersection(objects) returns the keys that shared by all given `objects`.\n            */\n            exports.intersection = intersection;\n            exports.objectType = objectType;\n\n            /**\n            Array-diffing smarter (levenshtein-like) diffing here\n            \n            To get from the input ABC to the output AZ we could just delete all the input\n            and say \"insert A, insert Z\" and be done with it. That's what we do if the\n            input is empty. But we can be smarter.\n            \n                      output\n                           A   Z\n                           -   -\n                      [0]  1   2\n            input A |  1  [0]  1\n                  B |  2  [1]  1\n                  C |  3   2  [2]\n            \n            1) start at 0,0 (+0)\n            2) keep A (+0)\n            3) remove B (+1)\n            4) replace C with Z (+1)\n            \n            if input (source) is empty, they'll all be in the top row, just a bunch of\n            additions. If the output is empty, everything will be in the left column, as a\n            bunch of deletions.\n            */\n            exports.diffArrays = diffArrays;\n            exports.diffObjects = diffObjects;\n            exports.diffValues = diffValues;\n            exports.diffAny = diffAny;\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n\n            var compare = _dereq_(\"./equal\").compare;\n\n            function isDestructive(_ref) {\n                var op = _ref.op;\n\n                return op === \"remove\" || op === \"replace\" || op === \"copy\" || op === \"move\";\n            }\n\n            function subtract(a, b) {\n                var obj = {};\n                for (var add_key in a) {\n                    obj[add_key] = 1;\n                }\n                for (var del_key in b) {\n                    delete obj[del_key];\n                }\n                return Object.keys(obj);\n            }\n\n            function intersection(objects) {\n                // initialize like union()\n                var key_counts = {};\n                objects.forEach(function (object) {\n                    for (var key in object) {\n                        key_counts[key] = (key_counts[key] || 0) + 1;\n                    }\n                });\n                // but then, extra requirement: delete less commonly-seen keys\n                var threshold = objects.length;\n                for (var key in key_counts) {\n                    if (key_counts[key] < threshold) {\n                        delete key_counts[key];\n                    }\n                }\n                return Object.keys(key_counts);\n            }\n\n            function objectType(object) {\n                if (object === undefined) {\n                    return \"undefined\";\n                }\n                if (object === null) {\n                    return \"null\";\n                }\n                if (Array.isArray(object)) {\n                    return \"array\";\n                }\n                return typeof object;\n            }\n\n            function isArrayAdd(array_operation) {\n                return array_operation.op === \"add\";\n            }\n            function isArrayRemove(array_operation) {\n                return array_operation.op === \"remove\";\n            }\n            function isArrayReplace(array_operation) {\n                return array_operation.op === \"replace\";\n            }\n            function diffArrays(input, output, ptr) {\n                // set up cost matrix (very simple initialization: just a map)\n                var memo = {\n                    \"0,0\": { operations: [], cost: 0 }\n                };\n                /**\n                input[i's] -> output[j's]\n                   Given the layout above, i is the row, j is the col\n                   returns a list of Operations needed to get to from input.slice(0, i) to\n                output.slice(0, j), the each marked with the total cost of getting there.\n                `cost` is a non-negative integer.\n                Recursive.\n                */\n                function dist(i, j) {\n                    // memoized\n                    var memoized = memo[i + \",\" + j];\n                    if (memoized === undefined) {\n                        if (compare(input[i - 1], output[j - 1])) {\n                            // equal (no operations => no cost)\n                            memoized = dist(i - 1, j - 1);\n                        } else {\n                            var alternatives = [];\n                            if (i > 0) {\n                                // NOT topmost row\n                                var remove_alternative = dist(i - 1, j);\n                                alternatives.push({\n                                    // the new operation must be pushed on the end\n                                    operations: remove_alternative.operations.concat({\n                                        op: \"remove\",\n                                        index: i - 1 }),\n                                    cost: remove_alternative.cost + 1 });\n                            }\n                            if (j > 0) {\n                                // NOT leftmost column\n                                var add_alternative = dist(i, j - 1);\n                                alternatives.push({\n                                    operations: add_alternative.operations.concat({\n                                        op: \"add\",\n                                        index: i - 1,\n                                        value: output[j - 1] }),\n                                    cost: add_alternative.cost + 1 });\n                            }\n                            if (i > 0 && j > 0) {\n                                // TABLE MIDDLE\n                                // supposing we replaced it, compute the rest of the costs:\n                                var replace_alternative = dist(i - 1, j - 1);\n                                // okay, the general plan is to replace it, but we can be smarter,\n                                // recursing into the structure and replacing only part of it if\n                                // possible, but to do so we'll need the original value\n                                alternatives.push({\n                                    operations: replace_alternative.operations.concat({\n                                        op: \"replace\",\n                                        index: i - 1,\n                                        original: input[i - 1],\n                                        value: output[j - 1] }),\n                                    cost: replace_alternative.cost + 1 });\n                            }\n                            // the only other case, i === 0 && j === 0, has already been memoized\n                            // the meat of the algorithm:\n                            // sort by cost to find the lowest one (might be several ties for lowest)\n                            // [4, 6, 7, 1, 2].sort((a, b) => a - b); -> [ 1, 2, 4, 6, 7 ]\n                            var best = alternatives.sort(function (a, b) {\n                                return a.cost - b.cost;\n                            })[0];\n                            memoized = best;\n                        }\n                        memo[i + \",\" + j] = memoized;\n                    }\n                    return memoized;\n                }\n                // handle weird objects masquerading as Arrays that don't have proper length\n                // properties by using 0 for everything but positive numbers\n                var input_length = isNaN(input.length) || input.length <= 0 ? 0 : input.length;\n                var output_length = isNaN(output.length) || output.length <= 0 ? 0 : output.length;\n                var array_operations = dist(input_length, output_length).operations;\n\n                var _array_operations$reduce = array_operations.reduce(function (_ref, array_operation) {\n                    var _ref2 = _slicedToArray(_ref, 2);\n\n                    var operations = _ref2[0];\n                    var padding = _ref2[1];\n\n                    if (isArrayAdd(array_operation)) {\n                        var padded_index = array_operation.index + 1 + padding;\n                        var index_token = padded_index < input_length + padding ? String(padded_index) : \"-\";\n                        var operation = {\n                            op: array_operation.op,\n                            path: ptr.add(index_token).toString(),\n                            value: array_operation.value };\n                        // padding++; // maybe only if array_operation.index > -1 ?\n                        return [operations.concat(operation), padding + 1];\n                    } else if (isArrayRemove(array_operation)) {\n                        var operation = {\n                            op: array_operation.op,\n                            path: ptr.add(String(array_operation.index + padding)).toString() };\n                        // padding--;\n                        return [operations.concat(operation), padding - 1];\n                    } else {\n                        var replace_ptr = ptr.add(String(array_operation.index + padding));\n                        var replace_operations = diffAny(array_operation.original, array_operation.value, replace_ptr);\n                        return [operations.concat.apply(operations, _toConsumableArray(replace_operations)), padding];\n                    }\n                }, [[], 0]);\n\n                var _array_operations$reduce2 = _slicedToArray(_array_operations$reduce, 2);\n\n                var operations = _array_operations$reduce2[0];\n                var padding = _array_operations$reduce2[1];\n\n                return operations;\n            }\n\n            function diffObjects(input, output, ptr) {\n                // if a key is in input but not output -> remove it\n                var operations = [];\n                subtract(input, output).forEach(function (key) {\n                    operations.push({ op: \"remove\", path: ptr.add(key).toString() });\n                });\n                // if a key is in output but not input -> add it\n                subtract(output, input).forEach(function (key) {\n                    operations.push({ op: \"add\", path: ptr.add(key).toString(), value: output[key] });\n                });\n                // if a key is in both, diff it recursively\n                intersection([input, output]).forEach(function (key) {\n                    operations.push.apply(operations, _toConsumableArray(diffAny(input[key], output[key], ptr.add(key))));\n                });\n                return operations;\n            }\n\n            function diffValues(input, output, ptr) {\n                if (!compare(input, output)) {\n                    return [{ op: \"replace\", path: ptr.toString(), value: output }];\n                }\n                return [];\n            }\n\n            function diffAny(input, output, ptr) {\n                var input_type = objectType(input);\n                var output_type = objectType(output);\n                if (input_type == \"array\" && output_type == \"array\") {\n                    return diffArrays(input, output, ptr);\n                }\n                if (input_type == \"object\" && output_type == \"object\") {\n                    return diffObjects(input, output, ptr);\n                }\n                // only pairs of arrays and objects can go down a path to produce a smaller\n                // diff; everything else must be wholesale replaced if inequal\n                return diffValues(input, output, ptr);\n            }\n        }, { \"./equal\": 2 }], 2: [function (_dereq_, module, exports) {\n\n            /**\n            `compare()` returns true if `left` and `right` are materially equal\n            (i.e., would produce equivalent JSON), false otherwise.\n            \n            > Here, \"equal\" means that the value at the target location and the\n            > value conveyed by \"value\" are of the same JSON type, and that they\n            > are considered equal by the following rules for that type:\n            > o  strings: are considered equal if they contain the same number of\n            >    Unicode characters and their code points are byte-by-byte equal.\n            > o  numbers: are considered equal if their values are numerically\n            >    equal.\n            > o  arrays: are considered equal if they contain the same number of\n            >    values, and if each value can be considered equal to the value at\n            >    the corresponding position in the other array, using this list of\n            >    type-specific rules.\n            > o  objects: are considered equal if they contain the same number of\n            >    members, and if each member can be considered equal to a member in\n            >    the other object, by comparing their keys (as strings) and their\n            >    values (using this list of type-specific rules).\n            > o  literals (false, true, and null): are considered equal if they are\n            >    the same.\n            */\n            \"use strict\";\n\n            exports.compare = compare;\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            /**\n            zip(a, b) assumes that a.length === b.length.\n            */\n            function zip(a, b) {\n                var zipped = [];\n                for (var i = 0, l = a.length; i < l; i++) {\n                    zipped.push([a[i], b[i]]);\n                }\n                return zipped;\n            }\n            /**\n            compareArrays(left, right) assumes that `left` and `right` are both Arrays.\n            */\n            function compareArrays(left, right) {\n                if (left.length !== right.length) {\n                    return false;\n                }return zip(left, right).every(function (pair) {\n                    return compare(pair[0], pair[1]);\n                });\n            }\n            /**\n            compareObjects(left, right) assumes that `left` and `right` are both Objects.\n            */\n            function compareObjects(left, right) {\n                var left_keys = Object.keys(left);\n                var right_keys = Object.keys(right);\n                if (!compareArrays(left_keys, right_keys)) {\n                    return false;\n                }return left_keys.every(function (key) {\n                    return compare(left[key], right[key]);\n                });\n            }\n            function compare(left, right) {\n                // strict equality handles literals, numbers, and strings (a sufficient but not necessary cause)\n                if (left === right) {\n                    return true;\n                } // check arrays\n                if (Array.isArray(left) && Array.isArray(right)) {\n                    return compareArrays(left, right);\n                }\n                // check objects\n                if (Object(left) === left && Object(right) === right) {\n                    return compareObjects(left, right);\n                }\n                // mismatched arrays & objects, etc., are always inequal\n                return false;\n            }\n        }, {}], 3: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var _get = function get(object, property, receiver) {\n                var desc = Object.getOwnPropertyDescriptor(object, property);if (desc === undefined) {\n                    var parent = Object.getPrototypeOf(object);if (parent === null) {\n                        return undefined;\n                    } else {\n                        return get(parent, property, receiver);\n                    }\n                } else if (\"value\" in desc && desc.writable) {\n                    return desc.value;\n                } else {\n                    var getter = desc.get;if (getter === undefined) {\n                        return undefined;\n                    }return getter.call(receiver);\n                }\n            };\n\n            var _inherits = function _inherits(subClass, superClass) {\n                if (typeof superClass !== \"function\" && superClass !== null) {\n                    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n                }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) subClass.__proto__ = superClass;\n            };\n\n            var _classCallCheck = function _classCallCheck(instance, Constructor) {\n                if (!(instance instanceof Constructor)) {\n                    throw new TypeError(\"Cannot call a class as a function\");\n                }\n            };\n\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n\n            var MissingError = exports.MissingError = function (_Error) {\n                function MissingError(path) {\n                    _classCallCheck(this, MissingError);\n\n                    _get(Object.getPrototypeOf(MissingError.prototype), \"constructor\", this).call(this, \"Value required at path: \" + path);\n                    this.path = path;\n                    this.name = this.constructor.name;\n                }\n\n                _inherits(MissingError, _Error);\n\n                return MissingError;\n            }(Error);\n\n            var InvalidOperationError = exports.InvalidOperationError = function (_Error2) {\n                function InvalidOperationError(op) {\n                    _classCallCheck(this, InvalidOperationError);\n\n                    _get(Object.getPrototypeOf(InvalidOperationError.prototype), \"constructor\", this).call(this, \"Invalid operation: \" + op);\n                    this.op = op;\n                    this.name = this.constructor.name;\n                }\n\n                _inherits(InvalidOperationError, _Error2);\n\n                return InvalidOperationError;\n            }(Error);\n\n            var TestError = exports.TestError = function (_Error3) {\n                function TestError(actual, expected) {\n                    _classCallCheck(this, TestError);\n\n                    _get(Object.getPrototypeOf(TestError.prototype), \"constructor\", this).call(this, \"Test failed: \" + actual + \" != \" + expected);\n                    this.actual = actual;\n                    this.expected = expected;\n                    this.name = this.constructor.name;\n                    this.actual = actual;\n                    this.expected = expected;\n                }\n\n                _inherits(TestError, _Error3);\n\n                return TestError;\n            }(Error);\n        }, {}], 4: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var _interopRequireWildcard = function _interopRequireWildcard(obj) {\n                return obj && obj.__esModule ? obj : { \"default\": obj };\n            };\n\n            /**\n            Apply a 'application/json-patch+json'-type patch to an object.\n            \n            `patch` *must* be an array of operations.\n            \n            > Operation objects MUST have exactly one \"op\" member, whose value\n            > indicates the operation to perform.  Its value MUST be one of \"add\",\n            > \"remove\", \"replace\", \"move\", \"copy\", or \"test\"; other values are\n            > errors.\n            \n            This method currently operates on the target object in-place.\n            \n            Returns list of results, one for each operation.\n              - `null` indicated success.\n              - otherwise, the result will be an instance of one of the Error classe\n                defined in errors.js.\n            */\n            exports.applyPatch = applyPatch;\n\n            /**\n            Produce a 'application/json-patch+json'-type patch to get from one object to\n            another.\n            \n            This does not alter `input` or `output` unless they have a property getter with\n            side-effects (which is not a good idea anyway).\n            \n            Returns list of operations to perform on `input` to produce `output`.\n            */\n            exports.createPatch = createPatch;\n\n            /**\n            Produce an 'application/json-patch+json'-type list of tests, to verify that\n            existing values in an object are identical to the those captured at some\n            checkpoint (whenever this function is called).\n            \n            This does not alter `input` or `output` unless they have a property getter with\n            side-effects (which is not a good idea anyway).\n            \n            Returns list of test operations.\n            */\n            exports.createTests = createTests;\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n\n            var InvalidOperationError = _dereq_(\"./errors\").InvalidOperationError;\n\n            var Pointer = _dereq_(\"./pointer\").Pointer;\n\n            var operationFunctions = _interopRequireWildcard(_dereq_(\"./patch\"));\n\n            var _diff = _dereq_(\"./diff\");\n\n            var diffAny = _diff.diffAny;\n            var isDestructive = _diff.isDestructive;\n\n            function applyPatch(object, patch) {\n                return patch.map(function (operation) {\n                    var operationFunction = operationFunctions[operation.op];\n                    // speedy exit if we don't recognize the operation name\n                    if (operationFunction === undefined) {\n                        return new InvalidOperationError(operation.op);\n                    }\n                    return operationFunction(object, operation);\n                });\n            }\n\n            function createPatch(input, output) {\n                var ptr = new Pointer();\n                // a new Pointer gets a default path of [''] if not specified\n                return diffAny(input, output, ptr);\n            }\n\n            function createTest(input, path) {\n                var endpoint = Pointer.fromJSON(path).evaluate(input);\n                if (endpoint !== undefined) {\n                    return { op: \"test\", path: path, value: endpoint.value };\n                }\n            }\n            function createTests(input, patch) {\n                var tests = new Array();\n                patch.filter(isDestructive).forEach(function (operation) {\n                    var pathTest = createTest(input, operation.path);\n                    if (pathTest) tests.push(pathTest);\n                    if (\"from\" in operation) {\n                        var fromTest = createTest(input, operation.from);\n                        if (fromTest) tests.push(fromTest);\n                    }\n                });\n                return tests;\n            }\n        }, { \"./diff\": 1, \"./errors\": 3, \"./patch\": 5, \"./pointer\": 6 }], 5: [function (_dereq_, module, exports) {\n\n            /**\n            >  o  If the target location specifies an array index, a new value is\n            >     inserted into the array at the specified index.\n            >  o  If the target location specifies an object member that does not\n            >     already exist, a new member is added to the object.\n            >  o  If the target location specifies an object member that does exist,\n            >     that member's value is replaced.\n            */\n            \"use strict\";\n\n            exports.add = add;\n\n            /**\n            > The \"remove\" operation removes the value at the target location.\n            > The target location MUST exist for the operation to be successful.\n            */\n            exports.remove = remove;\n\n            /**\n            > The \"replace\" operation replaces the value at the target location\n            > with a new value.  The operation object MUST contain a \"value\" member\n            > whose content specifies the replacement value.\n            > The target location MUST exist for the operation to be successful.\n            \n            > This operation is functionally identical to a \"remove\" operation for\n            > a value, followed immediately by an \"add\" operation at the same\n            > location with the replacement value.\n            \n            Even more simply, it's like the add operation with an existence check.\n            */\n            exports.replace = replace;\n\n            /**\n            > The \"move\" operation removes the value at a specified location and\n            > adds it to the target location.\n            > The operation object MUST contain a \"from\" member, which is a string\n            > containing a JSON Pointer value that references the location in the\n            > target document to move the value from.\n            > This operation is functionally identical to a \"remove\" operation on\n            > the \"from\" location, followed immediately by an \"add\" operation at\n            > the target location with the value that was just removed.\n            \n            > The \"from\" location MUST NOT be a proper prefix of the \"path\"\n            > location; i.e., a location cannot be moved into one of its children.\n            \n            TODO: throw if the check described in the previous paragraph fails.\n            */\n            exports.move = move;\n\n            /**\n            > The \"copy\" operation copies the value at a specified location to the\n            > target location.\n            > The operation object MUST contain a \"from\" member, which is a string\n            > containing a JSON Pointer value that references the location in the\n            > target document to copy the value from.\n            > The \"from\" location MUST exist for the operation to be successful.\n            \n            > This operation is functionally identical to an \"add\" operation at the\n            > target location using the value specified in the \"from\" member.\n            \n            Alternatively, it's like 'move' without the 'remove'.\n            */\n            exports.copy = copy;\n\n            /**\n            > The \"test\" operation tests that a value at the target location is\n            > equal to a specified value.\n            > The operation object MUST contain a \"value\" member that conveys the\n            > value to be compared to the target location's value.\n            > The target location MUST be equal to the \"value\" value for the\n            > operation to be considered successful.\n            */\n            exports.test = test;\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n\n            var Pointer = _dereq_(\"./pointer\").Pointer;\n\n            var compare = _dereq_(\"./equal\").compare;\n\n            var _errors = _dereq_(\"./errors\");\n\n            var MissingError = _errors.MissingError;\n            var TestError = _errors.TestError;\n\n            function _add(object, key, value) {\n                if (Array.isArray(object)) {\n                    // `key` must be an index\n                    if (key == \"-\") {\n                        object.push(value);\n                    } else {\n                        object.splice(key, 0, value);\n                    }\n                } else {\n                    object[key] = value;\n                }\n            }\n            function _remove(object, key) {\n                if (Array.isArray(object)) {\n                    // '-' syntax doesn't make sense when removing\n                    object.splice(key, 1);\n                } else {\n                    // not sure what the proper behavior is when path = ''\n                    delete object[key];\n                }\n            }\n            function add(object, operation) {\n                var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                // it's not exactly a \"MissingError\" in the same way that `remove` is -- more like a MissingParent, or something\n                if (endpoint.parent === undefined) {\n                    return new MissingError(operation.path);\n                }\n                _add(endpoint.parent, endpoint.key, operation.value);\n                return null;\n            }\n\n            function remove(object, operation) {\n                // endpoint has parent, key, and value properties\n                var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                if (endpoint.value === undefined) {\n                    return new MissingError(operation.path);\n                }\n                // not sure what the proper behavior is when path = ''\n                _remove(endpoint.parent, endpoint.key);\n                return null;\n            }\n\n            function replace(object, operation) {\n                var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                if (endpoint.value === undefined) {\n                    return new MissingError(operation.path);\n                }endpoint.parent[endpoint.key] = operation.value;\n                return null;\n            }\n\n            function move(object, operation) {\n                var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);\n                if (from_endpoint.value === undefined) {\n                    return new MissingError(operation.from);\n                }var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                if (endpoint.parent === undefined) {\n                    return new MissingError(operation.path);\n                }_remove(from_endpoint.parent, from_endpoint.key);\n                _add(endpoint.parent, endpoint.key, from_endpoint.value);\n                return null;\n            }\n\n            function copy(object, operation) {\n                var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);\n                if (from_endpoint.value === undefined) {\n                    return new MissingError(operation.from);\n                }var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                if (endpoint.parent === undefined) {\n                    return new MissingError(operation.path);\n                }_remove(from_endpoint.parent, from_endpoint.key);\n                _add(endpoint.parent, endpoint.key, from_endpoint.value);\n                return null;\n            }\n\n            function test(object, operation) {\n                var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n                var result = compare(endpoint.value, operation.value);\n                if (!result) {\n                    return new TestError(endpoint.value, operation.value);\n                }return null;\n            }\n        }, { \"./equal\": 2, \"./errors\": 3, \"./pointer\": 6 }], 6: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var _createClass = function () {\n                function defineProperties(target, props) {\n                    for (var key in props) {\n                        var prop = props[key];prop.configurable = true;if (prop.value) prop.writable = true;\n                    }Object.defineProperties(target, props);\n                }return function (Constructor, protoProps, staticProps) {\n                    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n                };\n            }();\n\n            var _classCallCheck = function _classCallCheck(instance, Constructor) {\n                if (!(instance instanceof Constructor)) {\n                    throw new TypeError(\"Cannot call a class as a function\");\n                }\n            };\n\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            /**\n            Unescape token part of a JSON Pointer string\n            \n            `token` should *not* contain any '/' characters.\n            \n            > Evaluation of each reference token begins by decoding any escaped\n            > character sequence.  This is performed by first transforming any\n            > occurrence of the sequence '~1' to '/', and then transforming any\n            > occurrence of the sequence '~0' to '~'.  By performing the\n            > substitutions in this order, an implementation avoids the error of\n            > turning '~01' first into '~1' and then into '/', which would be\n            > incorrect (the string '~01' correctly becomes '~1' after\n            > transformation).\n            \n            Here's my take:\n            \n            ~1 is unescaped with higher priority than ~0 because it is a lower-order escape character.\n            I say \"lower order\" because '/' needs escaping due to the JSON Pointer serialization technique.\n            Whereas, '~' is escaped because escaping '/' uses the '~' character.\n            */\n            function unescape(token) {\n                return token.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n            }\n            /** Escape token part of a JSON Pointer string\n            \n            > '~' needs to be encoded as '~0' and '/'\n            > needs to be encoded as '~1' when these characters appear in a\n            > reference token.\n            \n            This is the exact inverse of `unescape()`, so the reverse replacements must take place in reverse order.\n            */\n            function escape(token) {\n                return token.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n            }\n            /**\n            JSON Pointer representation\n            */\n\n            var Pointer = exports.Pointer = function () {\n                function Pointer() {\n                    var tokens = arguments[0] === undefined ? [\"\"] : arguments[0];\n\n                    _classCallCheck(this, Pointer);\n\n                    this.tokens = tokens;\n                }\n\n                _createClass(Pointer, {\n                    toString: {\n                        value: function toString() {\n                            return this.tokens.map(escape).join(\"/\");\n                        }\n                    },\n                    evaluate: {\n                        /**\n                        Returns an object with 'parent', 'key', and 'value' properties.\n                        In the special case that pointer = \"\", parent and key will be null, and `value = obj`\n                        Otherwise, parent will be the such that `parent[key] == value`\n                        */\n\n                        value: function evaluate(object) {\n                            var parent = null;\n                            var token = null;\n                            for (var i = 1, l = this.tokens.length; i < l; i++) {\n                                parent = object;\n                                token = this.tokens[i];\n                                // not sure if this the best way to handle non-existant paths...\n                                object = (parent || {})[token];\n                            }\n                            return {\n                                parent: parent,\n                                key: token,\n                                value: object };\n                        }\n                    },\n                    push: {\n                        value: function push(token) {\n                            // mutable\n                            this.tokens.push(token);\n                        }\n                    },\n                    add: {\n                        /**\n                        `token` should be a String. It'll be coerced to one anyway.\n                           immutable (shallowly)\n                        */\n\n                        value: function add(token) {\n                            var tokens = this.tokens.concat(String(token));\n                            return new Pointer(tokens);\n                        }\n                    }\n                }, {\n                    fromJSON: {\n                        /**\n                        `path` *must* be a properly escaped string.\n                        */\n\n                        value: function fromJSON(path) {\n                            var tokens = path.split(\"/\").map(unescape);\n                            if (tokens[0] !== \"\") throw new Error(\"Invalid JSON Pointer: \" + path);\n                            return new Pointer(tokens);\n                        }\n                    }\n                });\n\n                return Pointer;\n            }();\n        }, {}] }, {}, [4])(4);\n});\n\n/***/ }),\n\n/***/ \"b1KJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar util = __webpack_require__(\"gfUn\");\nvar precond = __webpack_require__(\"Dygy\");\n\nvar BackoffStrategy = __webpack_require__(\"C6lX\");\n\n// Exponential backoff strategy.\nfunction ExponentialBackoffStrategy(options) {\n    BackoffStrategy.call(this, options);\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n    this.factor_ = ExponentialBackoffStrategy.DEFAULT_FACTOR;\n\n    if (options && options.factor !== undefined) {\n        precond.checkArgument(options.factor > 1, 'Exponential factor should be greater than 1 but got %s.', options.factor);\n        this.factor_ = options.factor;\n    }\n}\nutil.inherits(ExponentialBackoffStrategy, BackoffStrategy);\n\n// Default multiplication factor used to compute the next backoff delay from\n// the current one. The value can be overridden by passing a custom factor as\n// part of the options.\nExponentialBackoffStrategy.DEFAULT_FACTOR = 2;\n\nExponentialBackoffStrategy.prototype.next_ = function () {\n    this.backoffDelay_ = Math.min(this.nextBackoffDelay_, this.getMaxDelay());\n    this.nextBackoffDelay_ = this.backoffDelay_ * this.factor_;\n    return this.backoffDelay_;\n};\n\nExponentialBackoffStrategy.prototype.reset_ = function () {\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n};\n\nmodule.exports = ExponentialBackoffStrategy;\n\n/***/ }),\n\n/***/ \"b1tA\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(\"vSO4\");\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(\"ZaKr\").set });\n\n/***/ }),\n\n/***/ \"b7Q2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar create = __webpack_require__(\"TNJq\"),\n    descriptor = __webpack_require__(\"0WCH\"),\n    setToStringTag = __webpack_require__(\"11Ut\"),\n    IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(\"akPY\")(IteratorPrototype, __webpack_require__(\"Ug9I\")('iterator'), function () {\n  return this;\n});\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n/***/ }),\n\n/***/ \"c2zY\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(\"i1Q6\"),\n    core = __webpack_require__(\"zKeE\"),\n    LIBRARY = __webpack_require__(\"1kq3\"),\n    wksExt = __webpack_require__(\"ZxII\"),\n    defineProperty = __webpack_require__(\"Gfzd\").f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n/***/ }),\n\n/***/ \"c6mp\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"c2zY\")('asyncIterator');\n\n/***/ }),\n\n/***/ \"cFQ4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _slicedToArray2 = __webpack_require__(\"m8OI\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = __webpack_require__(\"X9RM\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable key-spacing */\nvar Backoff = __webpack_require__(\"PvFw\");\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar syncerror_1 = __webpack_require__(\"XzVR\");\nvar twilio_transport_1 = __webpack_require__(\"JE0K\");\n/**\n * A data container used by the Subscriptions class to track subscribed entities' local\n * representations and their state.\n */\n\nvar SubscribedEntity = function () {\n    function SubscribedEntity(entity) {\n        (0, _classCallCheck3.default)(this, SubscribedEntity);\n\n        this.localObject = entity;\n        this.pendingCorrelationId = null;\n        this.established = false;\n        this.retryCount = 0;\n    }\n\n    (0, _createClass3.default)(SubscribedEntity, [{\n        key: \"update\",\n        value: function update(event, isStrictlyOrderd) {\n            this.localObject._update(event, isStrictlyOrderd);\n        }\n    }, {\n        key: \"reset\",\n        value: function reset() {\n            this.pendingCorrelationId = null;\n            this.retryCount = 0;\n            this.established = false;\n        }\n    }, {\n        key: \"markAsFailed\",\n        value: function markAsFailed(message) {\n            this.rejectedWithError = message.error;\n            this.pendingCorrelationId = null;\n            this.localObject.reportFailure(new syncerror_1.SyncError(\"Failed to subscribe on service events: \" + message.error.message, message.error.status, message.error.code));\n        }\n    }, {\n        key: \"complete\",\n        value: function complete(eventId) {\n            this.pendingCorrelationId = null;\n            this.established = true;\n            this.localObject._advanceLastEventId(eventId);\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.localObject.sid;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return this.localObject.type;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.localObject.lastEventId;\n        }\n    }, {\n        key: \"isInTransition\",\n        get: function get() {\n            return this.pendingCorrelationId !== null;\n        }\n    }, {\n        key: \"isEstablished\",\n        get: function get() {\n            return this.established;\n        }\n    }]);\n    return SubscribedEntity;\n}();\n/**\n * @class Subscriptions\n * @classdesc A manager which, in batches of varying size, continuously persists the\n *      subscription intent of the caller to the Sync backend until it achieves a\n *      converged state.\n */\n\nvar Subscriptions = function () {\n    /**\n     * @constructor\n     * Prepares a new Subscriptions manager object with zero subscribed or persisted subscriptions.\n     *\n     * @param {object} config may include a key 'backoffConfig', wherein any of the parameters\n     *      of Backoff.exponential (from npm 'backoff') are valid and will override the defaults.\n     *\n     * @param {Network} must be a viable running Sync Network object, useful for routing requests.\n     */\n    function Subscriptions(services) {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Subscriptions);\n\n        this.isConnected = false;\n        this.maxBatchSize = 100;\n        this.services = services;\n        this.subscriptions = new _map2.default();\n        this.persisted = new _map2.default();\n        this.latestPokeResponseArrivalTimestampByCorrelationId = new _map2.default();\n        var defaultBackoffConfig = {\n            randomisationFactor: 0.2,\n            initialDelay: 100,\n            maxDelay: 2 * 60 * 1000\n        };\n        this.backoff = Backoff.exponential((0, _extends3.default)(defaultBackoffConfig, this.services.config.backoffConfig));\n        // This block is triggered by #_persist. Every request is executed in a series of (ideally 1)\n        // backoff 'ready' event, at which point a new subscription set is calculated.\n        this.backoff.on('ready', function () {\n            var _getSubscriptionUpdat = _this.getSubscriptionUpdateBatch(),\n                action = _getSubscriptionUpdat.action,\n                subscriptionRequests = _getSubscriptionUpdat.subscriptions;\n\n            if (action) {\n                _this.applyNewSubscriptionUpdateBatch(action, subscriptionRequests);\n            } else {\n                _this.backoff.reset();\n                logger_1.default.info('All subscriptions resolved.');\n            }\n        });\n    }\n\n    (0, _createClass3.default)(Subscriptions, [{\n        key: \"getSubscriptionUpdateBatch\",\n        value: function getSubscriptionUpdateBatch() {\n            function substract(these, those, ignoreCurrentOp, limit) {\n                var result = [];\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = (0, _getIterator3.default)(these), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var _step$value = (0, _slicedToArray3.default)(_step.value, 2),\n                            thisKey = _step$value[0],\n                            thisValue = _step$value[1];\n\n                        var otherValue = those.get(thisKey);\n                        if (!otherValue && (ignoreCurrentOp || !thisValue.isInTransition) && !thisValue.rejectedWithError) {\n                            result.push(thisValue);\n                            if (limit && result.length >= limit) {\n                                break;\n                            }\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n\n                return result;\n            }\n            var listToAdd = substract(this.subscriptions, this.persisted, false, this.maxBatchSize);\n            if (listToAdd.length > 0) {\n                return { action: 'establish', subscriptions: listToAdd };\n            }\n            var listToRemove = substract(this.persisted, this.subscriptions, true, this.maxBatchSize);\n            if (listToRemove.length > 0) {\n                return { action: 'cancel', subscriptions: listToRemove };\n            }\n            return { action: null, subscriptions: null };\n        }\n    }, {\n        key: \"persist\",\n        value: function persist() {\n            try {\n                this.backoff.backoff();\n            } catch (e) {} // eslint-disable-line no-empty\n        }\n    }, {\n        key: \"applyNewSubscriptionUpdateBatch\",\n        value: function applyNewSubscriptionUpdateBatch(action, requests) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var _this2 = this;\n\n                var correlationId, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, subscribed, response, newMaxBatchSize, estimatedDeliveryInMs, isNumeric, isValidTimeout, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, attemptedSubscription;\n\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.isConnected) {\n                                    _context.next = 4;\n                                    break;\n                                }\n\n                                logger_1.default.debug(\"Twilsock connection (required for subscription) not ready; waiting\\u2026\");\n                                this.backoff.reset();\n                                return _context.abrupt(\"return\");\n\n                            case 4:\n                                // Keeping in mind that events may begin flowing _before_ we receive the response\n                                requests = this.processLocalActions(action, requests);\n                                correlationId = new Date().getTime();\n                                _iteratorNormalCompletion2 = true;\n                                _didIteratorError2 = false;\n                                _iteratorError2 = undefined;\n                                _context.prev = 9;\n\n                                for (_iterator2 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                                    subscribed = _step2.value;\n\n                                    this.recordActionAttemptOn(subscribed, action, correlationId);\n                                }\n                                // Send this batch to the service\n                                _context.next = 17;\n                                break;\n\n                            case 13:\n                                _context.prev = 13;\n                                _context.t0 = _context[\"catch\"](9);\n                                _didIteratorError2 = true;\n                                _iteratorError2 = _context.t0;\n\n                            case 17:\n                                _context.prev = 17;\n                                _context.prev = 18;\n\n                                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                    _iterator2.return();\n                                }\n\n                            case 20:\n                                _context.prev = 20;\n\n                                if (!_didIteratorError2) {\n                                    _context.next = 23;\n                                    break;\n                                }\n\n                                throw _iteratorError2;\n\n                            case 23:\n                                return _context.finish(20);\n\n                            case 24:\n                                return _context.finish(17);\n\n                            case 25:\n                                _context.prev = 25;\n                                _context.next = 28;\n                                return this.request(action, correlationId, requests);\n\n                            case 28:\n                                response = _context.sent;\n                                newMaxBatchSize = response.body.max_batch_size;\n\n                                if (!isNaN(parseInt(newMaxBatchSize)) && isFinite(newMaxBatchSize) && newMaxBatchSize > 0) {\n                                    this.maxBatchSize = newMaxBatchSize;\n                                }\n                                if (action === 'establish') {\n                                    estimatedDeliveryInMs = response.body.estimated_delivery_in_ms;\n                                    isNumeric = !isNaN(parseFloat(estimatedDeliveryInMs)) && isFinite(estimatedDeliveryInMs);\n                                    isValidTimeout = isNumeric && estimatedDeliveryInMs > 0;\n\n                                    if (isValidTimeout) {\n                                        setTimeout(function () {\n                                            return _this2.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests);\n                                        }, estimatedDeliveryInMs);\n                                    } else {\n                                        logger_1.default.error(\"Invalid timeout: \" + estimatedDeliveryInMs);\n                                    }\n                                }\n                                this.backoff.reset();\n                                _context.next = 57;\n                                break;\n\n                            case 35:\n                                _context.prev = 35;\n                                _context.t1 = _context[\"catch\"](25);\n                                _iteratorNormalCompletion3 = true;\n                                _didIteratorError3 = false;\n                                _iteratorError3 = undefined;\n                                _context.prev = 40;\n\n                                for (_iterator3 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                                    attemptedSubscription = _step3.value;\n\n                                    this.recordActionFailureOn(attemptedSubscription, action);\n                                }\n                                _context.next = 48;\n                                break;\n\n                            case 44:\n                                _context.prev = 44;\n                                _context.t2 = _context[\"catch\"](40);\n                                _didIteratorError3 = true;\n                                _iteratorError3 = _context.t2;\n\n                            case 48:\n                                _context.prev = 48;\n                                _context.prev = 49;\n\n                                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                                    _iterator3.return();\n                                }\n\n                            case 51:\n                                _context.prev = 51;\n\n                                if (!_didIteratorError3) {\n                                    _context.next = 54;\n                                    break;\n                                }\n\n                                throw _iteratorError3;\n\n                            case 54:\n                                return _context.finish(51);\n\n                            case 55:\n                                return _context.finish(48);\n\n                            case 56:\n                                if (_context.t1 instanceof twilio_transport_1.TwilsockUnavailableError) {\n                                    logger_1.default.debug(\"Twilsock connection (required for subscription) not ready (c:\" + correlationId + \"); waiting\\u2026\");\n                                    this.backoff.reset();\n                                } else {\n                                    logger_1.default.debug(\"Failed an attempt to \" + action + \" subscriptions (c:\" + correlationId + \"); retrying\", _context.t1);\n                                    this.persist();\n                                }\n\n                            case 57:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[9, 13, 17, 25], [18,, 20, 24], [25, 35], [40, 44, 48, 56], [49,, 51, 55]]);\n            }));\n        }\n    }, {\n        key: \"verifyPokeDelivery\",\n        value: function verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests) {\n            var _this3 = this;\n\n            var lastReceived = this.latestPokeResponseArrivalTimestampByCorrelationId.get(correlationId);\n            var silencePeriod = lastReceived ? new Date().getTime() - lastReceived : estimatedDeliveryInMs;\n            if (silencePeriod >= estimatedDeliveryInMs) {\n                // If we haven't received _any_ responses from that poke request for the duration of estimated_delivery_in_ms, poke again\n                requests.filter(function (r) {\n                    return r.pendingCorrelationId === correlationId;\n                }).forEach(function (r) {\n                    r.pendingCorrelationId = null;\n                    r.retryCount++;\n                    _this3.persisted.delete(r.sid);\n                });\n                this.persist();\n                this.latestPokeResponseArrivalTimestampByCorrelationId.delete(correlationId);\n            } else {\n                // Otherwise, the poke responses are probably in transit and we should wait for them\n                var timeoutExtension = estimatedDeliveryInMs - silencePeriod;\n                setTimeout(function () {\n                    return _this3.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests);\n                }, timeoutExtension);\n            }\n        }\n    }, {\n        key: \"processLocalActions\",\n        value: function processLocalActions(action, requests) {\n            if (action === 'cancel') {\n                return requests.filter(function (request) {\n                    return !request.rejectedWithError;\n                });\n            }\n            return requests;\n        }\n    }, {\n        key: \"recordActionAttemptOn\",\n        value: function recordActionAttemptOn(attemptedSubscription, action, correlationId) {\n            if (action === 'establish') {\n                this.persisted.set(attemptedSubscription.sid, attemptedSubscription);\n                attemptedSubscription.pendingCorrelationId = correlationId;\n            } else {\n                var persistedSubscription = this.persisted.get(attemptedSubscription.sid);\n                if (persistedSubscription) {\n                    persistedSubscription.pendingCorrelationId = correlationId;\n                }\n            }\n        }\n    }, {\n        key: \"recordActionFailureOn\",\n        value: function recordActionFailureOn(attemptedSubscription, action) {\n            attemptedSubscription.pendingCorrelationId = null;\n            if (action === 'establish') {\n                this.persisted.delete(attemptedSubscription.sid);\n            }\n        }\n    }, {\n        key: \"request\",\n        value: function request(action, correlationId, objects) {\n            var requests = objects.map(function (object) {\n                return {\n                    object_sid: object.sid,\n                    object_type: object.type,\n                    last_event_id: action === 'establish' ? object.lastEventId : undefined // eslint-disable-line no-undefined, camelcase\n                };\n            });\n            var retriedRequests = objects.filter(function (a) {\n                return a.retryCount > 0;\n            }).length;\n            logger_1.default.debug(\"Attempting '\" + action + \"' request (c:\" + correlationId + \"):\", requests);\n            /* eslint-disable camelcase */\n            var requestBody = {\n                event_protocol_version: 3,\n                action: action,\n                correlation_id: correlationId,\n                retried_requests: retriedRequests,\n                requests: requests\n            };\n            /* eslint-enable camelcase */\n            return this.services.network.post(this.services.config.subscriptionsUri, requestBody, null, true);\n        }\n        /**\n         * Establishes intent to be subscribed to this entity. That subscription will be effected\n         * asynchronously.\n         * If subscription to the given sid already exists, it will be overwritten.\n         *\n         * @param {string} sid should be a well-formed SID, uniquely identifying a single instance of a Sync entity.\n         * @param {object} entity should represent the (singular) local representation of this entity.\n         *      Incoming events and modifications to the entity will be directed at the _update() function\n         *      of this provided reference.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"add\",\n        value: function add(sid, entity) {\n            logger_1.default.debug(\"Establishing intent to subscribe to \" + sid);\n            var existingSubscription = this.subscriptions.get(sid);\n            if (existingSubscription && existingSubscription.lastEventId === entity.lastEventId) {\n                // If last event id is the same as before - we're fine\n                return;\n            }\n            this.persisted.delete(sid);\n            this.subscriptions.set(sid, new SubscribedEntity(entity));\n            this.persist();\n        }\n        /**\n         * Establishes the caller's intent to no longer be subscribed to this entity. Following this\n         * call, no further events shall be routed to the local representation of the entity, even\n         * though a server-side subscription may take more time to actually terminate.\n         *\n         * @param {string} sid should be any well-formed SID, uniquely identifying a Sync entity.\n         *      This call only has meaningful effect if that entity is subscribed at the\n         *      time of call. Otherwise does nothing.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(sid) {\n            logger_1.default.debug(\"Establishing intent to unsubscribe from \" + sid);\n            var removed = this.subscriptions.delete(sid);\n            if (removed) {\n                this.persist();\n            }\n        }\n        /**\n         * The point of ingestion for remote incoming messages (e.g. new data was written to a map\n         * to which we are subscribed).\n         *\n         * @param {object} message is the full, unaltered body of the incoming notification.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"acceptMessage\",\n        value: function acceptMessage(message, isStrictlyOrdered) {\n            logger_1.default.trace('Subscriptions received', message);\n            if (message.correlation_id) {\n                this.latestPokeResponseArrivalTimestampByCorrelationId.set(message.correlation_id, new Date().getTime());\n            }\n            switch (message.event_type) {\n                case 'subscription_established':\n                    this.applySubscriptionEstablishedMessage(message.event, message.correlation_id);\n                    break;\n                case 'subscription_canceled':\n                    this.applySubscriptionCancelledMessage(message.event, message.correlation_id);\n                    break;\n                case 'subscription_failed':\n                    this.applySubscriptionFailedMessage(message.event, message.correlation_id);\n                    break;\n                case (message.event_type.match(/^(?:map|list|document)_/) || {}).input:\n                    {\n                        var typedSid = function typedSid() {\n                            if (message.event_type.match(/^map_/)) {\n                                return message.event.map_sid;\n                            } else if (message.event_type.match(/^list_/)) {\n                                return message.event.list_sid;\n                            } else if (message.event_type.match(/^document_/)) {\n                                return message.event.document_sid;\n                            } else {\n                                return undefined;\n                            }\n                        };\n\n                        ;\n                        this.applyEventToSubscribedEntity(typedSid(), message, isStrictlyOrdered);\n                    }\n                    break;\n                default:\n                    logger_1.default.debug(\"Dropping unknown message type \" + message.event_type);\n                    break;\n            }\n        }\n    }, {\n        key: \"applySubscriptionEstablishedMessage\",\n        value: function applySubscriptionEstablishedMessage(message, correlationId) {\n            var sid = message.object_sid;\n            var subscriptionIntent = this.persisted.get(message.object_sid);\n            if (subscriptionIntent && subscriptionIntent.pendingCorrelationId === correlationId) {\n                if (message.replay_status === 'interrupted') {\n                    logger_1.default.debug(\"Event Replay for subscription to \" + sid + \" (c:\" + correlationId + \") interrupted; continuing eagerly.\");\n                    subscriptionIntent.pendingCorrelationId = null;\n                    this.persisted.delete(subscriptionIntent.sid);\n                    this.backoff.reset();\n                } else if (message.replay_status === 'completed') {\n                    logger_1.default.debug(\"Event Replay for subscription to \" + sid + \" (c:\" + correlationId + \") completed. Subscription is ready.\");\n                    subscriptionIntent.complete(message.last_event_id);\n                    this.persisted.set(message.object_sid, subscriptionIntent);\n                    this.backoff.reset();\n                }\n            } else {\n                logger_1.default.debug(\"Late message for \" + message.object_sid + \" (c:\" + correlationId + \") dropped.\");\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applySubscriptionCancelledMessage\",\n        value: function applySubscriptionCancelledMessage(message, correlationId) {\n            var persistedSubscription = this.persisted.get(message.object_sid);\n            if (persistedSubscription && persistedSubscription.pendingCorrelationId === correlationId) {\n                persistedSubscription.pendingCorrelationId = null;\n                this.persisted.delete(message.object_sid);\n            } else {\n                logger_1.default.debug(\"Late message for \" + message.object_sid + \" (c:\" + correlationId + \") dropped.\");\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applySubscriptionFailedMessage\",\n        value: function applySubscriptionFailedMessage(message, correlationId) {\n            var sid = message.object_sid;\n            var subscriptionIntent = this.subscriptions.get(sid);\n            var subscription = this.persisted.get(sid);\n            if (subscriptionIntent && subscription) {\n                if (subscription.pendingCorrelationId === correlationId) {\n                    logger_1.default.error(\"Failed to subscribe on \" + subscription.sid, message.error);\n                    subscription.markAsFailed(message);\n                }\n            } else if (!subscriptionIntent && subscription) {\n                this.persisted.delete(sid);\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applyEventToSubscribedEntity\",\n        value: function applyEventToSubscribedEntity(sid, message, isStrictlyOrdered) {\n            var _this4 = this;\n\n            if (!sid) {\n                return;\n            }\n            // Looking for subscription descriptor to check if poke has been completed\n            isStrictlyOrdered = isStrictlyOrdered || function () {\n                var subscription = _this4.persisted.get(sid);\n                return subscription && subscription.isEstablished;\n            }();\n            // Still searching for subscriptionIntents. User could remove subscription already\n            var subscriptionIntent = this.subscriptions.get(sid);\n            if (subscriptionIntent) {\n                message.event.type = message.event_type;\n                subscriptionIntent.update(message.event, isStrictlyOrdered);\n            } else {\n                logger_1.default.debug(\"Message dropped for SID '\" + sid + \"', for which there is no subscription.\");\n            }\n        }\n    }, {\n        key: \"onConnectionStateChanged\",\n        value: function onConnectionStateChanged(isConnected) {\n            this.isConnected = isConnected;\n            if (isConnected) {\n                this.poke();\n            }\n        }\n        /**\n         * Prompts a playback of any missed changes made to any subscribed object. This method\n         * should be invoked whenever the connectivity layer has experienced cross-cutting\n         * delivery failures that would affect the entire local sync set. Any tangible result\n         * of this operation will result in calls to the _update() function of subscribed\n         * Sync entities.\n         */\n\n    }, {\n        key: \"poke\",\n        value: function poke() {\n            logger_1.default.info('Triggering event replay for all subscriptions.');\n            var failedSubscriptions = [];\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = (0, _getIterator3.default)(this.persisted.values()), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var it = _step4.value;\n\n                    it.reset();\n                    if (it.rejectedWithError) {\n                        failedSubscriptions.push(it);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            this.persisted.clear();\n            var _iteratorNormalCompletion5 = true;\n            var _didIteratorError5 = false;\n            var _iteratorError5 = undefined;\n\n            try {\n                for (var _iterator5 = (0, _getIterator3.default)(failedSubscriptions), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                    var _it = _step5.value;\n\n                    this.persisted.set(_it.sid, _it);\n                }\n            } catch (err) {\n                _didIteratorError5 = true;\n                _iteratorError5 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                        _iterator5.return();\n                    }\n                } finally {\n                    if (_didIteratorError5) {\n                        throw _iteratorError5;\n                    }\n                }\n            }\n\n            this.persist();\n        }\n        /**\n         * Stops all communication, clears any subscription intent, and returns.\n         */\n\n    }, {\n        key: \"shutdown\",\n        value: function shutdown() {\n            this.backoff.reset();\n            this.subscriptions.clear();\n        }\n    }]);\n    return Subscriptions;\n}();\n\nexports.Subscriptions = Subscriptions;\nexports.default = Subscriptions;\n\n/***/ }),\n\n/***/ \"cOHw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(\"vSO4\"),\n    core = __webpack_require__(\"zKeE\"),\n    fails = __webpack_require__(\"wLcK\");\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY],\n      exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () {\n    fn(1);\n  }), 'Object', exp);\n};\n\n/***/ }),\n\n/***/ \"cYD/\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar global = __webpack_require__(\"i1Q6\"),\n    $export = __webpack_require__(\"vSO4\"),\n    meta = __webpack_require__(\"e8vu\"),\n    fails = __webpack_require__(\"wLcK\"),\n    hide = __webpack_require__(\"akPY\"),\n    redefineAll = __webpack_require__(\"O6kh\"),\n    forOf = __webpack_require__(\"ozpD\"),\n    anInstance = __webpack_require__(\"KUik\"),\n    isObject = __webpack_require__(\"BxvP\"),\n    setToStringTag = __webpack_require__(\"11Ut\"),\n    dP = __webpack_require__(\"Gfzd\").f,\n    each = __webpack_require__(\"tMiz\")(0),\n    DESCRIPTORS = __webpack_require__(\"6MLN\");\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME],\n      C = Base,\n      ADDER = IS_MAP ? 'set' : 'add',\n      proto = C && C.prototype,\n      O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if ('size' in proto) dP(C.prototype, 'size', {\n      get: function get() {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n/***/ }),\n\n/***/ \"cjsw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"yOG5\");\nvar $Object = __webpack_require__(\"zKeE\").Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n/***/ }),\n\n/***/ \"dACh\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n\n/***/ \"dAjQ\":\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n/***/ }),\n\n/***/ \"dVxL\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar client_1 = __webpack_require__(\"Vroa\");\nexports.SyncClient = client_1.SyncClient;\nvar syncdocument_1 = __webpack_require__(\"hznj\");\nexports.SyncDocument = syncdocument_1.SyncDocument;\nvar synclist_1 = __webpack_require__(\"6Hp8\");\nexports.SyncList = synclist_1.SyncList;\nvar listitem_1 = __webpack_require__(\"qXBc\");\nexports.SyncListItem = listitem_1.ListItem;\nvar syncmap_1 = __webpack_require__(\"al4s\");\nexports.SyncMap = syncmap_1.SyncMap;\nvar mapitem_1 = __webpack_require__(\"QlMj\");\nexports.SyncMapItem = mapitem_1.MapItem;\nexports.default = client_1.SyncClient;\n\nmodule.exports = client_1.SyncClient;\nmodule.exports.SyncClient = client_1.SyncClient;\n\n/***/ }),\n\n/***/ \"dXs8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"b1tA\");\nmodule.exports = __webpack_require__(\"zKeE\").Object.setPrototypeOf;\n\n/***/ }),\n\n/***/ \"dhak\":\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"e8vu\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(\"X6va\")('meta'),\n    isObject = __webpack_require__(\"BxvP\"),\n    has = __webpack_require__(\"yS17\"),\n    setDesc = __webpack_require__(\"Gfzd\").f,\n    id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(\"wLcK\")(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function setMeta(it) {\n  setDesc(it, META, { value: {\n      i: 'O' + ++id, // object ID\n      w: {} // weak collections IDs\n    } });\n};\nvar fastKey = function fastKey(it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n    // return object ID\n  }return it[META].i;\n};\nvar getWeak = function getWeak(it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n    // return hash weak collections IDs\n  }return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function onFreeze(it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n/***/ }),\n\n/***/ \"eDHa\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar syncerror_1 = __webpack_require__(\"XzVR\");\n\nvar SyncNetworkError = function (_syncerror_1$SyncErro) {\n    (0, _inherits3.default)(SyncNetworkError, _syncerror_1$SyncErro);\n\n    function SyncNetworkError(message) {\n        var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var body = arguments[3];\n        (0, _classCallCheck3.default)(this, SyncNetworkError);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncNetworkError.__proto__ || (0, _getPrototypeOf2.default)(SyncNetworkError)).call(this, message, status, code));\n\n        _this.body = body;\n        return _this;\n    }\n\n    return SyncNetworkError;\n}(syncerror_1.SyncError);\n\nexports.SyncNetworkError = SyncNetworkError;\nexports.default = SyncNetworkError;\n\n/***/ }),\n\n/***/ \"ebIA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"i1Q6\").document && document.documentElement;\n\n/***/ }),\n\n/***/ \"f+DB\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function rng() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"f/lV\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _logger = __webpack_require__(\"obon\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar REQUEST_TIMEOUT = 30000;\n\nfunction isHttpSuccess(code) {\n  return code >= 200 && code < 300;\n}\n\nfunction isHttpReply(packet) {\n  return packet && packet.header && packet.header.http_status;\n}\n\nvar PacketInterface = function () {\n  function PacketInterface(socket) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, PacketInterface);\n\n    (0, _defineProperties2.default)(this, {\n      _activeRequests: { value: new _map2.default() },\n      _socket: { value: socket }\n    });\n\n    this._socket.on('reply', this._processReply.bind(this));\n    this._socket.on('disconnected', function () {\n      _this._activeRequests.forEach(function (descriptor) {\n        clearTimeout(descriptor.timeout);\n        descriptor.reject(new Error('Twilsock disconnected'));\n      });\n      _this._activeRequests.clear();\n    });\n  }\n\n  (0, _createClass3.default)(PacketInterface, [{\n    key: '_processReply',\n    value: function _processReply(reply) {\n      var request = this._activeRequests.get(reply.id);\n      if (request) {\n        clearTimeout(request.timeout);\n        this._activeRequests.delete(reply.id);\n\n        setTimeout(function () {\n          // User shouldn't intercept connection handling, thus making it asynchronous\n          if (!isHttpSuccess(reply.status.code)) {\n            request.reject(new Error('Transport failure: ' + reply.status.status));\n          } else if (isHttpReply(reply) && !isHttpSuccess(reply.header.http_status.code)) {\n            request.reject({\n              status: reply.header.http_status.code,\n              description: reply.header.http_status.status,\n              body: reply.body\n            });\n          } else {\n            request.resolve(reply);\n          }\n        }, 0);\n      }\n    }\n  }, {\n    key: '_storeRequest',\n    value: function _storeRequest(id, resolve, reject) {\n      var requestDescriptor = {\n        resolve: resolve,\n        reject: reject,\n        timeout: setTimeout(function () {\n          _logger2.default.debug('request', id, 'is timed out');\n          reject(new Error('Twilsock: request timeout: ' + id));\n        }, REQUEST_TIMEOUT)\n      };\n      this._activeRequests.set(id, requestDescriptor);\n    }\n  }, {\n    key: 'send',\n    value: function send(address, headers, body) {\n      var _this2 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this2._socket.isConnected) {\n          _logger2.default.info('Can not send upstream message. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var id = _this2._socket.sendUpstreamMessage(address, headers, body);\n        _logger2.default.trace('message sent: ', { id: id, address: address, headers: headers, body: body });\n        _this2._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'putNotificationContext',\n    value: function putNotificationContext(contextId, context) {\n      var _this3 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this3._socket.isConnected) {\n          _logger2.default.info('Can not send put notification context. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var header = { method: 'put_notification_ctx', notification_ctx_id: contextId }; // eslint-disable-line camelcase\n        var id = _this3._socket.send(header, context);\n        _this3._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'deleteNotificationContext',\n    value: function deleteNotificationContext(contextId) {\n      var _this4 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this4._socket.isConnected) {\n          _logger2.default.info('Can not send delete notification context. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var packet = { method: 'delete_notification_ctx', notification_ctx_id: contextId }; // eslint-disable-line camelcase\n        var id = _this4._socket.send(packet);\n        _this4._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'shutdown',\n    value: function shutdown() {\n      this._activeRequests.forEach(function (descriptor) {\n        clearTimeout(descriptor.timeout);\n        descriptor.reject(new Error('Twilsock: request cancelled by user'));\n      });\n      this._activeRequests.clear();\n    }\n  }]);\n  return PacketInterface;\n}();\n\nexports.default = PacketInterface;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"fp6q\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.1\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function (e) {\n    if (true) module.exports = e();else if (\"function\" == typeof define && define.amd) define([], e);else {\n        var f;\"undefined\" != typeof window ? f = window : \"undefined\" != typeof global ? f = global : \"undefined\" != typeof self && (f = self), f.Promise = e();\n    }\n}(function () {\n    var define, module, exports;return function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof _dereq_ == \"function\" && _dereq_;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n                }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }return n[o].exports;\n        }var i = typeof _dereq_ == \"function\" && _dereq_;for (var o = 0; o < r.length; o++) {\n            s(r[o]);\n        }return s;\n    }({ 1: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise) {\n                var SomePromiseArray = Promise._SomePromiseArray;\n                function any(promises) {\n                    var ret = new SomePromiseArray(promises);\n                    var promise = ret.promise();\n                    ret.setHowMany(1);\n                    ret.setUnwrap();\n                    ret.init();\n                    return promise;\n                }\n\n                Promise.any = function (promises) {\n                    return any(promises);\n                };\n\n                Promise.prototype.any = function () {\n                    return any(this);\n                };\n            };\n        }, {}], 2: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var firstLineError;\n            try {\n                throw new Error();\n            } catch (e) {\n                firstLineError = e;\n            }\n            var schedule = _dereq_(\"./schedule\");\n            var Queue = _dereq_(\"./queue\");\n            var util = _dereq_(\"./util\");\n\n            function Async() {\n                this._customScheduler = false;\n                this._isTickUsed = false;\n                this._lateQueue = new Queue(16);\n                this._normalQueue = new Queue(16);\n                this._haveDrainedQueues = false;\n                this._trampolineEnabled = true;\n                var self = this;\n                this.drainQueues = function () {\n                    self._drainQueues();\n                };\n                this._schedule = schedule;\n            }\n\n            Async.prototype.setScheduler = function (fn) {\n                var prev = this._schedule;\n                this._schedule = fn;\n                this._customScheduler = true;\n                return prev;\n            };\n\n            Async.prototype.hasCustomScheduler = function () {\n                return this._customScheduler;\n            };\n\n            Async.prototype.enableTrampoline = function () {\n                this._trampolineEnabled = true;\n            };\n\n            Async.prototype.disableTrampolineIfNecessary = function () {\n                if (util.hasDevTools) {\n                    this._trampolineEnabled = false;\n                }\n            };\n\n            Async.prototype.haveItemsQueued = function () {\n                return this._isTickUsed || this._haveDrainedQueues;\n            };\n\n            Async.prototype.fatalError = function (e, isNode) {\n                if (isNode) {\n                    process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) + \"\\n\");\n                    process.exit(2);\n                } else {\n                    this.throwLater(e);\n                }\n            };\n\n            Async.prototype.throwLater = function (fn, arg) {\n                if (arguments.length === 1) {\n                    arg = fn;\n                    fn = function fn() {\n                        throw arg;\n                    };\n                }\n                if (typeof setTimeout !== \"undefined\") {\n                    setTimeout(function () {\n                        fn(arg);\n                    }, 0);\n                } else try {\n                    this._schedule(function () {\n                        fn(arg);\n                    });\n                } catch (e) {\n                    throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                }\n            };\n\n            function AsyncInvokeLater(fn, receiver, arg) {\n                this._lateQueue.push(fn, receiver, arg);\n                this._queueTick();\n            }\n\n            function AsyncInvoke(fn, receiver, arg) {\n                this._normalQueue.push(fn, receiver, arg);\n                this._queueTick();\n            }\n\n            function AsyncSettlePromises(promise) {\n                this._normalQueue._pushOne(promise);\n                this._queueTick();\n            }\n\n            if (!util.hasDevTools) {\n                Async.prototype.invokeLater = AsyncInvokeLater;\n                Async.prototype.invoke = AsyncInvoke;\n                Async.prototype.settlePromises = AsyncSettlePromises;\n            } else {\n                Async.prototype.invokeLater = function (fn, receiver, arg) {\n                    if (this._trampolineEnabled) {\n                        AsyncInvokeLater.call(this, fn, receiver, arg);\n                    } else {\n                        this._schedule(function () {\n                            setTimeout(function () {\n                                fn.call(receiver, arg);\n                            }, 100);\n                        });\n                    }\n                };\n\n                Async.prototype.invoke = function (fn, receiver, arg) {\n                    if (this._trampolineEnabled) {\n                        AsyncInvoke.call(this, fn, receiver, arg);\n                    } else {\n                        this._schedule(function () {\n                            fn.call(receiver, arg);\n                        });\n                    }\n                };\n\n                Async.prototype.settlePromises = function (promise) {\n                    if (this._trampolineEnabled) {\n                        AsyncSettlePromises.call(this, promise);\n                    } else {\n                        this._schedule(function () {\n                            promise._settlePromises();\n                        });\n                    }\n                };\n            }\n\n            Async.prototype._drainQueue = function (queue) {\n                while (queue.length() > 0) {\n                    var fn = queue.shift();\n                    if (typeof fn !== \"function\") {\n                        fn._settlePromises();\n                        continue;\n                    }\n                    var receiver = queue.shift();\n                    var arg = queue.shift();\n                    fn.call(receiver, arg);\n                }\n            };\n\n            Async.prototype._drainQueues = function () {\n                this._drainQueue(this._normalQueue);\n                this._reset();\n                this._haveDrainedQueues = true;\n                this._drainQueue(this._lateQueue);\n            };\n\n            Async.prototype._queueTick = function () {\n                if (!this._isTickUsed) {\n                    this._isTickUsed = true;\n                    this._schedule(this.drainQueues);\n                }\n            };\n\n            Async.prototype._reset = function () {\n                this._isTickUsed = false;\n            };\n\n            module.exports = Async;\n            module.exports.firstLineError = firstLineError;\n        }, { \"./queue\": 26, \"./schedule\": 29, \"./util\": 36 }], 3: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL, tryConvertToPromise, debug) {\n                var calledBind = false;\n                var rejectThis = function rejectThis(_, e) {\n                    this._reject(e);\n                };\n\n                var targetRejected = function targetRejected(e, context) {\n                    context.promiseRejectionQueued = true;\n                    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n                };\n\n                var bindingResolved = function bindingResolved(thisArg, context) {\n                    if ((this._bitField & 50397184) === 0) {\n                        this._resolveCallback(context.target);\n                    }\n                };\n\n                var bindingRejected = function bindingRejected(e, context) {\n                    if (!context.promiseRejectionQueued) this._reject(e);\n                };\n\n                Promise.prototype.bind = function (thisArg) {\n                    if (!calledBind) {\n                        calledBind = true;\n                        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n                        Promise.prototype._boundValue = debug.boundValueFunction();\n                    }\n                    var maybePromise = tryConvertToPromise(thisArg);\n                    var ret = new Promise(INTERNAL);\n                    ret._propagateFrom(this, 1);\n                    var target = this._target();\n                    ret._setBoundTo(maybePromise);\n                    if (maybePromise instanceof Promise) {\n                        var context = {\n                            promiseRejectionQueued: false,\n                            promise: ret,\n                            target: target,\n                            bindingPromise: maybePromise\n                        };\n                        target._then(INTERNAL, targetRejected, undefined, ret, context);\n                        maybePromise._then(bindingResolved, bindingRejected, undefined, ret, context);\n                        ret._setOnCancel(maybePromise);\n                    } else {\n                        ret._resolveCallback(target);\n                    }\n                    return ret;\n                };\n\n                Promise.prototype._setBoundTo = function (obj) {\n                    if (obj !== undefined) {\n                        this._bitField = this._bitField | 2097152;\n                        this._boundTo = obj;\n                    } else {\n                        this._bitField = this._bitField & ~2097152;\n                    }\n                };\n\n                Promise.prototype._isBound = function () {\n                    return (this._bitField & 2097152) === 2097152;\n                };\n\n                Promise.bind = function (thisArg, value) {\n                    return Promise.resolve(value).bind(thisArg);\n                };\n            };\n        }, {}], 4: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var old;\n            if (typeof Promise !== \"undefined\") old = Promise;\n            function noConflict() {\n                try {\n                    if (Promise === bluebird) Promise = old;\n                } catch (e) {}\n                return bluebird;\n            }\n            var bluebird = _dereq_(\"./promise\")();\n            bluebird.noConflict = noConflict;\n            module.exports = bluebird;\n        }, { \"./promise\": 22 }], 5: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var cr = Object.create;\n            if (cr) {\n                var callerCache = cr(null);\n                var getterCache = cr(null);\n                callerCache[\" size\"] = getterCache[\" size\"] = 0;\n            }\n\n            module.exports = function (Promise) {\n                var util = _dereq_(\"./util\");\n                var canEvaluate = util.canEvaluate;\n                var isIdentifier = util.isIdentifier;\n\n                var getMethodCaller;\n                var getGetter;\n                if (false) {\n                    var makeMethodCaller = function makeMethodCaller(methodName) {\n                        return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n                    };\n\n                    var makeGetter = function makeGetter(propertyName) {\n                        return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n                    };\n\n                    var getCompiled = function getCompiled(name, compiler, cache) {\n                        var ret = cache[name];\n                        if (typeof ret !== \"function\") {\n                            if (!isIdentifier(name)) {\n                                return null;\n                            }\n                            ret = compiler(name);\n                            cache[name] = ret;\n                            cache[\" size\"]++;\n                            if (cache[\" size\"] > 512) {\n                                var keys = Object.keys(cache);\n                                for (var i = 0; i < 256; ++i) {\n                                    delete cache[keys[i]];\n                                }cache[\" size\"] = keys.length - 256;\n                            }\n                        }\n                        return ret;\n                    };\n\n                    getMethodCaller = function getMethodCaller(name) {\n                        return getCompiled(name, makeMethodCaller, callerCache);\n                    };\n\n                    getGetter = function getGetter(name) {\n                        return getCompiled(name, makeGetter, getterCache);\n                    };\n                }\n\n                function ensureMethod(obj, methodName) {\n                    var fn;\n                    if (obj != null) fn = obj[methodName];\n                    if (typeof fn !== \"function\") {\n                        var message = \"Object \" + util.classString(obj) + \" has no method '\" + util.toString(methodName) + \"'\";\n                        throw new Promise.TypeError(message);\n                    }\n                    return fn;\n                }\n\n                function caller(obj) {\n                    var methodName = this.pop();\n                    var fn = ensureMethod(obj, methodName);\n                    return fn.apply(obj, this);\n                }\n                Promise.prototype.call = function (methodName) {\n                    var args = [].slice.call(arguments, 1);;\n                    if (false) {\n                        if (canEvaluate) {\n                            var maybeCaller = getMethodCaller(methodName);\n                            if (maybeCaller !== null) {\n                                return this._then(maybeCaller, undefined, undefined, args, undefined);\n                            }\n                        }\n                    }\n                    args.push(methodName);\n                    return this._then(caller, undefined, undefined, args, undefined);\n                };\n\n                function namedGetter(obj) {\n                    return obj[this];\n                }\n                function indexedGetter(obj) {\n                    var index = +this;\n                    if (index < 0) index = Math.max(0, index + obj.length);\n                    return obj[index];\n                }\n                Promise.prototype.get = function (propertyName) {\n                    var isIndex = typeof propertyName === \"number\";\n                    var getter;\n                    if (!isIndex) {\n                        if (canEvaluate) {\n                            var maybeGetter = getGetter(propertyName);\n                            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n                        } else {\n                            getter = namedGetter;\n                        }\n                    } else {\n                        getter = indexedGetter;\n                    }\n                    return this._then(getter, undefined, undefined, propertyName, undefined);\n                };\n            };\n        }, { \"./util\": 36 }], 6: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, apiRejection, debug) {\n                var util = _dereq_(\"./util\");\n                var tryCatch = util.tryCatch;\n                var errorObj = util.errorObj;\n                var async = Promise._async;\n\n                Promise.prototype[\"break\"] = Promise.prototype.cancel = function () {\n                    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n                    var promise = this;\n                    var child = promise;\n                    while (promise._isCancellable()) {\n                        if (!promise._cancelBy(child)) {\n                            if (child._isFollowing()) {\n                                child._followee().cancel();\n                            } else {\n                                child._cancelBranched();\n                            }\n                            break;\n                        }\n\n                        var parent = promise._cancellationParent;\n                        if (parent == null || !parent._isCancellable()) {\n                            if (promise._isFollowing()) {\n                                promise._followee().cancel();\n                            } else {\n                                promise._cancelBranched();\n                            }\n                            break;\n                        } else {\n                            if (promise._isFollowing()) promise._followee().cancel();\n                            promise._setWillBeCancelled();\n                            child = promise;\n                            promise = parent;\n                        }\n                    }\n                };\n\n                Promise.prototype._branchHasCancelled = function () {\n                    this._branchesRemainingToCancel--;\n                };\n\n                Promise.prototype._enoughBranchesHaveCancelled = function () {\n                    return this._branchesRemainingToCancel === undefined || this._branchesRemainingToCancel <= 0;\n                };\n\n                Promise.prototype._cancelBy = function (canceller) {\n                    if (canceller === this) {\n                        this._branchesRemainingToCancel = 0;\n                        this._invokeOnCancel();\n                        return true;\n                    } else {\n                        this._branchHasCancelled();\n                        if (this._enoughBranchesHaveCancelled()) {\n                            this._invokeOnCancel();\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n\n                Promise.prototype._cancelBranched = function () {\n                    if (this._enoughBranchesHaveCancelled()) {\n                        this._cancel();\n                    }\n                };\n\n                Promise.prototype._cancel = function () {\n                    if (!this._isCancellable()) return;\n                    this._setCancelled();\n                    async.invoke(this._cancelPromises, this, undefined);\n                };\n\n                Promise.prototype._cancelPromises = function () {\n                    if (this._length() > 0) this._settlePromises();\n                };\n\n                Promise.prototype._unsetOnCancel = function () {\n                    this._onCancelField = undefined;\n                };\n\n                Promise.prototype._isCancellable = function () {\n                    return this.isPending() && !this._isCancelled();\n                };\n\n                Promise.prototype.isCancellable = function () {\n                    return this.isPending() && !this.isCancelled();\n                };\n\n                Promise.prototype._doInvokeOnCancel = function (onCancelCallback, internalOnly) {\n                    if (util.isArray(onCancelCallback)) {\n                        for (var i = 0; i < onCancelCallback.length; ++i) {\n                            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n                        }\n                    } else if (onCancelCallback !== undefined) {\n                        if (typeof onCancelCallback === \"function\") {\n                            if (!internalOnly) {\n                                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                                if (e === errorObj) {\n                                    this._attachExtraTrace(e.e);\n                                    async.throwLater(e.e);\n                                }\n                            }\n                        } else {\n                            onCancelCallback._resultCancelled(this);\n                        }\n                    }\n                };\n\n                Promise.prototype._invokeOnCancel = function () {\n                    var onCancelCallback = this._onCancel();\n                    this._unsetOnCancel();\n                    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n                };\n\n                Promise.prototype._invokeInternalOnCancel = function () {\n                    if (this._isCancellable()) {\n                        this._doInvokeOnCancel(this._onCancel(), true);\n                        this._unsetOnCancel();\n                    }\n                };\n\n                Promise.prototype._resultCancelled = function () {\n                    this.cancel();\n                };\n            };\n        }, { \"./util\": 36 }], 7: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (NEXT_FILTER) {\n                var util = _dereq_(\"./util\");\n                var getKeys = _dereq_(\"./es5\").keys;\n                var tryCatch = util.tryCatch;\n                var errorObj = util.errorObj;\n\n                function catchFilter(instances, cb, promise) {\n                    return function (e) {\n                        var boundTo = promise._boundValue();\n                        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n                            var item = instances[i];\n\n                            if (item === Error || item != null && item.prototype instanceof Error) {\n                                if (e instanceof item) {\n                                    return tryCatch(cb).call(boundTo, e);\n                                }\n                            } else if (typeof item === \"function\") {\n                                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                                if (matchesPredicate === errorObj) {\n                                    return matchesPredicate;\n                                } else if (matchesPredicate) {\n                                    return tryCatch(cb).call(boundTo, e);\n                                }\n                            } else if (util.isObject(e)) {\n                                var keys = getKeys(item);\n                                for (var j = 0; j < keys.length; ++j) {\n                                    var key = keys[j];\n                                    if (item[key] != e[key]) {\n                                        continue predicateLoop;\n                                    }\n                                }\n                                return tryCatch(cb).call(boundTo, e);\n                            }\n                        }\n                        return NEXT_FILTER;\n                    };\n                }\n\n                return catchFilter;\n            };\n        }, { \"./es5\": 13, \"./util\": 36 }], 8: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise) {\n                var longStackTraces = false;\n                var contextStack = [];\n\n                Promise.prototype._promiseCreated = function () {};\n                Promise.prototype._pushContext = function () {};\n                Promise.prototype._popContext = function () {\n                    return null;\n                };\n                Promise._peekContext = Promise.prototype._peekContext = function () {};\n\n                function Context() {\n                    this._trace = new Context.CapturedTrace(peekContext());\n                }\n                Context.prototype._pushContext = function () {\n                    if (this._trace !== undefined) {\n                        this._trace._promiseCreated = null;\n                        contextStack.push(this._trace);\n                    }\n                };\n\n                Context.prototype._popContext = function () {\n                    if (this._trace !== undefined) {\n                        var trace = contextStack.pop();\n                        var ret = trace._promiseCreated;\n                        trace._promiseCreated = null;\n                        return ret;\n                    }\n                    return null;\n                };\n\n                function createContext() {\n                    if (longStackTraces) return new Context();\n                }\n\n                function peekContext() {\n                    var lastIndex = contextStack.length - 1;\n                    if (lastIndex >= 0) {\n                        return contextStack[lastIndex];\n                    }\n                    return undefined;\n                }\n                Context.CapturedTrace = null;\n                Context.create = createContext;\n                Context.deactivateLongStackTraces = function () {};\n                Context.activateLongStackTraces = function () {\n                    var Promise_pushContext = Promise.prototype._pushContext;\n                    var Promise_popContext = Promise.prototype._popContext;\n                    var Promise_PeekContext = Promise._peekContext;\n                    var Promise_peekContext = Promise.prototype._peekContext;\n                    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n                    Context.deactivateLongStackTraces = function () {\n                        Promise.prototype._pushContext = Promise_pushContext;\n                        Promise.prototype._popContext = Promise_popContext;\n                        Promise._peekContext = Promise_PeekContext;\n                        Promise.prototype._peekContext = Promise_peekContext;\n                        Promise.prototype._promiseCreated = Promise_promiseCreated;\n                        longStackTraces = false;\n                    };\n                    longStackTraces = true;\n                    Promise.prototype._pushContext = Context.prototype._pushContext;\n                    Promise.prototype._popContext = Context.prototype._popContext;\n                    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n                    Promise.prototype._promiseCreated = function () {\n                        var ctx = this._peekContext();\n                        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n                    };\n                };\n                return Context;\n            };\n        }, {}], 9: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, Context) {\n                var getDomain = Promise._getDomain;\n                var async = Promise._async;\n                var Warning = _dereq_(\"./errors\").Warning;\n                var util = _dereq_(\"./util\");\n                var canAttachTrace = util.canAttachTrace;\n                var unhandledRejectionHandled;\n                var possiblyUnhandledRejection;\n                var bluebirdFramePattern = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\n                var nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\n                var parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\n                var stackFramePattern = null;\n                var formatStack = null;\n                var indentStackFrames = false;\n                var printWarning;\n                var debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 && (true || util.env(\"BLUEBIRD_DEBUG\") || util.env(\"NODE_ENV\") === \"development\"));\n\n                var warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 && (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\n                var longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 && (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\n                var wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 && (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\n                Promise.prototype.suppressUnhandledRejections = function () {\n                    var target = this._target();\n                    target._bitField = target._bitField & ~1048576 | 524288;\n                };\n\n                Promise.prototype._ensurePossibleRejectionHandled = function () {\n                    if ((this._bitField & 524288) !== 0) return;\n                    this._setRejectionIsUnhandled();\n                    var self = this;\n                    setTimeout(function () {\n                        self._notifyUnhandledRejection();\n                    }, 1);\n                };\n\n                Promise.prototype._notifyUnhandledRejectionIsHandled = function () {\n                    fireRejectionEvent(\"rejectionHandled\", unhandledRejectionHandled, undefined, this);\n                };\n\n                Promise.prototype._setReturnedNonUndefined = function () {\n                    this._bitField = this._bitField | 268435456;\n                };\n\n                Promise.prototype._returnedNonUndefined = function () {\n                    return (this._bitField & 268435456) !== 0;\n                };\n\n                Promise.prototype._notifyUnhandledRejection = function () {\n                    if (this._isRejectionUnhandled()) {\n                        var reason = this._settledValue();\n                        this._setUnhandledRejectionIsNotified();\n                        fireRejectionEvent(\"unhandledRejection\", possiblyUnhandledRejection, reason, this);\n                    }\n                };\n\n                Promise.prototype._setUnhandledRejectionIsNotified = function () {\n                    this._bitField = this._bitField | 262144;\n                };\n\n                Promise.prototype._unsetUnhandledRejectionIsNotified = function () {\n                    this._bitField = this._bitField & ~262144;\n                };\n\n                Promise.prototype._isUnhandledRejectionNotified = function () {\n                    return (this._bitField & 262144) > 0;\n                };\n\n                Promise.prototype._setRejectionIsUnhandled = function () {\n                    this._bitField = this._bitField | 1048576;\n                };\n\n                Promise.prototype._unsetRejectionIsUnhandled = function () {\n                    this._bitField = this._bitField & ~1048576;\n                    if (this._isUnhandledRejectionNotified()) {\n                        this._unsetUnhandledRejectionIsNotified();\n                        this._notifyUnhandledRejectionIsHandled();\n                    }\n                };\n\n                Promise.prototype._isRejectionUnhandled = function () {\n                    return (this._bitField & 1048576) > 0;\n                };\n\n                Promise.prototype._warn = function (message, shouldUseOwnTrace, promise) {\n                    return warn(message, shouldUseOwnTrace, promise || this);\n                };\n\n                Promise.onPossiblyUnhandledRejection = function (fn) {\n                    var domain = getDomain();\n                    possiblyUnhandledRejection = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n                };\n\n                Promise.onUnhandledRejectionHandled = function (fn) {\n                    var domain = getDomain();\n                    unhandledRejectionHandled = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n                };\n\n                var disableLongStackTraces = function disableLongStackTraces() {};\n                Promise.longStackTraces = function () {\n                    if (async.haveItemsQueued() && !config.longStackTraces) {\n                        throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    if (!config.longStackTraces && longStackTracesIsSupported()) {\n                        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n                        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n                        config.longStackTraces = true;\n                        disableLongStackTraces = function disableLongStackTraces() {\n                            if (async.haveItemsQueued() && !config.longStackTraces) {\n                                throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                            }\n                            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n                            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n                            Context.deactivateLongStackTraces();\n                            async.enableTrampoline();\n                            config.longStackTraces = false;\n                        };\n                        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n                        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n                        Context.activateLongStackTraces();\n                        async.disableTrampolineIfNecessary();\n                    }\n                };\n\n                Promise.hasLongStackTraces = function () {\n                    return config.longStackTraces && longStackTracesIsSupported();\n                };\n\n                var fireDomEvent = function () {\n                    try {\n                        if (typeof CustomEvent === \"function\") {\n                            var event = new CustomEvent(\"CustomEvent\");\n                            util.global.dispatchEvent(event);\n                            return function (name, event) {\n                                var domEvent = new CustomEvent(name.toLowerCase(), {\n                                    detail: event,\n                                    cancelable: true\n                                });\n                                return !util.global.dispatchEvent(domEvent);\n                            };\n                        } else if (typeof Event === \"function\") {\n                            var event = new Event(\"CustomEvent\");\n                            util.global.dispatchEvent(event);\n                            return function (name, event) {\n                                var domEvent = new Event(name.toLowerCase(), {\n                                    cancelable: true\n                                });\n                                domEvent.detail = event;\n                                return !util.global.dispatchEvent(domEvent);\n                            };\n                        } else {\n                            var event = document.createEvent(\"CustomEvent\");\n                            event.initCustomEvent(\"testingtheevent\", false, true, {});\n                            util.global.dispatchEvent(event);\n                            return function (name, event) {\n                                var domEvent = document.createEvent(\"CustomEvent\");\n                                domEvent.initCustomEvent(name.toLowerCase(), false, true, event);\n                                return !util.global.dispatchEvent(domEvent);\n                            };\n                        }\n                    } catch (e) {}\n                    return function () {\n                        return false;\n                    };\n                }();\n\n                var fireGlobalEvent = function () {\n                    if (util.isNode) {\n                        return function () {\n                            return process.emit.apply(process, arguments);\n                        };\n                    } else {\n                        if (!util.global) {\n                            return function () {\n                                return false;\n                            };\n                        }\n                        return function (name) {\n                            var methodName = \"on\" + name.toLowerCase();\n                            var method = util.global[methodName];\n                            if (!method) return false;\n                            method.apply(util.global, [].slice.call(arguments, 1));\n                            return true;\n                        };\n                    }\n                }();\n\n                function generatePromiseLifecycleEventObject(name, promise) {\n                    return { promise: promise };\n                }\n\n                var eventToObjectGenerator = {\n                    promiseCreated: generatePromiseLifecycleEventObject,\n                    promiseFulfilled: generatePromiseLifecycleEventObject,\n                    promiseRejected: generatePromiseLifecycleEventObject,\n                    promiseResolved: generatePromiseLifecycleEventObject,\n                    promiseCancelled: generatePromiseLifecycleEventObject,\n                    promiseChained: function promiseChained(name, promise, child) {\n                        return { promise: promise, child: child };\n                    },\n                    warning: function warning(name, _warning) {\n                        return { warning: _warning };\n                    },\n                    unhandledRejection: function unhandledRejection(name, reason, promise) {\n                        return { reason: reason, promise: promise };\n                    },\n                    rejectionHandled: generatePromiseLifecycleEventObject\n                };\n\n                var activeFireEvent = function activeFireEvent(name) {\n                    var globalEventFired = false;\n                    try {\n                        globalEventFired = fireGlobalEvent.apply(null, arguments);\n                    } catch (e) {\n                        async.throwLater(e);\n                        globalEventFired = true;\n                    }\n\n                    var domEventFired = false;\n                    try {\n                        domEventFired = fireDomEvent(name, eventToObjectGenerator[name].apply(null, arguments));\n                    } catch (e) {\n                        async.throwLater(e);\n                        domEventFired = true;\n                    }\n\n                    return domEventFired || globalEventFired;\n                };\n\n                Promise.config = function (opts) {\n                    opts = Object(opts);\n                    if (\"longStackTraces\" in opts) {\n                        if (opts.longStackTraces) {\n                            Promise.longStackTraces();\n                        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n                            disableLongStackTraces();\n                        }\n                    }\n                    if (\"warnings\" in opts) {\n                        var warningsOption = opts.warnings;\n                        config.warnings = !!warningsOption;\n                        wForgottenReturn = config.warnings;\n\n                        if (util.isObject(warningsOption)) {\n                            if (\"wForgottenReturn\" in warningsOption) {\n                                wForgottenReturn = !!warningsOption.wForgottenReturn;\n                            }\n                        }\n                    }\n                    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n                        if (async.haveItemsQueued()) {\n                            throw new Error(\"cannot enable cancellation after promises are in use\");\n                        }\n                        Promise.prototype._clearCancellationData = cancellationClearCancellationData;\n                        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n                        Promise.prototype._onCancel = cancellationOnCancel;\n                        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n                        Promise.prototype._attachCancellationCallback = cancellationAttachCancellationCallback;\n                        Promise.prototype._execute = cancellationExecute;\n                        _propagateFromFunction = cancellationPropagateFrom;\n                        config.cancellation = true;\n                    }\n                    if (\"monitoring\" in opts) {\n                        if (opts.monitoring && !config.monitoring) {\n                            config.monitoring = true;\n                            Promise.prototype._fireEvent = activeFireEvent;\n                        } else if (!opts.monitoring && config.monitoring) {\n                            config.monitoring = false;\n                            Promise.prototype._fireEvent = defaultFireEvent;\n                        }\n                    }\n                    return Promise;\n                };\n\n                function defaultFireEvent() {\n                    return false;\n                }\n\n                Promise.prototype._fireEvent = defaultFireEvent;\n                Promise.prototype._execute = function (executor, resolve, reject) {\n                    try {\n                        executor(resolve, reject);\n                    } catch (e) {\n                        return e;\n                    }\n                };\n                Promise.prototype._onCancel = function () {};\n                Promise.prototype._setOnCancel = function (handler) {\n                    ;\n                };\n                Promise.prototype._attachCancellationCallback = function (onCancel) {\n                    ;\n                };\n                Promise.prototype._captureStackTrace = function () {};\n                Promise.prototype._attachExtraTrace = function () {};\n                Promise.prototype._clearCancellationData = function () {};\n                Promise.prototype._propagateFrom = function (parent, flags) {\n                    ;\n                    ;\n                };\n\n                function cancellationExecute(executor, resolve, reject) {\n                    var promise = this;\n                    try {\n                        executor(resolve, reject, function (onCancel) {\n                            if (typeof onCancel !== \"function\") {\n                                throw new TypeError(\"onCancel must be a function, got: \" + util.toString(onCancel));\n                            }\n                            promise._attachCancellationCallback(onCancel);\n                        });\n                    } catch (e) {\n                        return e;\n                    }\n                }\n\n                function cancellationAttachCancellationCallback(onCancel) {\n                    if (!this._isCancellable()) return this;\n\n                    var previousOnCancel = this._onCancel();\n                    if (previousOnCancel !== undefined) {\n                        if (util.isArray(previousOnCancel)) {\n                            previousOnCancel.push(onCancel);\n                        } else {\n                            this._setOnCancel([previousOnCancel, onCancel]);\n                        }\n                    } else {\n                        this._setOnCancel(onCancel);\n                    }\n                }\n\n                function cancellationOnCancel() {\n                    return this._onCancelField;\n                }\n\n                function cancellationSetOnCancel(onCancel) {\n                    this._onCancelField = onCancel;\n                }\n\n                function cancellationClearCancellationData() {\n                    this._cancellationParent = undefined;\n                    this._onCancelField = undefined;\n                }\n\n                function cancellationPropagateFrom(parent, flags) {\n                    if ((flags & 1) !== 0) {\n                        this._cancellationParent = parent;\n                        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n                        if (branchesRemainingToCancel === undefined) {\n                            branchesRemainingToCancel = 0;\n                        }\n                        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n                    }\n                    if ((flags & 2) !== 0 && parent._isBound()) {\n                        this._setBoundTo(parent._boundTo);\n                    }\n                }\n\n                function bindingPropagateFrom(parent, flags) {\n                    if ((flags & 2) !== 0 && parent._isBound()) {\n                        this._setBoundTo(parent._boundTo);\n                    }\n                }\n                var _propagateFromFunction = bindingPropagateFrom;\n\n                function _boundValueFunction() {\n                    var ret = this._boundTo;\n                    if (ret !== undefined) {\n                        if (ret instanceof Promise) {\n                            if (ret.isFulfilled()) {\n                                return ret.value();\n                            } else {\n                                return undefined;\n                            }\n                        }\n                    }\n                    return ret;\n                }\n\n                function longStackTracesCaptureStackTrace() {\n                    this._trace = new CapturedTrace(this._peekContext());\n                }\n\n                function longStackTracesAttachExtraTrace(error, ignoreSelf) {\n                    if (canAttachTrace(error)) {\n                        var trace = this._trace;\n                        if (trace !== undefined) {\n                            if (ignoreSelf) trace = trace._parent;\n                        }\n                        if (trace !== undefined) {\n                            trace.attachExtraTrace(error);\n                        } else if (!error.__stackCleaned__) {\n                            var parsed = parseStackAndMessage(error);\n                            util.notEnumerableProp(error, \"stack\", parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n                            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n                        }\n                    }\n                }\n\n                function checkForgottenReturns(returnValue, promiseCreated, name, promise, parent) {\n                    if (returnValue === undefined && promiseCreated !== null && wForgottenReturn) {\n                        if (parent !== undefined && parent._returnedNonUndefined()) return;\n                        if ((promise._bitField & 65535) === 0) return;\n\n                        if (name) name = name + \" \";\n                        var handlerLine = \"\";\n                        var creatorLine = \"\";\n                        if (promiseCreated._trace) {\n                            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n                            var stack = cleanStack(traceLines);\n                            for (var i = stack.length - 1; i >= 0; --i) {\n                                var line = stack[i];\n                                if (!nodeFramePattern.test(line)) {\n                                    var lineMatches = line.match(parseLinePattern);\n                                    if (lineMatches) {\n                                        handlerLine = \"at \" + lineMatches[1] + \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                                    }\n                                    break;\n                                }\n                            }\n\n                            if (stack.length > 0) {\n                                var firstUserLine = stack[0];\n                                for (var i = 0; i < traceLines.length; ++i) {\n\n                                    if (traceLines[i] === firstUserLine) {\n                                        if (i > 0) {\n                                            creatorLine = \"\\n\" + traceLines[i - 1];\n                                        }\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        var msg = \"a promise was created in a \" + name + \"handler \" + handlerLine + \"but was not returned from it, \" + \"see http://goo.gl/rRqMUw\" + creatorLine;\n                        promise._warn(msg, true, promiseCreated);\n                    }\n                }\n\n                function deprecated(name, replacement) {\n                    var message = name + \" is deprecated and will be removed in a future version.\";\n                    if (replacement) message += \" Use \" + replacement + \" instead.\";\n                    return warn(message);\n                }\n\n                function warn(message, shouldUseOwnTrace, promise) {\n                    if (!config.warnings) return;\n                    var warning = new Warning(message);\n                    var ctx;\n                    if (shouldUseOwnTrace) {\n                        promise._attachExtraTrace(warning);\n                    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n                        ctx.attachExtraTrace(warning);\n                    } else {\n                        var parsed = parseStackAndMessage(warning);\n                        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n                    }\n\n                    if (!activeFireEvent(\"warning\", warning)) {\n                        formatAndLogError(warning, \"\", true);\n                    }\n                }\n\n                function reconstructStack(message, stacks) {\n                    for (var i = 0; i < stacks.length - 1; ++i) {\n                        stacks[i].push(\"From previous event:\");\n                        stacks[i] = stacks[i].join(\"\\n\");\n                    }\n                    if (i < stacks.length) {\n                        stacks[i] = stacks[i].join(\"\\n\");\n                    }\n                    return message + \"\\n\" + stacks.join(\"\\n\");\n                }\n\n                function removeDuplicateOrEmptyJumps(stacks) {\n                    for (var i = 0; i < stacks.length; ++i) {\n                        if (stacks[i].length === 0 || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) {\n                            stacks.splice(i, 1);\n                            i--;\n                        }\n                    }\n                }\n\n                function removeCommonRoots(stacks) {\n                    var current = stacks[0];\n                    for (var i = 1; i < stacks.length; ++i) {\n                        var prev = stacks[i];\n                        var currentLastIndex = current.length - 1;\n                        var currentLastLine = current[currentLastIndex];\n                        var commonRootMeetPoint = -1;\n\n                        for (var j = prev.length - 1; j >= 0; --j) {\n                            if (prev[j] === currentLastLine) {\n                                commonRootMeetPoint = j;\n                                break;\n                            }\n                        }\n\n                        for (var j = commonRootMeetPoint; j >= 0; --j) {\n                            var line = prev[j];\n                            if (current[currentLastIndex] === line) {\n                                current.pop();\n                                currentLastIndex--;\n                            } else {\n                                break;\n                            }\n                        }\n                        current = prev;\n                    }\n                }\n\n                function cleanStack(stack) {\n                    var ret = [];\n                    for (var i = 0; i < stack.length; ++i) {\n                        var line = stack[i];\n                        var isTraceLine = \"    (No stack trace)\" === line || stackFramePattern.test(line);\n                        var isInternalFrame = isTraceLine && shouldIgnore(line);\n                        if (isTraceLine && !isInternalFrame) {\n                            if (indentStackFrames && line.charAt(0) !== \" \") {\n                                line = \"    \" + line;\n                            }\n                            ret.push(line);\n                        }\n                    }\n                    return ret;\n                }\n\n                function stackFramesAsArray(error) {\n                    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n                    for (var i = 0; i < stack.length; ++i) {\n                        var line = stack[i];\n                        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n                            break;\n                        }\n                    }\n                    if (i > 0 && error.name != \"SyntaxError\") {\n                        stack = stack.slice(i);\n                    }\n                    return stack;\n                }\n\n                function parseStackAndMessage(error) {\n                    var stack = error.stack;\n                    var message = error.toString();\n                    stack = typeof stack === \"string\" && stack.length > 0 ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n                    return {\n                        message: message,\n                        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n                    };\n                }\n\n                function formatAndLogError(error, title, isSoft) {\n                    if (typeof console !== \"undefined\") {\n                        var message;\n                        if (util.isObject(error)) {\n                            var stack = error.stack;\n                            message = title + formatStack(stack, error);\n                        } else {\n                            message = title + String(error);\n                        }\n                        if (typeof printWarning === \"function\") {\n                            printWarning(message, isSoft);\n                        } else if (typeof console.log === \"function\" || typeof console.log === \"object\") {\n                            console.log(message);\n                        }\n                    }\n                }\n\n                function fireRejectionEvent(name, localHandler, reason, promise) {\n                    var localEventFired = false;\n                    try {\n                        if (typeof localHandler === \"function\") {\n                            localEventFired = true;\n                            if (name === \"rejectionHandled\") {\n                                localHandler(promise);\n                            } else {\n                                localHandler(reason, promise);\n                            }\n                        }\n                    } catch (e) {\n                        async.throwLater(e);\n                    }\n\n                    if (name === \"unhandledRejection\") {\n                        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n                            formatAndLogError(reason, \"Unhandled rejection \");\n                        }\n                    } else {\n                        activeFireEvent(name, promise);\n                    }\n                }\n\n                function formatNonError(obj) {\n                    var str;\n                    if (typeof obj === \"function\") {\n                        str = \"[function \" + (obj.name || \"anonymous\") + \"]\";\n                    } else {\n                        str = obj && typeof obj.toString === \"function\" ? obj.toString() : util.toString(obj);\n                        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n                        if (ruselessToString.test(str)) {\n                            try {\n                                var newStr = JSON.stringify(obj);\n                                str = newStr;\n                            } catch (e) {}\n                        }\n                        if (str.length === 0) {\n                            str = \"(empty array)\";\n                        }\n                    }\n                    return \"(<\" + snip(str) + \">, no stack trace)\";\n                }\n\n                function snip(str) {\n                    var maxChars = 41;\n                    if (str.length < maxChars) {\n                        return str;\n                    }\n                    return str.substr(0, maxChars - 3) + \"...\";\n                }\n\n                function longStackTracesIsSupported() {\n                    return typeof captureStackTrace === \"function\";\n                }\n\n                var shouldIgnore = function shouldIgnore() {\n                    return false;\n                };\n                var parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n                function parseLineInfo(line) {\n                    var matches = line.match(parseLineInfoRegex);\n                    if (matches) {\n                        return {\n                            fileName: matches[1],\n                            line: parseInt(matches[2], 10)\n                        };\n                    }\n                }\n\n                function setBounds(firstLineError, lastLineError) {\n                    if (!longStackTracesIsSupported()) return;\n                    var firstStackLines = firstLineError.stack.split(\"\\n\");\n                    var lastStackLines = lastLineError.stack.split(\"\\n\");\n                    var firstIndex = -1;\n                    var lastIndex = -1;\n                    var firstFileName;\n                    var lastFileName;\n                    for (var i = 0; i < firstStackLines.length; ++i) {\n                        var result = parseLineInfo(firstStackLines[i]);\n                        if (result) {\n                            firstFileName = result.fileName;\n                            firstIndex = result.line;\n                            break;\n                        }\n                    }\n                    for (var i = 0; i < lastStackLines.length; ++i) {\n                        var result = parseLineInfo(lastStackLines[i]);\n                        if (result) {\n                            lastFileName = result.fileName;\n                            lastIndex = result.line;\n                            break;\n                        }\n                    }\n                    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || firstIndex >= lastIndex) {\n                        return;\n                    }\n\n                    shouldIgnore = function shouldIgnore(line) {\n                        if (bluebirdFramePattern.test(line)) return true;\n                        var info = parseLineInfo(line);\n                        if (info) {\n                            if (info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                }\n\n                function CapturedTrace(parent) {\n                    this._parent = parent;\n                    this._promisesCreated = 0;\n                    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n                    captureStackTrace(this, CapturedTrace);\n                    if (length > 32) this.uncycle();\n                }\n                util.inherits(CapturedTrace, Error);\n                Context.CapturedTrace = CapturedTrace;\n\n                CapturedTrace.prototype.uncycle = function () {\n                    var length = this._length;\n                    if (length < 2) return;\n                    var nodes = [];\n                    var stackToIndex = {};\n\n                    for (var i = 0, node = this; node !== undefined; ++i) {\n                        nodes.push(node);\n                        node = node._parent;\n                    }\n                    length = this._length = i;\n                    for (var i = length - 1; i >= 0; --i) {\n                        var stack = nodes[i].stack;\n                        if (stackToIndex[stack] === undefined) {\n                            stackToIndex[stack] = i;\n                        }\n                    }\n                    for (var i = 0; i < length; ++i) {\n                        var currentStack = nodes[i].stack;\n                        var index = stackToIndex[currentStack];\n                        if (index !== undefined && index !== i) {\n                            if (index > 0) {\n                                nodes[index - 1]._parent = undefined;\n                                nodes[index - 1]._length = 1;\n                            }\n                            nodes[i]._parent = undefined;\n                            nodes[i]._length = 1;\n                            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n                            if (index < length - 1) {\n                                cycleEdgeNode._parent = nodes[index + 1];\n                                cycleEdgeNode._parent.uncycle();\n                                cycleEdgeNode._length = cycleEdgeNode._parent._length + 1;\n                            } else {\n                                cycleEdgeNode._parent = undefined;\n                                cycleEdgeNode._length = 1;\n                            }\n                            var currentChildLength = cycleEdgeNode._length + 1;\n                            for (var j = i - 2; j >= 0; --j) {\n                                nodes[j]._length = currentChildLength;\n                                currentChildLength++;\n                            }\n                            return;\n                        }\n                    }\n                };\n\n                CapturedTrace.prototype.attachExtraTrace = function (error) {\n                    if (error.__stackCleaned__) return;\n                    this.uncycle();\n                    var parsed = parseStackAndMessage(error);\n                    var message = parsed.message;\n                    var stacks = [parsed.stack];\n\n                    var trace = this;\n                    while (trace !== undefined) {\n                        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n                        trace = trace._parent;\n                    }\n                    removeCommonRoots(stacks);\n                    removeDuplicateOrEmptyJumps(stacks);\n                    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n                    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n                };\n\n                var captureStackTrace = function stackDetection() {\n                    var v8stackFramePattern = /^\\s*at\\s*/;\n                    var v8stackFormatter = function v8stackFormatter(stack, error) {\n                        if (typeof stack === \"string\") return stack;\n\n                        if (error.name !== undefined && error.message !== undefined) {\n                            return error.toString();\n                        }\n                        return formatNonError(error);\n                    };\n\n                    if (typeof Error.stackTraceLimit === \"number\" && typeof Error.captureStackTrace === \"function\") {\n                        Error.stackTraceLimit += 6;\n                        stackFramePattern = v8stackFramePattern;\n                        formatStack = v8stackFormatter;\n                        var captureStackTrace = Error.captureStackTrace;\n\n                        shouldIgnore = function shouldIgnore(line) {\n                            return bluebirdFramePattern.test(line);\n                        };\n                        return function (receiver, ignoreUntil) {\n                            Error.stackTraceLimit += 6;\n                            captureStackTrace(receiver, ignoreUntil);\n                            Error.stackTraceLimit -= 6;\n                        };\n                    }\n                    var err = new Error();\n\n                    if (typeof err.stack === \"string\" && err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n                        stackFramePattern = /@/;\n                        formatStack = v8stackFormatter;\n                        indentStackFrames = true;\n                        return function captureStackTrace(o) {\n                            o.stack = new Error().stack;\n                        };\n                    }\n\n                    var hasStackAfterThrow;\n                    try {\n                        throw new Error();\n                    } catch (e) {\n                        hasStackAfterThrow = \"stack\" in e;\n                    }\n                    if (!(\"stack\" in err) && hasStackAfterThrow && typeof Error.stackTraceLimit === \"number\") {\n                        stackFramePattern = v8stackFramePattern;\n                        formatStack = v8stackFormatter;\n                        return function captureStackTrace(o) {\n                            Error.stackTraceLimit += 6;\n                            try {\n                                throw new Error();\n                            } catch (e) {\n                                o.stack = e.stack;\n                            }\n                            Error.stackTraceLimit -= 6;\n                        };\n                    }\n\n                    formatStack = function formatStack(stack, error) {\n                        if (typeof stack === \"string\") return stack;\n\n                        if ((typeof error === \"object\" || typeof error === \"function\") && error.name !== undefined && error.message !== undefined) {\n                            return error.toString();\n                        }\n                        return formatNonError(error);\n                    };\n\n                    return null;\n                }([]);\n\n                if (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n                    printWarning = function printWarning(message) {\n                        console.warn(message);\n                    };\n                    if (util.isNode && process.stderr.isTTY) {\n                        printWarning = function printWarning(message, isSoft) {\n                            var color = isSoft ? \"\\x1B[33m\" : \"\\x1B[31m\";\n                            console.warn(color + message + \"\\x1B[0m\\n\");\n                        };\n                    } else if (!util.isNode && typeof new Error().stack === \"string\") {\n                        printWarning = function printWarning(message, isSoft) {\n                            console.warn(\"%c\" + message, isSoft ? \"color: darkorange\" : \"color: red\");\n                        };\n                    }\n                }\n\n                var config = {\n                    warnings: warnings,\n                    longStackTraces: false,\n                    cancellation: false,\n                    monitoring: false\n                };\n\n                if (longStackTraces) Promise.longStackTraces();\n\n                return {\n                    longStackTraces: function longStackTraces() {\n                        return config.longStackTraces;\n                    },\n                    warnings: function warnings() {\n                        return config.warnings;\n                    },\n                    cancellation: function cancellation() {\n                        return config.cancellation;\n                    },\n                    monitoring: function monitoring() {\n                        return config.monitoring;\n                    },\n                    propagateFromFunction: function propagateFromFunction() {\n                        return _propagateFromFunction;\n                    },\n                    boundValueFunction: function boundValueFunction() {\n                        return _boundValueFunction;\n                    },\n                    checkForgottenReturns: checkForgottenReturns,\n                    setBounds: setBounds,\n                    warn: warn,\n                    deprecated: deprecated,\n                    CapturedTrace: CapturedTrace,\n                    fireDomEvent: fireDomEvent,\n                    fireGlobalEvent: fireGlobalEvent\n                };\n            };\n        }, { \"./errors\": 12, \"./util\": 36 }], 10: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise) {\n                function returner() {\n                    return this.value;\n                }\n                function thrower() {\n                    throw this.reason;\n                }\n\n                Promise.prototype[\"return\"] = Promise.prototype.thenReturn = function (value) {\n                    if (value instanceof Promise) value.suppressUnhandledRejections();\n                    return this._then(returner, undefined, undefined, { value: value }, undefined);\n                };\n\n                Promise.prototype[\"throw\"] = Promise.prototype.thenThrow = function (reason) {\n                    return this._then(thrower, undefined, undefined, { reason: reason }, undefined);\n                };\n\n                Promise.prototype.catchThrow = function (reason) {\n                    if (arguments.length <= 1) {\n                        return this._then(undefined, thrower, undefined, { reason: reason }, undefined);\n                    } else {\n                        var _reason = arguments[1];\n                        var handler = function handler() {\n                            throw _reason;\n                        };\n                        return this.caught(reason, handler);\n                    }\n                };\n\n                Promise.prototype.catchReturn = function (value) {\n                    if (arguments.length <= 1) {\n                        if (value instanceof Promise) value.suppressUnhandledRejections();\n                        return this._then(undefined, returner, undefined, { value: value }, undefined);\n                    } else {\n                        var _value = arguments[1];\n                        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n                        var handler = function handler() {\n                            return _value;\n                        };\n                        return this.caught(value, handler);\n                    }\n                };\n            };\n        }, {}], 11: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL) {\n                var PromiseReduce = Promise.reduce;\n                var PromiseAll = Promise.all;\n\n                function promiseAllThis() {\n                    return PromiseAll(this);\n                }\n\n                function PromiseMapSeries(promises, fn) {\n                    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n                }\n\n                Promise.prototype.each = function (fn) {\n                    return PromiseReduce(this, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, this, undefined);\n                };\n\n                Promise.prototype.mapSeries = function (fn) {\n                    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n                };\n\n                Promise.each = function (promises, fn) {\n                    return PromiseReduce(promises, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, promises, undefined);\n                };\n\n                Promise.mapSeries = PromiseMapSeries;\n            };\n        }, {}], 12: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var es5 = _dereq_(\"./es5\");\n            var Objectfreeze = es5.freeze;\n            var util = _dereq_(\"./util\");\n            var inherits = util.inherits;\n            var notEnumerableProp = util.notEnumerableProp;\n\n            function subError(nameProperty, defaultMessage) {\n                function SubError(message) {\n                    if (!(this instanceof SubError)) return new SubError(message);\n                    notEnumerableProp(this, \"message\", typeof message === \"string\" ? message : defaultMessage);\n                    notEnumerableProp(this, \"name\", nameProperty);\n                    if (Error.captureStackTrace) {\n                        Error.captureStackTrace(this, this.constructor);\n                    } else {\n                        Error.call(this);\n                    }\n                }\n                inherits(SubError, Error);\n                return SubError;\n            }\n\n            var _TypeError, _RangeError;\n            var Warning = subError(\"Warning\", \"warning\");\n            var CancellationError = subError(\"CancellationError\", \"cancellation error\");\n            var TimeoutError = subError(\"TimeoutError\", \"timeout error\");\n            var AggregateError = subError(\"AggregateError\", \"aggregate error\");\n            try {\n                _TypeError = TypeError;\n                _RangeError = RangeError;\n            } catch (e) {\n                _TypeError = subError(\"TypeError\", \"type error\");\n                _RangeError = subError(\"RangeError\", \"range error\");\n            }\n\n            var methods = (\"join pop push shift unshift slice filter forEach some \" + \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\n            for (var i = 0; i < methods.length; ++i) {\n                if (typeof Array.prototype[methods[i]] === \"function\") {\n                    AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n                }\n            }\n\n            es5.defineProperty(AggregateError.prototype, \"length\", {\n                value: 0,\n                configurable: false,\n                writable: true,\n                enumerable: true\n            });\n            AggregateError.prototype[\"isOperational\"] = true;\n            var level = 0;\n            AggregateError.prototype.toString = function () {\n                var indent = Array(level * 4 + 1).join(\" \");\n                var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n                level++;\n                indent = Array(level * 4 + 1).join(\" \");\n                for (var i = 0; i < this.length; ++i) {\n                    var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n                    var lines = str.split(\"\\n\");\n                    for (var j = 0; j < lines.length; ++j) {\n                        lines[j] = indent + lines[j];\n                    }\n                    str = lines.join(\"\\n\");\n                    ret += str + \"\\n\";\n                }\n                level--;\n                return ret;\n            };\n\n            function OperationalError(message) {\n                if (!(this instanceof OperationalError)) return new OperationalError(message);\n                notEnumerableProp(this, \"name\", \"OperationalError\");\n                notEnumerableProp(this, \"message\", message);\n                this.cause = message;\n                this[\"isOperational\"] = true;\n\n                if (message instanceof Error) {\n                    notEnumerableProp(this, \"message\", message.message);\n                    notEnumerableProp(this, \"stack\", message.stack);\n                } else if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, this.constructor);\n                }\n            }\n            inherits(OperationalError, Error);\n\n            var errorTypes = Error[\"__BluebirdErrorTypes__\"];\n            if (!errorTypes) {\n                errorTypes = Objectfreeze({\n                    CancellationError: CancellationError,\n                    TimeoutError: TimeoutError,\n                    OperationalError: OperationalError,\n                    RejectionError: OperationalError,\n                    AggregateError: AggregateError\n                });\n                es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n                    value: errorTypes,\n                    writable: false,\n                    enumerable: false,\n                    configurable: false\n                });\n            }\n\n            module.exports = {\n                Error: Error,\n                TypeError: _TypeError,\n                RangeError: _RangeError,\n                CancellationError: errorTypes.CancellationError,\n                OperationalError: errorTypes.OperationalError,\n                TimeoutError: errorTypes.TimeoutError,\n                AggregateError: errorTypes.AggregateError,\n                Warning: Warning\n            };\n        }, { \"./es5\": 13, \"./util\": 36 }], 13: [function (_dereq_, module, exports) {\n            var isES5 = function () {\n                \"use strict\";\n\n                return this === undefined;\n            }();\n\n            if (isES5) {\n                module.exports = {\n                    freeze: Object.freeze,\n                    defineProperty: Object.defineProperty,\n                    getDescriptor: Object.getOwnPropertyDescriptor,\n                    keys: Object.keys,\n                    names: Object.getOwnPropertyNames,\n                    getPrototypeOf: Object.getPrototypeOf,\n                    isArray: Array.isArray,\n                    isES5: isES5,\n                    propertyIsWritable: function propertyIsWritable(obj, prop) {\n                        var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n                        return !!(!descriptor || descriptor.writable || descriptor.set);\n                    }\n                };\n            } else {\n                var has = {}.hasOwnProperty;\n                var str = {}.toString;\n                var proto = {}.constructor.prototype;\n\n                var ObjectKeys = function ObjectKeys(o) {\n                    var ret = [];\n                    for (var key in o) {\n                        if (has.call(o, key)) {\n                            ret.push(key);\n                        }\n                    }\n                    return ret;\n                };\n\n                var ObjectGetDescriptor = function ObjectGetDescriptor(o, key) {\n                    return { value: o[key] };\n                };\n\n                var ObjectDefineProperty = function ObjectDefineProperty(o, key, desc) {\n                    o[key] = desc.value;\n                    return o;\n                };\n\n                var ObjectFreeze = function ObjectFreeze(obj) {\n                    return obj;\n                };\n\n                var ObjectGetPrototypeOf = function ObjectGetPrototypeOf(obj) {\n                    try {\n                        return Object(obj).constructor.prototype;\n                    } catch (e) {\n                        return proto;\n                    }\n                };\n\n                var ArrayIsArray = function ArrayIsArray(obj) {\n                    try {\n                        return str.call(obj) === \"[object Array]\";\n                    } catch (e) {\n                        return false;\n                    }\n                };\n\n                module.exports = {\n                    isArray: ArrayIsArray,\n                    keys: ObjectKeys,\n                    names: ObjectKeys,\n                    defineProperty: ObjectDefineProperty,\n                    getDescriptor: ObjectGetDescriptor,\n                    freeze: ObjectFreeze,\n                    getPrototypeOf: ObjectGetPrototypeOf,\n                    isES5: isES5,\n                    propertyIsWritable: function propertyIsWritable() {\n                        return true;\n                    }\n                };\n            }\n        }, {}], 14: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL) {\n                var PromiseMap = Promise.map;\n\n                Promise.prototype.filter = function (fn, options) {\n                    return PromiseMap(this, fn, options, INTERNAL);\n                };\n\n                Promise.filter = function (promises, fn, options) {\n                    return PromiseMap(promises, fn, options, INTERNAL);\n                };\n            };\n        }, {}], 15: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, tryConvertToPromise, NEXT_FILTER) {\n                var util = _dereq_(\"./util\");\n                var CancellationError = Promise.CancellationError;\n                var errorObj = util.errorObj;\n                var catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\n                function PassThroughHandlerContext(promise, type, handler) {\n                    this.promise = promise;\n                    this.type = type;\n                    this.handler = handler;\n                    this.called = false;\n                    this.cancelPromise = null;\n                }\n\n                PassThroughHandlerContext.prototype.isFinallyHandler = function () {\n                    return this.type === 0;\n                };\n\n                function FinallyHandlerCancelReaction(finallyHandler) {\n                    this.finallyHandler = finallyHandler;\n                }\n\n                FinallyHandlerCancelReaction.prototype._resultCancelled = function () {\n                    checkCancel(this.finallyHandler);\n                };\n\n                function checkCancel(ctx, reason) {\n                    if (ctx.cancelPromise != null) {\n                        if (arguments.length > 1) {\n                            ctx.cancelPromise._reject(reason);\n                        } else {\n                            ctx.cancelPromise._cancel();\n                        }\n                        ctx.cancelPromise = null;\n                        return true;\n                    }\n                    return false;\n                }\n\n                function succeed() {\n                    return finallyHandler.call(this, this.promise._target()._settledValue());\n                }\n                function fail(reason) {\n                    if (checkCancel(this, reason)) return;\n                    errorObj.e = reason;\n                    return errorObj;\n                }\n                function finallyHandler(reasonOrValue) {\n                    var promise = this.promise;\n                    var handler = this.handler;\n\n                    if (!this.called) {\n                        this.called = true;\n                        var ret = this.isFinallyHandler() ? handler.call(promise._boundValue()) : handler.call(promise._boundValue(), reasonOrValue);\n                        if (ret === NEXT_FILTER) {\n                            return ret;\n                        } else if (ret !== undefined) {\n                            promise._setReturnedNonUndefined();\n                            var maybePromise = tryConvertToPromise(ret, promise);\n                            if (maybePromise instanceof Promise) {\n                                if (this.cancelPromise != null) {\n                                    if (maybePromise._isCancelled()) {\n                                        var reason = new CancellationError(\"late cancellation observer\");\n                                        promise._attachExtraTrace(reason);\n                                        errorObj.e = reason;\n                                        return errorObj;\n                                    } else if (maybePromise.isPending()) {\n                                        maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));\n                                    }\n                                }\n                                return maybePromise._then(succeed, fail, undefined, this, undefined);\n                            }\n                        }\n                    }\n\n                    if (promise.isRejected()) {\n                        checkCancel(this);\n                        errorObj.e = reasonOrValue;\n                        return errorObj;\n                    } else {\n                        checkCancel(this);\n                        return reasonOrValue;\n                    }\n                }\n\n                Promise.prototype._passThrough = function (handler, type, success, fail) {\n                    if (typeof handler !== \"function\") return this.then();\n                    return this._then(success, fail, undefined, new PassThroughHandlerContext(this, type, handler), undefined);\n                };\n\n                Promise.prototype.lastly = Promise.prototype[\"finally\"] = function (handler) {\n                    return this._passThrough(handler, 0, finallyHandler, finallyHandler);\n                };\n\n                Promise.prototype.tap = function (handler) {\n                    return this._passThrough(handler, 1, finallyHandler);\n                };\n\n                Promise.prototype.tapCatch = function (handlerOrPredicate) {\n                    var len = arguments.length;\n                    if (len === 1) {\n                        return this._passThrough(handlerOrPredicate, 1, undefined, finallyHandler);\n                    } else {\n                        var catchInstances = new Array(len - 1),\n                            j = 0,\n                            i;\n                        for (i = 0; i < len - 1; ++i) {\n                            var item = arguments[i];\n                            if (util.isObject(item)) {\n                                catchInstances[j++] = item;\n                            } else {\n                                return Promise.reject(new TypeError(\"tapCatch statement predicate: \" + \"expecting an object but got \" + util.classString(item)));\n                            }\n                        }\n                        catchInstances.length = j;\n                        var handler = arguments[i];\n                        return this._passThrough(catchFilter(catchInstances, handler, this), 1, undefined, finallyHandler);\n                    }\n                };\n\n                return PassThroughHandlerContext;\n            };\n        }, { \"./catch_filter\": 7, \"./util\": 36 }], 16: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug) {\n                var errors = _dereq_(\"./errors\");\n                var TypeError = errors.TypeError;\n                var util = _dereq_(\"./util\");\n                var errorObj = util.errorObj;\n                var tryCatch = util.tryCatch;\n                var yieldHandlers = [];\n\n                function promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n                    for (var i = 0; i < yieldHandlers.length; ++i) {\n                        traceParent._pushContext();\n                        var result = tryCatch(yieldHandlers[i])(value);\n                        traceParent._popContext();\n                        if (result === errorObj) {\n                            traceParent._pushContext();\n                            var ret = Promise.reject(errorObj.e);\n                            traceParent._popContext();\n                            return ret;\n                        }\n                        var maybePromise = tryConvertToPromise(result, traceParent);\n                        if (maybePromise instanceof Promise) return maybePromise;\n                    }\n                    return null;\n                }\n\n                function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n                    if (debug.cancellation()) {\n                        var internal = new Promise(INTERNAL);\n                        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n                        this._promise = internal.lastly(function () {\n                            return _finallyPromise;\n                        });\n                        internal._captureStackTrace();\n                        internal._setOnCancel(this);\n                    } else {\n                        var promise = this._promise = new Promise(INTERNAL);\n                        promise._captureStackTrace();\n                    }\n                    this._stack = stack;\n                    this._generatorFunction = generatorFunction;\n                    this._receiver = receiver;\n                    this._generator = undefined;\n                    this._yieldHandlers = typeof yieldHandler === \"function\" ? [yieldHandler].concat(yieldHandlers) : yieldHandlers;\n                    this._yieldedPromise = null;\n                    this._cancellationPhase = false;\n                }\n                util.inherits(PromiseSpawn, Proxyable);\n\n                PromiseSpawn.prototype._isResolved = function () {\n                    return this._promise === null;\n                };\n\n                PromiseSpawn.prototype._cleanup = function () {\n                    this._promise = this._generator = null;\n                    if (debug.cancellation() && this._finallyPromise !== null) {\n                        this._finallyPromise._fulfill();\n                        this._finallyPromise = null;\n                    }\n                };\n\n                PromiseSpawn.prototype._promiseCancelled = function () {\n                    if (this._isResolved()) return;\n                    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n                    var result;\n                    if (!implementsReturn) {\n                        var reason = new Promise.CancellationError(\"generator .return() sentinel\");\n                        Promise.coroutine.returnSentinel = reason;\n                        this._promise._attachExtraTrace(reason);\n                        this._promise._pushContext();\n                        result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n                        this._promise._popContext();\n                    } else {\n                        this._promise._pushContext();\n                        result = tryCatch(this._generator[\"return\"]).call(this._generator, undefined);\n                        this._promise._popContext();\n                    }\n                    this._cancellationPhase = true;\n                    this._yieldedPromise = null;\n                    this._continue(result);\n                };\n\n                PromiseSpawn.prototype._promiseFulfilled = function (value) {\n                    this._yieldedPromise = null;\n                    this._promise._pushContext();\n                    var result = tryCatch(this._generator.next).call(this._generator, value);\n                    this._promise._popContext();\n                    this._continue(result);\n                };\n\n                PromiseSpawn.prototype._promiseRejected = function (reason) {\n                    this._yieldedPromise = null;\n                    this._promise._attachExtraTrace(reason);\n                    this._promise._pushContext();\n                    var result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n                    this._promise._popContext();\n                    this._continue(result);\n                };\n\n                PromiseSpawn.prototype._resultCancelled = function () {\n                    if (this._yieldedPromise instanceof Promise) {\n                        var promise = this._yieldedPromise;\n                        this._yieldedPromise = null;\n                        promise.cancel();\n                    }\n                };\n\n                PromiseSpawn.prototype.promise = function () {\n                    return this._promise;\n                };\n\n                PromiseSpawn.prototype._run = function () {\n                    this._generator = this._generatorFunction.call(this._receiver);\n                    this._receiver = this._generatorFunction = undefined;\n                    this._promiseFulfilled(undefined);\n                };\n\n                PromiseSpawn.prototype._continue = function (result) {\n                    var promise = this._promise;\n                    if (result === errorObj) {\n                        this._cleanup();\n                        if (this._cancellationPhase) {\n                            return promise.cancel();\n                        } else {\n                            return promise._rejectCallback(result.e, false);\n                        }\n                    }\n\n                    var value = result.value;\n                    if (result.done === true) {\n                        this._cleanup();\n                        if (this._cancellationPhase) {\n                            return promise.cancel();\n                        } else {\n                            return promise._resolveCallback(value);\n                        }\n                    } else {\n                        var maybePromise = tryConvertToPromise(value, this._promise);\n                        if (!(maybePromise instanceof Promise)) {\n                            maybePromise = promiseFromYieldHandler(maybePromise, this._yieldHandlers, this._promise);\n                            if (maybePromise === null) {\n                                this._promiseRejected(new TypeError(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\", String(value)) + \"From coroutine:\\n\" + this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")));\n                                return;\n                            }\n                        }\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if ((bitField & 50397184) === 0) {\n                            this._yieldedPromise = maybePromise;\n                            maybePromise._proxy(this, null);\n                        } else if ((bitField & 33554432) !== 0) {\n                            Promise._async.invoke(this._promiseFulfilled, this, maybePromise._value());\n                        } else if ((bitField & 16777216) !== 0) {\n                            Promise._async.invoke(this._promiseRejected, this, maybePromise._reason());\n                        } else {\n                            this._promiseCancelled();\n                        }\n                    }\n                };\n\n                Promise.coroutine = function (generatorFunction, options) {\n                    if (typeof generatorFunction !== \"function\") {\n                        throw new TypeError(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    var yieldHandler = Object(options).yieldHandler;\n                    var PromiseSpawn$ = PromiseSpawn;\n                    var stack = new Error().stack;\n                    return function () {\n                        var generator = generatorFunction.apply(this, arguments);\n                        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler, stack);\n                        var ret = spawn.promise();\n                        spawn._generator = generator;\n                        spawn._promiseFulfilled(undefined);\n                        return ret;\n                    };\n                };\n\n                Promise.coroutine.addYieldHandler = function (fn) {\n                    if (typeof fn !== \"function\") {\n                        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    yieldHandlers.push(fn);\n                };\n\n                Promise.spawn = function (generatorFunction) {\n                    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n                    if (typeof generatorFunction !== \"function\") {\n                        return apiRejection(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    var spawn = new PromiseSpawn(generatorFunction, this);\n                    var ret = spawn.promise();\n                    spawn._run(Promise.spawn);\n                    return ret;\n                };\n            };\n        }, { \"./errors\": 12, \"./util\": 36 }], 17: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain) {\n                var util = _dereq_(\"./util\");\n                var canEvaluate = util.canEvaluate;\n                var tryCatch = util.tryCatch;\n                var errorObj = util.errorObj;\n                var reject;\n\n                if (false) {\n                    if (canEvaluate) {\n                        var thenCallback = function thenCallback(i) {\n                            return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n                        };\n\n                        var promiseSetter = function promiseSetter(i) {\n                            return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n                        };\n\n                        var generateHolderClass = function generateHolderClass(total) {\n                            var props = new Array(total);\n                            for (var i = 0; i < props.length; ++i) {\n                                props[i] = \"this.p\" + (i + 1);\n                            }\n                            var assignment = props.join(\" = \") + \" = null;\";\n                            var cancellationCode = \"var promise;\\n\" + props.map(function (prop) {\n                                return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n                            }).join(\"\\n\");\n                            var passedArguments = props.join(\", \");\n                            var name = \"Holder$\" + total;\n\n                            var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n                            code = code.replace(/\\[TheName\\]/g, name).replace(/\\[TheTotal\\]/g, total).replace(/\\[ThePassedArguments\\]/g, passedArguments).replace(/\\[TheProperties\\]/g, assignment).replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n                            return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)(tryCatch, errorObj, Promise, async);\n                        };\n\n                        var holderClasses = [];\n                        var thenCallbacks = [];\n                        var promiseSetters = [];\n\n                        for (var i = 0; i < 8; ++i) {\n                            holderClasses.push(generateHolderClass(i + 1));\n                            thenCallbacks.push(thenCallback(i + 1));\n                            promiseSetters.push(promiseSetter(i + 1));\n                        }\n\n                        reject = function reject(reason) {\n                            this._reject(reason);\n                        };\n                    }\n                }\n\n                Promise.join = function () {\n                    var last = arguments.length - 1;\n                    var fn;\n                    if (last > 0 && typeof arguments[last] === \"function\") {\n                        fn = arguments[last];\n                        if (false) {\n                            if (last <= 8 && canEvaluate) {\n                                var ret = new Promise(INTERNAL);\n                                ret._captureStackTrace();\n                                var HolderClass = holderClasses[last - 1];\n                                var holder = new HolderClass(fn);\n                                var callbacks = thenCallbacks;\n\n                                for (var i = 0; i < last; ++i) {\n                                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                                    if (maybePromise instanceof Promise) {\n                                        maybePromise = maybePromise._target();\n                                        var bitField = maybePromise._bitField;\n                                        ;\n                                        if ((bitField & 50397184) === 0) {\n                                            maybePromise._then(callbacks[i], reject, undefined, ret, holder);\n                                            promiseSetters[i](maybePromise, holder);\n                                            holder.asyncNeeded = false;\n                                        } else if ((bitField & 33554432) !== 0) {\n                                            callbacks[i].call(ret, maybePromise._value(), holder);\n                                        } else if ((bitField & 16777216) !== 0) {\n                                            ret._reject(maybePromise._reason());\n                                        } else {\n                                            ret._cancel();\n                                        }\n                                    } else {\n                                        callbacks[i].call(ret, maybePromise, holder);\n                                    }\n                                }\n\n                                if (!ret._isFateSealed()) {\n                                    if (holder.asyncNeeded) {\n                                        var domain = getDomain();\n                                        if (domain !== null) {\n                                            holder.fn = util.domainBind(domain, holder.fn);\n                                        }\n                                    }\n                                    ret._setAsyncGuaranteed();\n                                    ret._setOnCancel(holder);\n                                }\n                                return ret;\n                            }\n                        }\n                    }\n                    var args = [].slice.call(arguments);;\n                    if (fn) args.pop();\n                    var ret = new PromiseArray(args).promise();\n                    return fn !== undefined ? ret.spread(fn) : ret;\n                };\n            };\n        }, { \"./util\": 36 }], 18: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n                var getDomain = Promise._getDomain;\n                var util = _dereq_(\"./util\");\n                var tryCatch = util.tryCatch;\n                var errorObj = util.errorObj;\n                var async = Promise._async;\n\n                function MappingPromiseArray(promises, fn, limit, _filter) {\n                    this.constructor$(promises);\n                    this._promise._captureStackTrace();\n                    var domain = getDomain();\n                    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n                    this._preservedValues = _filter === INTERNAL ? new Array(this.length()) : null;\n                    this._limit = limit;\n                    this._inFlight = 0;\n                    this._queue = [];\n                    async.invoke(this._asyncInit, this, undefined);\n                }\n                util.inherits(MappingPromiseArray, PromiseArray);\n\n                MappingPromiseArray.prototype._asyncInit = function () {\n                    this._init$(undefined, -2);\n                };\n\n                MappingPromiseArray.prototype._init = function () {};\n\n                MappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n                    var values = this._values;\n                    var length = this.length();\n                    var preservedValues = this._preservedValues;\n                    var limit = this._limit;\n\n                    if (index < 0) {\n                        index = index * -1 - 1;\n                        values[index] = value;\n                        if (limit >= 1) {\n                            this._inFlight--;\n                            this._drainQueue();\n                            if (this._isResolved()) return true;\n                        }\n                    } else {\n                        if (limit >= 1 && this._inFlight >= limit) {\n                            values[index] = value;\n                            this._queue.push(index);\n                            return false;\n                        }\n                        if (preservedValues !== null) preservedValues[index] = value;\n\n                        var promise = this._promise;\n                        var callback = this._callback;\n                        var receiver = promise._boundValue();\n                        promise._pushContext();\n                        var ret = tryCatch(callback).call(receiver, value, index, length);\n                        var promiseCreated = promise._popContext();\n                        debug.checkForgottenReturns(ret, promiseCreated, preservedValues !== null ? \"Promise.filter\" : \"Promise.map\", promise);\n                        if (ret === errorObj) {\n                            this._reject(ret.e);\n                            return true;\n                        }\n\n                        var maybePromise = tryConvertToPromise(ret, this._promise);\n                        if (maybePromise instanceof Promise) {\n                            maybePromise = maybePromise._target();\n                            var bitField = maybePromise._bitField;\n                            ;\n                            if ((bitField & 50397184) === 0) {\n                                if (limit >= 1) this._inFlight++;\n                                values[index] = maybePromise;\n                                maybePromise._proxy(this, (index + 1) * -1);\n                                return false;\n                            } else if ((bitField & 33554432) !== 0) {\n                                ret = maybePromise._value();\n                            } else if ((bitField & 16777216) !== 0) {\n                                this._reject(maybePromise._reason());\n                                return true;\n                            } else {\n                                this._cancel();\n                                return true;\n                            }\n                        }\n                        values[index] = ret;\n                    }\n                    var totalResolved = ++this._totalResolved;\n                    if (totalResolved >= length) {\n                        if (preservedValues !== null) {\n                            this._filter(values, preservedValues);\n                        } else {\n                            this._resolve(values);\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n\n                MappingPromiseArray.prototype._drainQueue = function () {\n                    var queue = this._queue;\n                    var limit = this._limit;\n                    var values = this._values;\n                    while (queue.length > 0 && this._inFlight < limit) {\n                        if (this._isResolved()) return;\n                        var index = queue.pop();\n                        this._promiseFulfilled(values[index], index);\n                    }\n                };\n\n                MappingPromiseArray.prototype._filter = function (booleans, values) {\n                    var len = values.length;\n                    var ret = new Array(len);\n                    var j = 0;\n                    for (var i = 0; i < len; ++i) {\n                        if (booleans[i]) ret[j++] = values[i];\n                    }\n                    ret.length = j;\n                    this._resolve(ret);\n                };\n\n                MappingPromiseArray.prototype.preservedValues = function () {\n                    return this._preservedValues;\n                };\n\n                function map(promises, fn, options, _filter) {\n                    if (typeof fn !== \"function\") {\n                        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n                    }\n\n                    var limit = 0;\n                    if (options !== undefined) {\n                        if (typeof options === \"object\" && options !== null) {\n                            if (typeof options.concurrency !== \"number\") {\n                                return Promise.reject(new TypeError(\"'concurrency' must be a number but it is \" + util.classString(options.concurrency)));\n                            }\n                            limit = options.concurrency;\n                        } else {\n                            return Promise.reject(new TypeError(\"options argument must be an object but it is \" + util.classString(options)));\n                        }\n                    }\n                    limit = typeof limit === \"number\" && isFinite(limit) && limit >= 1 ? limit : 0;\n                    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n                }\n\n                Promise.prototype.map = function (fn, options) {\n                    return map(this, fn, options, null);\n                };\n\n                Promise.map = function (promises, fn, options, _filter) {\n                    return map(promises, fn, options, _filter);\n                };\n            };\n        }, { \"./util\": 36 }], 19: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\n                var util = _dereq_(\"./util\");\n                var tryCatch = util.tryCatch;\n\n                Promise.method = function (fn) {\n                    if (typeof fn !== \"function\") {\n                        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    return function () {\n                        var ret = new Promise(INTERNAL);\n                        ret._captureStackTrace();\n                        ret._pushContext();\n                        var value = tryCatch(fn).apply(this, arguments);\n                        var promiseCreated = ret._popContext();\n                        debug.checkForgottenReturns(value, promiseCreated, \"Promise.method\", ret);\n                        ret._resolveFromSyncValue(value);\n                        return ret;\n                    };\n                };\n\n                Promise.attempt = Promise[\"try\"] = function (fn) {\n                    if (typeof fn !== \"function\") {\n                        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    var ret = new Promise(INTERNAL);\n                    ret._captureStackTrace();\n                    ret._pushContext();\n                    var value;\n                    if (arguments.length > 1) {\n                        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n                        var arg = arguments[1];\n                        var ctx = arguments[2];\n                        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg) : tryCatch(fn).call(ctx, arg);\n                    } else {\n                        value = tryCatch(fn)();\n                    }\n                    var promiseCreated = ret._popContext();\n                    debug.checkForgottenReturns(value, promiseCreated, \"Promise.try\", ret);\n                    ret._resolveFromSyncValue(value);\n                    return ret;\n                };\n\n                Promise.prototype._resolveFromSyncValue = function (value) {\n                    if (value === util.errorObj) {\n                        this._rejectCallback(value.e, false);\n                    } else {\n                        this._resolveCallback(value, true);\n                    }\n                };\n            };\n        }, { \"./util\": 36 }], 20: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var util = _dereq_(\"./util\");\n            var maybeWrapAsError = util.maybeWrapAsError;\n            var errors = _dereq_(\"./errors\");\n            var OperationalError = errors.OperationalError;\n            var es5 = _dereq_(\"./es5\");\n\n            function isUntypedError(obj) {\n                return obj instanceof Error && es5.getPrototypeOf(obj) === Error.prototype;\n            }\n\n            var rErrorKey = /^(?:name|message|stack|cause)$/;\n            function wrapAsOperationalError(obj) {\n                var ret;\n                if (isUntypedError(obj)) {\n                    ret = new OperationalError(obj);\n                    ret.name = obj.name;\n                    ret.message = obj.message;\n                    ret.stack = obj.stack;\n                    var keys = es5.keys(obj);\n                    for (var i = 0; i < keys.length; ++i) {\n                        var key = keys[i];\n                        if (!rErrorKey.test(key)) {\n                            ret[key] = obj[key];\n                        }\n                    }\n                    return ret;\n                }\n                util.markAsOriginatingFromRejection(obj);\n                return obj;\n            }\n\n            function nodebackForPromise(promise, multiArgs) {\n                return function (err, value) {\n                    if (promise === null) return;\n                    if (err) {\n                        var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n                        promise._attachExtraTrace(wrapped);\n                        promise._reject(wrapped);\n                    } else if (!multiArgs) {\n                        promise._fulfill(value);\n                    } else {\n                        var args = [].slice.call(arguments, 1);;\n                        promise._fulfill(args);\n                    }\n                    promise = null;\n                };\n            }\n\n            module.exports = nodebackForPromise;\n        }, { \"./errors\": 12, \"./es5\": 13, \"./util\": 36 }], 21: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise) {\n                var util = _dereq_(\"./util\");\n                var async = Promise._async;\n                var tryCatch = util.tryCatch;\n                var errorObj = util.errorObj;\n\n                function spreadAdapter(val, nodeback) {\n                    var promise = this;\n                    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n                    var ret = tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n                    if (ret === errorObj) {\n                        async.throwLater(ret.e);\n                    }\n                }\n\n                function successAdapter(val, nodeback) {\n                    var promise = this;\n                    var receiver = promise._boundValue();\n                    var ret = val === undefined ? tryCatch(nodeback).call(receiver, null) : tryCatch(nodeback).call(receiver, null, val);\n                    if (ret === errorObj) {\n                        async.throwLater(ret.e);\n                    }\n                }\n                function errorAdapter(reason, nodeback) {\n                    var promise = this;\n                    if (!reason) {\n                        var newReason = new Error(reason + \"\");\n                        newReason.cause = reason;\n                        reason = newReason;\n                    }\n                    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n                    if (ret === errorObj) {\n                        async.throwLater(ret.e);\n                    }\n                }\n\n                Promise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback, options) {\n                    if (typeof nodeback == \"function\") {\n                        var adapter = successAdapter;\n                        if (options !== undefined && Object(options).spread) {\n                            adapter = spreadAdapter;\n                        }\n                        this._then(adapter, errorAdapter, undefined, this, nodeback);\n                    }\n                    return this;\n                };\n            };\n        }, { \"./util\": 36 }], 22: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function () {\n                var makeSelfResolutionError = function makeSelfResolutionError() {\n                    return new TypeError(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                };\n                var reflectHandler = function reflectHandler() {\n                    return new Promise.PromiseInspection(this._target());\n                };\n                var apiRejection = function apiRejection(msg) {\n                    return Promise.reject(new TypeError(msg));\n                };\n                function Proxyable() {}\n                var UNDEFINED_BINDING = {};\n                var util = _dereq_(\"./util\");\n\n                var getDomain;\n                if (util.isNode) {\n                    getDomain = function getDomain() {\n                        var ret = process.domain;\n                        if (ret === undefined) ret = null;\n                        return ret;\n                    };\n                } else {\n                    getDomain = function getDomain() {\n                        return null;\n                    };\n                }\n                util.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\n                var es5 = _dereq_(\"./es5\");\n                var Async = _dereq_(\"./async\");\n                var async = new Async();\n                es5.defineProperty(Promise, \"_async\", { value: async });\n                var errors = _dereq_(\"./errors\");\n                var TypeError = Promise.TypeError = errors.TypeError;\n                Promise.RangeError = errors.RangeError;\n                var CancellationError = Promise.CancellationError = errors.CancellationError;\n                Promise.TimeoutError = errors.TimeoutError;\n                Promise.OperationalError = errors.OperationalError;\n                Promise.RejectionError = errors.OperationalError;\n                Promise.AggregateError = errors.AggregateError;\n                var INTERNAL = function INTERNAL() {};\n                var APPLY = {};\n                var NEXT_FILTER = {};\n                var tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\n                var PromiseArray = _dereq_(\"./promise_array\")(Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable);\n                var Context = _dereq_(\"./context\")(Promise);\n                /*jshint unused:false*/\n                var createContext = Context.create;\n                var debug = _dereq_(\"./debuggability\")(Promise, Context);\n                var CapturedTrace = debug.CapturedTrace;\n                var PassThroughHandlerContext = _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\n                var catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n                var nodebackForPromise = _dereq_(\"./nodeback\");\n                var errorObj = util.errorObj;\n                var tryCatch = util.tryCatch;\n                function check(self, executor) {\n                    if (self == null || self.constructor !== Promise) {\n                        throw new TypeError(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    if (typeof executor !== \"function\") {\n                        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n                    }\n                }\n\n                function Promise(executor) {\n                    if (executor !== INTERNAL) {\n                        check(this, executor);\n                    }\n                    this._bitField = 0;\n                    this._fulfillmentHandler0 = undefined;\n                    this._rejectionHandler0 = undefined;\n                    this._promise0 = undefined;\n                    this._receiver0 = undefined;\n                    this._resolveFromExecutor(executor);\n                    this._promiseCreated();\n                    this._fireEvent(\"promiseCreated\", this);\n                }\n\n                Promise.prototype.toString = function () {\n                    return \"[object Promise]\";\n                };\n\n                Promise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n                    var len = arguments.length;\n                    if (len > 1) {\n                        var catchInstances = new Array(len - 1),\n                            j = 0,\n                            i;\n                        for (i = 0; i < len - 1; ++i) {\n                            var item = arguments[i];\n                            if (util.isObject(item)) {\n                                catchInstances[j++] = item;\n                            } else {\n                                return apiRejection(\"Catch statement predicate: \" + \"expecting an object but got \" + util.classString(item));\n                            }\n                        }\n                        catchInstances.length = j;\n                        fn = arguments[i];\n                        return this.then(undefined, catchFilter(catchInstances, fn, this));\n                    }\n                    return this.then(undefined, fn);\n                };\n\n                Promise.prototype.reflect = function () {\n                    return this._then(reflectHandler, reflectHandler, undefined, this, undefined);\n                };\n\n                Promise.prototype.then = function (didFulfill, didReject) {\n                    if (debug.warnings() && arguments.length > 0 && typeof didFulfill !== \"function\" && typeof didReject !== \"function\") {\n                        var msg = \".then() only accepts functions but was passed: \" + util.classString(didFulfill);\n                        if (arguments.length > 1) {\n                            msg += \", \" + util.classString(didReject);\n                        }\n                        this._warn(msg);\n                    }\n                    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n                };\n\n                Promise.prototype.done = function (didFulfill, didReject) {\n                    var promise = this._then(didFulfill, didReject, undefined, undefined, undefined);\n                    promise._setIsFinal();\n                };\n\n                Promise.prototype.spread = function (fn) {\n                    if (typeof fn !== \"function\") {\n                        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n                };\n\n                Promise.prototype.toJSON = function () {\n                    var ret = {\n                        isFulfilled: false,\n                        isRejected: false,\n                        fulfillmentValue: undefined,\n                        rejectionReason: undefined\n                    };\n                    if (this.isFulfilled()) {\n                        ret.fulfillmentValue = this.value();\n                        ret.isFulfilled = true;\n                    } else if (this.isRejected()) {\n                        ret.rejectionReason = this.reason();\n                        ret.isRejected = true;\n                    }\n                    return ret;\n                };\n\n                Promise.prototype.all = function () {\n                    if (arguments.length > 0) {\n                        this._warn(\".all() was passed arguments but it does not take any\");\n                    }\n                    return new PromiseArray(this).promise();\n                };\n\n                Promise.prototype.error = function (fn) {\n                    return this.caught(util.originatesFromRejection, fn);\n                };\n\n                Promise.getNewLibraryCopy = module.exports;\n\n                Promise.is = function (val) {\n                    return val instanceof Promise;\n                };\n\n                Promise.fromNode = Promise.fromCallback = function (fn) {\n                    var ret = new Promise(INTERNAL);\n                    ret._captureStackTrace();\n                    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : false;\n                    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n                    if (result === errorObj) {\n                        ret._rejectCallback(result.e, true);\n                    }\n                    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n                    return ret;\n                };\n\n                Promise.all = function (promises) {\n                    return new PromiseArray(promises).promise();\n                };\n\n                Promise.cast = function (obj) {\n                    var ret = tryConvertToPromise(obj);\n                    if (!(ret instanceof Promise)) {\n                        ret = new Promise(INTERNAL);\n                        ret._captureStackTrace();\n                        ret._setFulfilled();\n                        ret._rejectionHandler0 = obj;\n                    }\n                    return ret;\n                };\n\n                Promise.resolve = Promise.fulfilled = Promise.cast;\n\n                Promise.reject = Promise.rejected = function (reason) {\n                    var ret = new Promise(INTERNAL);\n                    ret._captureStackTrace();\n                    ret._rejectCallback(reason, true);\n                    return ret;\n                };\n\n                Promise.setScheduler = function (fn) {\n                    if (typeof fn !== \"function\") {\n                        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    return async.setScheduler(fn);\n                };\n\n                Promise.prototype._then = function (didFulfill, didReject, _, receiver, internalData) {\n                    var haveInternalData = internalData !== undefined;\n                    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n                    var target = this._target();\n                    var bitField = target._bitField;\n\n                    if (!haveInternalData) {\n                        promise._propagateFrom(this, 3);\n                        promise._captureStackTrace();\n                        if (receiver === undefined && (this._bitField & 2097152) !== 0) {\n                            if (!((bitField & 50397184) === 0)) {\n                                receiver = this._boundValue();\n                            } else {\n                                receiver = target === this ? undefined : this._boundTo;\n                            }\n                        }\n                        this._fireEvent(\"promiseChained\", this, promise);\n                    }\n\n                    var domain = getDomain();\n                    if (!((bitField & 50397184) === 0)) {\n                        var handler,\n                            value,\n                            settler = target._settlePromiseCtx;\n                        if ((bitField & 33554432) !== 0) {\n                            value = target._rejectionHandler0;\n                            handler = didFulfill;\n                        } else if ((bitField & 16777216) !== 0) {\n                            value = target._fulfillmentHandler0;\n                            handler = didReject;\n                            target._unsetRejectionIsUnhandled();\n                        } else {\n                            settler = target._settlePromiseLateCancellationObserver;\n                            value = new CancellationError(\"late cancellation observer\");\n                            target._attachExtraTrace(value);\n                            handler = didReject;\n                        }\n\n                        async.invoke(settler, target, {\n                            handler: domain === null ? handler : typeof handler === \"function\" && util.domainBind(domain, handler),\n                            promise: promise,\n                            receiver: receiver,\n                            value: value\n                        });\n                    } else {\n                        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n                    }\n\n                    return promise;\n                };\n\n                Promise.prototype._length = function () {\n                    return this._bitField & 65535;\n                };\n\n                Promise.prototype._isFateSealed = function () {\n                    return (this._bitField & 117506048) !== 0;\n                };\n\n                Promise.prototype._isFollowing = function () {\n                    return (this._bitField & 67108864) === 67108864;\n                };\n\n                Promise.prototype._setLength = function (len) {\n                    this._bitField = this._bitField & -65536 | len & 65535;\n                };\n\n                Promise.prototype._setFulfilled = function () {\n                    this._bitField = this._bitField | 33554432;\n                    this._fireEvent(\"promiseFulfilled\", this);\n                };\n\n                Promise.prototype._setRejected = function () {\n                    this._bitField = this._bitField | 16777216;\n                    this._fireEvent(\"promiseRejected\", this);\n                };\n\n                Promise.prototype._setFollowing = function () {\n                    this._bitField = this._bitField | 67108864;\n                    this._fireEvent(\"promiseResolved\", this);\n                };\n\n                Promise.prototype._setIsFinal = function () {\n                    this._bitField = this._bitField | 4194304;\n                };\n\n                Promise.prototype._isFinal = function () {\n                    return (this._bitField & 4194304) > 0;\n                };\n\n                Promise.prototype._unsetCancelled = function () {\n                    this._bitField = this._bitField & ~65536;\n                };\n\n                Promise.prototype._setCancelled = function () {\n                    this._bitField = this._bitField | 65536;\n                    this._fireEvent(\"promiseCancelled\", this);\n                };\n\n                Promise.prototype._setWillBeCancelled = function () {\n                    this._bitField = this._bitField | 8388608;\n                };\n\n                Promise.prototype._setAsyncGuaranteed = function () {\n                    if (async.hasCustomScheduler()) return;\n                    this._bitField = this._bitField | 134217728;\n                };\n\n                Promise.prototype._receiverAt = function (index) {\n                    var ret = index === 0 ? this._receiver0 : this[index * 4 - 4 + 3];\n                    if (ret === UNDEFINED_BINDING) {\n                        return undefined;\n                    } else if (ret === undefined && this._isBound()) {\n                        return this._boundValue();\n                    }\n                    return ret;\n                };\n\n                Promise.prototype._promiseAt = function (index) {\n                    return this[index * 4 - 4 + 2];\n                };\n\n                Promise.prototype._fulfillmentHandlerAt = function (index) {\n                    return this[index * 4 - 4 + 0];\n                };\n\n                Promise.prototype._rejectionHandlerAt = function (index) {\n                    return this[index * 4 - 4 + 1];\n                };\n\n                Promise.prototype._boundValue = function () {};\n\n                Promise.prototype._migrateCallback0 = function (follower) {\n                    var bitField = follower._bitField;\n                    var fulfill = follower._fulfillmentHandler0;\n                    var reject = follower._rejectionHandler0;\n                    var promise = follower._promise0;\n                    var receiver = follower._receiverAt(0);\n                    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n                    this._addCallbacks(fulfill, reject, promise, receiver, null);\n                };\n\n                Promise.prototype._migrateCallbackAt = function (follower, index) {\n                    var fulfill = follower._fulfillmentHandlerAt(index);\n                    var reject = follower._rejectionHandlerAt(index);\n                    var promise = follower._promiseAt(index);\n                    var receiver = follower._receiverAt(index);\n                    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n                    this._addCallbacks(fulfill, reject, promise, receiver, null);\n                };\n\n                Promise.prototype._addCallbacks = function (fulfill, reject, promise, receiver, domain) {\n                    var index = this._length();\n\n                    if (index >= 65535 - 4) {\n                        index = 0;\n                        this._setLength(0);\n                    }\n\n                    if (index === 0) {\n                        this._promise0 = promise;\n                        this._receiver0 = receiver;\n                        if (typeof fulfill === \"function\") {\n                            this._fulfillmentHandler0 = domain === null ? fulfill : util.domainBind(domain, fulfill);\n                        }\n                        if (typeof reject === \"function\") {\n                            this._rejectionHandler0 = domain === null ? reject : util.domainBind(domain, reject);\n                        }\n                    } else {\n                        var base = index * 4 - 4;\n                        this[base + 2] = promise;\n                        this[base + 3] = receiver;\n                        if (typeof fulfill === \"function\") {\n                            this[base + 0] = domain === null ? fulfill : util.domainBind(domain, fulfill);\n                        }\n                        if (typeof reject === \"function\") {\n                            this[base + 1] = domain === null ? reject : util.domainBind(domain, reject);\n                        }\n                    }\n                    this._setLength(index + 1);\n                    return index;\n                };\n\n                Promise.prototype._proxy = function (proxyable, arg) {\n                    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n                };\n\n                Promise.prototype._resolveCallback = function (value, shouldBind) {\n                    if ((this._bitField & 117506048) !== 0) return;\n                    if (value === this) return this._rejectCallback(makeSelfResolutionError(), false);\n                    var maybePromise = tryConvertToPromise(value, this);\n                    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n                    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n                    var promise = maybePromise._target();\n\n                    if (promise === this) {\n                        this._reject(makeSelfResolutionError());\n                        return;\n                    }\n\n                    var bitField = promise._bitField;\n                    if ((bitField & 50397184) === 0) {\n                        var len = this._length();\n                        if (len > 0) promise._migrateCallback0(this);\n                        for (var i = 1; i < len; ++i) {\n                            promise._migrateCallbackAt(this, i);\n                        }\n                        this._setFollowing();\n                        this._setLength(0);\n                        this._setFollowee(promise);\n                    } else if ((bitField & 33554432) !== 0) {\n                        this._fulfill(promise._value());\n                    } else if ((bitField & 16777216) !== 0) {\n                        this._reject(promise._reason());\n                    } else {\n                        var reason = new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        this._reject(reason);\n                    }\n                };\n\n                Promise.prototype._rejectCallback = function (reason, synchronous, ignoreNonErrorWarnings) {\n                    var trace = util.ensureErrorObject(reason);\n                    var hasStack = trace === reason;\n                    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n                        var message = \"a promise was rejected with a non-error: \" + util.classString(reason);\n                        this._warn(message, true);\n                    }\n                    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n                    this._reject(reason);\n                };\n\n                Promise.prototype._resolveFromExecutor = function (executor) {\n                    if (executor === INTERNAL) return;\n                    var promise = this;\n                    this._captureStackTrace();\n                    this._pushContext();\n                    var synchronous = true;\n                    var r = this._execute(executor, function (value) {\n                        promise._resolveCallback(value);\n                    }, function (reason) {\n                        promise._rejectCallback(reason, synchronous);\n                    });\n                    synchronous = false;\n                    this._popContext();\n\n                    if (r !== undefined) {\n                        promise._rejectCallback(r, true);\n                    }\n                };\n\n                Promise.prototype._settlePromiseFromHandler = function (handler, receiver, value, promise) {\n                    var bitField = promise._bitField;\n                    if ((bitField & 65536) !== 0) return;\n                    promise._pushContext();\n                    var x;\n                    if (receiver === APPLY) {\n                        if (!value || typeof value.length !== \"number\") {\n                            x = errorObj;\n                            x.e = new TypeError(\"cannot .spread() a non-array: \" + util.classString(value));\n                        } else {\n                            x = tryCatch(handler).apply(this._boundValue(), value);\n                        }\n                    } else {\n                        x = tryCatch(handler).call(receiver, value);\n                    }\n                    var promiseCreated = promise._popContext();\n                    bitField = promise._bitField;\n                    if ((bitField & 65536) !== 0) return;\n\n                    if (x === NEXT_FILTER) {\n                        promise._reject(value);\n                    } else if (x === errorObj) {\n                        promise._rejectCallback(x.e, false);\n                    } else {\n                        debug.checkForgottenReturns(x, promiseCreated, \"\", promise, this);\n                        promise._resolveCallback(x);\n                    }\n                };\n\n                Promise.prototype._target = function () {\n                    var ret = this;\n                    while (ret._isFollowing()) {\n                        ret = ret._followee();\n                    }return ret;\n                };\n\n                Promise.prototype._followee = function () {\n                    return this._rejectionHandler0;\n                };\n\n                Promise.prototype._setFollowee = function (promise) {\n                    this._rejectionHandler0 = promise;\n                };\n\n                Promise.prototype._settlePromise = function (promise, handler, receiver, value) {\n                    var isPromise = promise instanceof Promise;\n                    var bitField = this._bitField;\n                    var asyncGuaranteed = (bitField & 134217728) !== 0;\n                    if ((bitField & 65536) !== 0) {\n                        if (isPromise) promise._invokeInternalOnCancel();\n\n                        if (receiver instanceof PassThroughHandlerContext && receiver.isFinallyHandler()) {\n                            receiver.cancelPromise = promise;\n                            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                                promise._reject(errorObj.e);\n                            }\n                        } else if (handler === reflectHandler) {\n                            promise._fulfill(reflectHandler.call(receiver));\n                        } else if (receiver instanceof Proxyable) {\n                            receiver._promiseCancelled(promise);\n                        } else if (isPromise || promise instanceof PromiseArray) {\n                            promise._cancel();\n                        } else {\n                            receiver.cancel();\n                        }\n                    } else if (typeof handler === \"function\") {\n                        if (!isPromise) {\n                            handler.call(receiver, value, promise);\n                        } else {\n                            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n                            this._settlePromiseFromHandler(handler, receiver, value, promise);\n                        }\n                    } else if (receiver instanceof Proxyable) {\n                        if (!receiver._isResolved()) {\n                            if ((bitField & 33554432) !== 0) {\n                                receiver._promiseFulfilled(value, promise);\n                            } else {\n                                receiver._promiseRejected(value, promise);\n                            }\n                        }\n                    } else if (isPromise) {\n                        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n                        if ((bitField & 33554432) !== 0) {\n                            promise._fulfill(value);\n                        } else {\n                            promise._reject(value);\n                        }\n                    }\n                };\n\n                Promise.prototype._settlePromiseLateCancellationObserver = function (ctx) {\n                    var handler = ctx.handler;\n                    var promise = ctx.promise;\n                    var receiver = ctx.receiver;\n                    var value = ctx.value;\n                    if (typeof handler === \"function\") {\n                        if (!(promise instanceof Promise)) {\n                            handler.call(receiver, value, promise);\n                        } else {\n                            this._settlePromiseFromHandler(handler, receiver, value, promise);\n                        }\n                    } else if (promise instanceof Promise) {\n                        promise._reject(value);\n                    }\n                };\n\n                Promise.prototype._settlePromiseCtx = function (ctx) {\n                    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n                };\n\n                Promise.prototype._settlePromise0 = function (handler, value, bitField) {\n                    var promise = this._promise0;\n                    var receiver = this._receiverAt(0);\n                    this._promise0 = undefined;\n                    this._receiver0 = undefined;\n                    this._settlePromise(promise, handler, receiver, value);\n                };\n\n                Promise.prototype._clearCallbackDataAtIndex = function (index) {\n                    var base = index * 4 - 4;\n                    this[base + 2] = this[base + 3] = this[base + 0] = this[base + 1] = undefined;\n                };\n\n                Promise.prototype._fulfill = function (value) {\n                    var bitField = this._bitField;\n                    if ((bitField & 117506048) >>> 16) return;\n                    if (value === this) {\n                        var err = makeSelfResolutionError();\n                        this._attachExtraTrace(err);\n                        return this._reject(err);\n                    }\n                    this._setFulfilled();\n                    this._rejectionHandler0 = value;\n\n                    if ((bitField & 65535) > 0) {\n                        if ((bitField & 134217728) !== 0) {\n                            this._settlePromises();\n                        } else {\n                            async.settlePromises(this);\n                        }\n                    }\n                };\n\n                Promise.prototype._reject = function (reason) {\n                    var bitField = this._bitField;\n                    if ((bitField & 117506048) >>> 16) return;\n                    this._setRejected();\n                    this._fulfillmentHandler0 = reason;\n\n                    if (this._isFinal()) {\n                        return async.fatalError(reason, util.isNode);\n                    }\n\n                    if ((bitField & 65535) > 0) {\n                        async.settlePromises(this);\n                    } else {\n                        this._ensurePossibleRejectionHandled();\n                    }\n                };\n\n                Promise.prototype._fulfillPromises = function (len, value) {\n                    for (var i = 1; i < len; i++) {\n                        var handler = this._fulfillmentHandlerAt(i);\n                        var promise = this._promiseAt(i);\n                        var receiver = this._receiverAt(i);\n                        this._clearCallbackDataAtIndex(i);\n                        this._settlePromise(promise, handler, receiver, value);\n                    }\n                };\n\n                Promise.prototype._rejectPromises = function (len, reason) {\n                    for (var i = 1; i < len; i++) {\n                        var handler = this._rejectionHandlerAt(i);\n                        var promise = this._promiseAt(i);\n                        var receiver = this._receiverAt(i);\n                        this._clearCallbackDataAtIndex(i);\n                        this._settlePromise(promise, handler, receiver, reason);\n                    }\n                };\n\n                Promise.prototype._settlePromises = function () {\n                    var bitField = this._bitField;\n                    var len = bitField & 65535;\n\n                    if (len > 0) {\n                        if ((bitField & 16842752) !== 0) {\n                            var reason = this._fulfillmentHandler0;\n                            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n                            this._rejectPromises(len, reason);\n                        } else {\n                            var value = this._rejectionHandler0;\n                            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n                            this._fulfillPromises(len, value);\n                        }\n                        this._setLength(0);\n                    }\n                    this._clearCancellationData();\n                };\n\n                Promise.prototype._settledValue = function () {\n                    var bitField = this._bitField;\n                    if ((bitField & 33554432) !== 0) {\n                        return this._rejectionHandler0;\n                    } else if ((bitField & 16777216) !== 0) {\n                        return this._fulfillmentHandler0;\n                    }\n                };\n\n                function deferResolve(v) {\n                    this.promise._resolveCallback(v);\n                }\n                function deferReject(v) {\n                    this.promise._rejectCallback(v, false);\n                }\n\n                Promise.defer = Promise.pending = function () {\n                    debug.deprecated(\"Promise.defer\", \"new Promise\");\n                    var promise = new Promise(INTERNAL);\n                    return {\n                        promise: promise,\n                        resolve: deferResolve,\n                        reject: deferReject\n                    };\n                };\n\n                util.notEnumerableProp(Promise, \"_makeSelfResolutionError\", makeSelfResolutionError);\n\n                _dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug);\n                _dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n                _dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n                _dereq_(\"./direct_resolve\")(Promise);\n                _dereq_(\"./synchronous_inspection\")(Promise);\n                _dereq_(\"./join\")(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\n                Promise.Promise = Promise;\n                Promise.version = \"3.5.1\";\n                _dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n                _dereq_('./call_get.js')(Promise);\n                _dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n                _dereq_('./timers.js')(Promise, INTERNAL, debug);\n                _dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n                _dereq_('./nodeify.js')(Promise);\n                _dereq_('./promisify.js')(Promise, INTERNAL);\n                _dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n                _dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n                _dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n                _dereq_('./settle.js')(Promise, PromiseArray, debug);\n                _dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n                _dereq_('./filter.js')(Promise, INTERNAL);\n                _dereq_('./each.js')(Promise, INTERNAL);\n                _dereq_('./any.js')(Promise);\n\n                util.toFastProperties(Promise);\n                util.toFastProperties(Promise.prototype);\n                function fillTypes(value) {\n                    var p = new Promise(INTERNAL);\n                    p._fulfillmentHandler0 = value;\n                    p._rejectionHandler0 = value;\n                    p._promise0 = value;\n                    p._receiver0 = value;\n                }\n                // Complete slack tracking, opt out of field-type tracking and           \n                // stabilize map                                                         \n                fillTypes({ a: 1 });\n                fillTypes({ b: 2 });\n                fillTypes({ c: 3 });\n                fillTypes(1);\n                fillTypes(function () {});\n                fillTypes(undefined);\n                fillTypes(false);\n                fillTypes(new Promise(INTERNAL));\n                debug.setBounds(Async.firstLineError, util.lastLineError);\n                return Promise;\n            };\n        }, { \"./any.js\": 1, \"./async\": 2, \"./bind\": 3, \"./call_get.js\": 5, \"./cancel\": 6, \"./catch_filter\": 7, \"./context\": 8, \"./debuggability\": 9, \"./direct_resolve\": 10, \"./each.js\": 11, \"./errors\": 12, \"./es5\": 13, \"./filter.js\": 14, \"./finally\": 15, \"./generators.js\": 16, \"./join\": 17, \"./map.js\": 18, \"./method\": 19, \"./nodeback\": 20, \"./nodeify.js\": 21, \"./promise_array\": 23, \"./promisify.js\": 24, \"./props.js\": 25, \"./race.js\": 27, \"./reduce.js\": 28, \"./settle.js\": 30, \"./some.js\": 31, \"./synchronous_inspection\": 32, \"./thenables\": 33, \"./timers.js\": 34, \"./using.js\": 35, \"./util\": 36 }], 23: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable) {\n                var util = _dereq_(\"./util\");\n                var isArray = util.isArray;\n\n                function toResolutionValue(val) {\n                    switch (val) {\n                        case -2:\n                            return [];\n                        case -3:\n                            return {};\n                        case -6:\n                            return new Map();\n                    }\n                }\n\n                function PromiseArray(values) {\n                    var promise = this._promise = new Promise(INTERNAL);\n                    if (values instanceof Promise) {\n                        promise._propagateFrom(values, 3);\n                    }\n                    promise._setOnCancel(this);\n                    this._values = values;\n                    this._length = 0;\n                    this._totalResolved = 0;\n                    this._init(undefined, -2);\n                }\n                util.inherits(PromiseArray, Proxyable);\n\n                PromiseArray.prototype.length = function () {\n                    return this._length;\n                };\n\n                PromiseArray.prototype.promise = function () {\n                    return this._promise;\n                };\n\n                PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n                    var values = tryConvertToPromise(this._values, this._promise);\n                    if (values instanceof Promise) {\n                        values = values._target();\n                        var bitField = values._bitField;\n                        ;\n                        this._values = values;\n\n                        if ((bitField & 50397184) === 0) {\n                            this._promise._setAsyncGuaranteed();\n                            return values._then(init, this._reject, undefined, this, resolveValueIfEmpty);\n                        } else if ((bitField & 33554432) !== 0) {\n                            values = values._value();\n                        } else if ((bitField & 16777216) !== 0) {\n                            return this._reject(values._reason());\n                        } else {\n                            return this._cancel();\n                        }\n                    }\n                    values = util.asArray(values);\n                    if (values === null) {\n                        var err = apiRejection(\"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n                        this._promise._rejectCallback(err, false);\n                        return;\n                    }\n\n                    if (values.length === 0) {\n                        if (resolveValueIfEmpty === -5) {\n                            this._resolveEmptyArray();\n                        } else {\n                            this._resolve(toResolutionValue(resolveValueIfEmpty));\n                        }\n                        return;\n                    }\n                    this._iterate(values);\n                };\n\n                PromiseArray.prototype._iterate = function (values) {\n                    var len = this.getActualLength(values.length);\n                    this._length = len;\n                    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n                    var result = this._promise;\n                    var isResolved = false;\n                    var bitField = null;\n                    for (var i = 0; i < len; ++i) {\n                        var maybePromise = tryConvertToPromise(values[i], result);\n\n                        if (maybePromise instanceof Promise) {\n                            maybePromise = maybePromise._target();\n                            bitField = maybePromise._bitField;\n                        } else {\n                            bitField = null;\n                        }\n\n                        if (isResolved) {\n                            if (bitField !== null) {\n                                maybePromise.suppressUnhandledRejections();\n                            }\n                        } else if (bitField !== null) {\n                            if ((bitField & 50397184) === 0) {\n                                maybePromise._proxy(this, i);\n                                this._values[i] = maybePromise;\n                            } else if ((bitField & 33554432) !== 0) {\n                                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n                            } else if ((bitField & 16777216) !== 0) {\n                                isResolved = this._promiseRejected(maybePromise._reason(), i);\n                            } else {\n                                isResolved = this._promiseCancelled(i);\n                            }\n                        } else {\n                            isResolved = this._promiseFulfilled(maybePromise, i);\n                        }\n                    }\n                    if (!isResolved) result._setAsyncGuaranteed();\n                };\n\n                PromiseArray.prototype._isResolved = function () {\n                    return this._values === null;\n                };\n\n                PromiseArray.prototype._resolve = function (value) {\n                    this._values = null;\n                    this._promise._fulfill(value);\n                };\n\n                PromiseArray.prototype._cancel = function () {\n                    if (this._isResolved() || !this._promise._isCancellable()) return;\n                    this._values = null;\n                    this._promise._cancel();\n                };\n\n                PromiseArray.prototype._reject = function (reason) {\n                    this._values = null;\n                    this._promise._rejectCallback(reason, false);\n                };\n\n                PromiseArray.prototype._promiseFulfilled = function (value, index) {\n                    this._values[index] = value;\n                    var totalResolved = ++this._totalResolved;\n                    if (totalResolved >= this._length) {\n                        this._resolve(this._values);\n                        return true;\n                    }\n                    return false;\n                };\n\n                PromiseArray.prototype._promiseCancelled = function () {\n                    this._cancel();\n                    return true;\n                };\n\n                PromiseArray.prototype._promiseRejected = function (reason) {\n                    this._totalResolved++;\n                    this._reject(reason);\n                    return true;\n                };\n\n                PromiseArray.prototype._resultCancelled = function () {\n                    if (this._isResolved()) return;\n                    var values = this._values;\n                    this._cancel();\n                    if (values instanceof Promise) {\n                        values.cancel();\n                    } else {\n                        for (var i = 0; i < values.length; ++i) {\n                            if (values[i] instanceof Promise) {\n                                values[i].cancel();\n                            }\n                        }\n                    }\n                };\n\n                PromiseArray.prototype.shouldCopyValues = function () {\n                    return true;\n                };\n\n                PromiseArray.prototype.getActualLength = function (len) {\n                    return len;\n                };\n\n                return PromiseArray;\n            };\n        }, { \"./util\": 36 }], 24: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL) {\n                var THIS = {};\n                var util = _dereq_(\"./util\");\n                var nodebackForPromise = _dereq_(\"./nodeback\");\n                var withAppended = util.withAppended;\n                var maybeWrapAsError = util.maybeWrapAsError;\n                var canEvaluate = util.canEvaluate;\n                var TypeError = _dereq_(\"./errors\").TypeError;\n                var defaultSuffix = \"Async\";\n                var defaultPromisified = { __isPromisified__: true };\n                var noCopyProps = [\"arity\", \"length\", \"name\", \"arguments\", \"caller\", \"callee\", \"prototype\", \"__isPromisified__\"];\n                var noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\n                var defaultFilter = function defaultFilter(name) {\n                    return util.isIdentifier(name) && name.charAt(0) !== \"_\" && name !== \"constructor\";\n                };\n\n                function propsFilter(key) {\n                    return !noCopyPropsPattern.test(key);\n                }\n\n                function isPromisified(fn) {\n                    try {\n                        return fn.__isPromisified__ === true;\n                    } catch (e) {\n                        return false;\n                    }\n                }\n\n                function hasPromisified(obj, key, suffix) {\n                    var val = util.getDataPropertyOrDefault(obj, key + suffix, defaultPromisified);\n                    return val ? isPromisified(val) : false;\n                }\n                function checkValid(ret, suffix, suffixRegexp) {\n                    for (var i = 0; i < ret.length; i += 2) {\n                        var key = ret[i];\n                        if (suffixRegexp.test(key)) {\n                            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n                            for (var j = 0; j < ret.length; j += 2) {\n                                if (ret[j] === keyWithoutAsyncSuffix) {\n                                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\", suffix));\n                                }\n                            }\n                        }\n                    }\n                }\n\n                function promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n                    var keys = util.inheritedDataKeys(obj);\n                    var ret = [];\n                    for (var i = 0; i < keys.length; ++i) {\n                        var key = keys[i];\n                        var value = obj[key];\n                        var passesDefaultFilter = filter === defaultFilter ? true : defaultFilter(key, value, obj);\n                        if (typeof value === \"function\" && !isPromisified(value) && !hasPromisified(obj, key, suffix) && filter(key, value, obj, passesDefaultFilter)) {\n                            ret.push(key, value);\n                        }\n                    }\n                    checkValid(ret, suffix, suffixRegexp);\n                    return ret;\n                }\n\n                var escapeIdentRegex = function escapeIdentRegex(str) {\n                    return str.replace(/([$])/, \"\\\\$\");\n                };\n\n                var makeNodePromisifiedEval;\n                if (false) {\n                    var switchCaseArgumentOrder = function switchCaseArgumentOrder(likelyArgumentCount) {\n                        var ret = [likelyArgumentCount];\n                        var min = Math.max(0, likelyArgumentCount - 1 - 3);\n                        for (var i = likelyArgumentCount - 1; i >= min; --i) {\n                            ret.push(i);\n                        }\n                        for (var i = likelyArgumentCount + 1; i <= 3; ++i) {\n                            ret.push(i);\n                        }\n                        return ret;\n                    };\n\n                    var argumentSequence = function argumentSequence(argumentCount) {\n                        return util.filledRange(argumentCount, \"_arg\", \"\");\n                    };\n\n                    var parameterDeclaration = function parameterDeclaration(parameterCount) {\n                        return util.filledRange(Math.max(parameterCount, 3), \"_arg\", \"\");\n                    };\n\n                    var parameterCount = function parameterCount(fn) {\n                        if (typeof fn.length === \"number\") {\n                            return Math.max(Math.min(fn.length, 1023 + 1), 0);\n                        }\n                        return 0;\n                    };\n\n                    makeNodePromisifiedEval = function makeNodePromisifiedEval(callback, receiver, originalName, fn, _, multiArgs) {\n                        var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n                        var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n                        var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n                        function generateCallForArgumentCount(count) {\n                            var args = argumentSequence(count).join(\", \");\n                            var comma = count > 0 ? \", \" : \"\";\n                            var ret;\n                            if (shouldProxyThis) {\n                                ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n                            } else {\n                                ret = receiver === undefined ? \"ret = callback({{args}}, nodeback); break;\\n\" : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n                            }\n                            return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n                        }\n\n                        function generateArgumentSwitchCase() {\n                            var ret = \"\";\n                            for (var i = 0; i < argumentOrder.length; ++i) {\n                                ret += \"case \" + argumentOrder[i] + \":\" + generateCallForArgumentCount(argumentOrder[i]);\n                            }\n\n                            ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", shouldProxyThis ? \"ret = callback.apply(this, args);\\n\" : \"ret = callback.apply(receiver, args);\\n\");\n                            return ret;\n                        }\n\n                        var getFunctionCode = typeof callback === \"string\" ? \"this != null ? this['\" + callback + \"'] : fn\" : \"fn\";\n                        var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase()).replace(\"[GetFunctionCode]\", getFunctionCode);\n                        body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n                        return new Function(\"Promise\", \"fn\", \"receiver\", \"withAppended\", \"maybeWrapAsError\", \"nodebackForPromise\", \"tryCatch\", \"errorObj\", \"notEnumerableProp\", \"INTERNAL\", body)(Promise, fn, receiver, withAppended, maybeWrapAsError, nodebackForPromise, util.tryCatch, util.errorObj, util.notEnumerableProp, INTERNAL);\n                    };\n                }\n\n                function makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n                    var defaultThis = function () {\n                        return this;\n                    }();\n                    var method = callback;\n                    if (typeof method === \"string\") {\n                        callback = fn;\n                    }\n                    function promisified() {\n                        var _receiver = receiver;\n                        if (receiver === THIS) _receiver = this;\n                        var promise = new Promise(INTERNAL);\n                        promise._captureStackTrace();\n                        var cb = typeof method === \"string\" && this !== defaultThis ? this[method] : callback;\n                        var fn = nodebackForPromise(promise, multiArgs);\n                        try {\n                            cb.apply(_receiver, withAppended(arguments, fn));\n                        } catch (e) {\n                            promise._rejectCallback(maybeWrapAsError(e), true, true);\n                        }\n                        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n                        return promise;\n                    }\n                    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n                    return promisified;\n                }\n\n                var makeNodePromisified = canEvaluate ? makeNodePromisifiedEval : makeNodePromisifiedClosure;\n\n                function promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n                    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n                    var methods = promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n                    for (var i = 0, len = methods.length; i < len; i += 2) {\n                        var key = methods[i];\n                        var fn = methods[i + 1];\n                        var promisifiedKey = key + suffix;\n                        if (promisifier === makeNodePromisified) {\n                            obj[promisifiedKey] = makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n                        } else {\n                            var promisified = promisifier(fn, function () {\n                                return makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n                            });\n                            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n                            obj[promisifiedKey] = promisified;\n                        }\n                    }\n                    util.toFastProperties(obj);\n                    return obj;\n                }\n\n                function promisify(callback, receiver, multiArgs) {\n                    return makeNodePromisified(callback, receiver, undefined, callback, null, multiArgs);\n                }\n\n                Promise.promisify = function (fn, options) {\n                    if (typeof fn !== \"function\") {\n                        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    if (isPromisified(fn)) {\n                        return fn;\n                    }\n                    options = Object(options);\n                    var receiver = options.context === undefined ? THIS : options.context;\n                    var multiArgs = !!options.multiArgs;\n                    var ret = promisify(fn, receiver, multiArgs);\n                    util.copyDescriptors(fn, ret, propsFilter);\n                    return ret;\n                };\n\n                Promise.promisifyAll = function (target, options) {\n                    if (typeof target !== \"function\" && typeof target !== \"object\") {\n                        throw new TypeError(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    options = Object(options);\n                    var multiArgs = !!options.multiArgs;\n                    var suffix = options.suffix;\n                    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n                    var filter = options.filter;\n                    if (typeof filter !== \"function\") filter = defaultFilter;\n                    var promisifier = options.promisifier;\n                    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n                    if (!util.isIdentifier(suffix)) {\n                        throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n\n                    var keys = util.inheritedDataKeys(target);\n                    for (var i = 0; i < keys.length; ++i) {\n                        var value = target[keys[i]];\n                        if (keys[i] !== \"constructor\" && util.isClass(value)) {\n                            promisifyAll(value.prototype, suffix, filter, promisifier, multiArgs);\n                            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n                        }\n                    }\n\n                    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n                };\n            };\n        }, { \"./errors\": 12, \"./nodeback\": 20, \"./util\": 36 }], 25: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, tryConvertToPromise, apiRejection) {\n                var util = _dereq_(\"./util\");\n                var isObject = util.isObject;\n                var es5 = _dereq_(\"./es5\");\n                var Es6Map;\n                if (typeof Map === \"function\") Es6Map = Map;\n\n                var mapToEntries = function () {\n                    var index = 0;\n                    var size = 0;\n\n                    function extractEntry(value, key) {\n                        this[index] = value;\n                        this[index + size] = key;\n                        index++;\n                    }\n\n                    return function mapToEntries(map) {\n                        size = map.size;\n                        index = 0;\n                        var ret = new Array(map.size * 2);\n                        map.forEach(extractEntry, ret);\n                        return ret;\n                    };\n                }();\n\n                var entriesToMap = function entriesToMap(entries) {\n                    var ret = new Es6Map();\n                    var length = entries.length / 2 | 0;\n                    for (var i = 0; i < length; ++i) {\n                        var key = entries[length + i];\n                        var value = entries[i];\n                        ret.set(key, value);\n                    }\n                    return ret;\n                };\n\n                function PropertiesPromiseArray(obj) {\n                    var isMap = false;\n                    var entries;\n                    if (Es6Map !== undefined && obj instanceof Es6Map) {\n                        entries = mapToEntries(obj);\n                        isMap = true;\n                    } else {\n                        var keys = es5.keys(obj);\n                        var len = keys.length;\n                        entries = new Array(len * 2);\n                        for (var i = 0; i < len; ++i) {\n                            var key = keys[i];\n                            entries[i] = obj[key];\n                            entries[i + len] = key;\n                        }\n                    }\n                    this.constructor$(entries);\n                    this._isMap = isMap;\n                    this._init$(undefined, isMap ? -6 : -3);\n                }\n                util.inherits(PropertiesPromiseArray, PromiseArray);\n\n                PropertiesPromiseArray.prototype._init = function () {};\n\n                PropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n                    this._values[index] = value;\n                    var totalResolved = ++this._totalResolved;\n                    if (totalResolved >= this._length) {\n                        var val;\n                        if (this._isMap) {\n                            val = entriesToMap(this._values);\n                        } else {\n                            val = {};\n                            var keyOffset = this.length();\n                            for (var i = 0, len = this.length(); i < len; ++i) {\n                                val[this._values[i + keyOffset]] = this._values[i];\n                            }\n                        }\n                        this._resolve(val);\n                        return true;\n                    }\n                    return false;\n                };\n\n                PropertiesPromiseArray.prototype.shouldCopyValues = function () {\n                    return false;\n                };\n\n                PropertiesPromiseArray.prototype.getActualLength = function (len) {\n                    return len >> 1;\n                };\n\n                function props(promises) {\n                    var ret;\n                    var castValue = tryConvertToPromise(promises);\n\n                    if (!isObject(castValue)) {\n                        return apiRejection(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    } else if (castValue instanceof Promise) {\n                        ret = castValue._then(Promise.props, undefined, undefined, undefined, undefined);\n                    } else {\n                        ret = new PropertiesPromiseArray(castValue).promise();\n                    }\n\n                    if (castValue instanceof Promise) {\n                        ret._propagateFrom(castValue, 2);\n                    }\n                    return ret;\n                }\n\n                Promise.prototype.props = function () {\n                    return props(this);\n                };\n\n                Promise.props = function (promises) {\n                    return props(promises);\n                };\n            };\n        }, { \"./es5\": 13, \"./util\": 36 }], 26: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            function arrayMove(src, srcIndex, dst, dstIndex, len) {\n                for (var j = 0; j < len; ++j) {\n                    dst[j + dstIndex] = src[j + srcIndex];\n                    src[j + srcIndex] = void 0;\n                }\n            }\n\n            function Queue(capacity) {\n                this._capacity = capacity;\n                this._length = 0;\n                this._front = 0;\n            }\n\n            Queue.prototype._willBeOverCapacity = function (size) {\n                return this._capacity < size;\n            };\n\n            Queue.prototype._pushOne = function (arg) {\n                var length = this.length();\n                this._checkCapacity(length + 1);\n                var i = this._front + length & this._capacity - 1;\n                this[i] = arg;\n                this._length = length + 1;\n            };\n\n            Queue.prototype.push = function (fn, receiver, arg) {\n                var length = this.length() + 3;\n                if (this._willBeOverCapacity(length)) {\n                    this._pushOne(fn);\n                    this._pushOne(receiver);\n                    this._pushOne(arg);\n                    return;\n                }\n                var j = this._front + length - 3;\n                this._checkCapacity(length);\n                var wrapMask = this._capacity - 1;\n                this[j + 0 & wrapMask] = fn;\n                this[j + 1 & wrapMask] = receiver;\n                this[j + 2 & wrapMask] = arg;\n                this._length = length;\n            };\n\n            Queue.prototype.shift = function () {\n                var front = this._front,\n                    ret = this[front];\n\n                this[front] = undefined;\n                this._front = front + 1 & this._capacity - 1;\n                this._length--;\n                return ret;\n            };\n\n            Queue.prototype.length = function () {\n                return this._length;\n            };\n\n            Queue.prototype._checkCapacity = function (size) {\n                if (this._capacity < size) {\n                    this._resizeTo(this._capacity << 1);\n                }\n            };\n\n            Queue.prototype._resizeTo = function (capacity) {\n                var oldCapacity = this._capacity;\n                this._capacity = capacity;\n                var front = this._front;\n                var length = this._length;\n                var moveItemsCount = front + length & oldCapacity - 1;\n                arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n            };\n\n            module.exports = Queue;\n        }, {}], 27: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection) {\n                var util = _dereq_(\"./util\");\n\n                var raceLater = function raceLater(promise) {\n                    return promise.then(function (array) {\n                        return race(array, promise);\n                    });\n                };\n\n                function race(promises, parent) {\n                    var maybePromise = tryConvertToPromise(promises);\n\n                    if (maybePromise instanceof Promise) {\n                        return raceLater(maybePromise);\n                    } else {\n                        promises = util.asArray(promises);\n                        if (promises === null) return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n                    }\n\n                    var ret = new Promise(INTERNAL);\n                    if (parent !== undefined) {\n                        ret._propagateFrom(parent, 3);\n                    }\n                    var fulfill = ret._fulfill;\n                    var reject = ret._reject;\n                    for (var i = 0, len = promises.length; i < len; ++i) {\n                        var val = promises[i];\n\n                        if (val === undefined && !(i in promises)) {\n                            continue;\n                        }\n\n                        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n                    }\n                    return ret;\n                }\n\n                Promise.race = function (promises) {\n                    return race(promises, undefined);\n                };\n\n                Promise.prototype.race = function () {\n                    return race(this, undefined);\n                };\n            };\n        }, { \"./util\": 36 }], 28: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n                var getDomain = Promise._getDomain;\n                var util = _dereq_(\"./util\");\n                var tryCatch = util.tryCatch;\n\n                function ReductionPromiseArray(promises, fn, initialValue, _each) {\n                    this.constructor$(promises);\n                    var domain = getDomain();\n                    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n                    if (initialValue !== undefined) {\n                        initialValue = Promise.resolve(initialValue);\n                        initialValue._attachCancellationCallback(this);\n                    }\n                    this._initialValue = initialValue;\n                    this._currentCancellable = null;\n                    if (_each === INTERNAL) {\n                        this._eachValues = Array(this._length);\n                    } else if (_each === 0) {\n                        this._eachValues = null;\n                    } else {\n                        this._eachValues = undefined;\n                    }\n                    this._promise._captureStackTrace();\n                    this._init$(undefined, -5);\n                }\n                util.inherits(ReductionPromiseArray, PromiseArray);\n\n                ReductionPromiseArray.prototype._gotAccum = function (accum) {\n                    if (this._eachValues !== undefined && this._eachValues !== null && accum !== INTERNAL) {\n                        this._eachValues.push(accum);\n                    }\n                };\n\n                ReductionPromiseArray.prototype._eachComplete = function (value) {\n                    if (this._eachValues !== null) {\n                        this._eachValues.push(value);\n                    }\n                    return this._eachValues;\n                };\n\n                ReductionPromiseArray.prototype._init = function () {};\n\n                ReductionPromiseArray.prototype._resolveEmptyArray = function () {\n                    this._resolve(this._eachValues !== undefined ? this._eachValues : this._initialValue);\n                };\n\n                ReductionPromiseArray.prototype.shouldCopyValues = function () {\n                    return false;\n                };\n\n                ReductionPromiseArray.prototype._resolve = function (value) {\n                    this._promise._resolveCallback(value);\n                    this._values = null;\n                };\n\n                ReductionPromiseArray.prototype._resultCancelled = function (sender) {\n                    if (sender === this._initialValue) return this._cancel();\n                    if (this._isResolved()) return;\n                    this._resultCancelled$();\n                    if (this._currentCancellable instanceof Promise) {\n                        this._currentCancellable.cancel();\n                    }\n                    if (this._initialValue instanceof Promise) {\n                        this._initialValue.cancel();\n                    }\n                };\n\n                ReductionPromiseArray.prototype._iterate = function (values) {\n                    this._values = values;\n                    var value;\n                    var i;\n                    var length = values.length;\n                    if (this._initialValue !== undefined) {\n                        value = this._initialValue;\n                        i = 0;\n                    } else {\n                        value = Promise.resolve(values[0]);\n                        i = 1;\n                    }\n\n                    this._currentCancellable = value;\n\n                    if (!value.isRejected()) {\n                        for (; i < length; ++i) {\n                            var ctx = {\n                                accum: null,\n                                value: values[i],\n                                index: i,\n                                length: length,\n                                array: this\n                            };\n                            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n                        }\n                    }\n\n                    if (this._eachValues !== undefined) {\n                        value = value._then(this._eachComplete, undefined, undefined, this, undefined);\n                    }\n                    value._then(completed, completed, undefined, value, this);\n                };\n\n                Promise.prototype.reduce = function (fn, initialValue) {\n                    return reduce(this, fn, initialValue, null);\n                };\n\n                Promise.reduce = function (promises, fn, initialValue, _each) {\n                    return reduce(promises, fn, initialValue, _each);\n                };\n\n                function completed(valueOrReason, array) {\n                    if (this.isFulfilled()) {\n                        array._resolve(valueOrReason);\n                    } else {\n                        array._reject(valueOrReason);\n                    }\n                }\n\n                function reduce(promises, fn, initialValue, _each) {\n                    if (typeof fn !== \"function\") {\n                        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n                    return array.promise();\n                }\n\n                function gotAccum(accum) {\n                    this.accum = accum;\n                    this.array._gotAccum(accum);\n                    var value = tryConvertToPromise(this.value, this.array._promise);\n                    if (value instanceof Promise) {\n                        this.array._currentCancellable = value;\n                        return value._then(gotValue, undefined, undefined, this, undefined);\n                    } else {\n                        return gotValue.call(this, value);\n                    }\n                }\n\n                function gotValue(value) {\n                    var array = this.array;\n                    var promise = array._promise;\n                    var fn = tryCatch(array._fn);\n                    promise._pushContext();\n                    var ret;\n                    if (array._eachValues !== undefined) {\n                        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n                    } else {\n                        ret = fn.call(promise._boundValue(), this.accum, value, this.index, this.length);\n                    }\n                    if (ret instanceof Promise) {\n                        array._currentCancellable = ret;\n                    }\n                    var promiseCreated = promise._popContext();\n                    debug.checkForgottenReturns(ret, promiseCreated, array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\", promise);\n                    return ret;\n                }\n            };\n        }, { \"./util\": 36 }], 29: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var util = _dereq_(\"./util\");\n            var schedule;\n            var noAsyncScheduler = function noAsyncScheduler() {\n                throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n            };\n            var NativePromise = util.getNativePromise();\n            if (util.isNode && typeof MutationObserver === \"undefined\") {\n                var GlobalSetImmediate = global.setImmediate;\n                var ProcessNextTick = process.nextTick;\n                schedule = util.isRecentNode ? function (fn) {\n                    GlobalSetImmediate.call(global, fn);\n                } : function (fn) {\n                    ProcessNextTick.call(process, fn);\n                };\n            } else if (typeof NativePromise === \"function\" && typeof NativePromise.resolve === \"function\") {\n                var nativePromise = NativePromise.resolve();\n                schedule = function schedule(fn) {\n                    nativePromise.then(fn);\n                };\n            } else if (typeof MutationObserver !== \"undefined\" && !(typeof window !== \"undefined\" && window.navigator && (window.navigator.standalone || window.cordova))) {\n                schedule = function () {\n                    var div = document.createElement(\"div\");\n                    var opts = { attributes: true };\n                    var toggleScheduled = false;\n                    var div2 = document.createElement(\"div\");\n                    var o2 = new MutationObserver(function () {\n                        div.classList.toggle(\"foo\");\n                        toggleScheduled = false;\n                    });\n                    o2.observe(div2, opts);\n\n                    var scheduleToggle = function scheduleToggle() {\n                        if (toggleScheduled) return;\n                        toggleScheduled = true;\n                        div2.classList.toggle(\"foo\");\n                    };\n\n                    return function schedule(fn) {\n                        var o = new MutationObserver(function () {\n                            o.disconnect();\n                            fn();\n                        });\n                        o.observe(div, opts);\n                        scheduleToggle();\n                    };\n                }();\n            } else if (typeof setImmediate !== \"undefined\") {\n                schedule = function schedule(fn) {\n                    setImmediate(fn);\n                };\n            } else if (typeof setTimeout !== \"undefined\") {\n                schedule = function schedule(fn) {\n                    setTimeout(fn, 0);\n                };\n            } else {\n                schedule = noAsyncScheduler;\n            }\n            module.exports = schedule;\n        }, { \"./util\": 36 }], 30: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, debug) {\n                var PromiseInspection = Promise.PromiseInspection;\n                var util = _dereq_(\"./util\");\n\n                function SettledPromiseArray(values) {\n                    this.constructor$(values);\n                }\n                util.inherits(SettledPromiseArray, PromiseArray);\n\n                SettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n                    this._values[index] = inspection;\n                    var totalResolved = ++this._totalResolved;\n                    if (totalResolved >= this._length) {\n                        this._resolve(this._values);\n                        return true;\n                    }\n                    return false;\n                };\n\n                SettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n                    var ret = new PromiseInspection();\n                    ret._bitField = 33554432;\n                    ret._settledValueField = value;\n                    return this._promiseResolved(index, ret);\n                };\n                SettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n                    var ret = new PromiseInspection();\n                    ret._bitField = 16777216;\n                    ret._settledValueField = reason;\n                    return this._promiseResolved(index, ret);\n                };\n\n                Promise.settle = function (promises) {\n                    debug.deprecated(\".settle()\", \".reflect()\");\n                    return new SettledPromiseArray(promises).promise();\n                };\n\n                Promise.prototype.settle = function () {\n                    return Promise.settle(this);\n                };\n            };\n        }, { \"./util\": 36 }], 31: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, PromiseArray, apiRejection) {\n                var util = _dereq_(\"./util\");\n                var RangeError = _dereq_(\"./errors\").RangeError;\n                var AggregateError = _dereq_(\"./errors\").AggregateError;\n                var isArray = util.isArray;\n                var CANCELLATION = {};\n\n                function SomePromiseArray(values) {\n                    this.constructor$(values);\n                    this._howMany = 0;\n                    this._unwrap = false;\n                    this._initialized = false;\n                }\n                util.inherits(SomePromiseArray, PromiseArray);\n\n                SomePromiseArray.prototype._init = function () {\n                    if (!this._initialized) {\n                        return;\n                    }\n                    if (this._howMany === 0) {\n                        this._resolve([]);\n                        return;\n                    }\n                    this._init$(undefined, -5);\n                    var isArrayResolved = isArray(this._values);\n                    if (!this._isResolved() && isArrayResolved && this._howMany > this._canPossiblyFulfill()) {\n                        this._reject(this._getRangeError(this.length()));\n                    }\n                };\n\n                SomePromiseArray.prototype.init = function () {\n                    this._initialized = true;\n                    this._init();\n                };\n\n                SomePromiseArray.prototype.setUnwrap = function () {\n                    this._unwrap = true;\n                };\n\n                SomePromiseArray.prototype.howMany = function () {\n                    return this._howMany;\n                };\n\n                SomePromiseArray.prototype.setHowMany = function (count) {\n                    this._howMany = count;\n                };\n\n                SomePromiseArray.prototype._promiseFulfilled = function (value) {\n                    this._addFulfilled(value);\n                    if (this._fulfilled() === this.howMany()) {\n                        this._values.length = this.howMany();\n                        if (this.howMany() === 1 && this._unwrap) {\n                            this._resolve(this._values[0]);\n                        } else {\n                            this._resolve(this._values);\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                SomePromiseArray.prototype._promiseRejected = function (reason) {\n                    this._addRejected(reason);\n                    return this._checkOutcome();\n                };\n\n                SomePromiseArray.prototype._promiseCancelled = function () {\n                    if (this._values instanceof Promise || this._values == null) {\n                        return this._cancel();\n                    }\n                    this._addRejected(CANCELLATION);\n                    return this._checkOutcome();\n                };\n\n                SomePromiseArray.prototype._checkOutcome = function () {\n                    if (this.howMany() > this._canPossiblyFulfill()) {\n                        var e = new AggregateError();\n                        for (var i = this.length(); i < this._values.length; ++i) {\n                            if (this._values[i] !== CANCELLATION) {\n                                e.push(this._values[i]);\n                            }\n                        }\n                        if (e.length > 0) {\n                            this._reject(e);\n                        } else {\n                            this._cancel();\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n\n                SomePromiseArray.prototype._fulfilled = function () {\n                    return this._totalResolved;\n                };\n\n                SomePromiseArray.prototype._rejected = function () {\n                    return this._values.length - this.length();\n                };\n\n                SomePromiseArray.prototype._addRejected = function (reason) {\n                    this._values.push(reason);\n                };\n\n                SomePromiseArray.prototype._addFulfilled = function (value) {\n                    this._values[this._totalResolved++] = value;\n                };\n\n                SomePromiseArray.prototype._canPossiblyFulfill = function () {\n                    return this.length() - this._rejected();\n                };\n\n                SomePromiseArray.prototype._getRangeError = function (count) {\n                    var message = \"Input array must contain at least \" + this._howMany + \" items but contains only \" + count + \" items\";\n                    return new RangeError(message);\n                };\n\n                SomePromiseArray.prototype._resolveEmptyArray = function () {\n                    this._reject(this._getRangeError(0));\n                };\n\n                function some(promises, howMany) {\n                    if ((howMany | 0) !== howMany || howMany < 0) {\n                        return apiRejection(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    var ret = new SomePromiseArray(promises);\n                    var promise = ret.promise();\n                    ret.setHowMany(howMany);\n                    ret.init();\n                    return promise;\n                }\n\n                Promise.some = function (promises, howMany) {\n                    return some(promises, howMany);\n                };\n\n                Promise.prototype.some = function (howMany) {\n                    return some(this, howMany);\n                };\n\n                Promise._SomePromiseArray = SomePromiseArray;\n            };\n        }, { \"./errors\": 12, \"./util\": 36 }], 32: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise) {\n                function PromiseInspection(promise) {\n                    if (promise !== undefined) {\n                        promise = promise._target();\n                        this._bitField = promise._bitField;\n                        this._settledValueField = promise._isFateSealed() ? promise._settledValue() : undefined;\n                    } else {\n                        this._bitField = 0;\n                        this._settledValueField = undefined;\n                    }\n                }\n\n                PromiseInspection.prototype._settledValue = function () {\n                    return this._settledValueField;\n                };\n\n                var value = PromiseInspection.prototype.value = function () {\n                    if (!this.isFulfilled()) {\n                        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    return this._settledValue();\n                };\n\n                var reason = PromiseInspection.prototype.error = PromiseInspection.prototype.reason = function () {\n                    if (!this.isRejected()) {\n                        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n                    }\n                    return this._settledValue();\n                };\n\n                var isFulfilled = PromiseInspection.prototype.isFulfilled = function () {\n                    return (this._bitField & 33554432) !== 0;\n                };\n\n                var isRejected = PromiseInspection.prototype.isRejected = function () {\n                    return (this._bitField & 16777216) !== 0;\n                };\n\n                var isPending = PromiseInspection.prototype.isPending = function () {\n                    return (this._bitField & 50397184) === 0;\n                };\n\n                var isResolved = PromiseInspection.prototype.isResolved = function () {\n                    return (this._bitField & 50331648) !== 0;\n                };\n\n                PromiseInspection.prototype.isCancelled = function () {\n                    return (this._bitField & 8454144) !== 0;\n                };\n\n                Promise.prototype.__isCancelled = function () {\n                    return (this._bitField & 65536) === 65536;\n                };\n\n                Promise.prototype._isCancelled = function () {\n                    return this._target().__isCancelled();\n                };\n\n                Promise.prototype.isCancelled = function () {\n                    return (this._target()._bitField & 8454144) !== 0;\n                };\n\n                Promise.prototype.isPending = function () {\n                    return isPending.call(this._target());\n                };\n\n                Promise.prototype.isRejected = function () {\n                    return isRejected.call(this._target());\n                };\n\n                Promise.prototype.isFulfilled = function () {\n                    return isFulfilled.call(this._target());\n                };\n\n                Promise.prototype.isResolved = function () {\n                    return isResolved.call(this._target());\n                };\n\n                Promise.prototype.value = function () {\n                    return value.call(this._target());\n                };\n\n                Promise.prototype.reason = function () {\n                    var target = this._target();\n                    target._unsetRejectionIsUnhandled();\n                    return reason.call(target);\n                };\n\n                Promise.prototype._value = function () {\n                    return this._settledValue();\n                };\n\n                Promise.prototype._reason = function () {\n                    this._unsetRejectionIsUnhandled();\n                    return this._settledValue();\n                };\n\n                Promise.PromiseInspection = PromiseInspection;\n            };\n        }, {}], 33: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL) {\n                var util = _dereq_(\"./util\");\n                var errorObj = util.errorObj;\n                var isObject = util.isObject;\n\n                function tryConvertToPromise(obj, context) {\n                    if (isObject(obj)) {\n                        if (obj instanceof Promise) return obj;\n                        var then = getThen(obj);\n                        if (then === errorObj) {\n                            if (context) context._pushContext();\n                            var ret = Promise.reject(then.e);\n                            if (context) context._popContext();\n                            return ret;\n                        } else if (typeof then === \"function\") {\n                            if (isAnyBluebirdPromise(obj)) {\n                                var ret = new Promise(INTERNAL);\n                                obj._then(ret._fulfill, ret._reject, undefined, ret, null);\n                                return ret;\n                            }\n                            return doThenable(obj, then, context);\n                        }\n                    }\n                    return obj;\n                }\n\n                function doGetThen(obj) {\n                    return obj.then;\n                }\n\n                function getThen(obj) {\n                    try {\n                        return doGetThen(obj);\n                    } catch (e) {\n                        errorObj.e = e;\n                        return errorObj;\n                    }\n                }\n\n                var hasProp = {}.hasOwnProperty;\n                function isAnyBluebirdPromise(obj) {\n                    try {\n                        return hasProp.call(obj, \"_promise0\");\n                    } catch (e) {\n                        return false;\n                    }\n                }\n\n                function doThenable(x, then, context) {\n                    var promise = new Promise(INTERNAL);\n                    var ret = promise;\n                    if (context) context._pushContext();\n                    promise._captureStackTrace();\n                    if (context) context._popContext();\n                    var synchronous = true;\n                    var result = util.tryCatch(then).call(x, resolve, reject);\n                    synchronous = false;\n\n                    if (promise && result === errorObj) {\n                        promise._rejectCallback(result.e, true, true);\n                        promise = null;\n                    }\n\n                    function resolve(value) {\n                        if (!promise) return;\n                        promise._resolveCallback(value);\n                        promise = null;\n                    }\n\n                    function reject(reason) {\n                        if (!promise) return;\n                        promise._rejectCallback(reason, synchronous, true);\n                        promise = null;\n                    }\n                    return ret;\n                }\n\n                return tryConvertToPromise;\n            };\n        }, { \"./util\": 36 }], 34: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, INTERNAL, debug) {\n                var util = _dereq_(\"./util\");\n                var TimeoutError = Promise.TimeoutError;\n\n                function HandleWrapper(handle) {\n                    this.handle = handle;\n                }\n\n                HandleWrapper.prototype._resultCancelled = function () {\n                    clearTimeout(this.handle);\n                };\n\n                var afterValue = function afterValue(value) {\n                    return delay(+this).thenReturn(value);\n                };\n                var delay = Promise.delay = function (ms, value) {\n                    var ret;\n                    var handle;\n                    if (value !== undefined) {\n                        ret = Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n                        if (debug.cancellation() && value instanceof Promise) {\n                            ret._setOnCancel(value);\n                        }\n                    } else {\n                        ret = new Promise(INTERNAL);\n                        handle = setTimeout(function () {\n                            ret._fulfill();\n                        }, +ms);\n                        if (debug.cancellation()) {\n                            ret._setOnCancel(new HandleWrapper(handle));\n                        }\n                        ret._captureStackTrace();\n                    }\n                    ret._setAsyncGuaranteed();\n                    return ret;\n                };\n\n                Promise.prototype.delay = function (ms) {\n                    return delay(ms, this);\n                };\n\n                var afterTimeout = function afterTimeout(promise, message, parent) {\n                    var err;\n                    if (typeof message !== \"string\") {\n                        if (message instanceof Error) {\n                            err = message;\n                        } else {\n                            err = new TimeoutError(\"operation timed out\");\n                        }\n                    } else {\n                        err = new TimeoutError(message);\n                    }\n                    util.markAsOriginatingFromRejection(err);\n                    promise._attachExtraTrace(err);\n                    promise._reject(err);\n\n                    if (parent != null) {\n                        parent.cancel();\n                    }\n                };\n\n                function successClear(value) {\n                    clearTimeout(this.handle);\n                    return value;\n                }\n\n                function failureClear(reason) {\n                    clearTimeout(this.handle);\n                    throw reason;\n                }\n\n                Promise.prototype.timeout = function (ms, message) {\n                    ms = +ms;\n                    var ret, parent;\n\n                    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n                        if (ret.isPending()) {\n                            afterTimeout(ret, message, parent);\n                        }\n                    }, ms));\n\n                    if (debug.cancellation()) {\n                        parent = this.then();\n                        ret = parent._then(successClear, failureClear, undefined, handleWrapper, undefined);\n                        ret._setOnCancel(handleWrapper);\n                    } else {\n                        ret = this._then(successClear, failureClear, undefined, handleWrapper, undefined);\n                    }\n\n                    return ret;\n                };\n            };\n        }, { \"./util\": 36 }], 35: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            module.exports = function (Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug) {\n                var util = _dereq_(\"./util\");\n                var TypeError = _dereq_(\"./errors\").TypeError;\n                var inherits = _dereq_(\"./util\").inherits;\n                var errorObj = util.errorObj;\n                var tryCatch = util.tryCatch;\n                var NULL = {};\n\n                function thrower(e) {\n                    setTimeout(function () {\n                        throw e;\n                    }, 0);\n                }\n\n                function castPreservingDisposable(thenable) {\n                    var maybePromise = tryConvertToPromise(thenable);\n                    if (maybePromise !== thenable && typeof thenable._isDisposable === \"function\" && typeof thenable._getDisposer === \"function\" && thenable._isDisposable()) {\n                        maybePromise._setDisposable(thenable._getDisposer());\n                    }\n                    return maybePromise;\n                }\n                function dispose(resources, inspection) {\n                    var i = 0;\n                    var len = resources.length;\n                    var ret = new Promise(INTERNAL);\n                    function iterator() {\n                        if (i >= len) return ret._fulfill();\n                        var maybePromise = castPreservingDisposable(resources[i++]);\n                        if (maybePromise instanceof Promise && maybePromise._isDisposable()) {\n                            try {\n                                maybePromise = tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection), resources.promise);\n                            } catch (e) {\n                                return thrower(e);\n                            }\n                            if (maybePromise instanceof Promise) {\n                                return maybePromise._then(iterator, thrower, null, null, null);\n                            }\n                        }\n                        iterator();\n                    }\n                    iterator();\n                    return ret;\n                }\n\n                function Disposer(data, promise, context) {\n                    this._data = data;\n                    this._promise = promise;\n                    this._context = context;\n                }\n\n                Disposer.prototype.data = function () {\n                    return this._data;\n                };\n\n                Disposer.prototype.promise = function () {\n                    return this._promise;\n                };\n\n                Disposer.prototype.resource = function () {\n                    if (this.promise().isFulfilled()) {\n                        return this.promise().value();\n                    }\n                    return NULL;\n                };\n\n                Disposer.prototype.tryDispose = function (inspection) {\n                    var resource = this.resource();\n                    var context = this._context;\n                    if (context !== undefined) context._pushContext();\n                    var ret = resource !== NULL ? this.doDispose(resource, inspection) : null;\n                    if (context !== undefined) context._popContext();\n                    this._promise._unsetDisposable();\n                    this._data = null;\n                    return ret;\n                };\n\n                Disposer.isDisposer = function (d) {\n                    return d != null && typeof d.resource === \"function\" && typeof d.tryDispose === \"function\";\n                };\n\n                function FunctionDisposer(fn, promise, context) {\n                    this.constructor$(fn, promise, context);\n                }\n                inherits(FunctionDisposer, Disposer);\n\n                FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n                    var fn = this.data();\n                    return fn.call(resource, resource, inspection);\n                };\n\n                function maybeUnwrapDisposer(value) {\n                    if (Disposer.isDisposer(value)) {\n                        this.resources[this.index]._setDisposable(value);\n                        return value.promise();\n                    }\n                    return value;\n                }\n\n                function ResourceList(length) {\n                    this.length = length;\n                    this.promise = null;\n                    this[length - 1] = null;\n                }\n\n                ResourceList.prototype._resultCancelled = function () {\n                    var len = this.length;\n                    for (var i = 0; i < len; ++i) {\n                        var item = this[i];\n                        if (item instanceof Promise) {\n                            item.cancel();\n                        }\n                    }\n                };\n\n                Promise.using = function () {\n                    var len = arguments.length;\n                    if (len < 2) return apiRejection(\"you must pass at least 2 arguments to Promise.using\");\n                    var fn = arguments[len - 1];\n                    if (typeof fn !== \"function\") {\n                        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n                    }\n                    var input;\n                    var spreadArgs = true;\n                    if (len === 2 && Array.isArray(arguments[0])) {\n                        input = arguments[0];\n                        len = input.length;\n                        spreadArgs = false;\n                    } else {\n                        input = arguments;\n                        len--;\n                    }\n                    var resources = new ResourceList(len);\n                    for (var i = 0; i < len; ++i) {\n                        var resource = input[i];\n                        if (Disposer.isDisposer(resource)) {\n                            var disposer = resource;\n                            resource = resource.promise();\n                            resource._setDisposable(disposer);\n                        } else {\n                            var maybePromise = tryConvertToPromise(resource);\n                            if (maybePromise instanceof Promise) {\n                                resource = maybePromise._then(maybeUnwrapDisposer, null, null, {\n                                    resources: resources,\n                                    index: i\n                                }, undefined);\n                            }\n                        }\n                        resources[i] = resource;\n                    }\n\n                    var reflectedResources = new Array(resources.length);\n                    for (var i = 0; i < reflectedResources.length; ++i) {\n                        reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n                    }\n\n                    var resultPromise = Promise.all(reflectedResources).then(function (inspections) {\n                        for (var i = 0; i < inspections.length; ++i) {\n                            var inspection = inspections[i];\n                            if (inspection.isRejected()) {\n                                errorObj.e = inspection.error();\n                                return errorObj;\n                            } else if (!inspection.isFulfilled()) {\n                                resultPromise.cancel();\n                                return;\n                            }\n                            inspections[i] = inspection.value();\n                        }\n                        promise._pushContext();\n\n                        fn = tryCatch(fn);\n                        var ret = spreadArgs ? fn.apply(undefined, inspections) : fn(inspections);\n                        var promiseCreated = promise._popContext();\n                        debug.checkForgottenReturns(ret, promiseCreated, \"Promise.using\", promise);\n                        return ret;\n                    });\n\n                    var promise = resultPromise.lastly(function () {\n                        var inspection = new Promise.PromiseInspection(resultPromise);\n                        return dispose(resources, inspection);\n                    });\n                    resources.promise = promise;\n                    promise._setOnCancel(resources);\n                    return promise;\n                };\n\n                Promise.prototype._setDisposable = function (disposer) {\n                    this._bitField = this._bitField | 131072;\n                    this._disposer = disposer;\n                };\n\n                Promise.prototype._isDisposable = function () {\n                    return (this._bitField & 131072) > 0;\n                };\n\n                Promise.prototype._getDisposer = function () {\n                    return this._disposer;\n                };\n\n                Promise.prototype._unsetDisposable = function () {\n                    this._bitField = this._bitField & ~131072;\n                    this._disposer = undefined;\n                };\n\n                Promise.prototype.disposer = function (fn) {\n                    if (typeof fn === \"function\") {\n                        return new FunctionDisposer(fn, this, createContext());\n                    }\n                    throw new TypeError();\n                };\n            };\n        }, { \"./errors\": 12, \"./util\": 36 }], 36: [function (_dereq_, module, exports) {\n            \"use strict\";\n\n            var es5 = _dereq_(\"./es5\");\n            var canEvaluate = typeof navigator == \"undefined\";\n\n            var errorObj = { e: {} };\n            var tryCatchTarget;\n            var globalObject = typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : this !== undefined ? this : null;\n\n            function tryCatcher() {\n                try {\n                    var target = tryCatchTarget;\n                    tryCatchTarget = null;\n                    return target.apply(this, arguments);\n                } catch (e) {\n                    errorObj.e = e;\n                    return errorObj;\n                }\n            }\n            function tryCatch(fn) {\n                tryCatchTarget = fn;\n                return tryCatcher;\n            }\n\n            var inherits = function inherits(Child, Parent) {\n                var hasProp = {}.hasOwnProperty;\n\n                function T() {\n                    this.constructor = Child;\n                    this.constructor$ = Parent;\n                    for (var propertyName in Parent.prototype) {\n                        if (hasProp.call(Parent.prototype, propertyName) && propertyName.charAt(propertyName.length - 1) !== \"$\") {\n                            this[propertyName + \"$\"] = Parent.prototype[propertyName];\n                        }\n                    }\n                }\n                T.prototype = Parent.prototype;\n                Child.prototype = new T();\n                return Child.prototype;\n            };\n\n            function isPrimitive(val) {\n                return val == null || val === true || val === false || typeof val === \"string\" || typeof val === \"number\";\n            }\n\n            function isObject(value) {\n                return typeof value === \"function\" || typeof value === \"object\" && value !== null;\n            }\n\n            function maybeWrapAsError(maybeError) {\n                if (!isPrimitive(maybeError)) return maybeError;\n\n                return new Error(safeToString(maybeError));\n            }\n\n            function withAppended(target, appendee) {\n                var len = target.length;\n                var ret = new Array(len + 1);\n                var i;\n                for (i = 0; i < len; ++i) {\n                    ret[i] = target[i];\n                }\n                ret[i] = appendee;\n                return ret;\n            }\n\n            function getDataPropertyOrDefault(obj, key, defaultValue) {\n                if (es5.isES5) {\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n                    if (desc != null) {\n                        return desc.get == null && desc.set == null ? desc.value : defaultValue;\n                    }\n                } else {\n                    return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n                }\n            }\n\n            function notEnumerableProp(obj, name, value) {\n                if (isPrimitive(obj)) return obj;\n                var descriptor = {\n                    value: value,\n                    configurable: true,\n                    enumerable: false,\n                    writable: true\n                };\n                es5.defineProperty(obj, name, descriptor);\n                return obj;\n            }\n\n            function thrower(r) {\n                throw r;\n            }\n\n            var inheritedDataKeys = function () {\n                var excludedPrototypes = [Array.prototype, Object.prototype, Function.prototype];\n\n                var isExcludedProto = function isExcludedProto(val) {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (excludedPrototypes[i] === val) {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n\n                if (es5.isES5) {\n                    var getKeys = Object.getOwnPropertyNames;\n                    return function (obj) {\n                        var ret = [];\n                        var visitedKeys = Object.create(null);\n                        while (obj != null && !isExcludedProto(obj)) {\n                            var keys;\n                            try {\n                                keys = getKeys(obj);\n                            } catch (e) {\n                                return ret;\n                            }\n                            for (var i = 0; i < keys.length; ++i) {\n                                var key = keys[i];\n                                if (visitedKeys[key]) continue;\n                                visitedKeys[key] = true;\n                                var desc = Object.getOwnPropertyDescriptor(obj, key);\n                                if (desc != null && desc.get == null && desc.set == null) {\n                                    ret.push(key);\n                                }\n                            }\n                            obj = es5.getPrototypeOf(obj);\n                        }\n                        return ret;\n                    };\n                } else {\n                    var hasProp = {}.hasOwnProperty;\n                    return function (obj) {\n                        if (isExcludedProto(obj)) return [];\n                        var ret = [];\n\n                        /*jshint forin:false */\n                        enumeration: for (var key in obj) {\n                            if (hasProp.call(obj, key)) {\n                                ret.push(key);\n                            } else {\n                                for (var i = 0; i < excludedPrototypes.length; ++i) {\n                                    if (hasProp.call(excludedPrototypes[i], key)) {\n                                        continue enumeration;\n                                    }\n                                }\n                                ret.push(key);\n                            }\n                        }\n                        return ret;\n                    };\n                }\n            }();\n\n            var thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\n            function isClass(fn) {\n                try {\n                    if (typeof fn === \"function\") {\n                        var keys = es5.names(fn.prototype);\n\n                        var hasMethods = es5.isES5 && keys.length > 1;\n                        var hasMethodsOtherThanConstructor = keys.length > 0 && !(keys.length === 1 && keys[0] === \"constructor\");\n                        var hasThisAssignmentAndStaticMethods = thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n                        if (hasMethods || hasMethodsOtherThanConstructor || hasThisAssignmentAndStaticMethods) {\n                            return true;\n                        }\n                    }\n                    return false;\n                } catch (e) {\n                    return false;\n                }\n            }\n\n            function toFastProperties(obj) {\n                /*jshint -W027,-W055,-W031*/\n                function FakeConstructor() {}\n                FakeConstructor.prototype = obj;\n                var l = 8;\n                while (l--) {\n                    new FakeConstructor();\n                }return obj;\n                eval(obj);\n            }\n\n            var rident = /^[a-z$_][a-z$_0-9]*$/i;\n            function isIdentifier(str) {\n                return rident.test(str);\n            }\n\n            function filledRange(count, prefix, suffix) {\n                var ret = new Array(count);\n                for (var i = 0; i < count; ++i) {\n                    ret[i] = prefix + i + suffix;\n                }\n                return ret;\n            }\n\n            function safeToString(obj) {\n                try {\n                    return obj + \"\";\n                } catch (e) {\n                    return \"[no string representation]\";\n                }\n            }\n\n            function isError(obj) {\n                return obj instanceof Error || obj !== null && typeof obj === \"object\" && typeof obj.message === \"string\" && typeof obj.name === \"string\";\n            }\n\n            function markAsOriginatingFromRejection(e) {\n                try {\n                    notEnumerableProp(e, \"isOperational\", true);\n                } catch (ignore) {}\n            }\n\n            function originatesFromRejection(e) {\n                if (e == null) return false;\n                return e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError || e[\"isOperational\"] === true;\n            }\n\n            function canAttachTrace(obj) {\n                return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n            }\n\n            var ensureErrorObject = function () {\n                if (!(\"stack\" in new Error())) {\n                    return function (value) {\n                        if (canAttachTrace(value)) return value;\n                        try {\n                            throw new Error(safeToString(value));\n                        } catch (err) {\n                            return err;\n                        }\n                    };\n                } else {\n                    return function (value) {\n                        if (canAttachTrace(value)) return value;\n                        return new Error(safeToString(value));\n                    };\n                }\n            }();\n\n            function classString(obj) {\n                return {}.toString.call(obj);\n            }\n\n            function copyDescriptors(from, to, filter) {\n                var keys = es5.names(from);\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (filter(key)) {\n                        try {\n                            es5.defineProperty(to, key, es5.getDescriptor(from, key));\n                        } catch (ignore) {}\n                    }\n                }\n            }\n\n            var asArray = function asArray(v) {\n                if (es5.isArray(v)) {\n                    return v;\n                }\n                return null;\n            };\n\n            if (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n                var ArrayFrom = typeof Array.from === \"function\" ? function (v) {\n                    return Array.from(v);\n                } : function (v) {\n                    var ret = [];\n                    var it = v[Symbol.iterator]();\n                    var itResult;\n                    while (!(itResult = it.next()).done) {\n                        ret.push(itResult.value);\n                    }\n                    return ret;\n                };\n\n                asArray = function asArray(v) {\n                    if (es5.isArray(v)) {\n                        return v;\n                    } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n                        return ArrayFrom(v);\n                    }\n                    return null;\n                };\n            }\n\n            var isNode = typeof process !== \"undefined\" && classString(process).toLowerCase() === \"[object process]\";\n\n            var hasEnvVariables = typeof process !== \"undefined\" && typeof process.env !== \"undefined\";\n\n            function env(key) {\n                return hasEnvVariables ? process.env[key] : undefined;\n            }\n\n            function getNativePromise() {\n                if (typeof Promise === \"function\") {\n                    try {\n                        var promise = new Promise(function () {});\n                        if ({}.toString.call(promise) === \"[object Promise]\") {\n                            return Promise;\n                        }\n                    } catch (e) {}\n                }\n            }\n\n            function domainBind(self, cb) {\n                return self.bind(cb);\n            }\n\n            var ret = {\n                isClass: isClass,\n                isIdentifier: isIdentifier,\n                inheritedDataKeys: inheritedDataKeys,\n                getDataPropertyOrDefault: getDataPropertyOrDefault,\n                thrower: thrower,\n                isArray: es5.isArray,\n                asArray: asArray,\n                notEnumerableProp: notEnumerableProp,\n                isPrimitive: isPrimitive,\n                isObject: isObject,\n                isError: isError,\n                canEvaluate: canEvaluate,\n                errorObj: errorObj,\n                tryCatch: tryCatch,\n                inherits: inherits,\n                withAppended: withAppended,\n                maybeWrapAsError: maybeWrapAsError,\n                toFastProperties: toFastProperties,\n                filledRange: filledRange,\n                toString: safeToString,\n                canAttachTrace: canAttachTrace,\n                ensureErrorObject: ensureErrorObject,\n                originatesFromRejection: originatesFromRejection,\n                markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n                classString: classString,\n                copyDescriptors: copyDescriptors,\n                hasDevTools: typeof chrome !== \"undefined\" && chrome && typeof chrome.loadTimes === \"function\",\n                isNode: isNode,\n                hasEnvVariables: hasEnvVariables,\n                env: env,\n                global: globalObject,\n                getNativePromise: getNativePromise,\n                domainBind: domainBind\n            };\n            ret.isRecentNode = ret.isNode && function () {\n                var version = process.versions.node.split(\".\").map(Number);\n                return version[0] === 0 && version[1] > 10 || version[0] > 0;\n            }();\n\n            if (ret.isNode) ret.toFastProperties(process);\n\n            try {\n                throw new Error();\n            } catch (e) {\n                ret.lastLineError = e;\n            }\n            module.exports = ret;\n        }, { \"./es5\": 13 }] }, {}, [4])(4);\n});;if (typeof window !== 'undefined' && window !== null) {\n    window.P = window.Promise;\n} else if (typeof self !== 'undefined' && self !== null) {\n    self.P = self.Promise;\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"g31e\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n/***/ }),\n\n/***/ \"g7Jl\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nvar util = __webpack_require__(\"gfUn\");\n\nvar errors = module.exports = __webpack_require__(\"AgUv\");\n\nfunction failCheck(ExceptionConstructor, callee, messageFormat, formatArgs) {\n    messageFormat = messageFormat || '';\n    var message = util.format.apply(this, [messageFormat].concat(formatArgs));\n    var error = new ExceptionConstructor(message);\n    Error.captureStackTrace(error, callee);\n    throw error;\n}\n\nfunction failArgumentCheck(callee, message, formatArgs) {\n    failCheck(errors.IllegalArgumentError, callee, message, formatArgs);\n}\n\nfunction failStateCheck(callee, message, formatArgs) {\n    failCheck(errors.IllegalStateError, callee, message, formatArgs);\n}\n\nmodule.exports.checkArgument = function (value, message) {\n    if (!value) {\n        failArgumentCheck(arguments.callee, message, Array.prototype.slice.call(arguments, 2));\n    }\n};\n\nmodule.exports.checkState = function (value, message) {\n    if (!value) {\n        failStateCheck(arguments.callee, message, Array.prototype.slice.call(arguments, 2));\n    }\n};\n\nmodule.exports.checkIsDef = function (value, message) {\n    if (value !== undefined) {\n        return value;\n    }\n\n    failArgumentCheck(arguments.callee, message || 'Expected value to be defined but was undefined.', Array.prototype.slice.call(arguments, 2));\n};\n\nmodule.exports.checkIsDefAndNotNull = function (value, message) {\n    // Note that undefined == null.\n    if (value != null) {\n        return value;\n    }\n\n    failArgumentCheck(arguments.callee, message || 'Expected value to be defined and not null but got \"' + typeOf(value) + '\".', Array.prototype.slice.call(arguments, 2));\n};\n\n// Fixed version of the typeOf operator which returns 'null' for null values\n// and 'array' for arrays.\nfunction typeOf(value) {\n    var s = typeof value;\n    if (s == 'object') {\n        if (!value) {\n            return 'null';\n        } else if (value instanceof Array) {\n            return 'array';\n        }\n    }\n    return s;\n}\n\nfunction typeCheck(expect) {\n    return function (value, message) {\n        var type = typeOf(value);\n\n        if (type == expect) {\n            return value;\n        }\n\n        failArgumentCheck(arguments.callee, message || 'Expected \"' + expect + '\" but got \"' + type + '\".', Array.prototype.slice.call(arguments, 2));\n    };\n}\n\nmodule.exports.checkIsString = typeCheck('string');\nmodule.exports.checkIsArray = typeCheck('array');\nmodule.exports.checkIsNumber = typeCheck('number');\nmodule.exports.checkIsBoolean = typeCheck('boolean');\nmodule.exports.checkIsFunction = typeCheck('function');\nmodule.exports.checkIsObject = typeCheck('object');\n\n/***/ }),\n\n/***/ \"gc0D\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"vcHl\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"gfUn\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function (f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function (x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s':\n        return String(args[i++]);\n      case '%d':\n        return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function (fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function () {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function (set) {\n  if (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function () {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function () {};\n    }\n  }\n  return debugs[set];\n};\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold': [1, 22],\n  'italic': [3, 23],\n  'underline': [4, 24],\n  'inverse': [7, 27],\n  'white': [37, 39],\n  'grey': [90, 39],\n  'black': [30, 39],\n  'blue': [34, 39],\n  'cyan': [36, 39],\n  'green': [32, 39],\n  'magenta': [35, 39],\n  'red': [31, 39],\n  'yellow': [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\x1B[' + inspect.colors[style][0] + 'm' + str + '\\x1B[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function (val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect && value && isFunction(value.inspect) &&\n  // Filter out the util module, it's inspect function is special\n  value.inspect !== exports.inspect &&\n  // Also filter out any prototype objects using the circular check.\n  !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '',\n      array = false,\n      braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function (key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '').replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value)) return ctx.stylize('' + value, 'number');\n  if (isBoolean(value)) return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value)) return ctx.stylize('null', 'null');\n}\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function (key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n    }\n  });\n  return output;\n}\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function (line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function (line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"').replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function (prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] + (base === '' ? '' : base + '\\n ') + ' ' + output.join(',\\n  ') + ' ' + braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null || typeof arg === 'boolean' || typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'symbol' || // ES6 symbol\n  typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = __webpack_require__(\"vexR\");\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function () {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = __webpack_require__(\"tcrG\");\n\nexports._extend = function (origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"gjjs\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(\"Gfzd\"),\n    anObject = __webpack_require__(\"zotD\"),\n    getKeys = __webpack_require__(\"knrM\");\n\nmodule.exports = __webpack_require__(\"6MLN\") ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties),\n      length = keys.length,\n      i = 0,\n      P;\n  while (length > i) {\n    dP.f(O, P = keys[i++], Properties[P]);\n  }return O;\n};\n\n/***/ }),\n\n/***/ \"gkZy\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"TEgB\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"gojl\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"akPY\");\n\n/***/ }),\n\n/***/ \"h6ac\":\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n\n/***/ \"hEIm\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(\"zotD\");\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n    // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n/***/ }),\n\n/***/ \"hVVj\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(\"f+DB\");\nvar bytesToUuid = __webpack_require__(\"dAjQ\");\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [_seedBytes[0] | 0x01, _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0,\n    _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n/***/ }),\n\n/***/ \"hYHi\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(\"f+DB\");\nvar bytesToUuid = __webpack_require__(\"dAjQ\");\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n/***/ }),\n\n/***/ \"htFH\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(\"vSO4\");\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(\"6MLN\"), 'Object', { defineProperty: __webpack_require__(\"Gfzd\").f });\n\n/***/ }),\n\n/***/ \"hznj\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends2 = __webpack_require__(\"T4f3\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = __webpack_require__(\"E56Z\");\nvar entity_1 = __webpack_require__(\"GBRx\");\nvar rfc6902_1 = __webpack_require__(\"b0lL\");\nvar retryingqueue_1 = __webpack_require__(\"/lpw\");\nvar utils_1 = __webpack_require__(\"PD3G\");\n/**\n * @class\n * @alias Document\n * @classdesc\n * Primitive to store a single document in DataSync service\n * @property {String} sid SyncDocument unique id\n * @property {String} uniqueName Unique name of a document\n * @property {Object} value Value of a document\n *\n * @fires Document#updated\n * @fires Document#updatedRemotely\n * @fires Document#removed\n * @fires Document#removedRemotely\n */\n\nvar SyncDocument = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncDocument, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncDocument(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncDocument);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncDocument.__proto__ || (0, _getPrototypeOf2.default)(SyncDocument)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.descriptor = descriptor;\n        _this.descriptor.data = _this.descriptor.data || {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncDocument, [{\n        key: \"_update\",\n\n        /**\n         * Update data entity with new data\n         * @private\n         */\n        value: function _update(update) {\n            switch (update.type) {\n                case 'document_updated':\n                    if (update.id > this.lastEventId) {\n                        var originalData = this.descriptor.data;\n                        this.descriptor.last_event_id = update.id;\n                        this.descriptor.revision = update.document_revision;\n                        this.descriptor.data = update.document_data;\n                        this.traverse(originalData, update.document_data, false);\n                        this.emit('updated', update.document_data, false);\n                        this.emit('updatedRemotely', update.document_data);\n                        this.services.storage.update(this.type, this.sid, this.uniqueName, { last_event_id: update.id, revision: update.document_revision, data: update.document_data });\n                    }\n                    break;\n                case 'document_removed':\n                    this.onRemoved(false);\n                    break;\n            }\n        }\n        /**\n         * Calculate diff between old and new data\n         * @private\n         */\n\n    }, {\n        key: \"traverse\",\n        value: function traverse(originalData, updatedData, isLocalEvent) {\n            var _this2 = this;\n\n            var diff = rfc6902_1.createPatch(originalData, updatedData);\n            diff.forEach(function (row) {\n                if (row.op === 'add') {\n                    _this2.emit('keyAdded', row.path, row.value, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyAddedRemotely', row.path, row.value);\n                    }\n                } else if (row.op === 'replace') {\n                    _this2.emit('keyUpdated', row.path, row.value, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyUpdatedRemotely', row.path, row.value);\n                    }\n                } else if (row.op === 'remove') {\n                    _this2.emit('keyRemoved', row.path, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyRemovedRemotely', row.path);\n                    }\n                }\n            });\n        }\n        /**\n         * @returns {Object} Internal data of entity\n         * For now use a 'value' property instead\n         * @private\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(path) {\n            // return !path ? this.value : this.value(path);\n            return this.value;\n        }\n        /**\n         * Set new value for the document\n         * @param {Object} value New value for the document\n         * @param {Boolean} [conditional=false] Check for remote modification when updating.\n         * If true, promise will be rejected if value was remotely modified\n         * @returns {Promise}\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(value, conditional) {\n            return this._actualSet(value, conditional ? function () {\n                throw new Error('Revision mismatch');\n            } : null);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(data, conflictResolver) {\n            var _this3 = this;\n\n            var resolver = void 0;\n            var arg = { data: data,\n                revision: conflictResolver ? this.revision : undefined };\n            if (conflictResolver) {\n                resolver = function resolver(err) {\n                    return __awaiter(_this3, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                        return _regenerator2.default.wrap(function _callee$(_context) {\n                            while (1) {\n                                switch (_context.prev = _context.next) {\n                                    case 0:\n                                        if (!(err.status === 412)) {\n                                            _context.next = 4;\n                                            break;\n                                        }\n\n                                        _context.next = 3;\n                                        return this.softSync();\n\n                                    case 3:\n                                        return _context.abrupt(\"return\", { revision: this.revision,\n                                            data: conflictResolver(utils_1.deepClone(this.value)) });\n\n                                    case 4:\n                                        throw err;\n\n                                    case 5:\n                                    case \"end\":\n                                        return _context.stop();\n                                }\n                            }\n                        }, _callee, this);\n                    }));\n                };\n            }\n            return this.actionQueue.add(this._set.bind(this), this.uri, arg, resolver).then(function (result) {\n                if (result.last_event_id > _this3.descriptor.last_event_id) {\n                    // Ignore returned value if we already got a newer one\n                    _this3.descriptor.revision = result.revision;\n                    _this3.descriptor.data = result.data;\n                    _this3.descriptor.last_event_id = result.last_event_id;\n                    _this3.services.storage.update(_this3.type, _this3.sid, _this3.uniqueName, { last_event_id: result.last_event_id, revision: result.revision, data: result.data });\n                }\n                _this3.emit('updated', _this3.value, true);\n                return _this3.value;\n            });\n        }\n        /**\n         * @param {Document~Mutator} mutator Function to apply to current data in order to modify it.\n         * Can be called multiple times if same data modified remotely at the same time.\n         * @return {Promise<Object>}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                return _context2.abrupt(\"return\", this._actualSet(mutator(utils_1.deepClone(this.value)), mutator));\n\n                            case 1:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Object>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(obj) {\n            return this.mutate(function (remote) {\n                return (0, _extends3.default)(remote, obj);\n            });\n        }\n    }, {\n        key: \"_set\",\n        value: function _set(context, param) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var response;\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                _context3.next = 2;\n                                return this.services.network.post(this.uri, { data: param.data }, param.revision);\n\n                            case 2:\n                                response = _context3.sent;\n                                return _context3.abrupt(\"return\", { revision: response.body.revision, data: param.data, last_event_id: response.body.last_event_id });\n\n                            case 4:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this);\n            }));\n        }\n        /**\n         * Get new data from server\n         * @private\n         */\n\n    }, {\n        key: \"softSync\",\n        value: function softSync() {\n            var _this4 = this;\n\n            return this.services.network.get(this.uri).then(function (response) {\n                _this4._update({ type: 'document_updated',\n                    id: response.body.last_event_id,\n                    document_revision: response.body.revision,\n                    document_data: response.body.data }); // eslint-disable-line camelcase\n                return _this4;\n            }).catch(function (err) {\n                if (err.status === 404) {\n                    _this4.onRemoved(false);\n                } else {\n                    logger_1.default.error(\"Can't get updates for \" + _this4.sid + \":\", err);\n                }\n            });\n        }\n        /**\n         * Get value by given path\n         * @param {string} path JSON path\n         * @private\n         */\n        /*\n        _value(path) {\n          let result;\n          try {\n            let pathArr = path.replace(/^\\/|\\/$/gm, '').split('/');\n            let obj = this.data;\n            pathArr.forEach((el) => { obj = obj[el]; });\n            result = obj;\n          } catch (e) {\n            log.warn('Failed to get value:', e);\n          }\n          return result;\n        }\n        */\n\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            // Should also do some cleanup here\n            this.emit('removed', locally);\n            if (!locally) {\n                this.emit('removedRemotely');\n            }\n        }\n        /**\n         * Removes document from service\n         * @return {Promise}\n         * @public\n         */\n\n    }, {\n        key: \"removeDocument\",\n        value: function removeDocument() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"value\",\n        get: function get() {\n            return this.descriptor.data;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'document';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'document';\n        }\n    }]);\n    return SyncDocument;\n}(entity_1.SyncEntity);\n\nexports.SyncDocument = SyncDocument;\nexports.default = SyncDocument;\n/**\n * Applies a transformation to the document value\n * @callback Document~Mutator\n * @param {Object} data current value\n * @return {Object} Modified value\n */\n/**\n* Fired when document value changed\n* @event Document#updated\n* @type {Object}\n*/\n/**\n* Fired when document value changed remotely\n* @event Document#updatedRemotely\n* @type {Object}\n*/\n/**\n* Fired when document removed from server\n* @event Document#removed\n*/\n/**\n* Fired when document removed from server remotely\n* @event Document#removedRemotely\n*/\n\n/***/ }),\n\n/***/ \"i+u+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar $at = __webpack_require__(\"lytE\")(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(\"uRfg\")(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0; // next index\n  // 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t,\n      index = this._i,\n      point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n/***/ }),\n\n/***/ \"i/BB\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = __webpack_require__(\"FRpO\");\n/**\n * Provides retrier service\n */\nvar Retrier = /** @class */function (_super) {\n    __extends(Retrier, _super);\n    /**\n     * Creates a new Retrier instance\n     */\n    function Retrier(options) {\n        var _this = _super.call(this) || this;\n        _this.minDelay = options.min;\n        _this.maxDelay = options.max;\n        _this.initialDelay = options.initial || 0;\n        _this.maxAttemptsCount = options.maxAttemptsCount || 0;\n        _this.maxAttemptsTime = options.maxAttemptsTime || 0;\n        _this.randomness = options.randomness || 0;\n        _this.inProgress = false;\n        _this.attemptNum = 0;\n        _this.prevDelay = 0;\n        _this.currDelay = 0;\n        return _this;\n    }\n    Retrier.prototype.attempt = function () {\n        clearTimeout(this.timeout);\n        this.attemptNum++;\n        this.timeout = null;\n        this.emit(\"attempt\", this);\n    };\n    Retrier.prototype.nextDelay = function (delayOverride) {\n        if (typeof delayOverride === 'number') {\n            this.prevDelay = 0;\n            this.currDelay = delayOverride;\n            return delayOverride;\n        }\n        if (this.attemptNum == 0) {\n            return this.initialDelay;\n        }\n        if (this.attemptNum == 1) {\n            this.currDelay = this.minDelay;\n            return this.currDelay;\n        }\n        var delay = this.currDelay + this.prevDelay;\n        this.prevDelay = this.currDelay;\n        this.currDelay = delay;\n        return delay;\n    };\n    Retrier.prototype.randomize = function (delay) {\n        var area = delay * this.randomness;\n        var corr = Math.round(Math.random() * area * 2 - area);\n        return Math.max(0, delay + corr);\n    };\n    Retrier.prototype.scheduleAttempt = function (delayOverride) {\n        var _this = this;\n        if (this.maxAttemptsCount && this.attemptNum >= this.maxAttemptsCount) {\n            this.cleanup();\n            this.emit('failed', new Error('Maximum attempt count limit reached'));\n            this.reject(new Error('Maximum attempt count reached'));\n            return;\n        }\n        var delay = this.nextDelay(delayOverride);\n        delay = this.randomize(delay);\n        if (this.maxAttemptsTime && this.startTimestamp + this.maxAttemptsTime < Date.now() + delay) {\n            this.cleanup();\n            this.emit('failed', new Error('Maximum attempt time limit reached'));\n            this.reject(new Error('Maximum attempt time limit reached'));\n        }\n        this.timeout = setTimeout(function () {\n            return _this.attempt();\n        }, delay);\n    };\n    Retrier.prototype.cleanup = function () {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n        this.inProgress = false;\n        this.attemptNum = 0;\n        this.prevDelay = 0;\n        this.currDelay = 0;\n    };\n    Retrier.prototype.start = function () {\n        var _this = this;\n        if (this.inProgress) {\n            throw new Error('Retrier is already in progress');\n        }\n        this.inProgress = true;\n        return new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n            _this.startTimestamp = Date.now();\n            _this.scheduleAttempt(_this.initialDelay);\n        });\n    };\n    Retrier.prototype.cancel = function () {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n            this.inProgress = false;\n            this.emit(\"cancelled\");\n            this.reject(new Error(\"Cancelled\"));\n        }\n    };\n    Retrier.prototype.succeeded = function (arg) {\n        this.emit(\"succeeded\", arg);\n        this.resolve(arg);\n    };\n    Retrier.prototype.failed = function (err, nextAttemptDelayOverride) {\n        if (this.timeout) {\n            throw new Error(\"Retrier attempt is already in progress\");\n        }\n        this.scheduleAttempt(nextAttemptDelayOverride);\n    };\n    Retrier.prototype.run = function (handler) {\n        var _this = this;\n        this.on('attempt', function () {\n            handler().then(function (v) {\n                return _this.succeeded(v);\n            }).catch(function (e) {\n                return _this.failed(e);\n            });\n        });\n        return this.start();\n    };\n    return Retrier;\n}(events_1.EventEmitter);\nexports.Retrier = Retrier;\nexports.default = Retrier;\n//# sourceMappingURL=retrier.js.map\n\n/***/ }),\n\n/***/ \"i1Q6\":\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n/***/ }),\n\n/***/ \"iSVM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar XHR = typeof XMLHttpRequest === 'undefined' ? __webpack_require__(1).XMLHttpRequest : XMLHttpRequest;\n\nfunction parseResponseHeaders(headerString) {\n  if (!headerString) {\n    return {};\n  }\n\n  return headerString.split('\\r\\n').map(function (el) {\n    return el.split(': ');\n  }).filter(function (el) {\n    return el.length === 2 && el[1].length > 0;\n  }).reduce(function (prev, curr) {\n    prev[curr[0]] = curr[1];return prev;\n  }, {});\n}\n\nfunction extractBody(xhr) {\n  var contentType = xhr.getResponseHeader('Content-Type');\n  if (!contentType || contentType.indexOf('application/json') !== 0 || xhr.responseText.length === 0) {\n    return xhr.responseText;\n  }\n\n  try {\n    return JSON.parse(xhr.responseText);\n  } catch (e) {\n    return xhr.responseText;\n  }\n}\n\n/**\n * Use XMLHttpRequest to get a network resource.\n * @param {String} method - HTTP Method\n * @param {Object} params - Request parameters\n * @param {String} params.url - URL of the resource\n * @param {Array}  params.headers - An array of headers to pass [{ headerName : headerBody }]\n * @param {Object} params.body - A JSON body to send to the resource\n * @returns {Promise}\n **/\n\nvar Request = function () {\n  function Request() {\n    _classCallCheck(this, Request);\n  }\n\n  _createClass(Request, null, [{\n    key: 'request',\n    value: function request(method, params) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XHR();\n        xhr.open(method, params.url, true);\n\n        xhr.onreadystatechange = function onreadystatechange() {\n          if (xhr.readyState !== 4) {\n            return;\n          }\n\n          var headers = parseResponseHeaders(xhr.getAllResponseHeaders());\n          var body = extractBody(xhr);\n\n          if (200 <= xhr.status && xhr.status < 300) {\n            resolve({ status: xhr.status, headers: headers, body: body });\n          } else {\n            reject({ status: xhr.status, description: xhr.statusText, headers: headers, body: body });\n          }\n        };\n\n        for (var headerName in params.headers) {\n          xhr.setRequestHeader(headerName, params.headers[headerName]);\n          if (headerName === 'Content-Type' && params.headers[headerName] === 'application/json') {\n            params.body = JSON.stringify(params.body);\n          }\n        }\n\n        xhr.send(params.body);\n      });\n    }\n\n    /**\n     * Sugar function for request('GET', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'get',\n    value: function get(params) {\n      return this.request('GET', params);\n    }\n\n    /**\n     * Sugar function for request('POST', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'post',\n    value: function post(params) {\n      return this.request('POST', params);\n    }\n\n    /**\n     * Sugar function for request('PUT', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'put',\n    value: function put(params) {\n      return this.request('PUT', params);\n    }\n\n    /**\n     * Sugar function for request('DELETE', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete(params) {\n      return this.request('DELETE', params);\n    }\n  }]);\n\n  return Request;\n}();\n\nexports.default = Request;\n\nmodule.exports = Request;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"ibPW\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"Ky5l\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"jx4H\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(\"FFZn\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n\n/***/ \"knrM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(\"B9Lq\"),\n    enumBugKeys = __webpack_require__(\"KxjL\");\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n/***/ }),\n\n/***/ \"kohK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * Platform.js <https://mths.be/platform>\n * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>\n * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>\n * Available under MIT license <https://mths.be/mit>\n */\n;(function () {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = objectTypes[typeof window] && window || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4': '10 Technical Preview',\n      '6.3': '8.1',\n      '6.2': '8',\n      '6.1': 'Server 2008 R2 / 7',\n      '6.0': 'Server 2008 / Vista',\n      '5.2': 'Server 2003 / XP 64-bit',\n      '5.1': 'XP',\n      '5.01': '2000 SP1',\n      '5.0': '2000',\n      '4.0': 'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) && (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(os.replace(/ ce$/i, ' CE').replace(/\\bhpw/i, 'web').replace(/\\bMacintosh\\b/, 'Mac OS').replace(/_PowerPC\\b/i, ' OS').replace(/\\b(OS X) [^ \\d]+/i, '$1').replace(/\\bMac (OS X)\\b/, '$1').replace(/\\/(\\d)/, ' $1').replace(/_/g, '.').replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '').replace(/\\bx86\\.64\\b/gi, 'x86_64').replace(/\\b(Windows Phone) OS\\b/, '$1').replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1').split(' on ')[0]);\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return (/^(?:webOS|i(?:OS|P))/.test(string) ? string : capitalize(string)\n    );\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null ? capitalize(value) : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) && (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function (value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext ? !!nav.likeChrome : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = isCustomContext && context.java ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03B1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03B2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = isCustomContext && opera ? opera['[[Class]]'] : getClassOf(opera)) ? operaClass : opera = null;\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([{ 'label': 'EdgeHTML', 'pattern': 'Edge' }, 'Trident', { 'label': 'WebKit', 'pattern': 'AppleWebKit' }, 'iCab', 'Presto', 'NetFront', 'Tasman', 'KHTML', 'Gecko']);\n\n    /* Detectable browser names (order is important). */\n    var name = getName(['Adobe AIR', 'Arora', 'Avant Browser', 'Breach', 'Camino', 'Electron', 'Epiphany', 'Fennec', 'Flock', 'Galeon', 'GreenBrowser', 'iCab', 'Iceweasel', 'K-Meleon', 'Konqueror', 'Lunascape', 'Maxthon', { 'label': 'Microsoft Edge', 'pattern': 'Edge' }, 'Midori', 'Nook Browser', 'PaleMoon', 'PhantomJS', 'Raven', 'Rekonq', 'RockMelt', { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' }, 'SeaMonkey', { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' }, 'Sleipnir', 'SlimBrowser', { 'label': 'SRWare Iron', 'pattern': 'Iron' }, 'Sunrise', 'Swiftfox', 'Waterfox', 'WebPositive', 'Opera Mini', { 'label': 'Opera Mini', 'pattern': 'OPiOS' }, 'Opera', { 'label': 'Opera', 'pattern': 'OPR' }, 'Chrome', { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' }, { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' }, { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' }, { 'label': 'IE', 'pattern': 'IEMobile' }, { 'label': 'IE', 'pattern': 'MSIE' }, 'Safari']);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([{ 'label': 'BlackBerry', 'pattern': 'BB10' }, 'BlackBerry', { 'label': 'Galaxy S', 'pattern': 'GT-I9000' }, { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' }, { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' }, { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' }, { 'label': 'Galaxy S5', 'pattern': 'SM-G900' }, { 'label': 'Galaxy S6', 'pattern': 'SM-G920' }, { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' }, { 'label': 'Galaxy S7', 'pattern': 'SM-G930' }, { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' }, 'Google TV', 'Lumia', 'iPad', 'iPod', 'iPhone', 'Kindle', { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' }, 'Nexus', 'Nook', 'PlayBook', 'PlayStation Vita', 'PlayStation', 'TouchPad', 'Transformer', { 'label': 'Wii U', 'pattern': 'WiiU' }, 'Wii', 'Xbox One', { 'label': 'Xbox 360', 'pattern': 'Xbox' }, 'Xoom']);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1, 'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS(['Windows Phone', 'Android', 'CentOS', { 'label': 'Chrome OS', 'pattern': 'CrOS' }, 'Debian', 'Fedora', 'FreeBSD', 'Gentoo', 'Haiku', 'Kubuntu', 'Linux Mint', 'OpenBSD', 'Red Hat', 'SuSE', 'Ubuntu', 'Xubuntu', 'Cygwin', 'Symbian OS', 'hpwOS', 'webOS ', 'webOS', 'Tablet OS', 'Tizen', 'Linux', 'Mac OS X', 'Macintosh', 'Mac', 'Windows 98;', 'Windows ']);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function (result, guess) {\n        return result || RegExp('\\\\b' + (guess.pattern || qualify(guess)) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function (result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (value[product] || value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] || RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function (result, guess) {\n        return result || RegExp('\\\\b' + (guess.pattern || qualify(guess)) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function (result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result = RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua))) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function (result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result = RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) || RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) || RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua))) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String(guess.label && !RegExp(pattern, 'i').test(guess.label) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0].replace(RegExp(pattern, 'i'), guess).replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ').replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function (result, pattern) {\n        return result || (RegExp(pattern + '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if (data = /\\bGoogle TV\\b/.exec(product)) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n        name || (name = 'Safari');\n        os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua)) ? ' ' + data[1].replace(/_/g, '.') : '');\n      }\n      // Detect Kubuntu.\n      else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n          os = 'Kubuntu';\n        }\n        // Detect Android browsers.\n        else if (manufacturer && manufacturer != 'Google' && (/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua) || /\\bVita\\b/.test(product)) || /\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua)) {\n            name = 'Android Browser';\n            os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n          }\n          // Detect Silk desktop/accelerated modes.\n          else if (name == 'Silk') {\n              if (!/\\bMobi/i.test(ua)) {\n                os = 'Android';\n                description.unshift('desktop mode');\n              }\n              if (/Accelerated *= *true/i.test(ua)) {\n                description.unshift('accelerated');\n              }\n            }\n            // Detect PaleMoon identifying as Firefox.\n            else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n                description.push('identifying as Firefox ' + data[1]);\n              }\n              // Detect Firefox OS and products running Firefox.\n              else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n                  os || (os = 'Firefox OS');\n                  product || (product = data[1]);\n                }\n                // Detect false positives for Firefox/Safari.\n                else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n                    // Escape the `/` for Firefox 1.\n                    if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n                      // Clear name of false positives.\n                      name = null;\n                    }\n                    // Reassign a generic name.\n                    if ((data = product || manufacturer || os) && (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n                      name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n                    }\n                  }\n                  // Add Chrome version to description for Electron.\n                  else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n                      description.push('Chromium ' + data);\n                    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion(['(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))', 'Version', qualify(name), '(?:Firefox|Minefield|NetFront)']);\n    }\n    // Detect stubborn layout engines.\n    if (data = layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' || /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') || /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' || !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') || layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront') {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n        name = 'IE Mobile';\n        os = 'Windows Phone 8.x';\n        description.unshift('desktop mode');\n        version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n      }\n      // Detect IE 11 identifying as other browsers.\n      else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n          if (name) {\n            description.push('identifying as ' + name + (version ? ' ' + version : ''));\n          }\n          name = 'IE';\n          version = data[1];\n        }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch (e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        } else if (typeof context.process == 'object' && !context.process.browser && (data = context.process)) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf(data = context.runtime) == airRuntimeClass) {\n          name = 'Adobe AIR';\n          os = data.flash.system.Capabilities.os;\n        }\n        // Detect PhantomJS.\n        else if (getClassOf(data = context.phantom) == phantomClass) {\n            name = 'PhantomJS';\n            version = (data = data.version || null) && data.major + '.' + data.minor + '.' + data.patch;\n          }\n          // Detect IE compatibility modes.\n          else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n              // We're in compatibility mode when the Trident version + 4 doesn't\n              // equal the document mode.\n              version = [version, doc.documentMode];\n              if ((data = +data[1] + 4) != version[1]) {\n                description.push('IE ' + version[1] + ' mode');\n                layout && (layout[1] = '');\n                version[1] = data;\n              }\n              version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n            }\n            // Detect IE 11 masking as other browsers.\n            else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n                description.push('masking as ' + name + ' ' + version);\n                name = 'IE';\n                version = '11.0';\n                layout = ['Trident'];\n                os = 'Windows';\n              }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data = /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) || /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) || /\\bMinefield\\b/i.test(ua) && 'a')) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') + (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n        version = version.replace(/\\.[\\d.]+/, '.x');\n      }\n      // Detect Xbox 360 and Xbox One.\n      else if (/\\bXbox\\b/i.test(product)) {\n          if (product == 'Xbox 360') {\n            os = null;\n          }\n          if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n            description.unshift('mobile mode');\n          }\n        }\n        // Add mobile postfix.\n        else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) && (os == 'Windows CE' || /Mobi/i.test(ua))) {\n            name += ' Mobile';\n          }\n          // Detect IE platform preview.\n          else if (name == 'IE' && useFeatures) {\n              try {\n                if (context.external === null) {\n                  description.unshift('platform preview');\n                }\n              } catch (e) {\n                description.unshift('embedded');\n              }\n            }\n            // Detect BlackBerry OS version.\n            // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n            else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data = (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] || version)) {\n                data = [data, /BB10/.test(ua)];\n                os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n                version = null;\n              }\n              // Detect Opera identifying/masking itself as another browser.\n              // http://www.opera.com/support/kb/view/843/\n              else if (this != forOwn && product != 'Wii' && (useFeatures && opera || /Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua) || name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os) || name == 'IE' && (os && !/^Win/.test(os) && version > 5.5 || /\\bWindows XP\\b/.test(os) && version > 8 || version == 8 && !/\\bTrident\\b/.test(ua))) && !reOpera.test(data = parse.call(forOwn, ua.replace(reOpera, '') + ';')) && data.name) {\n                  // When \"identifying\", the UA contains both Opera and the other browser's name.\n                  data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n                  if (reOpera.test(name)) {\n                    if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n                      os = null;\n                    }\n                    data = 'identify' + data;\n                  }\n                  // When \"masking\", the UA contains only the other browser's name.\n                  else {\n                      data = 'mask' + data;\n                      if (operaClass) {\n                        name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n                      } else {\n                        name = 'Opera';\n                      }\n                      if (/\\bIE\\b/.test(data)) {\n                        os = null;\n                      }\n                      if (!useFeatures) {\n                        version = null;\n                      }\n                    }\n                  layout = ['Presto'];\n                  description.push(data);\n                }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if (data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1]) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] || version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n          version = null;\n        }\n      // Use the full Chrome version when available.\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || !likeChrome && !data[1]) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : '8');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' && (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n        description.unshift('desktop mode');\n        name = 'Chrome Mobile';\n        version = null;\n\n        if (/\\bOS X\\b/.test(os)) {\n          manufacturer = 'Apple';\n          os = 'iOS 4.3+';\n        } else {\n          os = null;\n        }\n      }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf(data = /[\\d.]+$/.exec(os)) == 0 && ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (/Browser|Lunascape|Maxthon/.test(name) || name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': data && !isSpecialCasedOS ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function toString() {\n          var version = this.version;\n          return this.family + (version && !isSpecialCasedOS ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (name && (/\\bWOW64\\b/i.test(ua) || useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua))) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (os && /^OS X/.test(os.family) && name == 'Chrome' && parseFloat(version) >= 39) {\n        os.architecture = 64;\n      }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n       * \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function toString() {\n        return 'null';\n      }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (true) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return platform;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n      // Export for CommonJS support.\n      forOwn(platform, function (value, key) {\n        freeExports[key] = value;\n      });\n    } else {\n      // Export to the global object.\n      root.platform = platform;\n    }\n}).call(this);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"l262\")(module), __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"kthq\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = __webpack_require__(\"0Qy9\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = __webpack_require__(\"L3Vt\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = __webpack_require__(\"m8OI\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = __webpack_require__(\"X9RM\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _map = __webpack_require__(\"YZrv\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = __webpack_require__(\"BX4+\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"VOrx\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"ZKjc\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _stringify = __webpack_require__(\"HxWs\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _typeof2 = __webpack_require__(\"GyB/\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _events = __webpack_require__(\"FRpO\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = __webpack_require__(\"obon\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _uuid = __webpack_require__(\"qQO4\");\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _backoff = __webpack_require__(\"PvFw\");\n\nvar _backoff2 = _interopRequireDefault(_backoff);\n\nvar _javascriptStateMachine = __webpack_require__(\"uxiv\");\n\nvar _javascriptStateMachine2 = _interopRequireDefault(_javascriptStateMachine);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar WebSocket = global.WebSocket || global.MozWebSocket || __webpack_require__(0);\n\nvar ACTIVITY_CHECK_INTERVAL = 5000;\nvar ACTIVITY_TIMEOUT = 43000;\n\nvar INIT_TIMEOUT = 5000;\nvar UPDATE_TIMEOUT = 5000;\nvar DISCONNECTING_TIMEOUT = 3000;\n\nfunction byteLength(s) {\n  var escstr = encodeURIComponent(s);\n  var binstr = escstr.replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  });\n  return binstr.length;\n}\n\nfunction stringToUint8Array(s) {\n  var escstr = encodeURIComponent(s);\n  var binstr = escstr.replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  });\n  var ua = new Uint8Array(binstr.length);\n  Array.prototype.forEach.call(binstr, function (ch, i) {\n    ua[i] = ch.charCodeAt(0);\n  });\n  return ua;\n}\n\nfunction uint8ArrayToString(ua) {\n  var binstr = Array.prototype.map.call(ua, function (ch) {\n    return String.fromCharCode(ch);\n  }).join('');\n  var escstr = binstr.replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  });\n  return decodeURIComponent(escstr);\n}\n\nfunction getMagic(buffer) {\n  var strMagic = '';\n  var idx = 0;\n  for (; idx < buffer.length; ++idx) {\n    var chr = String.fromCharCode(buffer[idx]);\n    strMagic += chr;\n    if (chr === '\\r') {\n      idx += 2;\n      break;\n    }\n  }\n\n  var magics = strMagic.split(' ');\n  return {\n    size: idx,\n    protocol: magics[0],\n    version: magics[1],\n    headerSize: Number(magics[2])\n  };\n}\n\n/**\n * Makes sure that body is properly stringified\n */\nfunction preparePayload(payload) {\n  switch (typeof payload === 'undefined' ? 'undefined' : (0, _typeof3.default)(payload)) {\n    case 'undefined':\n      return '';\n    case 'object':\n      return (0, _stringify2.default)(payload);\n    default:\n      return payload;\n  }\n}\n\n/**\n * @param {Uint8Array} array\n * @returns {Object}\n */\nfunction getJsonObject(array) {\n  var str = uint8ArrayToString(array);\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    _logger2.default.error('failed to parse input: ', str);\n    throw e;\n  }\n}\n\n/**\n * @class TwilsockChannel\n * @classdesc Twilsock connection\n *\n * @param config\n */\n\nvar TwilsockChannel = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockChannel, _EventEmitter);\n\n  function TwilsockChannel(config) {\n    (0, _classCallCheck3.default)(this, TwilsockChannel);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockChannel.__proto__ || (0, _getPrototypeOf2.default)(TwilsockChannel)).call(this));\n\n    if (config.logLevel) {\n      _logger2.default.setLevel(config.logLevel);\n    }\n\n    var backoff = _backoff2.default.exponential({\n      randomisationFactor: 0.2,\n      initialDelay: 2 * 1000,\n      maxDelay: 2 * 60 * 1000\n    });\n\n    backoff.on('ready', function () {\n      _this._retry();\n    });\n    _this.on('reply', function (reply) {\n      _this._processReply(reply);\n    });\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _transportReady: { value: false, writable: true },\n      _disconnectedPromiseResolve: { value: null, writable: true },\n      _backoffDefault: { value: backoff },\n      _backoff: { value: backoff, writable: true },\n      _fsm: { value: null, writable: true },\n      _watchTimer: { value: null, writable: true },\n      _timestamp: { value: 0, writable: true },\n      _socket: { value: null, writable: true },\n      _activeToken: { value: null, writable: true },\n      activeToken: { enumerable: true, get: function get() {\n          return _this._activeToken;\n        } },\n      state: { enumberable: true, get: function get() {\n          return _this._getState();\n        } },\n      isConnected: { enumberable: true, get: function get() {\n          return _this._isConnected();\n        } },\n      _activeRequests: { value: new _map2.default() },\n      _disconnectingTimer: { value: null, writable: true },\n      _isDeferredUpdate: { value: false, writable: true }\n    });\n\n    _this._fsm = _javascriptStateMachine2.default.create({\n      initial: 'disconnected',\n      events: [{ name: 'userConnect', from: ['disconnected', 'rejected'], to: 'connecting' }, { name: 'userConnect', from: ['connecting', 'connected'] }, // ignore event\n      { name: 'userDisconnect', from: ['connecting', 'initialising', 'connected', 'updating', 'retrying', 'rejected', 'waitSocketClosed', 'waitOffloadSocketClosed'], to: 'disconnecting' }, { name: 'userRetry', from: ['retrying'], to: 'connecting' }, { name: 'socketConnected', from: ['connecting'], to: 'initialising' }, { name: 'socketClosed', from: ['connecting', 'initialising', 'connected', 'updating', 'error', 'waitOffloadSocketClosed'], to: 'retrying' }, { name: 'socketClosed', from: ['disconnecting'], to: 'disconnected' }, { name: 'socketClosed', from: ['waitSocketClosed'], to: 'disconnected' }, { name: 'socketClosed', from: ['rejected'], to: 'rejected' }, { name: 'initSuccess', from: ['initialising'], to: 'connected' }, { name: 'initError', from: ['initialising'], to: 'error' }, { name: 'tokenRejected', from: ['initialising', 'updating'], to: 'rejected' }, { name: 'protocolError', from: ['initialising', 'connected', 'updating'], to: 'error' }, { name: 'receiveClose', from: ['initialising', 'connected', 'updating'], to: 'waitSocketClosed' }, { name: 'receiveOffload', from: ['initialising', 'connected', 'updating'], to: 'waitOffloadSocketClosed' }, { name: 'unsupportedProtocol', from: ['initialising', 'connected', 'updating'], to: 'unsupported' }, { name: 'receiveFatalClose', from: ['initialising', 'connected', 'updating'], to: 'unsupported' }, { name: 'userUpdateToken', from: ['disconnected', 'rejected', 'connecting', 'retrying'], to: 'connecting' }, { name: 'userUpdateToken', from: ['connected'], to: 'updating' }, { name: 'updateSuccess', from: ['updating'], to: 'connected' }, { name: 'updateError', from: ['updating'], to: 'error' }],\n      callbacks: {\n        onconnecting: function onconnecting() {\n          _this._startWatchdogTimer();\n          _this._setupSocket();\n          _this.emit('connecting');\n        },\n        onenterinitialising: function onenterinitialising() {\n          _this._sendInit();\n        },\n        onleaveinitialising: function onleaveinitialising() {\n          _this._cancelInit();\n        },\n        onenterupdating: function onenterupdating() {\n          _this._sendUpdate();\n        },\n        onleaveupdating: function onleaveupdating() {\n          _this._cancelUpdate();\n        },\n        onenterretrying: function onenterretrying() {\n          _this._initRetry();\n          _this.emit('connecting');\n        },\n        onenterconnected: function onenterconnected() {\n          _this._resetBackoff();\n          _this._onConnected();\n        },\n        onuserUpdateToken: function onuserUpdateToken() {\n          _this._resetBackoff();\n        },\n        ontokenRejected: function ontokenRejected() {\n          _this._resetBackoff();\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onuserDisconnect: function onuserDisconnect() {\n          _this._closeSocket();\n        },\n        onenterdisconnecting: function onenterdisconnecting() {\n          _this._startDisconnectTimer();\n        },\n        onleavedisconnecting: function onleavedisconnecting() {\n          _this._cancelDisconnectTimer();\n        },\n        onenterwaitSocketClosed: function onenterwaitSocketClosed() {\n          _this._startDisconnectTimer();\n        },\n        onleavewaitSocketClosed: function onleavewaitSocketClosed() {\n          _this._cancelDisconnectTimer();\n        },\n        onenterwaitOffloadSocketClosed: function onenterwaitOffloadSocketClosed() {\n          _this._startDisconnectTimer();\n        },\n        onleavewaitOffloadSocketClosed: function onleavewaitOffloadSocketClosed() {\n          _this._cancelDisconnectTimer();\n        },\n        ondisconnected: function ondisconnected() {\n          _this._resetBackoff();\n          _this._finalizeSocket();\n        },\n        onreceiveClose: function onreceiveClose(event, from, to, args) {\n          _logger2.default.debug('onreceiveClose: ', args);\n          _this._onCloseReceived(args);\n        },\n        onreceiveOffload: function onreceiveOffload(event, from, to, args) {\n          _logger2.default.debug('onreceiveoffload: ', args);\n          _this._modifyBackoff(args.body);\n          _this._onCloseReceived(args.status);\n        },\n        onunsupported: function onunsupported() {\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onerror: function onerror() {\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onenterstate: function onenterstate(event, from, to) {\n          _this._changeState(event, from, to);\n        }\n      },\n      error: function error() {\n        _logger2.default.warn('FSM: unexpected transition', arguments);\n      }\n    });\n\n    return _this;\n  }\n\n  (0, _createClass3.default)(TwilsockChannel, [{\n    key: '_changeState',\n    value: function _changeState(event, from, to) {\n      var _this2 = this;\n\n      _logger2.default.debug('FSM: ', event, ': ', from, '>>', to);\n\n      this.emit('stateChanged', this.state);\n\n      if (this._isDeferredUpdate) {\n        this._isDeferredUpdate = false;\n        setTimeout(function () {\n          _this2.updateToken();\n        }, 0);\n      }\n    }\n  }, {\n    key: '_resetBackoff',\n    value: function _resetBackoff() {\n      _logger2.default.trace('_resetBackoff');\n      this._backoff = this._backoffDefault;\n      this._backoff.reset();\n    }\n  }, {\n    key: '_modifyBackoff',\n    value: function _modifyBackoff(body) {\n      var _this3 = this;\n\n      _logger2.default.trace('_modifyBackoff', body);\n\n      var backoffPolicy = body ? body.backoff_policy : null;\n\n      if (backoffPolicy) {\n        var min = backoffPolicy.reconnect_min_ms || 2 * 1000;\n        var max = backoffPolicy.reconnect_max_ms || 2 * 60 * 1000;\n\n        _logger2.default.debug('new backoff policy', min, max);\n\n        this._backoff = _backoff2.default.exponential({\n          randomisationFactor: 0.2,\n          initialDelay: min,\n          maxDelay: max\n        });\n        this._backoff.on('ready', function () {\n          _this3._retry();\n        });\n      }\n    }\n  }, {\n    key: '_startDisconnectTimer',\n    value: function _startDisconnectTimer() {\n      var _this4 = this;\n\n      _logger2.default.trace('_startDisconnectTimer');\n\n      if (this._disconnectingTimer) {\n        clearTimeout(this._disconnectingTimer);\n        this._disconnectingTimer = null;\n      }\n\n      this._disconnectingTimer = setTimeout(function () {\n        _logger2.default.debug('disconnecting is timed out');\n        _this4._closeSocket();\n      }, DISCONNECTING_TIMEOUT);\n    }\n  }, {\n    key: '_cancelDisconnectTimer',\n    value: function _cancelDisconnectTimer() {\n      _logger2.default.trace('_cancelDisconnectTimer');\n\n      if (this._disconnectingTimer) {\n        clearTimeout(this._disconnectingTimer);\n        this._disconnectingTimer = null;\n      }\n    }\n  }, {\n    key: '_processReply',\n    value: function _processReply(reply) {\n      _logger2.default.debug('receive reply:', reply);\n\n      var request = this._activeRequests.get(reply.id);\n      if (request) {\n        clearTimeout(request.timeout);\n        this._activeRequests.delete(reply.id);\n\n        switch (request.reqType) {\n          case 'init':\n            if (reply.status.code >= 200 && reply.status.code < 300) {\n              this._fsm.initSuccess(reply.body);\n            } else if (reply.status.code === 401 || reply.status.code === 403) {\n              this._fsm.tokenRejected(reply.status);\n            } else if (reply.status.code === 429) {\n              this._modifyBackoff(reply.body);\n              this._fsm.initError(reply.status);\n            } else {\n              this._fsm.initError(reply.status);\n            }\n            break;\n          case 'update':\n            if (reply.status.code >= 200 && reply.status.code < 300) {\n              this._fsm.updateSuccess(reply.body);\n            } else if (reply.status.code === 401 || reply.status.code === 403) {\n              this._fsm.tokenRejected(reply.status);\n            } else if (reply.status.code === 429) {\n              this._modifyBackoff(reply.body);\n              this._fsm.updateError(reply.status);\n            } else {\n              this._fsm.updateError(reply.status);\n            }\n            break;\n          default:\n            _logger2.default.error('unexpected reply');\n        }\n      }\n    }\n  }, {\n    key: '_storeRequest',\n    value: function _storeRequest(id, type, timeoutMs) {\n      var _this5 = this;\n\n      _logger2.default.trace('_storeRequest');\n\n      var requestDescriptor = {\n        reqType: type,\n        timeout: setTimeout(function () {\n          _logger2.default.debug('request', type, ': ', id, 'is timed out');\n\n          if (type !== 'init' && type !== 'update') {\n            _logger2.default.error('unknown request type', type);\n          }\n\n          _this5._closeSocket();\n        }, timeoutMs)\n      };\n\n      this._activeRequests.set(id, requestDescriptor);\n    }\n\n    /**\n     * Checks if connection established\n     * @public\n     */\n\n  }, {\n    key: '_isConnected',\n    value: function _isConnected() {\n      return this.state === TwilsockChannel.state.CONNECTED && this._socket && this._socket.readyState === 1;\n    }\n\n    /**\n     * @returns {Number} Connection state\n     * @public\n     */\n\n  }, {\n    key: '_getState',\n    value: function _getState() {\n      if (!this._fsm) {\n        return TwilsockChannel.state.DISCONNECTED;\n      }\n\n      switch (this._fsm.current) {\n        case 'connecting':\n        case 'initialising':\n        case 'retrying':\n        case 'error':\n          return TwilsockChannel.state.CONNECTING;\n        case 'updating':\n        case 'connected':\n          return TwilsockChannel.state.CONNECTED;\n        case 'rejected':\n          return TwilsockChannel.state.REJECTED;\n        case 'disconnecting':\n        case 'waitSocketClosed':\n        case 'waitOffloadSocketClosed':\n          return TwilsockChannel.state.DISCONNECTING;\n        case 'disconnected':\n        default:\n          return TwilsockChannel.state.DISCONNECTED;\n      }\n    }\n  }, {\n    key: '_initRetry',\n    value: function _initRetry() {\n      _logger2.default.trace('_initRetry');\n\n      this._backoff.backoff();\n    }\n  }, {\n    key: '_retry',\n    value: function _retry() {\n      _logger2.default.trace('_retry');\n\n      this._socket = null;\n      this._activeToken = null;\n      this._fsm.userRetry();\n    }\n  }, {\n    key: '_onConnected',\n    value: function _onConnected() {\n      this.emit('connected');\n    }\n  }, {\n    key: '_finalizeSocket',\n    value: function _finalizeSocket() {\n      _logger2.default.trace('_finalizeSocket');\n\n      this._stopWatchdogTimer();\n      this._onDisconnected();\n\n      if (this._disconnectedPromiseResolve) {\n        var resolve = this._disconnectedPromiseResolve;\n        this._disconnectedPromiseResolve = null;\n        resolve();\n      }\n    }\n  }, {\n    key: '_onDisconnected',\n    value: function _onDisconnected() {\n      this._socket = null;\n      this._activeToken = null;\n      this.emit('disconnected');\n    }\n  }, {\n    key: '_setupSocket',\n    value: function _setupSocket() {\n      _logger2.default.trace('_setupSocket:', this._config.token);\n\n      var self = this;\n      var uri = this._config.twilsockUri;\n\n      _logger2.default.debug('try to connect to:', uri);\n\n      var socket = new WebSocket(uri);\n      socket.binaryType = 'arraybuffer';\n\n      socket.onopen = function () {\n        _logger2.default.info('socket opened');\n        self._fsm.socketConnected();\n      };\n\n      socket.onclose = function (e) {\n        _logger2.default.info('socket closed', e);\n        self._fsm.socketClosed();\n      };\n\n      socket.onerror = function (e) {\n        _logger2.default.error('error: ', e);\n      };\n\n      socket.onmessage = function (message) {\n        _logger2.default.trace('data: ', message.data);\n\n        var fieldMargin = 2;\n\n        var dataView = new Uint8Array(message.data);\n        var magic = getMagic(dataView);\n        if (magic.protocol !== 'TWILSOCK' || magic.version !== 'V3.0') {\n          _logger2.default.error('unsupported protocol: ' + magic.protocol + ' ver ' + magic.version);\n          self._fsm.unsupportedProtocol();\n          return;\n        }\n\n        var header = null;\n        try {\n          header = getJsonObject(dataView.subarray(magic.size, magic.size + magic.headerSize));\n        } catch (e) {\n          _logger2.default.error('failed to parse message header', e, message);\n          self._fsm.protocolError();\n          return;\n        }\n        _logger2.default.trace('message received: ', header);\n\n        var payload = null;\n        if (header.payload_size > 0) {\n          var payloadOffset = fieldMargin + magic.size + magic.headerSize;\n          var payloadSize = header.payload_size;\n\n          if (!header.hasOwnProperty('payload_type') || header.payload_type.indexOf('application/json') === 0) {\n            try {\n              payload = getJsonObject(dataView.subarray(payloadOffset, payloadOffset + payloadSize));\n            } catch (e) {\n              _logger2.default.error('failed to parse message body', e, message);\n              self._fsm.protocolError();\n              return;\n            }\n          } else if (header.payload_type.indexOf('text/plain') === 0) {\n            payload = uint8ArrayToString(dataView.subarray(payloadOffset, payloadOffset + payloadSize));\n          }\n        }\n\n        self._updateActivityTimestamp();\n\n        if (header.method === 'notification') {\n          self._confirmReceiving(header);\n          self.emit('message', header.message_type, payload);\n        } else if (header.method === 'reply') {\n          self.emit('reply', {\n            id: header.id,\n            status: header.status,\n            header: header,\n            body: payload\n          });\n        } else if (header.method === 'ping') {\n          self._confirmReceiving(header);\n        } else if (header.method === 'close') {\n          _logger2.default.trace('connection close initated by server');\n          self._confirmReceiving(header);\n\n          if (header.status.code === 308) {\n            _logger2.default.info('connection has been offloaded');\n            self._fsm.receiveOffload({ status: header.status.status, body: payload });\n          } else if (header.status.code === 406) {\n            // Not acceptable message\n            _logger2.default.error('connection has been rejected because server can not parse protocol');\n            self._fsm.receiveFatalClose();\n          } else if (header.status.code === 417) {\n            // Protocol error\n            _logger2.default.info('connection has been rejected because server could not understand client`s reply');\n            self._fsm.receiveFatalClose(header.status.status);\n          } else if (header.status.code === 410) {\n            // Expired connection\n            _logger2.default.info('connection has expired');\n            self._fsm.receiveClose(header.status.status);\n          } else if (header.status.code === 401) {\n            // Authentication fail\n            _logger2.default.info('connection is not authenticate');\n            self._fsm.receiveClose(header.status.status);\n          } else {\n            _logger2.default.error('unexpected close: ', header.status);\n            // Try to reconnect\n            self._fsm.receiveOffload({ status: header.status.status, body: null });\n          }\n        }\n      };\n\n      this._activeToken = this._config.token;\n      this._socket = socket;\n    }\n  }, {\n    key: '_sendInit',\n    value: function _sendInit() {\n      _logger2.default.trace('_sendInit');\n\n      var header = {\n        id: _uuid2.default.v4(),\n        method: 'init',\n        token: this._activeToken\n      };\n\n      this._sendPacket(header);\n      this._storeRequest(header.id, 'init', INIT_TIMEOUT);\n    }\n  }, {\n    key: '_sendUpdate',\n    value: function _sendUpdate() {\n      _logger2.default.trace('_sendUpdate');\n\n      var header = {\n        id: _uuid2.default.v4(),\n        method: 'update',\n        token: this._activeToken\n      };\n\n      this._sendPacket(header);\n      this._storeRequest(header.id, 'update', UPDATE_TIMEOUT);\n    }\n  }, {\n    key: '_cancelInit',\n    value: function _cancelInit() {\n      _logger2.default.trace('_cancelInit');\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = (0, _getIterator3.default)(this._activeRequests), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = (0, _slicedToArray3.default)(_step.value, 2),\n              id = _step$value[0],\n              request = _step$value[1];\n\n          if (request && request.reqType === 'init') {\n            clearTimeout(request.timeout);\n            this._activeRequests.delete(id);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: '_cancelUpdate',\n    value: function _cancelUpdate() {\n      _logger2.default.trace('_cancelUpdate');\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = (0, _getIterator3.default)(this._activeRequests), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _step2$value = (0, _slicedToArray3.default)(_step2.value, 2),\n              id = _step2$value[0],\n              request = _step2$value[1];\n\n          if (request && request.reqType === 'update') {\n            clearTimeout(request.timeout);\n            this._activeRequests.delete(id);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n\n    /**\n     * Should be called for each message to confirm it received\n     */\n\n  }, {\n    key: '_confirmReceiving',\n    value: function _confirmReceiving(messageHeader) {\n      _logger2.default.trace('_confirmReceiving');\n\n      var header = {\n        method: 'reply',\n        id: messageHeader.id,\n        payload_type: 'application/json', // eslint-disable-line camelcase\n        status: { code: 200, status: 'OK' }\n      };\n\n      try {\n        this._sendPacket(header);\n      } catch (e) {\n        _logger2.default.debug('failed to confirm packet receiving', e);\n      }\n    }\n\n    /**\n     * Prepare binary packet and send it over the network\n     */\n\n  }, {\n    key: '_sendPacket',\n    value: function _sendPacket(header, payload) {\n      var payloadString = preparePayload(payload);\n\n      header.payload_size = byteLength(payloadString); // eslint-disable-line camelcase\n      var headerString = (0, _stringify2.default)(header) + '\\r\\n';\n      var magicString = 'TWILSOCK V3.0 ' + (byteLength(headerString) - 2) + '\\r\\n';\n\n      _logger2.default.debug('send request:', magicString + headerString + payloadString);\n\n      var message = stringToUint8Array(magicString + headerString + payloadString);\n\n      try {\n        this._socket.send(message.buffer);\n      } catch (e) {\n        _logger2.default.info('failed to send ', header, e);\n        _logger2.default.info(e.stack);\n        throw e;\n      }\n    }\n\n    /**\n     * Shutdown connection\n     * @private\n     */\n\n  }, {\n    key: '_closeSocket',\n    value: function _closeSocket() {\n      _logger2.default.trace('_closeSocket');\n\n      if (this._socket) {\n        this._socket.onopen = null;\n        this._socket.onclose = null;\n        this._socket.onerror = null;\n        this._socket.onmessage = null;\n\n        this._socket.close();\n      }\n      this._fsm.socketClosed();\n    }\n\n    /**\n     * Initiate the twilsock connection\n     * If already connected, it does nothing\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect() {\n      _logger2.default.trace('connect');\n      this._fsm.userConnect();\n    }\n\n    /**\n     * Retry the twilsock connection\n     */\n\n  }, {\n    key: 'reconnect',\n    value: function reconnect() {\n      _logger2.default.trace('reconnect');\n      this._resetBackoff();\n      this._fsm.userRetry();\n    }\n\n    /**\n     * Check twilsock is in retry state\n     */\n\n  }, {\n    key: 'isRetrying',\n    value: function isRetrying() {\n      return this._fsm.current === 'retrying';\n    }\n\n    /**\n     * Close twilsock connection\n     * If already disconnected, it does nothing\n     */\n\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      var _this6 = this;\n\n      _logger2.default.trace('disconnect');\n\n      if (this._fsm.is('disconnected')) {\n        return _promise2.default.resolve();\n      }\n\n      return new _promise2.default(function (resolve) {\n        _this6._disconnectedPromiseResolve = resolve;\n        _this6._fsm.userDisconnect();\n      });\n    }\n\n    /**\n     * Update fpa token for twilsock connection\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      _logger2.default.trace('updateToken:', this._config.token);\n\n      if (this._fsm.current === 'initialising' || this._fsm.current === 'updating' || this._fsm.current === 'waitSocketClosed' || this._fsm.current === 'waitOffloadSocketClosed') {\n\n        _logger2.default.debug('defer updateToken because of', this._fsm.current, 'is in progress');\n        this._isDeferredUpdate = true;\n        return;\n      }\n\n      this._isDeferredUpdate = false;\n\n      this._activeToken = this._config.token;\n      this._fsm.userUpdateToken();\n    }\n\n    /**\n     * Send upstream message\n     * @returns {String} id of sent message\n     */\n\n  }, {\n    key: 'sendUpstreamMessage',\n    value: function sendUpstreamMessage(address, headers, body) {\n      var id = _uuid2.default.v4();\n\n      var httpRequest = {\n        host: address.host,\n        path: address.path,\n        method: address.method\n      };\n\n      if (address.hasOwnProperty('params')) {\n        httpRequest.params = address.params;\n      }\n\n      /* eslint-disable camelcase */\n      var twilsockHeader = {\n        method: 'message',\n        id: id,\n        http_request: httpRequest\n      };\n\n      if (headers) {\n        twilsockHeader.http_request.headers = headers;\n      }\n\n      if (headers && headers.hasOwnProperty('Content-Type')) {\n        twilsockHeader.payload_type = headers['Content-Type'];\n      }\n\n      this._sendPacket(twilsockHeader, body);\n      return id;\n      /* eslint-enable camelcase */\n    }\n  }, {\n    key: 'send',\n    value: function send(header, body) {\n      header.id = header.id || _uuid2.default.v4();\n      this._sendPacket(header, body);\n      return header.id;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_onCloseReceived',\n    value: function _onCloseReceived(reason) {\n      _logger2.default.trace('_onCloseReceived');\n      _logger2.default.info('connection closed by server, reason is', reason);\n\n      // Waiting for server close connection. All others events are skipped\n      if (this._socket) {\n        this._socket.onopen = null;\n        this._socket.onerror = null;\n        this._socket.onmessage = null;\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_startWatchdogTimer',\n    value: function _startWatchdogTimer() {\n      var _this7 = this;\n\n      _logger2.default.trace('_startWatchdogTimer');\n\n      this._timestamp = Date.now();\n      this._watchTimer = setInterval(function () {\n        if (Date.now() - _this7._timestamp > ACTIVITY_TIMEOUT && _this7._socket) {\n          _this7._socket.close();\n        }\n      }, ACTIVITY_CHECK_INTERVAL);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_stopWatchdogTimer',\n    value: function _stopWatchdogTimer() {\n      _logger2.default.trace('_stopWatchdogTimer');\n\n      clearInterval(this._watchTimer);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_updateActivityTimestamp',\n    value: function _updateActivityTimestamp() {\n      _logger2.default.trace('_updateActivityTimestamp');\n\n      this._timestamp = Date.now();\n    }\n  }]);\n  return TwilsockChannel;\n}(_events2.default);\n/**\n * Enum for connection state values.\n * @readonly\n * @enum {number}\n */\n\nexports.default = TwilsockChannel;\nTwilsockChannel.state = {\n  DISCONNECTED: 'disconnected',\n  CONNECTING: 'connecting',\n  CONNECTED: 'connected',\n  DISCONNECTING: 'disconnecting',\n  ERROR: 'error',\n  REJECTED: 'rejected'\n};\n(0, _freeze2.default)(TwilsockChannel.state);\n\n(0, _freeze2.default)(TwilsockChannel);\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"ky2m\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"BtHH\");\nmodule.exports = __webpack_require__(\"zKeE\").Object.getPrototypeOf;\n\n/***/ }),\n\n/***/ \"l262\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function () {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n/***/ }),\n\n/***/ \"lmjd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _regenerator = __webpack_require__(\"aIIw\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getIterator2 = __webpack_require__(\"X9RM\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _iterator2 = __webpack_require__(\"6t7t\");\n\nvar _iterator3 = _interopRequireDefault(_iterator2);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Node = function () {\n    function Node(key, value) {\n        (0, _classCallCheck3.default)(this, Node);\n\n        this.balanceFactor = 0;\n        this.key = key;\n        this.value = value;\n        this.parent = null;\n        this.left = null;\n        this.right = null;\n    }\n\n    (0, _createClass3.default)(Node, [{\n        key: \"update\",\n        value: function update(value) {\n            this.value = value;\n        }\n    }, {\n        key: \"replace\",\n        value: function replace(target, replacement) {\n            if (!target) {\n                return;\n            }\n            if (this.left === replacement) {\n                this.left = replacement;\n            } else if (this.right === replacement) {\n                this.right = replacement;\n            }\n        }\n    }, {\n        key: \"isRoot\",\n        get: function get() {\n            return this.parent === null;\n        }\n    }, {\n        key: \"isLeaf\",\n        get: function get() {\n            return this.left === null && this.right === null;\n        }\n    }, {\n        key: \"isLeftChild\",\n        get: function get() {\n            return this.parent.left === this;\n        }\n    }]);\n    return Node;\n}();\n/**\n * @property length\n */\n\nvar TreeMap = function () {\n    function TreeMap(less, equal) {\n        (0, _classCallCheck3.default)(this, TreeMap);\n\n        this.isLessThan = less || function (x, y) {\n            return x < y;\n        };\n        this.isEqual = equal || function (x, y) {\n            return x === y;\n        };\n        this.root = null;\n        this.count = null;\n    }\n\n    (0, _createClass3.default)(TreeMap, [{\n        key: \"clear\",\n        value: function clear() {\n            this.root = null;\n            this.count = 0;\n        }\n    }, {\n        key: \"set\",\n        value: function set(key, value) {\n            var node = this.getNode(key);\n            if (node) {\n                node.update(value);\n            } else {\n                this.insert(key, value);\n            }\n            // return node;\n        }\n    }, {\n        key: \"insert\",\n        value: function insert(key, value) {\n            var node = new Node(key, value);\n            this.count++;\n            if (!this.root) {\n                this.root = node;\n                // return node;\n                return;\n            }\n            var currNode = this.root;\n            for (;;) {\n                if (this.isLessThan(key, currNode.key)) {\n                    if (currNode.left) {\n                        currNode = currNode.left;\n                    } else {\n                        currNode.left = node;\n                        break;\n                    }\n                } else {\n                    if (currNode.right) {\n                        currNode = currNode.right;\n                    } else {\n                        currNode.right = node;\n                        break;\n                    }\n                }\n            }\n            node.parent = currNode;\n            currNode = node;\n            while (currNode.parent) {\n                var parent = currNode.parent;\n                var prevBalanceFactor = parent.balanceFactor;\n                if (currNode.isLeftChild) {\n                    parent.balanceFactor++;\n                } else {\n                    parent.balanceFactor--;\n                }\n                if (Math.abs(parent.balanceFactor) < Math.abs(prevBalanceFactor)) {\n                    break;\n                }\n                if (parent.balanceFactor < -1 || parent.balanceFactor > 1) {\n                    this.rebalance(parent);\n                    break;\n                }\n                currNode = parent;\n            }\n            // return node;\n        }\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            var currentNode = this.root;\n            while (currentNode) {\n                if (this.isEqual(key, currentNode.key)) {\n                    return currentNode.value;\n                }\n                if (this.isLessThan(key, currentNode.key)) {\n                    currentNode = currentNode.left;\n                } else {\n                    currentNode = currentNode.right;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(key) {\n            // update this algorithm and remove any\n            var node = this.getNode(key);\n            if (!node || node.key !== key) {\n                return null;\n            }\n            var parent = node.parent;\n            var left = node.left;\n            var right = node.right;\n            if (!!left !== !!right) {\n                var child = left || right;\n                if (!parent && !child) {\n                    this.root = null;\n                } else if (parent && !child) {\n                    this.root = child;\n                } else {\n                    parent.replace(node, null);\n                    this.rebalance(parent);\n                }\n            } else {\n                var maxLeft = node.left;\n                while (maxLeft.right) {\n                    maxLeft = maxLeft.right;\n                }\n                if (node.left === maxLeft) {\n                    if (node.isRoot) {\n                        this.root = maxLeft;\n                        maxLeft.parent = null;\n                    } else {\n                        if (node.isLeftChild) {\n                            node.parent.left = maxLeft;\n                        } else {\n                            node.parent.right = maxLeft;\n                        }\n                        maxLeft.parent = node.parent;\n                    }\n                    maxLeft.right = node.right;\n                    maxLeft.right.parent = maxLeft;\n                    maxLeft.balanceFactor = node.balanceFactor;\n                    node = {\n                        parent: maxLeft, isLeftChild: true\n                    };\n                } else {\n                    var mlParent = maxLeft.parent;\n                    var mlLeft = maxLeft.left;\n                    mlParent.right = mlLeft;\n                    if (mlLeft) {\n                        mlLeft.parent = mlParent;\n                    }\n                    if (node.isRoot) {\n                        this.root = maxLeft;\n                        maxLeft.parent = null;\n                    } else {\n                        if (node.isLeftChild) {\n                            node.parent.left = maxLeft;\n                        } else {\n                            node.parent.right = maxLeft;\n                        }\n                        maxLeft.parent = node.parent;\n                    }\n                    maxLeft.right = node.right;\n                    maxLeft.right.parent = maxLeft;\n                    maxLeft.left = node.left;\n                    maxLeft.left.parent = maxLeft;\n                    maxLeft.balanceFactor = node.balanceFactor;\n                    node = {\n                        parent: mlParent, isLeftChild: false\n                    };\n                }\n            }\n            this.count--;\n            while (node.parent) {\n                var _parent = node.parent;\n                var prevBalanceFactor = _parent.balanceFactor;\n                if (node.isLeftChild) {\n                    _parent.balanceFactor -= 1;\n                } else {\n                    _parent.balanceFactor += 1;\n                }\n                if (Math.abs(_parent.balanceFactor) > Math.abs(prevBalanceFactor)) {\n                    if (_parent.balanceFactor < -1 || _parent.balanceFactor > 1) {\n                        this.rebalance(_parent);\n                        if (_parent.parent.balanceFactor === 0) {\n                            node = _parent.parent;\n                        } else {\n                            break;\n                        }\n                    } else {\n                        break;\n                    }\n                } else {\n                    node = _parent;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"getNode\",\n        value: function getNode(key) {\n            var currentNode = this.root;\n            while (currentNode) {\n                if (this.isEqual(key, currentNode.key)) {\n                    return currentNode;\n                }\n                if (this.isLessThan(key, currentNode.key)) {\n                    currentNode = currentNode.left;\n                } else {\n                    currentNode = currentNode.right;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"rebalance\",\n        value: function rebalance(node) {\n            if (node.balanceFactor < 0) {\n                if (node.right.balanceFactor > 0) {\n                    this.rotateRight(node.right);\n                    this.rotateLeft(node);\n                } else {\n                    this.rotateLeft(node);\n                }\n            } else if (node.balanceFactor > 0) {\n                if (node.left.balanceFactor < 0) {\n                    this.rotateLeft(node.left);\n                    this.rotateRight(node);\n                } else {\n                    this.rotateRight(node);\n                }\n            }\n        }\n    }, {\n        key: \"rotateLeft\",\n        value: function rotateLeft(pivot) {\n            var root = pivot.right;\n            pivot.right = root.left;\n            if (root.left !== null) {\n                root.left.parent = pivot;\n            }\n            root.parent = pivot.parent;\n            if (root.parent === null) {\n                this.root = root;\n            } else if (pivot.isLeftChild) {\n                root.parent.left = root;\n            } else {\n                root.parent.right = root;\n            }\n            root.left = pivot;\n            pivot.parent = root;\n            pivot.balanceFactor = pivot.balanceFactor + 1 - Math.min(root.balanceFactor, 0);\n            root.balanceFactor = root.balanceFactor + 1 - Math.max(pivot.balanceFactor, 0);\n        }\n    }, {\n        key: \"rotateRight\",\n        value: function rotateRight(pivot) {\n            var root = pivot.left;\n            pivot.left = root.right;\n            if (root.right !== null) {\n                root.right.parent = pivot;\n            }\n            root.parent = pivot.parent;\n            if (root.parent === null) {\n                this.root = root;\n            } else if (pivot.isLeftChild) {\n                root.parent.left = root;\n            } else {\n                root.parent.right = root;\n            }\n            root.right = pivot;\n            pivot.parent = root;\n            pivot.balanceFactor = pivot.balanceFactor - 1 - Math.min(root.balanceFactor, 0);\n            root.balanceFactor = root.balanceFactor - 1 - Math.max(pivot.balanceFactor, 0);\n        }\n    }, {\n        key: _iterator3.default,\n        value: _regenerator2.default.mark(function value() {\n            var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, iter;\n\n            return _regenerator2.default.wrap(function value$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _iteratorNormalCompletion = true;\n                            _didIteratorError = false;\n                            _iteratorError = undefined;\n                            _context.prev = 3;\n                            _iterator = (0, _getIterator3.default)(this.getIterator());\n\n                        case 5:\n                            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                                _context.next = 12;\n                                break;\n                            }\n\n                            iter = _step.value;\n                            _context.next = 9;\n                            return iter;\n\n                        case 9:\n                            _iteratorNormalCompletion = true;\n                            _context.next = 5;\n                            break;\n\n                        case 12:\n                            _context.next = 18;\n                            break;\n\n                        case 14:\n                            _context.prev = 14;\n                            _context.t0 = _context[\"catch\"](3);\n                            _didIteratorError = true;\n                            _iteratorError = _context.t0;\n\n                        case 18:\n                            _context.prev = 18;\n                            _context.prev = 19;\n\n                            if (!_iteratorNormalCompletion && _iterator.return) {\n                                _iterator.return();\n                            }\n\n                        case 21:\n                            _context.prev = 21;\n\n                            if (!_didIteratorError) {\n                                _context.next = 24;\n                                break;\n                            }\n\n                            throw _iteratorError;\n\n                        case 24:\n                            return _context.finish(21);\n\n                        case 25:\n                            return _context.finish(18);\n\n                        case 26:\n                        case \"end\":\n                            return _context.stop();\n                    }\n                }\n            }, value, this, [[3, 14, 18, 26], [19,, 21, 25]]);\n        })\n    }, {\n        key: \"getIterator\",\n        value: _regenerator2.default.mark(function getIterator() {\n            var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n            var currentNode, fromleft;\n            return _regenerator2.default.wrap(function getIterator$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            currentNode = this.root;\n\n                        case 1:\n                            if (!currentNode) {\n                                _context2.next = 7;\n                                break;\n                            }\n\n                            if (!(this.isEqual(key, currentNode.key) || key === null && !currentNode.left)) {\n                                _context2.next = 4;\n                                break;\n                            }\n\n                            return _context2.abrupt(\"break\", 7);\n\n                        case 4:\n                            if (this.isLessThan(key, currentNode.key) || key === null) {\n                                currentNode = currentNode.left;\n                            } else {\n                                currentNode = currentNode.right;\n                            }\n                            _context2.next = 1;\n                            break;\n\n                        case 7:\n                            if (currentNode) {\n                                _context2.next = 9;\n                                break;\n                            }\n\n                            return _context2.abrupt(\"return\", null);\n\n                        case 9:\n                            fromleft = true;\n\n                        case 10:\n                            if (!fromleft) {\n                                _context2.next = 28;\n                                break;\n                            }\n\n                            _context2.next = 13;\n                            return [currentNode.key, currentNode.value];\n\n                        case 13:\n                            fromleft = false;\n\n                            if (!currentNode.right) {\n                                _context2.next = 20;\n                                break;\n                            }\n\n                            currentNode = currentNode.right;\n                            while (currentNode.left) {\n                                currentNode = currentNode.left;\n                            }\n                            fromleft = true;\n                            _context2.next = 26;\n                            break;\n\n                        case 20:\n                            if (!currentNode.parent) {\n                                _context2.next = 25;\n                                break;\n                            }\n\n                            fromleft = currentNode.parent.left === currentNode;\n                            currentNode = currentNode.parent;\n                            _context2.next = 26;\n                            break;\n\n                        case 25:\n                            return _context2.abrupt(\"break\", 36);\n\n                        case 26:\n                            _context2.next = 34;\n                            break;\n\n                        case 28:\n                            if (!currentNode.parent) {\n                                _context2.next = 33;\n                                break;\n                            }\n\n                            fromleft = currentNode.parent.left === currentNode;\n                            currentNode = currentNode.parent;\n                            _context2.next = 34;\n                            break;\n\n                        case 33:\n                            return _context2.abrupt(\"break\", 36);\n\n                        case 34:\n                            _context2.next = 10;\n                            break;\n\n                        case 36:\n                            return _context2.abrupt(\"return\", null);\n\n                        case 37:\n                        case \"end\":\n                            return _context2.stop();\n                    }\n                }\n            }, getIterator, this);\n        })\n    }, {\n        key: \"getReverseIterator\",\n        value: _regenerator2.default.mark(function getReverseIterator() {\n            var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n            var currentNode, fromright;\n            return _regenerator2.default.wrap(function getReverseIterator$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            currentNode = this.root;\n\n                        case 1:\n                            if (!currentNode) {\n                                _context3.next = 7;\n                                break;\n                            }\n\n                            if (!(this.isEqual(key, currentNode.key) || key === null && !currentNode.right)) {\n                                _context3.next = 4;\n                                break;\n                            }\n\n                            return _context3.abrupt(\"break\", 7);\n\n                        case 4:\n                            if (!this.isLessThan(key, currentNode.key) || key === null) {\n                                currentNode = currentNode.right;\n                            } else {\n                                currentNode = currentNode.left;\n                            }\n                            _context3.next = 1;\n                            break;\n\n                        case 7:\n                            if (currentNode) {\n                                _context3.next = 9;\n                                break;\n                            }\n\n                            return _context3.abrupt(\"return\", null);\n\n                        case 9:\n                            fromright = true;\n\n                        case 10:\n                            if (!fromright) {\n                                _context3.next = 28;\n                                break;\n                            }\n\n                            _context3.next = 13;\n                            return [currentNode.key, currentNode.value];\n\n                        case 13:\n                            fromright = false;\n\n                            if (!currentNode.left) {\n                                _context3.next = 20;\n                                break;\n                            }\n\n                            currentNode = currentNode.left;\n                            while (currentNode.right) {\n                                currentNode = currentNode.right;\n                            }\n                            fromright = true;\n                            _context3.next = 26;\n                            break;\n\n                        case 20:\n                            if (!currentNode.parent) {\n                                _context3.next = 25;\n                                break;\n                            }\n\n                            fromright = currentNode.parent.right === currentNode;\n                            currentNode = currentNode.parent;\n                            _context3.next = 26;\n                            break;\n\n                        case 25:\n                            return _context3.abrupt(\"break\", 36);\n\n                        case 26:\n                            _context3.next = 34;\n                            break;\n\n                        case 28:\n                            if (!currentNode.parent) {\n                                _context3.next = 33;\n                                break;\n                            }\n\n                            fromright = currentNode.parent.right === currentNode;\n                            currentNode = currentNode.parent;\n                            _context3.next = 34;\n                            break;\n\n                        case 33:\n                            return _context3.abrupt(\"break\", 36);\n\n                        case 34:\n                            _context3.next = 10;\n                            break;\n\n                        case 36:\n                            return _context3.abrupt(\"return\", null);\n\n                        case 37:\n                        case \"end\":\n                            return _context3.stop();\n                    }\n                }\n            }, getReverseIterator, this);\n        })\n    }, {\n        key: \"size\",\n        get: function get() {\n            return this.count;\n        }\n    }]);\n    return TreeMap;\n}();\n\nexports.TreeMap = TreeMap;\n//# sourceMappingURL=tree.js.map\n\n/***/ }),\n\n/***/ \"luWe\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _from = __webpack_require__(\"VuZO\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar log = __webpack_require__(\"T51w\");\nfunction prepareLine(prefix, args) {\n    return [prefix].concat((0, _from2.default)(args));\n}\nexports.default = {\n    setLevel: function setLevel(level) {\n        log.setLevel(level);\n    },\n    trace: function trace() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        log.trace.apply(null, prepareLine('EMS T:', args));\n    },\n    debug: function debug() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        log.debug.apply(null, prepareLine('EMS D:', args));\n    },\n    info: function info() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        log.info.apply(null, prepareLine('EMS I:', args));\n    },\n    warn: function warn() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n        }\n\n        log.warn.apply(null, prepareLine('EMS W:', args));\n    },\n    error: function error() {\n        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n        }\n\n        log.error.apply(null, prepareLine('EMS E:', args));\n    }\n};\n\n/***/ }),\n\n/***/ \"lytE\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(\"MpYs\"),\n    defined = __webpack_require__(\"U72i\");\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that)),\n        i = toInteger(pos),\n        l = s.length,\n        a,\n        b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n/***/ }),\n\n/***/ \"m8OI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _isIterable2 = __webpack_require__(\"gkZy\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = __webpack_require__(\"X9RM\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n/***/ }),\n\n/***/ \"mbLO\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(\"U72i\");\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n/***/ }),\n\n/***/ \"mc9D\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n\tC-like unsigned 32 bits integers in Javascript\n\tCopyright (C) 2013, Pierre Curto\n\tMIT license\n */\n;(function (root) {\n\n\t// Local cache for typical radices\n\tvar radixPowerCache = {\n\t\t36: UINT32(Math.pow(36, 5)),\n\t\t16: UINT32(Math.pow(16, 7)),\n\t\t10: UINT32(Math.pow(10, 9)),\n\t\t2: UINT32(Math.pow(2, 30))\n\t};\n\tvar radixCache = {\n\t\t36: UINT32(36),\n\t\t16: UINT32(16),\n\t\t10: UINT32(10),\n\t\t2: UINT32(2)\n\n\t\t/**\n   *\tRepresents an unsigned 32 bits integer\n   * @constructor\n   * @param {Number|String|Number} low bits     | integer as a string \t\t | integer as a number\n   * @param {Number|Number|Undefined} high bits | radix (optional, default=10)\n   * @return \n   */\n\t};function UINT32(l, h) {\n\t\tif (!(this instanceof UINT32)) return new UINT32(l, h);\n\n\t\tthis._low = 0;\n\t\tthis._high = 0;\n\t\tthis.remainder = null;\n\t\tif (typeof h == 'undefined') return fromNumber.call(this, l);\n\n\t\tif (typeof l == 'string') return fromString.call(this, l, h);\n\n\t\tfromBits.call(this, l, h);\n\t}\n\n\t/**\n  * Set the current _UINT32_ object with its low and high bits\n  * @method fromBits\n  * @param {Number} low bits\n  * @param {Number} high bits\n  * @return ThisExpression\n  */\n\tfunction fromBits(l, h) {\n\t\tthis._low = l | 0;\n\t\tthis._high = h | 0;\n\n\t\treturn this;\n\t}\n\tUINT32.prototype.fromBits = fromBits;\n\n\t/**\n  * Set the current _UINT32_ object from a number\n  * @method fromNumber\n  * @param {Number} number\n  * @return ThisExpression\n  */\n\tfunction fromNumber(value) {\n\t\tthis._low = value & 0xFFFF;\n\t\tthis._high = value >>> 16;\n\n\t\treturn this;\n\t}\n\tUINT32.prototype.fromNumber = fromNumber;\n\n\t/**\n  * Set the current _UINT32_ object from a string\n  * @method fromString\n  * @param {String} integer as a string\n  * @param {Number} radix (optional, default=10)\n  * @return ThisExpression\n  */\n\tfunction fromString(s, radix) {\n\t\tvar value = parseInt(s, radix || 10);\n\n\t\tthis._low = value & 0xFFFF;\n\t\tthis._high = value >>> 16;\n\n\t\treturn this;\n\t}\n\tUINT32.prototype.fromString = fromString;\n\n\t/**\n  * Convert this _UINT32_ to a number\n  * @method toNumber\n  * @return {Number} the converted UINT32\n  */\n\tUINT32.prototype.toNumber = function () {\n\t\treturn this._high * 65536 + this._low;\n\t};\n\n\t/**\n  * Convert this _UINT32_ to a string\n  * @method toString\n  * @param {Number} radix (optional, default=10)\n  * @return {String} the converted UINT32\n  */\n\tUINT32.prototype.toString = function (radix) {\n\t\treturn this.toNumber().toString(radix || 10);\n\t};\n\n\t/**\n  * Add two _UINT32_. The current _UINT32_ stores the result\n  * @method add\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.add = function (other) {\n\t\tvar a00 = this._low + other._low;\n\t\tvar a16 = a00 >>> 16;\n\n\t\ta16 += this._high + other._high;\n\n\t\tthis._low = a00 & 0xFFFF;\n\t\tthis._high = a16 & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Subtract two _UINT32_. The current _UINT32_ stores the result\n  * @method subtract\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.subtract = function (other) {\n\t\t//TODO inline\n\t\treturn this.add(other.clone().negate());\n\t};\n\n\t/**\n  * Multiply two _UINT32_. The current _UINT32_ stores the result\n  * @method multiply\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.multiply = function (other) {\n\t\t/*\n  \ta = a00 + a16\n  \tb = b00 + b16\n  \ta*b = (a00 + a16)(b00 + b16)\n  \t\t= a00b00 + a00b16 + a16b00 + a16b16\n  \t\ta16b16 overflows the 32bits\n   */\n\t\tvar a16 = this._high;\n\t\tvar a00 = this._low;\n\t\tvar b16 = other._high;\n\t\tvar b00 = other._low;\n\n\t\t/* Removed to increase speed under normal circumstances (i.e. not multiplying by 0 or 1)\n  \t\t// this == 0 or other == 1: nothing to do\n  \t\tif ((a00 == 0 && a16 == 0) || (b00 == 1 && b16 == 0)) return this\n  \n  \t\t// other == 0 or this == 1: this = other\n  \t\tif ((b00 == 0 && b16 == 0) || (a00 == 1 && a16 == 0)) {\n  \t\t\tthis._low = other._low\n  \t\t\tthis._high = other._high\n  \t\t\treturn this\n  \t\t}\n  */\n\n\t\tvar c16, c00;\n\t\tc00 = a00 * b00;\n\t\tc16 = c00 >>> 16;\n\n\t\tc16 += a16 * b00;\n\t\tc16 &= 0xFFFF; // Not required but improves performance\n\t\tc16 += a00 * b16;\n\n\t\tthis._low = c00 & 0xFFFF;\n\t\tthis._high = c16 & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Divide two _UINT32_. The current _UINT32_ stores the result.\n  * The remainder is made available as the _remainder_ property on\n  * the _UINT32_ object. It can be null, meaning there are no remainder.\n  * @method div\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.div = function (other) {\n\t\tif (other._low == 0 && other._high == 0) throw Error('division by zero');\n\n\t\t// other == 1\n\t\tif (other._high == 0 && other._low == 1) {\n\t\t\tthis.remainder = new UINT32(0);\n\t\t\treturn this;\n\t\t}\n\n\t\t// other > this: 0\n\t\tif (other.gt(this)) {\n\t\t\tthis.remainder = this.clone();\n\t\t\tthis._low = 0;\n\t\t\tthis._high = 0;\n\t\t\treturn this;\n\t\t}\n\t\t// other == this: 1\n\t\tif (this.eq(other)) {\n\t\t\tthis.remainder = new UINT32(0);\n\t\t\tthis._low = 1;\n\t\t\tthis._high = 0;\n\t\t\treturn this;\n\t\t}\n\n\t\t// Shift the divisor left until it is higher than the dividend\n\t\tvar _other = other.clone();\n\t\tvar i = -1;\n\t\twhile (!this.lt(_other)) {\n\t\t\t// High bit can overflow the default 16bits\n\t\t\t// Its ok since we right shift after this loop\n\t\t\t// The overflown bit must be kept though\n\t\t\t_other.shiftLeft(1, true);\n\t\t\ti++;\n\t\t}\n\n\t\t// Set the remainder\n\t\tthis.remainder = this.clone();\n\t\t// Initialize the current result to 0\n\t\tthis._low = 0;\n\t\tthis._high = 0;\n\t\tfor (; i >= 0; i--) {\n\t\t\t_other.shiftRight(1);\n\t\t\t// If shifted divisor is smaller than the dividend\n\t\t\t// then subtract it from the dividend\n\t\t\tif (!this.remainder.lt(_other)) {\n\t\t\t\tthis.remainder.subtract(_other);\n\t\t\t\t// Update the current result\n\t\t\t\tif (i >= 16) {\n\t\t\t\t\tthis._high |= 1 << i - 16;\n\t\t\t\t} else {\n\t\t\t\t\tthis._low |= 1 << i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Negate the current _UINT32_\n  * @method negate\n  * @return ThisExpression\n  */\n\tUINT32.prototype.negate = function () {\n\t\tvar v = (~this._low & 0xFFFF) + 1;\n\t\tthis._low = v & 0xFFFF;\n\t\tthis._high = ~this._high + (v >>> 16) & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Equals\n  * @method eq\n  * @param {Object} other UINT32\n  * @return {Boolean}\n  */\n\tUINT32.prototype.equals = UINT32.prototype.eq = function (other) {\n\t\treturn this._low == other._low && this._high == other._high;\n\t};\n\n\t/**\n  * Greater than (strict)\n  * @method gt\n  * @param {Object} other UINT32\n  * @return {Boolean}\n  */\n\tUINT32.prototype.greaterThan = UINT32.prototype.gt = function (other) {\n\t\tif (this._high > other._high) return true;\n\t\tif (this._high < other._high) return false;\n\t\treturn this._low > other._low;\n\t};\n\n\t/**\n  * Less than (strict)\n  * @method lt\n  * @param {Object} other UINT32\n  * @return {Boolean}\n  */\n\tUINT32.prototype.lessThan = UINT32.prototype.lt = function (other) {\n\t\tif (this._high < other._high) return true;\n\t\tif (this._high > other._high) return false;\n\t\treturn this._low < other._low;\n\t};\n\n\t/**\n  * Bitwise OR\n  * @method or\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.or = function (other) {\n\t\tthis._low |= other._low;\n\t\tthis._high |= other._high;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise AND\n  * @method and\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.and = function (other) {\n\t\tthis._low &= other._low;\n\t\tthis._high &= other._high;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise NOT\n  * @method not\n  * @return ThisExpression\n  */\n\tUINT32.prototype.not = function () {\n\t\tthis._low = ~this._low & 0xFFFF;\n\t\tthis._high = ~this._high & 0xFFFF;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise XOR\n  * @method xor\n  * @param {Object} other UINT32\n  * @return ThisExpression\n  */\n\tUINT32.prototype.xor = function (other) {\n\t\tthis._low ^= other._low;\n\t\tthis._high ^= other._high;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise shift right\n  * @method shiftRight\n  * @param {Number} number of bits to shift\n  * @return ThisExpression\n  */\n\tUINT32.prototype.shiftRight = UINT32.prototype.shiftr = function (n) {\n\t\tif (n > 16) {\n\t\t\tthis._low = this._high >> n - 16;\n\t\t\tthis._high = 0;\n\t\t} else if (n == 16) {\n\t\t\tthis._low = this._high;\n\t\t\tthis._high = 0;\n\t\t} else {\n\t\t\tthis._low = this._low >> n | this._high << 16 - n & 0xFFFF;\n\t\t\tthis._high >>= n;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise shift left\n  * @method shiftLeft\n  * @param {Number} number of bits to shift\n  * @param {Boolean} allow overflow\n  * @return ThisExpression\n  */\n\tUINT32.prototype.shiftLeft = UINT32.prototype.shiftl = function (n, allowOverflow) {\n\t\tif (n > 16) {\n\t\t\tthis._high = this._low << n - 16;\n\t\t\tthis._low = 0;\n\t\t\tif (!allowOverflow) {\n\t\t\t\tthis._high &= 0xFFFF;\n\t\t\t}\n\t\t} else if (n == 16) {\n\t\t\tthis._high = this._low;\n\t\t\tthis._low = 0;\n\t\t} else {\n\t\t\tthis._high = this._high << n | this._low >> 16 - n;\n\t\t\tthis._low = this._low << n & 0xFFFF;\n\t\t\tif (!allowOverflow) {\n\t\t\t\t// Overflow only allowed on the high bits...\n\t\t\t\tthis._high &= 0xFFFF;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise rotate left\n  * @method rotl\n  * @param {Number} number of bits to rotate\n  * @return ThisExpression\n  */\n\tUINT32.prototype.rotateLeft = UINT32.prototype.rotl = function (n) {\n\t\tvar v = this._high << 16 | this._low;\n\t\tv = v << n | v >>> 32 - n;\n\t\tthis._low = v & 0xFFFF;\n\t\tthis._high = v >>> 16;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Bitwise rotate right\n  * @method rotr\n  * @param {Number} number of bits to rotate\n  * @return ThisExpression\n  */\n\tUINT32.prototype.rotateRight = UINT32.prototype.rotr = function (n) {\n\t\tvar v = this._high << 16 | this._low;\n\t\tv = v >>> n | v << 32 - n;\n\t\tthis._low = v & 0xFFFF;\n\t\tthis._high = v >>> 16;\n\n\t\treturn this;\n\t};\n\n\t/**\n  * Clone the current _UINT32_\n  * @method clone\n  * @return {Object} cloned UINT32\n  */\n\tUINT32.prototype.clone = function () {\n\t\treturn new UINT32(this._low, this._high);\n\t};\n\n\tif (true) {\n\t\t// AMD / RequireJS\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn UINT32;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof module != 'undefined' && module.exports) {\n\t\t// Node.js\n\t\tmodule.exports = UINT32;\n\t} else {\n\t\t// Browser\n\t\troot['UINT32'] = UINT32;\n\t}\n})(this);\n\n/***/ }),\n\n/***/ \"nFDa\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"i+u+\");\n__webpack_require__(\"COf8\");\nmodule.exports = __webpack_require__(\"ZxII\").f('iterator');\n\n/***/ }),\n\n/***/ \"o4G5\":\n/***/ (function(module, exports) {\n\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n                  var un = that === undefined;\n                  switch (args.length) {\n                                    case 0:\n                                                      return un ? fn() : fn.call(that);\n                                    case 1:\n                                                      return un ? fn(args[0]) : fn.call(that, args[0]);\n                                    case 2:\n                                                      return un ? fn(args[0], args[1]) : fn.call(that, args[0], args[1]);\n                                    case 3:\n                                                      return un ? fn(args[0], args[1], args[2]) : fn.call(that, args[0], args[1], args[2]);\n                                    case 4:\n                                                      return un ? fn(args[0], args[1], args[2], args[3]) : fn.call(that, args[0], args[1], args[2], args[3]);\n                  }return fn.apply(that, args);\n};\n\n/***/ }),\n\n/***/ \"obon\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _from = __webpack_require__(\"VuZO\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _loglevel = __webpack_require__(\"T51w\");\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction prepareLine(prefix, args) {\n  return [prefix].concat((0, _from2.default)(args));\n}\n\nexports.default = {\n  setLevel: function setLevel(level) {\n    _loglevel2.default.setLevel(level);\n  },\n\n  trace: function trace() {\n    _loglevel2.default.trace.apply(null, prepareLine('Twilsock T:', arguments));\n  },\n  debug: function debug() {\n    _loglevel2.default.debug.apply(null, prepareLine('Twilsock D:', arguments));\n  },\n  info: function info() {\n    _loglevel2.default.info.apply(null, prepareLine('Twilsock I:', arguments));\n  },\n  warn: function warn() {\n    _loglevel2.default.warn.apply(null, prepareLine('Twilsock W:', arguments));\n  },\n  error: function error() {\n    _loglevel2.default.error.apply(null, prepareLine('Twilsock E:', arguments));\n  }\n};\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"ozpD\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(\"3zRh\"),\n    call = __webpack_require__(\"hEIm\"),\n    isArrayIter = __webpack_require__(\"af0K\"),\n    anObject = __webpack_require__(\"zotD\"),\n    toLength = __webpack_require__(\"S7IM\"),\n    getIterFn = __webpack_require__(\"7AqT\"),\n    BREAK = {},\n    RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () {\n    return iterable;\n  } : getIterFn(iterable),\n      f = ctx(fn, that, entries ? 2 : 1),\n      index = 0,\n      length,\n      step,\n      iterator,\n      result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n/***/ }),\n\n/***/ \"pFSU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getKeys = __webpack_require__(\"knrM\"),\n    toIObject = __webpack_require__(\"Wyka\");\nmodule.exports = function (object, el) {\n  var O = toIObject(object),\n      keys = getKeys(O),\n      length = keys.length,\n      index = 0,\n      key;\n  while (length > index) {\n    if (O[key = keys[index++]] === el) return key;\n  }\n};\n\n/***/ }),\n\n/***/ \"peL6\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(\"yh9p\");\nvar ieee754 = __webpack_require__(\"JgNJ\");\nvar isArray = __webpack_require__(\"REa7\");\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function foo() {\n        return 42;\n      } };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n    that.length = length;\n  }\n\n  return that;\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n    return allocUnsafe(this, arg);\n  }\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n  return createBuffer(that, size);\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that;\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0;\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n      case 'hex':\n        return len >>> 1;\n      case 'base64':\n        return base64ToBytes(string).length;\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0;\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1;\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset; // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n    // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break;\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0;\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return '';\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue;\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"qEFr\":\n/***/ (function(module, exports) {\n\nmodule.exports = {\"_from\":\"twilio-sync@0.5.8\",\"_id\":\"twilio-sync@0.5.8\",\"_inBundle\":false,\"_integrity\":\"sha1-8k4W1ffyRW2J3/Vi5ZDr7h4TCNo=\",\"_location\":\"/twilio-sync\",\"_phantomChildren\":{},\"_requested\":{\"type\":\"version\",\"registry\":true,\"raw\":\"twilio-sync@0.5.8\",\"name\":\"twilio-sync\",\"escapedName\":\"twilio-sync\",\"rawSpec\":\"0.5.8\",\"saveSpec\":null,\"fetchSpec\":\"0.5.8\"},\"_requiredBy\":[\"#USER\",\"/\"],\"_resolved\":\"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.8.tgz\",\"_shasum\":\"f24e16d5f7f2456d89dff562e590ebee1e1308da\",\"_spec\":\"twilio-sync@0.5.8\",\"_where\":\"/Users/lsiegle/Desktop/web/twilio-barista\",\"author\":{\"name\":\"Twilio\"},\"browser\":\"browser/index.js\",\"bundleDependencies\":false,\"dependencies\":{\"babel-runtime\":\"^6.23.0\",\"karibu\":\"^1.0.1\",\"loglevel\":\"^1.4.1\",\"operation-retrier\":\"^1.1.2\",\"platform\":\"^1.3.3\",\"rfc6902\":\"^1.3.0\",\"twilio-ems-client\":\"^0.2.0\",\"twilio-notifications\":\"^0.4.0\",\"twilio-transport\":\"^0.1.2\",\"twilsock\":\"^0.3.0\",\"uuid\":\"^3.0.1\",\"xxhashjs\":\"^0.2.1\"},\"deprecated\":false,\"description\":\"Twilio Sync client library\",\"devDependencies\":{\"@types/chai\":\"^3.4.35\",\"@types/chai-as-promised\":\"0.0.29\",\"@types/loglevel\":\"^1.4.29\",\"@types/mocha\":\"^2.2.39\",\"@types/node\":\"^7.0.5\",\"@types/sinon\":\"^1.16.35\",\"@types/sinon-as-promised\":\"^4.0.5\",\"@types/sinon-chai\":\"^2.7.27\",\"async-test-tools\":\"^1.0.6\",\"babel-cli\":\"^6.23.0\",\"babel-plugin-add-module-exports\":\"^0.2.1\",\"babel-plugin-array-includes\":\"^2.0.3\",\"babel-plugin-transform-object-assign\":\"^6.22.0\",\"babel-plugin-transform-runtime\":\"^6.23.0\",\"babel-preset-es2015\":\"^6.22.0\",\"babelify\":\"^7.3.0\",\"backoff\":\"^2.5.0\",\"browserify\":\"^14.1.0\",\"chai\":\"^3.5.0\",\"chai-as-promised\":\"^6.0.0\",\"cheerio\":\"^0.22.0\",\"del\":\"^2.2.2\",\"gulp\":\"^3.9.1\",\"gulp-babel\":\"^6.1.2\",\"gulp-derequire\":\"^2.1.0\",\"gulp-exit\":\"0.0.2\",\"gulp-insert\":\"^0.5.0\",\"gulp-istanbul\":\"^1.1.1\",\"gulp-mocha\":\"^4.0.1\",\"gulp-rename\":\"^1.2.2\",\"gulp-replace\":\"^0.5.4\",\"gulp-tap\":\"^0.1.3\",\"gulp-tslint\":\"^7.1.0\",\"gulp-typescript\":\"^3.1.5\",\"gulp-uglify\":\"^2.0.1\",\"gulp-util\":\"^3.0.8\",\"ink-docstrap\":\"^1.3.0\",\"isparta\":\"^4.0.0\",\"jsdoc\":\"^3.4.3\",\"jsonwebtoken\":\"^7.3.0\",\"karma\":\"^1.5.0\",\"karma-browserify\":\"^5.1.1\",\"karma-browserstack-launcher\":\"^1.2.0\",\"karma-mocha\":\"^1.3.0\",\"karma-mocha-reporter\":\"^2.2.2\",\"run-sequence\":\"^1.2.2\",\"sinon\":\"^1.17.7\",\"sinon-as-promised\":\"^4.0.2\",\"sinon-chai\":\"^2.8.0\",\"ts-node\":\"^3.0.0\",\"tslint\":\"^4.5.1\",\"twilio\":\"^3.3.0-edge\",\"typescript\":\"2.2.1\",\"underscore\":\"^1.8.3\",\"vinyl-buffer\":\"^1.0.0\",\"vinyl-source-stream\":\"^1.1.0\",\"watchify\":\"^3.9.0\"},\"engines\":{\"node\":\">=6\"},\"license\":\"MIT\",\"main\":\"lib/index.js\",\"name\":\"twilio-sync\",\"scripts\":{\"prepublish\":\"gulp build\",\"test\":\"gulp unit-test\"},\"version\":\"0.5.8\"}\n\n/***/ }),\n\n/***/ \"qQO4\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar v1 = __webpack_require__(\"hVVj\");\nvar v4 = __webpack_require__(\"hYHi\");\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n/***/ }),\n\n/***/ \"qXBc\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class\n * @classdesc List item\n * Represents a data for each element in a collection\n * @alias ListItem\n * @property {Number} index  - identifier of an item\n * @property {Object} value - value of an item\n */\n\nvar ListItem = function () {\n  /**\n   * @private\n   * @constructor\n   * @param {Object} data Item descriptor\n   * @param {Number} data.index Item identifier\n   * @param {String} data.uri Item URI\n   * @param {Object} data.value Item data\n   */\n  function ListItem(data) {\n    (0, _classCallCheck3.default)(this, ListItem);\n\n    this.data = data;\n  }\n\n  (0, _createClass3.default)(ListItem, [{\n    key: \"update\",\n\n    /**\n     * Update item data\n     * @param {Number} EventId Update event id\n     * @param {String} Revision Updated item revision\n     * @param {Object} Value Updated item data\n     * @private\n     */\n    value: function update(eventId, revision, value) {\n      this.data.lastEventId = eventId;\n      this.data.revision = revision;\n      this.data.value = value;\n      return this;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      return this.data.uri;\n    }\n  }, {\n    key: \"revision\",\n    get: function get() {\n      return this.data.revision;\n    }\n  }, {\n    key: \"lastEventId\",\n    get: function get() {\n      return this.data.lastEventId;\n    }\n  }, {\n    key: \"index\",\n    get: function get() {\n      return this.data.index;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.data.value;\n    }\n  }]);\n  return ListItem;\n}();\n\nexports.ListItem = ListItem;\nexports.default = ListItem;\n\n/***/ }),\n\n/***/ \"r9SO\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = {\n\th32: __webpack_require__(\"Nf0/\"),\n\th64: __webpack_require__(\"OFjk\")\n};\n\n/***/ }),\n\n/***/ \"rMkZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(\"Wyka\"),\n    gOPN = __webpack_require__(\"Ni5N\").f,\n    toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function getWindowNames(it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n/***/ }),\n\n/***/ \"sxPs\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(\"z7R8\"),\n    createDesc = __webpack_require__(\"0WCH\"),\n    toIObject = __webpack_require__(\"Wyka\"),\n    toPrimitive = __webpack_require__(\"EKwp\"),\n    has = __webpack_require__(\"yS17\"),\n    IE8_DOM_DEFINE = __webpack_require__(\"R6c1\"),\n    gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(\"6MLN\") ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) {/* empty */}\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n/***/ }),\n\n/***/ \"tMiz\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = __webpack_require__(\"3zRh\"),\n    IObject = __webpack_require__(\"E5Ce\"),\n    toObject = __webpack_require__(\"mbLO\"),\n    toLength = __webpack_require__(\"S7IM\"),\n    asc = __webpack_require__(\"TD/Z\");\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1,\n      IS_FILTER = TYPE == 2,\n      IS_SOME = TYPE == 3,\n      IS_EVERY = TYPE == 4,\n      IS_FIND_INDEX = TYPE == 6,\n      NO_HOLES = TYPE == 5 || IS_FIND_INDEX,\n      create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this),\n        self = IObject(O),\n        f = ctx(callbackfn, that, 3),\n        length = toLength(self.length),\n        index = 0,\n        result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined,\n        val,\n        res;\n    for (; length > index; index++) {\n      if (NO_HOLES || index in self) {\n        val = self[index];\n        res = f(val, index, O);\n        if (TYPE) {\n          if (IS_MAP) result[index] = res; // map\n          else if (res) switch (TYPE) {\n              case 3:\n                return true; // some\n              case 5:\n                return val; // find\n              case 6:\n                return index; // findIndex\n              case 2:\n                result.push(val); // filter\n            } else if (IS_EVERY) return false; // every\n        }\n      }\n    }return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n/***/ }),\n\n/***/ \"tcrG\":\n/***/ (function(module, exports) {\n\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function TempCtor() {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  };\n}\n\n/***/ }),\n\n/***/ \"tuDi\":\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n\n/***/ \"tvE3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"FshL\");\nvar $Object = __webpack_require__(\"zKeE\").Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n\n/***/ }),\n\n/***/ \"uRfg\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar LIBRARY = __webpack_require__(\"1kq3\"),\n    $export = __webpack_require__(\"vSO4\"),\n    redefine = __webpack_require__(\"gojl\"),\n    hide = __webpack_require__(\"akPY\"),\n    has = __webpack_require__(\"yS17\"),\n    Iterators = __webpack_require__(\"dhak\"),\n    $iterCreate = __webpack_require__(\"b7Q2\"),\n    setToStringTag = __webpack_require__(\"11Ut\"),\n    getPrototypeOf = __webpack_require__(\"HHE0\"),\n    ITERATOR = __webpack_require__(\"Ug9I\")('iterator'),\n    BUGGY = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n,\n    FF_ITERATOR = '@@iterator',\n    KEYS = 'keys',\n    VALUES = 'values';\n\nvar returnThis = function returnThis() {\n  return this;\n};\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function getMethod(kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS:\n        return function keys() {\n          return new Constructor(this, kind);\n        };\n      case VALUES:\n        return function values() {\n          return new Constructor(this, kind);\n        };\n    }return function entries() {\n      return new Constructor(this, kind);\n    };\n  };\n  var TAG = NAME + ' Iterator',\n      DEF_VALUES = DEFAULT == VALUES,\n      VALUES_BUG = false,\n      proto = Base.prototype,\n      $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT],\n      $default = $native || getMethod(DEFAULT),\n      $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined,\n      $anyNative = NAME == 'Array' ? proto.entries || $native : $native,\n      methods,\n      key,\n      IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() {\n      return $native.call(this);\n    };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n/***/ }),\n\n/***/ \"ugM7\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(\"zotD\"),\n    get = __webpack_require__(\"7AqT\");\nmodule.exports = __webpack_require__(\"zKeE\").getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n/***/ }),\n\n/***/ \"uj5A\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\n\nvar getKeys = __webpack_require__(\"knrM\"),\n    gOPS = __webpack_require__(\"Ocr3\"),\n    pIE = __webpack_require__(\"z7R8\"),\n    toObject = __webpack_require__(\"mbLO\"),\n    IObject = __webpack_require__(\"E5Ce\"),\n    $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(\"wLcK\")(function () {\n  var A = {},\n      B = {},\n      S = Symbol(),\n      K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) {\n    B[k] = k;\n  });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) {\n  // eslint-disable-line no-unused-vars\n  var T = toObject(target),\n      aLen = arguments.length,\n      index = 1,\n      getSymbols = gOPS.f,\n      isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]),\n        keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S),\n        length = keys.length,\n        j = 0,\n        key;\n    while (length > j) {\n      if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n    }\n  }return T;\n} : $assign;\n\n/***/ }),\n\n/***/ \"uxiv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\n  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine\n\n  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors\n  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE\n\n*/\n\n(function () {\n\n  var StateMachine = {\n\n    //---------------------------------------------------------------------------\n\n    VERSION: \"2.4.0\",\n\n    //---------------------------------------------------------------------------\n\n    Result: {\n      SUCCEEDED: 1, // the event transitioned successfully from one state to another\n      NOTRANSITION: 2, // the event was successfull but no state transition was necessary\n      CANCELLED: 3, // the event was cancelled by the caller in a beforeEvent callback\n      PENDING: 4 // the event is asynchronous and the caller is in control of when the transition occurs\n    },\n\n    Error: {\n      INVALID_TRANSITION: 100, // caller tried to fire an event that was innapropriate in the current state\n      PENDING_TRANSITION: 200, // caller tried to fire an event while an async transition was still pending\n      INVALID_CALLBACK: 300 // caller provided callback function threw an exception\n    },\n\n    WILDCARD: '*',\n    ASYNC: 'async',\n\n    //---------------------------------------------------------------------------\n\n    create: function create(cfg, target) {\n\n      var initial = typeof cfg.initial == 'string' ? { state: cfg.initial } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }\n      var terminal = cfg.terminal || cfg['final'];\n      var fsm = target || cfg.target || {};\n      var events = cfg.events || [];\n      var callbacks = cfg.callbacks || {};\n      var map = {}; // track state transitions allowed for an event { event: { from: [ to ] } }\n      var transitions = {}; // track events allowed from a state            { state: [ event ] }\n\n      var add = function add(e) {\n        var from = Array.isArray(e.from) ? e.from : e.from ? [e.from] : [StateMachine.WILDCARD]; // allow 'wildcard' transition if 'from' is not specified\n        map[e.name] = map[e.name] || {};\n        for (var n = 0; n < from.length; n++) {\n          transitions[from[n]] = transitions[from[n]] || [];\n          transitions[from[n]].push(e.name);\n\n          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified\n        }\n        if (e.to) transitions[e.to] = transitions[e.to] || [];\n      };\n\n      if (initial) {\n        initial.event = initial.event || 'startup';\n        add({ name: initial.event, from: 'none', to: initial.state });\n      }\n\n      for (var n = 0; n < events.length; n++) {\n        add(events[n]);\n      }for (var name in map) {\n        if (map.hasOwnProperty(name)) fsm[name] = StateMachine.buildEvent(name, map[name]);\n      }\n\n      for (var name in callbacks) {\n        if (callbacks.hasOwnProperty(name)) fsm[name] = callbacks[name];\n      }\n\n      fsm.current = 'none';\n      fsm.is = function (state) {\n        return Array.isArray(state) ? state.indexOf(this.current) >= 0 : this.current === state;\n      };\n      fsm.can = function (event) {\n        return !this.transition && map[event] !== undefined && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD));\n      };\n      fsm.cannot = function (event) {\n        return !this.can(event);\n      };\n      fsm.transitions = function () {\n        return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || []);\n      };\n      fsm.isFinished = function () {\n        return this.is(terminal);\n      };\n      fsm.error = cfg.error || function (name, from, to, args, error, msg, e) {\n        throw e || msg;\n      }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)\n      fsm.states = function () {\n        return Object.keys(transitions).sort();\n      };\n\n      if (initial && !initial.defer) fsm[initial.event]();\n\n      return fsm;\n    },\n\n    //===========================================================================\n\n    doCallback: function doCallback(fsm, func, name, from, to, args) {\n      if (func) {\n        try {\n          return func.apply(fsm, [name, from, to].concat(args));\n        } catch (e) {\n          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, \"an exception occurred in a caller-provided callback function\", e);\n        }\n      }\n    },\n\n    beforeAnyEvent: function beforeAnyEvent(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onbeforeevent'], name, from, to, args);\n    },\n    afterAnyEvent: function afterAnyEvent(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'], name, from, to, args);\n    },\n    leaveAnyState: function leaveAnyState(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onleavestate'], name, from, to, args);\n    },\n    enterAnyState: function enterAnyState(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'], name, from, to, args);\n    },\n    changeState: function changeState(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onchangestate'], name, from, to, args);\n    },\n\n    beforeThisEvent: function beforeThisEvent(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onbefore' + name], name, from, to, args);\n    },\n    afterThisEvent: function afterThisEvent(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onafter' + name] || fsm['on' + name], name, from, to, args);\n    },\n    leaveThisState: function leaveThisState(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onleave' + from], name, from, to, args);\n    },\n    enterThisState: function enterThisState(fsm, name, from, to, args) {\n      return StateMachine.doCallback(fsm, fsm['onenter' + to] || fsm['on' + to], name, from, to, args);\n    },\n\n    beforeEvent: function beforeEvent(fsm, name, from, to, args) {\n      if (false === StateMachine.beforeThisEvent(fsm, name, from, to, args) || false === StateMachine.beforeAnyEvent(fsm, name, from, to, args)) return false;\n    },\n\n    afterEvent: function afterEvent(fsm, name, from, to, args) {\n      StateMachine.afterThisEvent(fsm, name, from, to, args);\n      StateMachine.afterAnyEvent(fsm, name, from, to, args);\n    },\n\n    leaveState: function leaveState(fsm, name, from, to, args) {\n      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),\n          general = StateMachine.leaveAnyState(fsm, name, from, to, args);\n      if (false === specific || false === general) return false;else if (StateMachine.ASYNC === specific || StateMachine.ASYNC === general) return StateMachine.ASYNC;\n    },\n\n    enterState: function enterState(fsm, name, from, to, args) {\n      StateMachine.enterThisState(fsm, name, from, to, args);\n      StateMachine.enterAnyState(fsm, name, from, to, args);\n    },\n\n    //===========================================================================\n\n    buildEvent: function buildEvent(name, map) {\n      return function () {\n\n        var from = this.current;\n        var to = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from;\n        var args = Array.prototype.slice.call(arguments); // turn arguments into pure array\n\n        if (this.transition) return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, \"event \" + name + \" inappropriate because previous transition did not complete\");\n\n        if (this.cannot(name)) return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, \"event \" + name + \" inappropriate in current state \" + this.current);\n\n        if (false === StateMachine.beforeEvent(this, name, from, to, args)) return StateMachine.Result.CANCELLED;\n\n        if (from === to) {\n          StateMachine.afterEvent(this, name, from, to, args);\n          return StateMachine.Result.NOTRANSITION;\n        }\n\n        // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)\n        var fsm = this;\n        this.transition = function () {\n          fsm.transition = null; // this method should only ever be called once\n          fsm.current = to;\n          StateMachine.enterState(fsm, name, from, to, args);\n          StateMachine.changeState(fsm, name, from, to, args);\n          StateMachine.afterEvent(fsm, name, from, to, args);\n          return StateMachine.Result.SUCCEEDED;\n        };\n        this.transition.cancel = function () {\n          // provide a way for caller to cancel async transition if desired (issue #22)\n          fsm.transition = null;\n          StateMachine.afterEvent(fsm, name, from, to, args);\n        };\n\n        var leave = StateMachine.leaveState(this, name, from, to, args);\n        if (false === leave) {\n          this.transition = null;\n          return StateMachine.Result.CANCELLED;\n        } else if (StateMachine.ASYNC === leave) {\n          return StateMachine.Result.PENDING;\n        } else {\n          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC\n            return this.transition();\n        }\n      };\n    }\n\n  }; // StateMachine\n\n  //===========================================================================\n\n  //======\n  // NODE\n  //======\n  if (true) {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = StateMachine;\n    }\n    exports.StateMachine = StateMachine;\n  }\n  //============\n  // AMD/REQUIRE\n  //============\n  else if (typeof define === 'function' && define.amd) {\n      define(function (require) {\n        return StateMachine;\n      });\n    }\n    //========\n    // BROWSER\n    //========\n    else if (typeof window !== 'undefined') {\n        window.StateMachine = StateMachine;\n      }\n      //===========\n      // WEB WORKER\n      //===========\n      else if (typeof self !== 'undefined') {\n          self.StateMachine = StateMachine;\n        }\n})();\n\n/***/ }),\n\n/***/ \"uzcO\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(\"3zRh\"),\n    invoke = __webpack_require__(\"o4G5\"),\n    html = __webpack_require__(\"ebIA\"),\n    cel = __webpack_require__(\"9kxq\"),\n    global = __webpack_require__(\"i1Q6\"),\n    process = global.process,\n    setTask = global.setImmediate,\n    clearTask = global.clearImmediate,\n    MessageChannel = global.MessageChannel,\n    counter = 0,\n    queue = {},\n    ONREADYSTATECHANGE = 'onreadystatechange',\n    defer,\n    channel,\n    port;\nvar run = function run() {\n  var id = +this;\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function listener(event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [],\n        i = 1;\n    while (arguments.length > i) {\n      args.push(arguments[i++]);\n    }queue[++counter] = function () {\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(\"ShN9\")(process) == 'process') {\n    defer = function defer(id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n    // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n    // Browsers with postMessage, skip WebWorkers\n    // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function defer(id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n    // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function defer(id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n    // Rest old browsers\n  } else {\n    defer = function defer(id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n/***/ }),\n\n/***/ \"vSO4\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(\"i1Q6\"),\n    core = __webpack_require__(\"zKeE\"),\n    ctx = __webpack_require__(\"3zRh\"),\n    hide = __webpack_require__(\"akPY\"),\n    PROTOTYPE = 'prototype';\n\nvar $export = function $export(type, name, source) {\n  var IS_FORCED = type & $export.F,\n      IS_GLOBAL = type & $export.G,\n      IS_STATIC = type & $export.S,\n      IS_PROTO = type & $export.P,\n      IS_BIND = type & $export.B,\n      IS_WRAP = type & $export.W,\n      exports = IS_GLOBAL ? core : core[name] || (core[name] = {}),\n      expProto = exports[PROTOTYPE],\n      target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE],\n      key,\n      own,\n      out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? function (C) {\n      var F = function F(a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0:\n              return new C();\n            case 1:\n              return new C(a);\n            case 2:\n              return new C(a, b);\n          }return new C(a, b, c);\n        }return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n      // make static versions for prototype methods\n    }(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1; // forced\n$export.G = 2; // global\n$export.S = 4; // static\n$export.P = 8; // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\n$export.U = 64; // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n/***/ }),\n\n/***/ \"vUQk\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar $defineProperty = __webpack_require__(\"Gfzd\"),\n    createDesc = __webpack_require__(\"0WCH\");\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));else object[index] = value;\n};\n\n/***/ }),\n\n/***/ \"vcHl\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"YD0x\");\nmodule.exports = __webpack_require__(\"zKeE\").Object.assign;\n\n/***/ }),\n\n/***/ \"vexR\":\n/***/ (function(module, exports) {\n\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object' && typeof arg.copy === 'function' && typeof arg.fill === 'function' && typeof arg.readUInt8 === 'function';\n};\n\n/***/ }),\n\n/***/ \"vvo2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"tuDi\");\n__webpack_require__(\"i+u+\");\n__webpack_require__(\"COf8\");\n__webpack_require__(\"+o4f\");\n__webpack_require__(\"XMdB\");\nmodule.exports = __webpack_require__(\"zKeE\").Set;\n\n/***/ }),\n\n/***/ \"wLcK\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n/***/ }),\n\n/***/ \"x6MZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = __webpack_require__(\"ZHvQ\"),\n    from = __webpack_require__(\"YLmZ\");\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n/***/ }),\n\n/***/ \"xwD+\":\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n/***/ }),\n\n/***/ \"y9oC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Generated by CoffeeScript 1.11.0\n(function () {\n  module.exports = __webpack_require__(\"An/8\");\n\n  if (global.window != null) {\n    global.window.Bottleneck = module.exports;\n  }\n}).call(this);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"h6ac\")))\n\n/***/ }),\n\n/***/ \"yOG5\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(\"vSO4\");\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(\"TNJq\") });\n\n/***/ }),\n\n/***/ \"yS17\":\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n/***/ }),\n\n/***/ \"ycyv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(\"knrM\"),\n    gOPS = __webpack_require__(\"Ocr3\"),\n    pIE = __webpack_require__(\"z7R8\");\nmodule.exports = function (it) {\n  var result = getKeys(it),\n      getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it),\n        isEnum = pIE.f,\n        i = 0,\n        key;\n    while (symbols.length > i) {\n      if (isEnum.call(it, key = symbols[i++])) result.push(key);\n    }\n  }return result;\n};\n\n/***/ }),\n\n/***/ \"yeEC\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"cjsw\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"yh9p\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n}\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction placeHoldersCount(b64) {\n  var len = b64.length;\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n}\n\nfunction byteLength(b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return b64.length * 3 / 4 - placeHoldersCount(b64);\n}\n\nfunction toByteArray(b64) {\n  var i, l, tmp, placeHolders, arr;\n  var len = b64.length;\n  placeHolders = placeHoldersCount(b64);\n\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0; i < l; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = tmp >> 16 & 0xFF;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[tmp << 4 & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    output += lookup[tmp >> 10];\n    output += lookup[tmp >> 4 & 0x3F];\n    output += lookup[tmp << 2 & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('');\n}\n\n/***/ }),\n\n/***/ \"z7R8\":\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n/***/ }),\n\n/***/ \"zKeE\":\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.4.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n/***/ }),\n\n/***/ \"zWNa\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperties = __webpack_require__(\"LlWG\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = __webpack_require__(\"dACh\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"jx4H\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar ERS_URI = 'https://ers.twilio.com';\nvar ERS_PATH = '/v1/registrations';\n\nvar NotificationConfig = function () {\n  function NotificationConfig(token, options) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, NotificationConfig);\n\n    options = (options || {}).Notification || {};\n    var uri = options.ersUri || ERS_URI;\n\n    (0, _defineProperties2.default)(this, {\n      _registrarUri: { value: uri + ERS_PATH },\n      _token: { value: token, writable: true },\n\n      registrarUri: { get: function get() {\n          return _this._registrarUri;\n        } },\n      token: { get: function get() {\n          return _this._token;\n        } }\n    });\n  }\n\n  (0, _createClass3.default)(NotificationConfig, [{\n    key: 'updateToken',\n    value: function updateToken(token) {\n      this._token = token;\n    }\n  }]);\n  return NotificationConfig;\n}();\n\nexports.default = NotificationConfig;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"zotD\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(\"BxvP\");\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// debug.f49f7.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"CjMg\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eb606320f235aaaa9346","\"use strict\";\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar uuid = require(\"uuid\");\nvar logger_1 = require(\"./logger\");\nvar syncerror_1 = require(\"./syncerror\");\nvar syncNetworkError_1 = require(\"./syncNetworkError\");\nvar operation_retrier_1 = require(\"operation-retrier\");\nvar twilio_transport_1 = require(\"twilio-transport\");\nvar MINIMUM_RETRY_DELAY = 4000;\nvar MAXIMUM_RETRY_DELAY = 60000;\nvar MAXIMUM_ATTEMPTS_TIME = 90000;\nvar RETRY_DELAY_RANDOMNESS = 0.2;\nfunction messageFromErrorBody(trasportError) {\n    if (trasportError.body) {\n        if (trasportError.body.message) {\n            return trasportError.body.message;\n        }\n    }\n    switch (trasportError.status) {\n        case 429:\n            return 'Throttled by server';\n        case 404:\n            return 'Not found from server';\n        default:\n            return 'Error from server';\n    }\n}\nfunction codeFromErrorBody(trasportError) {\n    if (trasportError.body) {\n        return trasportError.body.code;\n    }\n    return 0;\n}\nfunction mapTransportError(transportError) {\n    if (transportError.status === 409) {\n        return new syncNetworkError_1.SyncNetworkError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError), transportError.body);\n    } else if (transportError.status) {\n        return new syncerror_1.SyncError(messageFromErrorBody(transportError), transportError.status, codeFromErrorBody(transportError));\n    } else if (transportError instanceof twilio_transport_1.TwilsockUnavailableError) {\n        return transportError;\n    } else {\n        return new syncerror_1.SyncError(transportError.message, 0, 0);\n    }\n}\n/**\n * @classdesc Incapsulates network operations to make it possible to add some optimization/caching strategies\n */\n\nvar Network = function () {\n    function Network(productId, clientInfo, config, transport) {\n        (0, _classCallCheck3.default)(this, Network);\n\n        this.productId = productId;\n        this.clientInfo = clientInfo;\n        this.config = config;\n        this.transport = transport;\n    }\n\n    (0, _createClass3.default)(Network, [{\n        key: \"createHeaders\",\n        value: function createHeaders() {\n            return {\n                'Content-Type': 'application/json',\n                'Twilio-Sync-Client-Info': (0, _stringify2.default)(this.clientInfo),\n                'Twilio-Request-Id': 'RQ' + uuid.v4().replace(/-/g, ''),\n                'X-Twilio-Product-Id': this.productId,\n                'X-Twilio-Token': this.config.token\n            };\n        }\n    }, {\n        key: \"backoffConfig\",\n        value: function backoffConfig() {\n            return (0, _extends3.default)({ min: MINIMUM_RETRY_DELAY,\n                max: MAXIMUM_RETRY_DELAY,\n                maxAttemptsTime: MAXIMUM_ATTEMPTS_TIME,\n                randomness: RETRY_DELAY_RANDOMNESS }, this.config.backoffConfig);\n        }\n    }, {\n        key: \"executeWithRetry\",\n        value: function executeWithRetry(request) {\n            var _this = this;\n\n            var retryWhenThrottled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            return new _promise2.default(function (resolve, reject) {\n                var codesToRetryOn = [502, 503, 504];\n                if (retryWhenThrottled) {\n                    codesToRetryOn.push(429);\n                }\n                var retrier = new operation_retrier_1.default(_this.backoffConfig());\n                retrier.on('attempt', function () {\n                    request().then(function (result) {\n                        return retrier.succeeded(result);\n                    }).catch(function (err) {\n                        if (codesToRetryOn.indexOf(err.status) !== -1) {\n                            var delayOverride = parseInt(err.headers ? err.headers['Retry-After'] : null);\n                            retrier.failed(mapTransportError(err), isNaN(delayOverride) ? null : delayOverride * 1000);\n                        } else if (err.message === 'Twilsock disconnected') {\n                            // Ugly hack. We must make a proper exceptions for twilsock\n                            retrier.failed(mapTransportError(err));\n                        } else {\n                            // Fatal error\n                            retrier.removeAllListeners();\n                            retrier.cancel();\n                            reject(mapTransportError(err));\n                        }\n                    });\n                });\n                retrier.on('succeeded', function (result) {\n                    resolve(result);\n                });\n                retrier.on('cancelled', function (err) {\n                    return reject(mapTransportError(err));\n                });\n                retrier.on('failed', function (err) {\n                    return reject(mapTransportError(err));\n                });\n                retrier.start();\n            });\n        }\n        /**\n         * Make a GET request by given URI\n         * @Returns Promise<Response> Result of successful get request\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(uri) {\n            var _this2 = this;\n\n            var headers = this.createHeaders();\n            logger_1.default.debug('GET', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this2.transport.get(uri, headers);\n            }, true);\n        }\n    }, {\n        key: \"post\",\n        value: function post(uri, body, revision, twilsockOnly) {\n            var _this3 = this;\n\n            var headers = this.createHeaders();\n            if (typeof revision !== 'undefined' && revision !== null) {\n                headers['If-Match'] = revision;\n            }\n            logger_1.default.debug('POST', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this3.transport.post(uri, headers, body, twilsockOnly);\n            }, false);\n        }\n    }, {\n        key: \"put\",\n        value: function put(uri, body, revision) {\n            var _this4 = this;\n\n            var headers = this.createHeaders();\n            if (typeof revision !== 'undefined' && revision !== null) {\n                headers['If-Match'] = revision;\n            }\n            logger_1.default.debug('PUT', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this4.transport.put(uri, headers, body);\n            }, false);\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(uri) {\n            var _this5 = this;\n\n            var headers = this.createHeaders();\n            logger_1.default.debug('DELETE', uri, 'ID:', headers['Twilio-Request-Id']);\n            return this.executeWithRetry(function () {\n                return _this5.transport.delete(uri, headers);\n            }, false);\n        }\n    }]);\n    return Network;\n}();\n\nexports.Network = Network;\nexports.default = Network;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/network.js","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.set.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CDS_URI = 'https://cds.twilio.com';\nvar SUBSCRIPTIONS_PATH = '/v4/Subscriptions';\nvar MAPS_PATH = '/v3/Maps';\nvar LISTS_PATH = '/v3/Lists';\nvar DOCUMENTS_PATH = '/v3/Documents';\nfunction getWithDefault(container, key, defaultValue) {\n    if (container && typeof container[key] !== 'undefined') {\n        return container[key];\n    }\n    return defaultValue;\n}\n/**\n * Settings container for Sync library\n */\n\nvar Configuration = function () {\n    /**\n     * @param {String} token - authentication token\n     */\n    function Configuration(token, options) {\n        (0, _classCallCheck3.default)(this, Configuration);\n\n        options = options || {};\n        options = options.Sync || options.DataSync || {};\n        var baseUri = options.cdsUri || CDS_URI;\n        this._token = token;\n        this.settings = {\n            subscriptionsUri: baseUri + SUBSCRIPTIONS_PATH,\n            documentsUri: baseUri + DOCUMENTS_PATH,\n            listsUri: baseUri + LISTS_PATH,\n            mapsUri: baseUri + MAPS_PATH,\n            sessionStorageEnabled: getWithDefault(options, 'enableSessionStorage', true)\n        };\n    }\n\n    (0, _createClass3.default)(Configuration, [{\n        key: \"updateToken\",\n        value: function updateToken(token) {\n            this._token = token;\n        }\n    }, {\n        key: \"token\",\n        get: function get() {\n            return this._token;\n        }\n    }, {\n        key: \"subscriptionsUri\",\n        get: function get() {\n            return this.settings.subscriptionsUri;\n        }\n    }, {\n        key: \"documentsUri\",\n        get: function get() {\n            return this.settings.documentsUri;\n        }\n    }, {\n        key: \"listsUri\",\n        get: function get() {\n            return this.settings.listsUri;\n        }\n    }, {\n        key: \"mapsUri\",\n        get: function get() {\n            return this.settings.mapsUri;\n        }\n    }, {\n        key: \"backoffConfig\",\n        get: function get() {\n            return this.settings.backoffConfig || {};\n        }\n    }, {\n        key: \"sessionStorageEnabled\",\n        get: function get() {\n            return this.settings.sessionStorageEnabled;\n        }\n    }]);\n    return Configuration;\n}();\n\nexports.Configuration = Configuration;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/configuration.js","\"use strict\";\n\nvar _freeze = require(\"babel-runtime/core-js/object/freeze\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar RetryingQueue = function () {\n    function RetryingQueue() {\n        (0, _classCallCheck3.default)(this, RetryingQueue);\n\n        this.queue = new Array();\n        this.isActive = false;\n    }\n\n    (0, _createClass3.default)(RetryingQueue, [{\n        key: \"wakeupQueue\",\n        value: function wakeupQueue() {\n            var _this = this;\n\n            if (!this.isActive && this.queue.length > 0) {\n                this.isActive = true;\n                setTimeout(function () {\n                    return _this.executeTask(_this.queue[0]);\n                }, 0);\n            }\n        }\n    }, {\n        key: \"pickNext\",\n        value: function pickNext() {\n            var _this2 = this;\n\n            this.queue.shift();\n            if (this.queue.length === 0) {\n                this.isActive = false;\n                return;\n            }\n            setTimeout(function () {\n                return _this2.executeTask(_this2.queue[0]);\n            }, 0);\n        }\n    }, {\n        key: \"pickSame\",\n        value: function pickSame(arg) {\n            var _this3 = this;\n\n            this.queue[0].arg = arg;\n            setTimeout(function () {\n                return _this3.executeTask(_this3.queue[0]);\n            }, 0);\n        }\n    }, {\n        key: \"executeTask\",\n        value: function executeTask(task) {\n            var _this4 = this;\n\n            task.task(task.context, task.arg).then(function (result) {\n                _this4.pickNext();\n                task.resolve(result);\n            }).catch(function (error) {\n                try {\n                    if (task.handle) {\n                        task.handle(error).then(function (result) {\n                            return _this4.pickSame(result);\n                        }).catch(task.reject);\n                    } else {\n                        throw error;\n                    }\n                } catch (e) {\n                    task.reject(error);\n                }\n            });\n        }\n    }, {\n        key: \"add\",\n        value: function add(task, context, arg, errorHandler) {\n            var _this5 = this;\n\n            return new _promise2.default(function (resolve, reject) {\n                _this5.queue.push({\n                    task: task,\n                    context: context,\n                    arg: arg,\n                    handle: errorHandler,\n                    resolve: resolve,\n                    reject: reject\n                });\n                _this5.wakeupQueue();\n            });\n        }\n    }]);\n    return RetryingQueue;\n}();\n\nexports.RetryingQueue = RetryingQueue;\n(0, _freeze2.default)(RetryingQueue);\nexports.default = RetryingQueue;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/retryingqueue.js","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_shared-key.js","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/freeze.js","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/freeze.js","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_property-desc.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _client = require('./client');\n\nvar _client2 = _interopRequireDefault(_client);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _client2.default;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/index.js","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_set-to-string-tag.js","module.exports = true;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_library.js","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es7.map.to-json.js","require('./_wks-define')('observable');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es7.symbol.observable.js","\"use strict\";\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Deferred = function () {\n    function Deferred() {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Deferred);\n\n        this._promise = new _promise2.default(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n\n    (0, _createClass3.default)(Deferred, [{\n        key: \"update\",\n        value: function update(value) {\n            this._resolve(value);\n        }\n    }, {\n        key: \"set\",\n        value: function set(value) {\n            this.current = value;\n            this._resolve(value);\n        }\n    }, {\n        key: \"fail\",\n        value: function fail(e) {\n            this._reject(e);\n        }\n    }, {\n        key: \"promise\",\n        get: function get() {\n            return this._promise;\n        }\n    }]);\n    return Deferred;\n}();\n\nexports.Deferred = Deferred;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/utils/deferred.js","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/define-property.js","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_ctx.js","\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar logger_1 = require(\"./logger\");\nvar entity_1 = require(\"./entity\");\nvar retryingqueue_1 = require(\"./retryingqueue\");\nvar listitem_1 = require(\"./listitem\");\nvar paginator_1 = require(\"./paginator\");\nvar cache_1 = require(\"./cache\");\n/**\n * @alias List\n * @classdesc List collection to store an ordered list of values\n * @property {String} sid - List unique id\n * @property {String} uniqueName - List unique name\n *\n * @fires List#itemAdded\n * @fires List#itemAddedRemotely\n * @fires List#itemUpdated\n * @fires List#itemUpdatedRemotely\n * @fires List#itemRemoved\n * @fires List#itemRemovedRemotely\n * @fires List#collectionRemoved\n * @fires List#collectionRemovedRemotely\n */\n\nvar SyncList = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncList, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncList(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncList);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncList.__proto__ || (0, _getPrototypeOf2.default)(SyncList)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.cache = new cache_1.Cache();\n        _this.descriptor = descriptor;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncList, [{\n        key: \"__set\",\n        value: function __set(location, param) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var response;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.services.network.post(location, { data: param.data }, param.revision);\n\n                            case 2:\n                                response = _context.sent;\n\n                                response.body.data = param.data;\n                                return _context.abrupt(\"return\", response.body);\n\n                            case 5:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Add element to the List\n         * @param {Object} value - value to add\n         * @returns {Promise<Item>} A new item\n         */\n\n    }, {\n        key: \"push\",\n        value: function push(value) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var response, index, item;\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return this.services.network.post(this.links.items, { data: value });\n\n                            case 2:\n                                response = _context2.sent;\n                                index = Number(response.body.index);\n                                item = this.cache.store(index, new listitem_1.ListItem({ index: index,\n                                    revision: response.body.revision,\n                                    lastEventId: response.body.last_event_id,\n                                    uri: response.body.url,\n                                    value: value }), response.body.last_event_id);\n\n                                this.emit('itemAdded', item, true);\n                                return _context2.abrupt(\"return\", item);\n\n                            case 7:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Update existing item in a List\n         * @param {Number} index - index in the List\n         * @param {Object} value - value to set\n         * If true, promise will be rejected if value was remotely modified\n         * @returns {Promise<Item>} - A new element\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(index, value) {\n            return this._actualSet(index, value);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(index, value, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                var _this2 = this;\n\n                var item, updatedItemDescriptor, _resolver;\n\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context4.sent;\n                                updatedItemDescriptor = void 0;\n\n                                if (resolver) {\n                                    _context4.next = 10;\n                                    break;\n                                }\n\n                                _context4.next = 7;\n                                return this.__set(item.uri, { data: value, revision: undefined });\n\n                            case 7:\n                                updatedItemDescriptor = _context4.sent;\n                                _context4.next = 14;\n                                break;\n\n                            case 10:\n                                _resolver = function _resolver(err) {\n                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                                        var refreshedItem;\n                                        return _regenerator2.default.wrap(function _callee3$(_context3) {\n                                            while (1) {\n                                                switch (_context3.prev = _context3.next) {\n                                                    case 0:\n                                                        if (!(err.status === 412)) {\n                                                            _context3.next = 5;\n                                                            break;\n                                                        }\n\n                                                        _context3.next = 3;\n                                                        return this._get(item.index);\n\n                                                    case 3:\n                                                        refreshedItem = _context3.sent;\n                                                        return _context3.abrupt(\"return\", {\n                                                            revision: refreshedItem.revision,\n                                                            data: resolver(utils_1.deepClone(refreshedItem.value))\n                                                        });\n\n                                                    case 5:\n                                                        throw err;\n\n                                                    case 6:\n                                                    case \"end\":\n                                                        return _context3.stop();\n                                                }\n                                            }\n                                        }, _callee3, this);\n                                    }));\n                                };\n\n                                _context4.next = 13;\n                                return this.actionQueue.add(this.__set.bind(this), item.uri, { revision: item.revision, data: value }, _resolver);\n\n                            case 13:\n                                updatedItemDescriptor = _context4.sent;\n\n                            case 14:\n                                item = this.cache.get(item.index);\n                                if (item && updatedItemDescriptor.last_event_id > item.lastEventId) {\n                                    item.update(updatedItemDescriptor.last_event_id, updatedItemDescriptor.revision, updatedItemDescriptor.data);\n                                    this.emit('itemUpdated', item, true);\n                                }\n                                return _context4.abrupt(\"return\", item);\n\n                            case 17:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n        /**\n         * Updates the existing item value\n         *\n         * @param {Number} Index Item key\n         * @param {List~Mutator} Mutator Function performing value mutation\n         * @returns {Promise}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(index, mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                var item;\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                _context5.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context5.sent;\n                                return _context5.abrupt(\"return\", this._actualSet(index, mutator(utils_1.deepClone(item.value)), mutator));\n\n                            case 4:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n        /**\n         * @param {Number} Index Item key\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Item>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(index, obj) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                return _context6.abrupt(\"return\", this.mutate(index, function (remote) {\n                                    return (0, _extends3.default)(remote, obj);\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this);\n            }));\n        }\n        /**\n         * Remove List item by index\n         * @param {Number} index - item index\n         * @returns Promise to remove, which may fail\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var item, response;\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                _context7.next = 2;\n                                return this.get(index);\n\n                            case 2:\n                                item = _context7.sent;\n                                _context7.next = 5;\n                                return this.services.network.delete(item.uri);\n\n                            case 5:\n                                response = _context7.sent;\n\n                                this.cache.delete(index, response.body.last_event_id);\n                                this.emit('itemRemoved', index, true);\n\n                            case 8:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this);\n            }));\n        }\n        /**\n         * Retrieve item by index\n         * @param {Number} index - item index\n         * @returns {Promise<Item>}\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var cachedItem;\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                cachedItem = this.cache.get(index);\n\n                                if (!cachedItem) {\n                                    _context8.next = 3;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", cachedItem);\n\n                            case 3:\n                                return _context8.abrupt(\"return\", this._get(index));\n\n                            case 4:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this);\n            }));\n        }\n    }, {\n        key: \"_get\",\n        value: function _get(index) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                var result;\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                _context9.next = 2;\n                                return this.queryItems({ index: index });\n\n                            case 2:\n                                result = _context9.sent;\n\n                                if (!(result.items.length < 1)) {\n                                    _context9.next = 5;\n                                    break;\n                                }\n\n                                throw new Error('No item with index ' + index + ' found');\n\n                            case 5:\n                                return _context9.abrupt(\"return\", result.items[0]);\n\n                            case 6:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Query items from the List\n         * @private\n         */\n\n    }, {\n        key: \"queryItems\",\n        value: function queryItems(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var _this3 = this;\n\n                var url, response, items, meta;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                arg = arg || {};\n                                url = new utils_1.UriBuilder(this.links.items).queryParam('From', arg.from).queryParam('PageSize', arg.limit).queryParam('Index', arg.index).queryParam('PageToken', arg.pageToken).queryParam('Order', arg.order).build();\n                                _context10.next = 4;\n                                return this.services.network.get(url);\n\n                            case 4:\n                                response = _context10.sent;\n                                items = response.body.items.map(function (el) {\n                                    var itemInCache = _this3.cache.get(el.index);\n                                    if (itemInCache) {\n                                        _this3._handleItemUpdated(el.index, el.url, el.last_event_id, el.revision, el.data);\n                                    } else {\n                                        _this3.cache.store(Number(el.index), new listitem_1.ListItem({ index: Number(el.index),\n                                            uri: el.url,\n                                            revision: el.revision,\n                                            lastEventId: el.last_event_id,\n                                            value: el.data }), el.last_event_id);\n                                    }\n                                    return _this3.cache.get(el.index);\n                                });\n                                meta = response.body.meta;\n                                return _context10.abrupt(\"return\", new paginator_1.Paginator(items, function (pageToken) {\n                                    return _this3.queryItems({ pageToken: pageToken });\n                                }, meta.previous_token, meta.next_token));\n\n                            case 8:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n        /**\n         * Query items from List\n         * @param {Object} args Arguments for items query\n         * @param {String} args.from Item, which should be used as an anchor. If undefined, starts from the beginning or end depending on args.order\n         * @param {Number} args.pageSize Results page size\n         * @param {String} args.order Order of results, should be 'asc' or 'desc'\n         * @returns {Promise<Paginator>}\n         * @public\n         */\n\n    }, {\n        key: \"getItems\",\n        value: function getItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {\n                return _regenerator2.default.wrap(function _callee11$(_context11) {\n                    while (1) {\n                        switch (_context11.prev = _context11.next) {\n                            case 0:\n                                args = args || {};\n                                args.limit = args.pageSize || args.limit || 50;\n                                args.order = args.order || 'asc';\n                                return _context11.abrupt(\"return\", this.queryItems(args));\n\n                            case 4:\n                            case \"end\":\n                                return _context11.stop();\n                        }\n                    }\n                }, _callee11, this);\n            }));\n        }\n        /**\n         * @return {Promise<Object>} Context of List\n         * @private\n         */\n\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {\n                var response;\n                return _regenerator2.default.wrap(function _callee12$(_context12) {\n                    while (1) {\n                        switch (_context12.prev = _context12.next) {\n                            case 0:\n                                if (!this.context) {\n                                    _context12.next = 2;\n                                    break;\n                                }\n\n                                return _context12.abrupt(\"return\", this.context);\n\n                            case 2:\n                                _context12.next = 4;\n                                return this.services.network.get(this.links.context);\n\n                            case 4:\n                                response = _context12.sent;\n\n                                this.context = response.body.data;\n                                return _context12.abrupt(\"return\", this.context);\n\n                            case 7:\n                            case \"end\":\n                                return _context12.stop();\n                        }\n                    }\n                }, _callee12, this);\n            }));\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"updateContext\",\n        value: function updateContext(context) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {\n                return _regenerator2.default.wrap(function _callee13$(_context13) {\n                    while (1) {\n                        switch (_context13.prev = _context13.next) {\n                            case 0:\n                                _context13.prev = 0;\n                                _context13.next = 3;\n                                return this.services.network.post(this.links.context, { data: context });\n\n                            case 3:\n                                this.context = context;\n                                this.emit('contextUpdated', context, true);\n                                return _context13.abrupt(\"return\", this);\n\n                            case 8:\n                                _context13.prev = 8;\n                                _context13.t0 = _context13[\"catch\"](0);\n\n                                logger_1.default.error('Failed to update context', _context13.t0);\n                                throw _context13.t0;\n\n                            case 12:\n                            case \"end\":\n                                return _context13.stop();\n                        }\n                    }\n                }, _callee13, this, [[0, 8]]);\n            }));\n        }\n        /**\n         * Remove list from service. It will be impossible to restore it.\n         * @return {Promise} Promise to delete the collection\n         * @public\n         */\n\n    }, {\n        key: \"removeList\",\n        value: function removeList() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee14() {\n                return _regenerator2.default.wrap(function _callee14$(_context14) {\n                    while (1) {\n                        switch (_context14.prev = _context14.next) {\n                            case 0:\n                                _context14.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context14.stop();\n                        }\n                    }\n                }, _callee14, this);\n            }));\n        }\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            // Should also do some cleanup here\n            this.emit('collectionRemoved', locally);\n            if (!locally) {\n                this.emit('collectionRemovedRemotely');\n            }\n        }\n    }, {\n        key: \"shouldIgnoreEvent\",\n        value: function shouldIgnoreEvent(key, eventId) {\n            return this.cache.isKnown(key, eventId);\n        }\n        /**\n         * Handle update, which came from the server\n         * @private\n         */\n\n    }, {\n        key: \"_update\",\n        value: function _update(update, isStrictlyOrdered) {\n            var itemIndex = Number(update.item_index);\n            switch (update.type) {\n                case 'list_item_added':\n                    {\n                        this._handleItemAdded(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'list_item_updated':\n                    {\n                        this._handleItemUpdated(itemIndex, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'list_item_removed':\n                    {\n                        this._handleItemRemoved(itemIndex, update.id);\n                    }\n                    break;\n                case 'list_context_updated':\n                    {\n                        this._handleContextUpdate(update.context_data, update.id);\n                    }\n                    break;\n                case 'list_removed':\n                    {\n                        this.onRemoved(false);\n                    }\n                    break;\n            }\n            if (isStrictlyOrdered) {\n                this._advanceLastEventId(update.id, update.list_revision);\n            }\n        }\n    }, {\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {\n            if (this.lastEventId < eventId) {\n                this.descriptor.last_event_id = eventId;\n                if (revision) {\n                    this.descriptor.revision = revision;\n                }\n            }\n        }\n        /**\n         * Handle item insertion event, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemAdded\",\n        value: function _handleItemAdded(index, uri, eventId, revision, value) {\n            if (!this.cache.isKnown(index, eventId)) {\n                var item = new listitem_1.ListItem({ index: index, uri: uri, lastEventId: eventId, revision: revision, value: value });\n                this.cache.store(index, item, eventId);\n                this.emit('itemAdded', item, false);\n                this.emit('itemAddedRemotely', item);\n            }\n        }\n        /**\n         * Handle new value of item, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemUpdated\",\n        value: function _handleItemUpdated(index, uri, eventId, revision, value) {\n            var item = this.cache.get(index);\n            if (!item && !this.shouldIgnoreEvent(index, eventId)) {\n                item = this.cache.store(index, new listitem_1.ListItem({ index: index, uri: uri, lastEventId: eventId, revision: revision, value: value }), eventId);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            } else if (item && eventId > item.lastEventId) {\n                item.update(eventId, revision, value);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            }\n        }\n    }, {\n        key: \"_handleItemRemoved\",\n        value: function _handleItemRemoved(index, eventId) {\n            this.cache.delete(index, eventId);\n            this.emit('itemRemoved', index, false);\n            this.emit('itemRemovedRemotely', index);\n        }\n    }, {\n        key: \"_handleContextUpdate\",\n        value: function _handleContextUpdate(data, eventId) {\n            if (this.lastEventId < eventId) {\n                this.context = data;\n                this.emit('contextUpdated', data, false);\n                this.emit('contextUpdatedRemotely', data);\n            }\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"links\",\n        get: function get() {\n            return this.descriptor.links;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'list';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'list';\n        }\n    }]);\n    return SyncList;\n}(entity_1.SyncEntity);\n\nexports.SyncList = SyncList;\nexports.default = SyncList;\n/**\n * Applies a transformation to the item value\n * @callback List~Mutator\n * @param {Object} data current value of an item\n * @return {Object} Modified data for an item\n */\n/**\n * Fired when item is added to the List\n * @event List#itemAdded\n * @type {Item} Added item\n */\n/**\n * Fired when item is added to List by remote actor\n * @event List#itemAddedRemotely\n * @type {Item} Added item\n */\n/**\n * Fired when item is updated\n * @event List#itemUpdated\n * @type {Item} Updated item\n */\n/**\n * Fired when item is updated by remote actor\n * @event List#itemUpdatedRemotely\n * @type {Item} Updated item\n */\n/**\n * Fired when item is removed from the List\n * @event List#itemRemoved\n * @type {String} item key\n */\n/**\n * Fired when item is removed from the List by remote actor\n * @event List#itemRemovedRemotely\n * @type {String} item key\n */\n/**\n * Fired when List is removed from server\n * @event List#collectionRemoved\n */\n/**\n * Fired when List is removed from server by remote actor\n * @event List#collectionRemovedRemotely\n */\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/synclist.js","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_descriptors.js","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/symbol/iterator.js","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/core.get-iterator-method.js","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/set.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TWILSOCK_URI = 'wss://tsock.twilio.com';\nvar TWILSOCK_PATH = '/v3/wsconnect';\n\n/**\n * @param {String} token - authentication token\n * @param {Object} options - options to override defaults\n *\n * @class TwilsockConfig\n * @classdesc Settings container for the Twilsock client library\n */\n\nvar TwilsockConfig = function () {\n  function TwilsockConfig(token, options) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, TwilsockConfig);\n\n    options = options || {};\n    var _options = options.Twilsock || {};\n    var twilsockUri = _options.uri || options.wsServer || TWILSOCK_URI;\n\n    (0, _defineProperties2.default)(this, {\n      _twilsockWsHost: { value: twilsockUri + TWILSOCK_PATH },\n      _token: { value: token, writable: true },\n\n      twilsockUri: { get: function get() {\n          return _this._twilsockWsHost;\n        } },\n      token: { get: function get() {\n          return _this._token;\n        } }\n    });\n  }\n\n  (0, _createClass3.default)(TwilsockConfig, [{\n    key: 'updateToken',\n    value: function updateToken(token) {\n      this._token = token;\n    }\n  }]);\n  return TwilsockConfig;\n}();\n\nexports.default = TwilsockConfig;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/configuration.js","var isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_array-species-constructor.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = require('babel-runtime/core-js/object/freeze');\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _set = require('babel-runtime/core-js/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _map = require('babel-runtime/core-js/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _configuration = require('./configuration');\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nvar _twilsock = require('./twilsock');\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nvar _packetinterface = require('./packetinterface');\n\nvar _packetinterface2 = _interopRequireDefault(_packetinterface);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n * @alias Twilsock\n * @classdesc Client library for the Twilsock protocol\n * @property {Boolean} connected Indicates the twilsock connection state\n *\n * @constructor\n * @param {string} Token Twilio access token\n */\nvar TwilsockClient = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockClient, _EventEmitter);\n\n  function TwilsockClient(token, options) {\n    (0, _classCallCheck3.default)(this, TwilsockClient);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockClient.__proto__ || (0, _getPrototypeOf2.default)(TwilsockClient)).call(this));\n\n    options = options || {};\n    options.logLevel = options.logLevel || 'error';\n    _logger2.default.setLevel(options.logLevel);\n\n    var config = new _configuration2.default(token, options);\n    var twilsock = new _twilsock2.default(config);\n    var packetInterface = new _packetinterface2.default(twilsock);\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _socket: { value: twilsock },\n      _packet: { value: packetInterface },\n      _registrations: { value: new _map2.default() },\n      _registrationsInProgress: { value: new _map2.default() },\n\n      isConnected: { get: function get() {\n          return _this._socket.isConnected;\n        } },\n      connected: { get: function get() {\n          return _this._socket.isConnected;\n        } },\n      state: { get: function get() {\n          return _this._socket.state;\n        } }\n    });\n\n    _this._socket.on('message', function (type, message) {\n      return setTimeout(function () {\n        _this.emit('message', type, message);\n      }, 0);\n    });\n    _this._socket.on('connected', function () {\n      return _this._updateRegistrations();\n    });\n    _this._socket.on('connected', function () {\n      return _this.emit('connected');\n    });\n    _this._socket.on('disconnected', function () {\n      return _this.emit('disconnected');\n    });\n    _this._socket.on('stateChanged', function (state) {\n      return _this.emit('stateChanged', state);\n    });\n\n    if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n      window.addEventListener('online', function () {\n        _logger2.default.debug('Got online');\n        if (twilsock.isRetrying()) {\n          twilsock.reconnect();\n        }\n      });\n    }\n    return _this;\n  }\n\n  /**\n   * Send a message\n   * @param {Twilsock#Message} message Message structure with header, body and remote address\n   * @public\n   * @returns {Promise<Result>} Result from remote side\n   */\n\n\n  (0, _createClass3.default)(TwilsockClient, [{\n    key: 'send',\n    value: function send(message) {\n      return this._packet.send(message.to, message.headers, message.body);\n    }\n\n    /**\n     * Update token\n     * @param {String} token\n     * @public\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken(token) {\n      _logger2.default.info('updateToken');\n      if (this._config.token === token) {\n        return _promise2.default.resolve();\n      }\n\n      this._config.updateToken(token);\n      this._socket.updateToken();\n\n      return _promise2.default.resolve();\n    }\n  }, {\n    key: '_updateRegistration',\n    value: function _updateRegistration(contextId, context) {\n      var _this2 = this;\n\n      _logger2.default.info('update registration for context', contextId);\n      var registrationAttempts = this._registrationsInProgress.get(contextId);\n      if (!registrationAttempts) {\n        registrationAttempts = new _set2.default();\n        this._registrationsInProgress.set(contextId, registrationAttempts);\n      }\n\n      var attemptId = _uuid2.default.v4();\n      registrationAttempts.add(attemptId);\n\n      return this._packet.putNotificationContext(contextId, context).then(function () {\n        _logger2.default.info('registration attempt succeeded for context', context);\n        registrationAttempts.delete(attemptId);\n\n        // Hack for broken react-native polyfill\n        // Remove when not needed anymore\n        var attemptsSize = typeof registrationAttempts.size !== 'undefined' ? registrationAttempts.size : (registrationAttempts._c || {}).size;\n        if (attemptsSize === 0) {\n          _this2._registrationsInProgress.delete(contextId);\n          _this2.emit('registered', contextId);\n        }\n      }).catch(function (err) {\n        _logger2.default.info('registration attempt failed for context', context);\n        _logger2.default.debug(err);\n\n        registrationAttempts.delete(attemptId);\n\n        // Hack for broken react-native polyfill\n        // Remove when not needed anymore\n        var attemptsSize = typeof registrationAttempts.size !== 'undefined' ? registrationAttempts.size : (registrationAttempts._c || {}).size;\n        if (attemptsSize === 0) {\n          _this2._registrationsInProgress.delete(contextId);\n          _this2.emit('registrationFailed', contextId, err);\n        }\n      });\n    }\n  }, {\n    key: '_updateRegistrations',\n    value: function _updateRegistrations() {\n      var _this3 = this;\n\n      _logger2.default.info('refreshing all registrations');\n      this._registrations.forEach(function (context, id) {\n        _this3._updateRegistration(id, context);\n      });\n    }\n  }, {\n    key: 'setNotificationsContext',\n    value: function setNotificationsContext(contextId, context) {\n      if (!contextId || !context) {\n        throw new Error('Invalid arguments provided');\n      }\n\n      this._registrations.set(contextId, context);\n      if (this._socket.isConnected) {\n        this._updateRegistration(contextId, context);\n      }\n    }\n  }, {\n    key: 'removeNotificationsContext',\n    value: function removeNotificationsContext(contextId) {\n      if (!this._registrations.has(contextId)) {\n        return;\n      }\n\n      this._registrations.delete(contextId);\n      if (this._socket.isConnected) {\n        this._packet.deleteNotificationContext(contextId);\n      }\n    }\n\n    /**\n     * Connect to the server\n     * @fires TwilsockClient#connected\n     * @public\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect() {\n      return this._socket.connect();\n    }\n\n    /**\n     * Connect to the server\n     * @fires TwilsockClient#disconnected\n     * @public\n     */\n\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      return this._socket.disconnect();\n    }\n  }]);\n  return TwilsockClient;\n}(_events2.default);\n\nexports.default = TwilsockClient;\n\n(0, _freeze2.default)(TwilsockClient);\n\n/**\n * Twilsock destination address descriptor\n * @typedef {Object} Twilsock#Address\n * @property {String} method - HTTP method. (POST, PUT, etc)\n * @property {String} host - host name without path. (e.g. my.company.com)\n * @property {String} path - path on the host (e.g. /my/app/to/call.php)\n */\n\n/**\n * Twilsock upstream message\n * @typedef {Object} Twilsock#Message\n * @property {Twilsock#Address} to - destination address\n * @property {Object} headers - HTTP headers\n * @property {Object} body - Body\n */\n\n/**\n * Fired when new message received\n * @param {Object} message\n * @event TwilsockClient#message\n */\n\n/**\n * Fired when socket connected\n * @param {String} URI of endpoint\n * @event TwilsockClient#connected\n */\n\n/**\n * Fired when socket disconnected\n * @event TwilsockClient#disconnected\n */\n\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/client.js","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.promise.js","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_dom-create.js","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/promise.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"./logger\");\nvar TWILIO_INSTANCE_ID = 'Twilio::RTD::EmsClient::InstanceId';\nvar TWILIO_ENDPOINT_ID = 'Twilio::RTD::EndpointId';\n\nvar PersistentState = function () {\n    function PersistentState() {\n        (0, _classCallCheck3.default)(this, PersistentState);\n\n        this.cachedContinuationToken = null;\n        this.myInstanceNumber = this.initializeInstanceId();\n    }\n\n    (0, _createClass3.default)(PersistentState, [{\n        key: \"initializeInstanceId\",\n        value: function initializeInstanceId() {\n            // This method reads session storage in order to detect situation\n            // when Chrome's tab clone feature copies session storage\n            var cachedInstancesCount = function () {\n                try {\n                    if (sessionStorage) {\n                        return parseInt(sessionStorage.getItem(TWILIO_INSTANCE_ID)) || 0;\n                    }\n                } catch (e) {\n                    return 0;\n                }\n            }();\n            if (cachedInstancesCount > PersistentState.instancesCounter) {\n                PersistentState.instancesCounter = cachedInstancesCount;\n            }\n            var id = PersistentState.instancesCounter++;\n            try {\n                if (sessionStorage) {\n                    sessionStorage.setItem(TWILIO_INSTANCE_ID, PersistentState.instancesCounter.toString());\n                    if (window) {\n                        window.addEventListener('beforeunload', function () {\n                            sessionStorage.removeItem(TWILIO_INSTANCE_ID);\n                        });\n                    }\n                }\n            } catch (e) {}\n            return id;\n        }\n    }, {\n        key: \"shouldUsePersistentToken\",\n        get: function get() {\n            return this.myInstanceNumber === 0;\n        }\n    }, {\n        key: \"continuationToken\",\n        get: function get() {\n            if (this.cachedContinuationToken) {\n                return this.cachedContinuationToken;\n            }\n            try {\n                if (this.shouldUsePersistentToken && sessionStorage) {\n                    this.cachedContinuationToken = sessionStorage.getItem(TWILIO_ENDPOINT_ID);\n                    return this.cachedContinuationToken;\n                }\n            } catch (e) {\n                logger_1.default.info('Can\\'t access persistent storage', e.message);\n            }\n            return null;\n        },\n        set: function set(continuationToken) {\n            this.cachedContinuationToken = continuationToken;\n            try {\n                if (this.shouldUsePersistentToken && sessionStorage) {\n                    sessionStorage.setItem(TWILIO_ENDPOINT_ID, continuationToken);\n                }\n            } catch (e) {\n                logger_1.default.info('Can\\'t access persistent storage', e.message);\n            }\n        }\n    }]);\n    return PersistentState;\n}();\n\nPersistentState.instancesCounter = 0;\nexports.PersistentState = PersistentState;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-ems-client/browser/persistentState.js","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.symbol.js","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_collection-strong.js","/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nvar util = require('util');\n\nfunction IllegalArgumentError(message) {\n    Error.call(this, message);\n    this.message = message;\n}\nutil.inherits(IllegalArgumentError, Error);\n\nIllegalArgumentError.prototype.name = 'IllegalArgumentError';\n\nfunction IllegalStateError(message) {\n    Error.call(this, message);\n    this.message = message;\n}\nutil.inherits(IllegalStateError, Error);\n\nIllegalStateError.prototype.name = 'IllegalStateError';\n\nmodule.exports.IllegalStateError = IllegalStateError;\nmodule.exports.IllegalArgumentError = IllegalArgumentError;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/precond/lib/errors.js","// Generated by CoffeeScript 1.11.0\n(function() {\n  var Bottleneck, MIDDLE_PRIORITY, NB_PRIORITIES,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    slice = [].slice;\n\n  NB_PRIORITIES = 10;\n\n  MIDDLE_PRIORITY = 5;\n\n  Bottleneck = (function() {\n    var e;\n\n    Bottleneck[\"default\"] = Bottleneck;\n\n    Bottleneck.strategy = Bottleneck.prototype.strategy = {\n      LEAK: 1,\n      OVERFLOW: 2,\n      OVERFLOW_PRIORITY: 4,\n      BLOCK: 3\n    };\n\n    Bottleneck.Cluster = Bottleneck.prototype.Cluster = require(\"./Cluster\");\n\n    Bottleneck.DLList = Bottleneck.prototype.DLList = require(\"./DLList\");\n\n    Bottleneck.Promise = Bottleneck.prototype.Promise = (function() {\n      try {\n        return require(\"bluebird\");\n      } catch (error) {\n        e = error;\n        return typeof Promise !== \"undefined\" && Promise !== null ? Promise : function() {\n          throw new Error(\"Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support\");\n        };\n      }\n    })();\n\n    function Bottleneck(maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb != null ? maxNb : 0;\n      this.minTime = minTime != null ? minTime : 0;\n      this.highWater = highWater != null ? highWater : -1;\n      this.strategy = strategy != null ? strategy : Bottleneck.prototype.strategy.LEAK;\n      this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : false;\n      this.schedulePriority = bind(this.schedulePriority, this);\n      this.submitPriority = bind(this.submitPriority, this);\n      this.submit = bind(this.submit, this);\n      this._nextRequest = Date.now();\n      this._nbRunning = 0;\n      this._queues = this._makeQueues();\n      this._running = {};\n      this._nextIndex = 0;\n      this._unblockTime = 0;\n      this.penalty = (15 * this.minTime) || 5000;\n      this.interrupt = false;\n      this.reservoir = null;\n      this.limiter = null;\n      this.events = {};\n    }\n\n    Bottleneck.prototype._trigger = function(name, args) {\n      if (this.rejectOnDrop && name === \"dropped\") {\n        args[0].cb.apply({}, [new Error(\"This job has been dropped by Bottleneck\")]);\n      }\n      return setTimeout(((function(_this) {\n        return function() {\n          var ref;\n          return (ref = _this.events[name]) != null ? ref.forEach(function(e) {\n            return e.apply({}, args);\n          }) : void 0;\n        };\n      })(this)), 0);\n    };\n\n    Bottleneck.prototype._makeQueues = function() {\n      var i, j, ref, results;\n      results = [];\n      for (i = j = 1, ref = NB_PRIORITIES; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(new Bottleneck.prototype.DLList());\n      }\n      return results;\n    };\n\n    Bottleneck.prototype.chain = function(limiter) {\n      this.limiter = limiter;\n      return this;\n    };\n\n    Bottleneck.prototype.isBlocked = function() {\n      return this._unblockTime >= Date.now();\n    };\n\n    Bottleneck.prototype._sanitizePriority = function(priority) {\n      var sProperty;\n      sProperty = ~~priority !== priority ? MIDDLE_PRIORITY : priority;\n      if (sProperty < 0) {\n        return 0;\n      } else if (sProperty > NB_PRIORITIES - 1) {\n        return NB_PRIORITIES - 1;\n      } else {\n        return sProperty;\n      }\n    };\n\n    Bottleneck.prototype._find = function(arr, fn) {\n      var i, j, len, x;\n      for (i = j = 0, len = arr.length; j < len; i = ++j) {\n        x = arr[i];\n        if (fn(x)) {\n          return x;\n        }\n      }\n      return [];\n    };\n\n    Bottleneck.prototype.nbQueued = function(priority) {\n      if (priority != null) {\n        return this._queues[this._sanitizePriority(priority)].length;\n      } else {\n        return this._queues.reduce((function(a, b) {\n          return a + b.length;\n        }), 0);\n      }\n    };\n\n    Bottleneck.prototype.nbRunning = function() {\n      return this._nbRunning;\n    };\n\n    Bottleneck.prototype._getFirst = function(arr) {\n      return this._find(arr, function(x) {\n        return x.length > 0;\n      });\n    };\n\n    Bottleneck.prototype._conditionsCheck = function() {\n      return (this.nbRunning() < this.maxNb || this.maxNb <= 0) && ((this.reservoir == null) || this.reservoir > 0);\n    };\n\n    Bottleneck.prototype.check = function() {\n      return this._conditionsCheck() && (this._nextRequest - Date.now()) <= 0;\n    };\n\n    Bottleneck.prototype._tryToRun = function() {\n      var done, index, next, queued, wait;\n      if (this._conditionsCheck() && (queued = this.nbQueued()) > 0) {\n        this._nbRunning++;\n        if (this.reservoir != null) {\n          this.reservoir--;\n        }\n        wait = Math.max(this._nextRequest - Date.now(), 0);\n        this._nextRequest = Date.now() + wait + this.minTime;\n        next = (this._getFirst(this._queues)).shift();\n        if (queued === 1) {\n          this._trigger(\"empty\", []);\n        }\n        done = false;\n        index = this._nextIndex++;\n        this._running[index] = {\n          timeout: setTimeout((function(_this) {\n            return function() {\n              var completed;\n              completed = function() {\n                var ref;\n                if (!done) {\n                  done = true;\n                  delete _this._running[index];\n                  _this._nbRunning--;\n                  _this._tryToRun();\n                  if (_this.nbRunning() === 0 && _this.nbQueued() === 0) {\n                    _this._trigger(\"idle\", []);\n                  }\n                  if (!_this.interrupt) {\n                    return (ref = next.cb) != null ? ref.apply({}, Array.prototype.slice.call(arguments, 0)) : void 0;\n                  }\n                }\n              };\n              if (_this.limiter != null) {\n                return _this.limiter.submit.apply(_this.limiter, Array.prototype.concat(next.task, next.args, completed));\n              } else {\n                return next.task.apply({}, next.args.concat(completed));\n              }\n            };\n          })(this), wait),\n          job: next\n        };\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    Bottleneck.prototype.submit = function() {\n      var args;\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return this.submitPriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));\n    };\n\n    Bottleneck.prototype.submitPriority = function() {\n      var args, cb, j, job, priority, reachedHighWaterMark, shifted, task;\n      priority = arguments[0], task = arguments[1], args = 4 <= arguments.length ? slice.call(arguments, 2, j = arguments.length - 1) : (j = 2, []), cb = arguments[j++];\n      job = {\n        task: task,\n        args: args,\n        cb: cb\n      };\n      priority = this._sanitizePriority(priority);\n      reachedHighWaterMark = this.highWater >= 0 && this.nbQueued() === this.highWater && !this.check();\n      if (this.strategy === Bottleneck.prototype.strategy.BLOCK && (reachedHighWaterMark || this.isBlocked())) {\n        this._unblockTime = Date.now() + this.penalty;\n        this._nextRequest = this._unblockTime + this.minTime;\n        this._queues = this._makeQueues();\n        this._trigger(\"dropped\", [job]);\n        return true;\n      } else if (reachedHighWaterMark) {\n        shifted = this.strategy === Bottleneck.prototype.strategy.LEAK ? (this._getFirst(this._queues.slice(priority).reverse())).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW_PRIORITY ? (this._getFirst(this._queues.slice(priority + 1).reverse())).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW ? job : void 0;\n        if (shifted != null) {\n          this._trigger(\"dropped\", [shifted]);\n        }\n        if ((shifted == null) || this.strategy === Bottleneck.prototype.strategy.OVERFLOW) {\n          return reachedHighWaterMark;\n        }\n      }\n      this._queues[priority].push(job);\n      this._tryToRun();\n      return reachedHighWaterMark;\n    };\n\n    Bottleneck.prototype.schedule = function() {\n      var args;\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return this.schedulePriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));\n    };\n\n    Bottleneck.prototype.schedulePriority = function() {\n      var args, priority, task, wrapped;\n      priority = arguments[0], task = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n      wrapped = function() {\n        var args, cb, j;\n        args = 2 <= arguments.length ? slice.call(arguments, 0, j = arguments.length - 1) : (j = 0, []), cb = arguments[j++];\n        return (task.apply({}, args)).then(function() {\n          var args;\n          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return cb.apply({}, Array.prototype.concat(null, args));\n        })[\"catch\"](function() {\n          var args;\n          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return cb.apply({}, args);\n        });\n      };\n      return new Bottleneck.prototype.Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.submitPriority.apply({}, Array.prototype.concat(priority, wrapped, args, function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return (args[0] != null ? reject : (args.shift(), resolve)).apply({}, args);\n          }));\n        };\n      })(this));\n    };\n\n    Bottleneck.prototype.changeSettings = function(maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb != null ? maxNb : this.maxNb;\n      this.minTime = minTime != null ? minTime : this.minTime;\n      this.highWater = highWater != null ? highWater : this.highWater;\n      this.strategy = strategy != null ? strategy : this.strategy;\n      this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : this.rejectOnDrop;\n      while (this._tryToRun()) {}\n      return this;\n    };\n\n    Bottleneck.prototype.changePenalty = function(penalty) {\n      this.penalty = penalty != null ? penalty : this.penalty;\n      return this;\n    };\n\n    Bottleneck.prototype.changeReservoir = function(reservoir) {\n      this.reservoir = reservoir;\n      while (this._tryToRun()) {}\n      return this;\n    };\n\n    Bottleneck.prototype.incrementReservoir = function(incr) {\n      if (incr == null) {\n        incr = 0;\n      }\n      this.changeReservoir(this.reservoir + incr);\n      return this;\n    };\n\n    Bottleneck.prototype.on = function(name, cb) {\n      if (this.events[name] != null) {\n        this.events[name].push(cb);\n      } else {\n        this.events[name] = [cb];\n      }\n      return this;\n    };\n\n    Bottleneck.prototype.removeAllListeners = function(name) {\n      if (name == null) {\n        name = null;\n      }\n      if (name != null) {\n        delete this.events[name];\n      } else {\n        this.events = {};\n      }\n      return this;\n    };\n\n    Bottleneck.prototype.stopAll = function(interrupt) {\n      var j, job, k, keys, l, len, len1;\n      this.interrupt = interrupt != null ? interrupt : this.interrupt;\n      keys = Object.keys(this._running);\n      for (j = 0, len = keys.length; j < len; j++) {\n        k = keys[j];\n        clearTimeout(this._running[k].timeout);\n      }\n      this._tryToRun = function() {};\n      this.check = function() {\n        return false;\n      };\n      this.submit = this.submitPriority = function() {\n        var args, cb, l;\n        args = 2 <= arguments.length ? slice.call(arguments, 0, l = arguments.length - 1) : (l = 0, []), cb = arguments[l++];\n        return cb(new Error(\"This limiter is stopped\"));\n      };\n      this.schedule = this.schedulePriority = function() {\n        return Promise.reject(new Error(\"This limiter is stopped\"));\n      };\n      if (this.interrupt) {\n        for (l = 0, len1 = keys.length; l < len1; l++) {\n          k = keys[l];\n          this._trigger(\"dropped\", [this._running[k].job]);\n        }\n      }\n      while (job = (this._getFirst(this._queues)).shift()) {\n        this._trigger(\"dropped\", [job]);\n      }\n      this._trigger(\"empty\", []);\n      if (this.nbRunning() === 0) {\n        this._trigger(\"idle\", []);\n      }\n      return this;\n    };\n\n    return Bottleneck;\n\n  })();\n\n  module.exports = Bottleneck;\n\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/bottleneck/lib/Bottleneck.js","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/set-prototype-of.js","\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar SessionStorage = function () {\n    function SessionStorage(config, storage) {\n        (0, _classCallCheck3.default)(this, SessionStorage);\n\n        this.config = config;\n        this.storageId = null;\n        try {\n            this.storage = storage || sessionStorage;\n        } catch (e) {}\n    }\n\n    (0, _createClass3.default)(SessionStorage, [{\n        key: \"storageKey\",\n        value: function storageKey(type, key) {\n            return this.storageId + \"::\" + type + \"::\" + key;\n        }\n    }, {\n        key: \"updateStorageId\",\n        value: function updateStorageId(storageId) {\n            this.storageId = storageId;\n        }\n    }, {\n        key: \"store\",\n        value: function store(type, id, value) {\n            if (!this.isReady) {\n                return null;\n            }\n            return this._store(this.storageKey(type, id), value);\n        }\n    }, {\n        key: \"read\",\n        value: function read(type, id) {\n            if (!this.isReady) {\n                return null;\n            }\n            return this._read(this.storageKey(type, id));\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(type, sid, uniqueName) {\n            if (!this.isReady) {\n                return null;\n            }\n            try {\n                this.storage.removeItem(this.storageKey(type, sid));\n                if (uniqueName) {\n                    this.storage.removeItem(this.storageKey(type, uniqueName));\n                }\n            } catch (e) {}\n        }\n    }, {\n        key: \"update\",\n        value: function update(type, sid, uniqueName, patch) {\n            if (!this.isReady) {\n                return null;\n            }\n            // Currently cache may have root stored twice - by sid and by uniqueName\n            // Maybe need to create some index if needed\n            this._apply(this.storageKey(type, sid), patch);\n            if (uniqueName) {\n                this._apply(this.storageKey(type, uniqueName), patch);\n            }\n        }\n    }, {\n        key: \"_store\",\n        value: function _store(key, value) {\n            try {\n                this.storage.setItem(key, (0, _stringify2.default)(value));\n            } catch (e) {}\n        }\n    }, {\n        key: \"_read\",\n        value: function _read(key) {\n            try {\n                var storedData = this.storage.getItem(key);\n                if (storedData) {\n                    return JSON.parse(storedData);\n                }\n            } catch (e) {}\n            return null;\n        }\n    }, {\n        key: \"_apply\",\n        value: function _apply(key, patch) {\n            var value = this._read(key);\n            if (!value) {\n                return false;\n            }\n            this._store(key, (0, _extends3.default)(value, patch));\n        }\n    }, {\n        key: \"isReady\",\n        get: function get() {\n            return this.config.sessionStorageEnabled && !!this.storageId;\n        }\n    }]);\n    return SessionStorage;\n}();\n\nexports.SessionStorage = SessionStorage;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/services/storage.js","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_species-constructor.js","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-keys-internal.js","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/get-prototype-of.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = require('babel-runtime/core-js/object/freeze');\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _set2 = require('babel-runtime/core-js/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULT_TTL = 60 * 60 * 48;\n\nfunction toArray(_set) {\n  var arr = [];\n  _set.forEach(function (v) {\n    return arr.push(v);\n  });\n  return arr;\n}\n\n/**\n * @class\n * @classdesc Registrar connector implementation for twilsock\n *\n * @constructor\n */\n\nvar TwilsockConnector = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockConnector, _EventEmitter);\n\n  function TwilsockConnector(context, twilsock, config) {\n    (0, _classCallCheck3.default)(this, TwilsockConnector);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockConnector.__proto__ || (0, _getPrototypeOf2.default)(TwilsockConnector)).call(this));\n\n    context.id = _uuid2.default.v4();\n\n    (0, _defineProperties2.default)(_this, {\n      _twilsock: { value: twilsock },\n      _messageTypes: { value: new _set3.default() },\n\n      config: { value: config },\n      context: { value: context }\n    });\n\n    twilsock.on('stateChanged', function (state) {\n      if (state !== 'connected') {\n        _this.emit('transportReady', false);\n      }\n    });\n\n    twilsock.on('registered', function (id) {\n      if (context && id === context.id && twilsock.state === 'connected') {\n        _this.emit('transportReady', true);\n      }\n    });\n    return _this;\n  }\n\n  /**\n   * @public\n   */\n\n\n  (0, _createClass3.default)(TwilsockConnector, [{\n    key: 'setNotificationId',\n    value: function setNotificationId() {\n      return false;\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      this._twilsock.removeNotificationsContext(this.context.id);\n      this.context.id = _uuid2.default.v4();\n      this._updateContext();\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'has',\n    value: function has(messageType) {\n      return this._messageTypes.has(messageType);\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType) {\n      if (this._messageTypes.has(messageType)) {\n        _logger2.default.trace('Message type already registered ', messageType);\n        return false;\n      }\n\n      this._messageTypes.add(messageType);\n      this._updateContext();\n      return true;\n    }\n\n    /**\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType) {\n      if (!this._messageTypes.has(messageType)) {\n        return false;\n      }\n\n      this._messageTypes.delete(messageType);\n\n      if (this._messageTypes.size > 0) {\n        this._updateContext();\n      } else {\n        this._twilsock.removeNotificationsContext(this.context.id);\n      }\n\n      return true;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_updateContext',\n    value: function _updateContext() {\n      if (!this.config.token) {\n        // no token, can't do anything, ignore\n        return;\n      }\n\n      var messageTypes = toArray(this._messageTypes);\n\n      /* eslint-disable camelcase */\n      var context = {\n        product_id: this.context.productId,\n        notification_protocol_version: 4,\n        endpoint_platform: this.context.platform,\n        ttl: DEFAULT_TTL,\n        token: this.config.token,\n        message_types: messageTypes\n      };\n      /* eslint-enable camelcase */\n\n      this.emit('transportReady', false);\n      this._twilsock.setNotificationsContext(this.context.id, context);\n    }\n  }]);\n  return TwilsockConnector;\n}(_events2.default);\n\nexports.default = TwilsockConnector;\n\n\n(0, _freeze2.default)(TwilsockConnector);\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/twilsock.connector.js","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.freeze.js","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.get-prototype-of.js","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_is-object.js","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/core.is-iterable.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = require('events');\nvar util = require('util');\n\nfunction isDef(value) {\n    return value !== undefined && value !== null;\n}\n\n// Abstract class defining the skeleton for the backoff strategies. Accepts an\n// object holding the options for the backoff strategy:\n//\n//  * `randomisationFactor`: The randomisation factor which must be between 0\n//     and 1 where 1 equates to a randomization factor of 100% and 0 to no\n//     randomization.\n//  * `initialDelay`: The backoff initial delay in milliseconds.\n//  * `maxDelay`: The backoff maximal delay in milliseconds.\nfunction BackoffStrategy(options) {\n    options = options || {};\n\n    if (isDef(options.initialDelay) && options.initialDelay < 1) {\n        throw new Error('The initial timeout must be greater than 0.');\n    } else if (isDef(options.maxDelay) && options.maxDelay < 1) {\n        throw new Error('The maximal timeout must be greater than 0.');\n    }\n\n    this.initialDelay_ = options.initialDelay || 100;\n    this.maxDelay_ = options.maxDelay || 10000;\n\n    if (this.maxDelay_ <= this.initialDelay_) {\n        throw new Error('The maximal backoff delay must be ' +\n                        'greater than the initial backoff delay.');\n    }\n\n    if (isDef(options.randomisationFactor) &&\n        (options.randomisationFactor < 0 || options.randomisationFactor > 1)) {\n        throw new Error('The randomisation factor must be between 0 and 1.');\n    }\n\n    this.randomisationFactor_ = options.randomisationFactor || 0;\n}\n\n// Gets the maximal backoff delay.\nBackoffStrategy.prototype.getMaxDelay = function() {\n    return this.maxDelay_;\n};\n\n// Gets the initial backoff delay.\nBackoffStrategy.prototype.getInitialDelay = function() {\n    return this.initialDelay_;\n};\n\n// Template method that computes and returns the next backoff delay in\n// milliseconds.\nBackoffStrategy.prototype.next = function() {\n    var backoffDelay = this.next_();\n    var randomisationMultiple = 1 + Math.random() * this.randomisationFactor_;\n    var randomizedDelay = Math.round(backoffDelay * randomisationMultiple);\n    return randomizedDelay;\n};\n\n// Computes and returns the next backoff delay. Intended to be overridden by\n// subclasses.\nBackoffStrategy.prototype.next_ = function() {\n    throw new Error('BackoffStrategy.next_() unimplemented.');\n};\n\n// Template method that resets the backoff delay to its initial value.\nBackoffStrategy.prototype.reset = function() {\n    this.reset_();\n};\n\n// Resets the backoff delay to its initial value. Intended to be overridden by\n// subclasses.\nBackoffStrategy.prototype.reset_ = function() {\n    throw new Error('BackoffStrategy.reset_() unimplemented.');\n};\n\nmodule.exports = BackoffStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/lib/strategy/strategy.js","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/web.dom.iterable.js","import { SyncClient } from 'twilio-sync';\n\nvar client;\n\nwindow.orderQueueList = undefined;\nwindow.configurationDoc = undefined;\nwindow.customersMap = undefined;\nwindow.allOrdersList = undefined;\n\nfetch('/api/token', {\n  credentials: 'include'\n})\n  .then(resp => resp.json())\n  .then(({ token }) => {\n    console.log(token);\n    client = new SyncClient(token);\n    return client;\n  })\n  .then(client => {\n    clientConnected();\n  })\n  .catch(err => console.error(err));\n\nfunction clientConnected() {\n  client.document('configuration').then(doc => {\n    window.configurationDoc = doc;\n    setData('configuration', doc.value);\n    window.configurationDoc.on('updated', data => {\n      setData('configuration', data);\n    });\n  });\n\n  client.list('orderQueue').then(list => {\n    window.orderQueueList = list;\n    displayAllItems('orderQueue', window.orderQueueList);\n    window.orderQueueList.on('itemAdded', () =>\n      displayAllItems('orderQueue', window.orderQueueList)\n    );\n    window.orderQueueList.on('itemRemoved', () =>\n      displayAllItems('orderQueue', window.orderQueueList)\n    );\n    window.orderQueueList.on('itemUpdated', () =>\n      displayAllItems('orderQueue', window.orderQueueList)\n    );\n  });\n\n  client.list('allOrders').then(list => {\n    window.allOrdersList = list;\n    displayAllItems('allOrders', window.allOrdersList);\n    window.allOrdersList.on('itemAdded', () =>\n      displayAllItems('allOrders', window.allOrdersList)\n    );\n    window.allOrdersList.on('itemRemoved', () =>\n      displayAllItems('allOrders', window.allOrdersList)\n    );\n    window.allOrdersList.on('itemUpdated', () =>\n      displayAllItems('allOrders', window.allOrdersList)\n    );\n  });\n\n  client.map('customers').then(map => {\n    window.customersMap = map;\n    displayAllItems('customers', window.customersMap);\n    window.customersMap.on('itemAdded', () =>\n      displayAllItems('customers', window.customersMap)\n    );\n    window.customersMap.on('itemRemoved', () =>\n      displayAllItems('customers', window.customersMap)\n    );\n    window.customersMap.on('itemUpdated', () =>\n      displayAllItems('customers', window.customersMap)\n    );\n  });\n}\n\nfunction setData(name, data) {\n  document.querySelector(`#${name}`).innerText = JSON.stringify(\n    data,\n    undefined,\n    2\n  );\n}\n\nfunction displayAllItems(name, list) {\n  return list.getItems({ pageSize: 1000 }).then(page => {\n    setData(name, page.items);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./debug.js","// Generated by CoffeeScript 1.11.0\n(function() {\n  var DLList;\n\n  DLList = (function() {\n    function DLList() {\n      this._first = null;\n      this._last = null;\n      this.length = 0;\n    }\n\n    DLList.prototype.push = function(value) {\n      var node;\n      this.length++;\n      node = {\n        value: value,\n        next: null\n      };\n      if (this._last != null) {\n        this._last.next = node;\n        this._last = node;\n      } else {\n        this._first = this._last = node;\n      }\n      return void 0;\n    };\n\n    DLList.prototype.shift = function() {\n      var ref1, value;\n      if (this._first == null) {\n        return void 0;\n      } else {\n        this.length--;\n      }\n      value = this._first.value;\n      this._first = (ref1 = this._first.next) != null ? ref1 : (this._last = null);\n      return value;\n    };\n\n    DLList.prototype.getArray = function() {\n      var node, ref, results;\n      node = this._first;\n      results = [];\n      while (node != null) {\n        results.push((ref = node, node = node.next, ref.value));\n      }\n      return results;\n    };\n\n    return DLList;\n\n  })();\n\n  module.exports = DLList;\n\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/bottleneck/lib/DLList.js","// Generated by CoffeeScript 1.11.0\n(function() {\n  var Cluster,\n    hasProp = {}.hasOwnProperty;\n\n  Cluster = (function() {\n    function Cluster(maxNb, minTime, highWater, strategy, rejectOnDrop) {\n      this.maxNb = maxNb;\n      this.minTime = minTime;\n      this.highWater = highWater;\n      this.strategy = strategy;\n      this.rejectOnDrop = rejectOnDrop;\n      this.limiters = {};\n      this.Bottleneck = require(\"./Bottleneck\");\n      this.timeout = 1000 * 60 * 5;\n      this.startAutoCleanup();\n    }\n\n    Cluster.prototype.key = function(key) {\n      var ref;\n      if (key == null) {\n        key = \"\";\n      }\n      return (ref = this.limiters[key]) != null ? ref : (this.limiters[key] = new this.Bottleneck(this.maxNb, this.minTime, this.highWater, this.strategy, this.rejectOnDrop));\n    };\n\n    Cluster.prototype.deleteKey = function(key) {\n      if (key == null) {\n        key = \"\";\n      }\n      return delete this.limiters[key];\n    };\n\n    Cluster.prototype.all = function(cb) {\n      var k, ref, results, v;\n      ref = this.limiters;\n      results = [];\n      for (k in ref) {\n        if (!hasProp.call(ref, k)) continue;\n        v = ref[k];\n        results.push(cb(v));\n      }\n      return results;\n    };\n\n    Cluster.prototype.keys = function() {\n      return Object.keys(this.limiters);\n    };\n\n    Cluster.prototype.startAutoCleanup = function() {\n      var base;\n      this.stopAutoCleanup();\n      return typeof (base = (this.interval = setInterval((function(_this) {\n        return function() {\n          var k, ref, results, time, v;\n          time = Date.now();\n          ref = _this.limiters;\n          results = [];\n          for (k in ref) {\n            v = ref[k];\n            if ((v._nextRequest + _this.timeout) < time) {\n              results.push(_this.deleteKey(k));\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        };\n      })(this), this.timeout / 10))).unref === \"function\" ? base.unref() : void 0;\n    };\n\n    Cluster.prototype.stopAutoCleanup = function() {\n      return clearInterval(this.interval);\n    };\n\n    Cluster.prototype.changeTimeout = function(timeout) {\n      this.timeout = timeout;\n      return this.startAutoCleanup();\n    };\n\n    return Cluster;\n\n  })();\n\n  module.exports = Cluster;\n\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/bottleneck/lib/Cluster.js","/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nmodule.exports = require('./lib/checks');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/precond/index.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = require('babel-runtime/core-js/object/freeze');\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _map = require('babel-runtime/core-js/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _registrar = require('./registrar.connector');\n\nvar _registrar2 = _interopRequireDefault(_registrar);\n\nvar _twilsock = require('./twilsock.connector');\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Creates the new instance of ERS registrar client\n *\n * @class Registrar\n * @classdesc Provides an interface to the ERS registrar\n */\nvar Registrar = function (_EventEmitter) {\n  (0, _inherits3.default)(Registrar, _EventEmitter);\n\n  function Registrar(productId, transport, twilsock, config) {\n    (0, _classCallCheck3.default)(this, Registrar);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Registrar.__proto__ || (0, _getPrototypeOf2.default)(Registrar)).call(this));\n\n    (0, _defineProperties2.default)(_this, {\n      _conf: { value: config },\n      _connectors: { value: new _map2.default() }\n    });\n\n    var platform = _this._detectPlatform();\n\n    _this._connectors.set('twilsock', new _twilsock2.default({ productId: productId, platform: platform }, twilsock, config));\n    _this._connectors.set('gcm', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'gcm'));\n    _this._connectors.set('fcm', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'fcm'));\n    _this._connectors.set('apn', new _registrar2.default({ productId: productId, platform: platform }, transport, config, 'apn'));\n\n    _this._connectors.get('twilsock').on('transportReady', function (state) {\n      return _this.emit('transportReady', state);\n    });\n\n    return _this;\n  }\n\n  /**\n   *  Sets notification ID.\n   *  If new URI is different from previous, it triggers updating of registration for given channel\n   *\n   *  @param {string} channelType channel type (apn|gcm|fcm|twilsock)\n   *  @param {string} notificationId The notification ID\n   */\n\n\n  (0, _createClass3.default)(Registrar, [{\n    key: 'setNotificationId',\n    value: function setNotificationId(channelType, notificationId) {\n      this._connector(channelType).setNotificationId(notificationId);\n    }\n\n    /**\n     * Checks if subscription for given message and channel already exists\n     */\n\n  }, {\n    key: 'hasSubscription',\n    value: function hasSubscription(messageType, channelType) {\n      this._connector(channelType).has(messageType);\n    }\n\n    /**\n     * Subscribe for given type of message\n     *\n     * @param {String} messageType Message type identifier\n     * @param {String} channelType Channel type, can be 'twilsock', 'gcm' or 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType, channelType) {\n      this._connector(channelType).subscribe(messageType);\n    }\n\n    /**\n     * Remove subscription\n     * @param {String} messageType Message type\n     * @param {String} channelType Channel type (twilsock or gcm/fcm)\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType, channelType) {\n      this._connector(channelType).unsubscribe(messageType);\n    }\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      this._connectors.forEach(function (connector) {\n        return connector.updateToken();\n      });\n    }\n\n    /**\n     * @param {String} type Channel type\n     * @throws {Error} Error with description\n     * @private\n     */\n\n  }, {\n    key: '_connector',\n    value: function _connector(type) {\n      var connector = this._connectors.get(type);\n      if (!connector) {\n        throw new Error('Unknown channel type: ' + type);\n      }\n      return connector;\n    }\n\n    /**\n     * Returns platform string limited to max 128 chars\n     * @private\n     */\n\n  }, {\n    key: '_detectPlatform',\n    value: function _detectPlatform() {\n      var _platform = '';\n      if (typeof navigator !== 'undefined') {\n        _platform = 'unknown';\n        if (typeof navigator.product !== 'undefined') {\n          _platform = navigator.product;\n        }\n        if (typeof navigator.userAgent !== 'undefined') {\n          _platform = navigator.userAgent;\n        }\n      } else {\n        _platform = 'web';\n      }\n\n      return _platform.substring(0, 128);\n    }\n  }]);\n  return Registrar;\n}(_events2.default);\n\nexports.default = Registrar;\n\n\n(0, _freeze2.default)(Registrar);\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/registrar.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = require('events');\nvar precond = require('precond');\nvar util = require('util');\n\n// A class to hold the state of a backoff operation. Accepts a backoff strategy\n// to generate the backoff delays.\nfunction Backoff(backoffStrategy) {\n    events.EventEmitter.call(this);\n\n    this.backoffStrategy_ = backoffStrategy;\n    this.maxNumberOfRetry_ = -1;\n    this.backoffNumber_ = 0;\n    this.backoffDelay_ = 0;\n    this.timeoutID_ = -1;\n\n    this.handlers = {\n        backoff: this.onBackoff_.bind(this)\n    };\n}\nutil.inherits(Backoff, events.EventEmitter);\n\n// Sets a limit, greater than 0, on the maximum number of backoffs. A 'fail'\n// event will be emitted when the limit is reached.\nBackoff.prototype.failAfter = function(maxNumberOfRetry) {\n    precond.checkArgument(maxNumberOfRetry > 0,\n        'Expected a maximum number of retry greater than 0 but got %s.',\n        maxNumberOfRetry);\n\n    this.maxNumberOfRetry_ = maxNumberOfRetry;\n};\n\n// Starts a backoff operation. Accepts an optional parameter to let the\n// listeners know why the backoff operation was started.\nBackoff.prototype.backoff = function(err) {\n    precond.checkState(this.timeoutID_ === -1, 'Backoff in progress.');\n\n    if (this.backoffNumber_ === this.maxNumberOfRetry_) {\n        this.emit('fail', err);\n        this.reset();\n    } else {\n        this.backoffDelay_ = this.backoffStrategy_.next();\n        this.timeoutID_ = setTimeout(this.handlers.backoff, this.backoffDelay_);\n        this.emit('backoff', this.backoffNumber_, this.backoffDelay_, err);\n    }\n};\n\n// Handles the backoff timeout completion.\nBackoff.prototype.onBackoff_ = function() {\n    this.timeoutID_ = -1;\n    this.emit('ready', this.backoffNumber_, this.backoffDelay_);\n    this.backoffNumber_++;\n};\n\n// Stops any backoff operation and resets the backoff delay to its inital value.\nBackoff.prototype.reset = function() {\n    this.backoffNumber_ = 0;\n    this.backoffStrategy_.reset();\n    clearTimeout(this.timeoutID_);\n    this.timeoutID_ = -1;\n};\n\nmodule.exports = Backoff;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/lib/backoff.js","\"use strict\";\n\nvar _from = require(\"babel-runtime/core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar log = require(\"loglevel\");\nfunction prepareLine(prefix, args) {\n    return [prefix].concat((0, _from2.default)(args));\n}\nexports.default = {\n    setLevel: function setLevel(level) {\n        log.setLevel(level);\n    },\n    trace: function trace() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        log.trace.apply(null, prepareLine('Sync T:', args));\n    },\n    debug: function debug() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        log.debug.apply(null, prepareLine('Sync D:', args));\n    },\n    info: function info() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        log.info.apply(null, prepareLine('Sync I:', args));\n    },\n    warn: function warn() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n        }\n\n        log.warn.apply(null, prepareLine('Sync W:', args));\n    },\n    error: function error() {\n        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n        }\n\n        log.error.apply(null, prepareLine('Sync E:', args));\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/logger.js","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iobject.js","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-primitive.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _from = require('babel-runtime/core-js/array/from');\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction prepareLine(prefix, args) {\n  return [prefix].concat((0, _from2.default)(args));\n}\n\nexports.default = {\n  setLevel: function setLevel(level) {\n    _loglevel2.default.setLevel(level);\n  },\n\n  trace: function trace() {\n    _loglevel2.default.trace.apply(null, prepareLine('Notify T:', arguments));\n  },\n  debug: function debug() {\n    _loglevel2.default.debug.apply(null, prepareLine('Notify D:', arguments));\n  },\n  info: function info() {\n    _loglevel2.default.info.apply(null, prepareLine('Notify I:', arguments));\n  },\n  warn: function warn() {\n    _loglevel2.default.warn.apply(null, prepareLine('Notify W:', arguments));\n  },\n  error: function error() {\n    _loglevel2.default.error.apply(null, prepareLine('Notify E:', arguments));\n  }\n};\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/logger.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/define-property.js","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_set-species.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/events/events.js","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperties: require('./_object-dps')});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.define-properties.js","\"use strict\";\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = require(\"events\");\n\nvar SyncEntity = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(SyncEntity, _events_1$EventEmitte);\n\n    function SyncEntity(services, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncEntity);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncEntity.__proto__ || (0, _getPrototypeOf2.default)(SyncEntity)).call(this));\n\n        _this.services = services;\n        _this.removalHandler = removalHandler;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncEntity, [{\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {}\n    }, {\n        key: \"reportFailure\",\n        value: function reportFailure(err) {\n            if (err.status === 404) {\n                // assume that 404 means that entity has been removed while we were away\n                this.onRemoved(false);\n            } else {\n                this.emit('failure', err);\n            }\n        }\n        /**\n         * Subscribe to changes of data entity\n         * @private\n         */\n\n    }, {\n        key: \"_subscribe\",\n        value: function _subscribe() {\n            this.services.router.subscribe(this.sid, this);\n            return this;\n        }\n        /**\n         * Unsubscribe from changes of current data entity\n         * @private\n         */\n\n    }, {\n        key: \"_unsubscribe\",\n        value: function _unsubscribe() {\n            this.services.router.unsubscribe(this.sid, this);\n            return this;\n        }\n        /**\n         * @public\n         */\n\n    }, {\n        key: \"close\",\n        value: function close() {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n        }\n    }]);\n    return SyncEntity;\n}(events_1.EventEmitter);\n\nexports.SyncEntity = SyncEntity;\nexports.default = SyncEntity;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/entity.js","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-dp.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/typeof.js","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_microtask.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _client = require('./client');\n\nvar _client2 = _interopRequireDefault(_client);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _client2.default;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/index.js","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-gpo.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/json/stringify.js","module.exports = function(){ /* empty */ };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_add-to-unscopables.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TwilsockUnavailableError = exports.Transport = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _httprequest = require('./httprequest');\n\nvar _httprequest2 = _interopRequireDefault(_httprequest);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nfunction parseUri(uri) {\n  var match = uri.match(/^(https?\\:)\\/\\/(([^:\\/?#]*)(?:\\:([0-9]+))?)(\\/[^?#]*)(\\?[^#]*|)(#.*|)$/);\n  if (match) {\n    var uriStruct = {\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    };\n\n    if (uriStruct.search.length > 0) {\n      var paramsString = uriStruct.search.substring(1);\n      uriStruct.params = paramsString.split('&').map(function (el) {\n        return el.split('=');\n      }).reduce(function (prev, curr) {\n        if (!prev.hasOwnProperty(curr[0])) {\n          prev[curr[0]] = curr[1];\n        } else if (Array.isArray(prev[curr[0]])) {\n          prev[curr[0]].push(curr[1]);\n        } else {\n          prev[curr[0]] = [prev[curr[0]], curr[1]];\n        }\n        return prev;\n      }, {});\n    }\n    return uriStruct;\n  }\n  throw new Error('Incorrect URI: ' + uri);\n}\n\nfunction twilsockAddress(method, uri) {\n  var parsedUri = parseUri(uri);\n  var to = {\n    method: method,\n    host: parsedUri.host,\n    path: parsedUri.pathname\n  };\n  if (parsedUri.params) {\n    to.params = parsedUri.params;\n  }\n  return to;\n}\n\nfunction twilsockParams(type, uri, headers, body) {\n  return {\n    to: twilsockAddress(type, uri),\n    headers: headers,\n    body: body\n  };\n}\n\nfunction adaptTwilsockResponse(response) {\n  return { status: response.header.http_status,\n    headers: response.header.http_headers,\n    body: response.body };\n}\n\nfunction httpParams(uri, headers, body) {\n  return {\n    url: uri,\n    headers: headers,\n    body: body\n  };\n}\n\nfunction adaptHttpResponse(response) {\n  try {\n    response.body = JSON.parse(response.body);\n  } catch (e) {} // eslint-disable-line no-empty\n  return response;\n}\n\n/**\n * By RFC header names are case-insensitive\n * though it is much easier to work with them in code\n * when they have any specific case.\n * So we forcefully lowercase all headers\n */\nfunction lowercaseHeaders(response) {\n  var keys = Object.keys(response.headers);\n  var n = keys.length;\n  var headers = {};\n  while (n--) {\n    var key = keys[n];\n    headers[key.toLowerCase()] = response.headers[key];\n  }\n  response.headers = headers;\n  return response;\n}\n\n/**\n * Transport specific error.\n * Being fired when twilsock-only transmission requested but not available\n * @inherits Error\n */\n\nvar TwilsockUnavailableError = function (_extendableBuiltin2) {\n  _inherits(TwilsockUnavailableError, _extendableBuiltin2);\n\n  function TwilsockUnavailableError() {\n    _classCallCheck(this, TwilsockUnavailableError);\n\n    return _possibleConstructorReturn(this, (TwilsockUnavailableError.__proto__ || Object.getPrototypeOf(TwilsockUnavailableError)).call(this));\n  }\n\n  return TwilsockUnavailableError;\n}(_extendableBuiltin(Error));\n\n/**\n * Provides generic network interface\n */\n\n\nvar Transport = function () {\n  function Transport(twilsock) {\n    var _this2 = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transport);\n\n    Object.defineProperties(this, {\n      _activeGetRequests: { value: new Map() },\n      _twilsock: { value: twilsock },\n      _http: { value: _httprequest2.default },\n      _twilsockIsAvailable: { get: function get() {\n          return _this2._twilsock && _this2._twilsock.isConnected;\n        } },\n\n      _concurrentHttpRequestLimit: { value: options.concurrentHttpRequestLimit || Infinity },\n      _concurrentHttpRequestCount: { value: 0, writable: true },\n      _requestQueue: { value: [] }\n    });\n\n    if (twilsock) {\n      twilsock.connect();\n      twilsock.on('connected', function () {\n        return _this2._processQueuedRequests();\n      });\n    }\n  }\n\n  /**\n   * Make a GET request by given URI\n   *\n   * This function applies \"multiplexing\" optimization.\n   * If several requests for the same URI happen on the same time,\n   * only one will really happen, but all clients will see th result.\n   *\n   * @Returns Promise<Response> Result of successful get request\n   */\n\n\n  _createClass(Transport, [{\n    key: 'get',\n    value: function get(uri, headers, forceTwilsock) {\n      var _this3 = this;\n\n      if (this._activeGetRequests.has(uri)) {\n        return this._activeGetRequests.get(uri);\n      }\n\n      var promise = this._get(uri, headers, forceTwilsock).then(function (response) {\n        _this3._activeGetRequests.delete(uri);\n        return response;\n      }).catch(function (error) {\n        _this3._activeGetRequests.delete(uri);\n        throw error;\n      });\n\n      this._activeGetRequests.set(uri, promise);\n      return promise;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_oneOfBasedOnChannelAvailability',\n    value: function _oneOfBasedOnChannelAvailability(sendingOptions, forceTwilsock) {\n      var _this4 = this;\n\n      var requestVia = function requestVia(paths) {\n        var sendViaTwilsock = paths.sendViaTwilsock,\n            sendDirectHttp = paths.sendDirectHttp;\n\n        if (_this4._twilsockIsAvailable) {\n          return sendViaTwilsock();\n        } else if (forceTwilsock) {\n          return Promise.reject(new TwilsockUnavailableError());\n        } else if (_this4._concurrentHttpRequestCount >= _this4._concurrentHttpRequestLimit) {\n          return new Promise(function (resolve, reject) {\n            return _this4._requestQueue.push({ sendingOptions: sendingOptions, resolve: resolve, reject: reject });\n          });\n        }\n\n        _this4._concurrentHttpRequestCount++;\n        return sendDirectHttp().then(function (r) {\n          _this4._concurrentHttpRequestCount--;\n          _this4._processQueuedRequests();\n          return r;\n        }).catch(function (err) {\n          _this4._concurrentHttpRequestCount--;\n          _this4._processQueuedRequests();\n          throw err;\n        });\n      };\n\n      return requestVia(sendingOptions).then(lowercaseHeaders);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_processQueuedRequests',\n    value: function _processQueuedRequests() {\n      while (this._requestQueue.length > 0 && (this._twilsockIsAvailable || this._concurrentHttpRequestCount < this._concurrentHttpRequestLimit)) {\n\n        var r = this._requestQueue.shift();\n        this._oneOfBasedOnChannelAvailability(r.sendingOptions, false).then(r.resolve).catch(r.reject);\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_get',\n    value: function _get(uri, headers, forceTwilsock) {\n      var _this5 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this5._twilsock.send(twilsockParams('GET', uri, headers)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this5._http.get(httpParams(uri, headers)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a POST request by given URI\n     * @returns {Promise<Response>} Result of successful request\n     */\n\n  }, {\n    key: 'post',\n    value: function post(uri, headers, body, forceTwilsock) {\n      var _this6 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this6._twilsock.send(twilsockParams('POST', uri, headers, body)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this6._http.post(httpParams(uri, headers, body)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a PUT request by given URI\n     * @returns Promise<Response> Result of successful request\n     */\n\n  }, {\n    key: 'put',\n    value: function put(uri, headers, body, forceTwilsock) {\n      var _this7 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this7._twilsock.send(twilsockParams('PUT', uri, headers, body)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this7._http.put(httpParams(uri, headers, body)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n\n    /**\n     * Make a DELETE request by given URI\n     * @returns {Promise<Response>} Result of successful request\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete(uri, headers, forceTwilsock) {\n      var _this8 = this;\n\n      return this._oneOfBasedOnChannelAvailability({\n        sendViaTwilsock: function sendViaTwilsock() {\n          return _this8._twilsock.send(twilsockParams('DELETE', uri, headers)).then(adaptTwilsockResponse);\n        },\n        sendDirectHttp: function sendDirectHttp() {\n          return _this8._http.delete(httpParams(uri, headers)).then(adaptHttpResponse);\n        }\n      }, forceTwilsock);\n    }\n  }]);\n\n  return Transport;\n}();\n\nexports.default = Transport;\nexports.Transport = Transport;\nexports.TwilsockUnavailableError = TwilsockUnavailableError;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-transport/lib/transport.js","/**\n\tC-like unsigned 64 bits integers in Javascript\n\tCopyright (C) 2013, Pierre Curto\n\tMIT license\n */\n;(function (root) {\n\n\t// Local cache for typical radices\n\tvar radixPowerCache = {\n\t\t16: UINT64( Math.pow(16, 5) )\n\t,\t10: UINT64( Math.pow(10, 5) )\n\t,\t2:  UINT64( Math.pow(2, 5) )\n\t}\n\tvar radixCache = {\n\t\t16: UINT64(16)\n\t,\t10: UINT64(10)\n\t,\t2:  UINT64(2)\n\t}\n\n\t/**\n\t *\tRepresents an unsigned 64 bits integer\n\t * @constructor\n\t * @param {Number} first low bits (8)\n\t * @param {Number} second low bits (8)\n\t * @param {Number} first high bits (8)\n\t * @param {Number} second high bits (8)\n\t * or\n\t * @param {Number} low bits (32)\n\t * @param {Number} high bits (32)\n\t * or\n\t * @param {String|Number} integer as a string \t\t | integer as a number\n\t * @param {Number|Undefined} radix (optional, default=10)\n\t * @return \n\t */\n\tfunction UINT64 (a00, a16, a32, a48) {\n\t\tif ( !(this instanceof UINT64) )\n\t\t\treturn new UINT64(a00, a16, a32, a48)\n\n\t\tthis.remainder = null\n\t\tif (typeof a00 == 'string')\n\t\t\treturn fromString.call(this, a00, a16)\n\n\t\tif (typeof a16 == 'undefined')\n\t\t\treturn fromNumber.call(this, a00)\n\n\t\tfromBits.apply(this, arguments)\n\t}\n\n\t/**\n\t * Set the current _UINT64_ object with its low and high bits\n\t * @method fromBits\n\t * @param {Number} first low bits (8)\n\t * @param {Number} second low bits (8)\n\t * @param {Number} first high bits (8)\n\t * @param {Number} second high bits (8)\n\t * or\n\t * @param {Number} low bits (32)\n\t * @param {Number} high bits (32)\n\t * @return ThisExpression\n\t */\n\tfunction fromBits (a00, a16, a32, a48) {\n\t\tif (typeof a32 == 'undefined') {\n\t\t\tthis._a00 = a00 & 0xFFFF\n\t\t\tthis._a16 = a00 >>> 16\n\t\t\tthis._a32 = a16 & 0xFFFF\n\t\t\tthis._a48 = a16 >>> 16\n\t\t\treturn this\n\t\t}\n\n\t\tthis._a00 = a00 | 0\n\t\tthis._a16 = a16 | 0\n\t\tthis._a32 = a32 | 0\n\t\tthis._a48 = a48 | 0\n\n\t\treturn this\n\t}\n\tUINT64.prototype.fromBits = fromBits\n\n\t/**\n\t * Set the current _UINT64_ object from a number\n\t * @method fromNumber\n\t * @param {Number} number\n\t * @return ThisExpression\n\t */\n\tfunction fromNumber (value) {\n\t\tthis._a00 = value & 0xFFFF\n\t\tthis._a16 = value >>> 16\n\t\tthis._a32 = 0\n\t\tthis._a48 = 0\n\n\t\treturn this\n\t}\n\tUINT64.prototype.fromNumber = fromNumber\n\n\t/**\n\t * Set the current _UINT64_ object from a string\n\t * @method fromString\n\t * @param {String} integer as a string\n\t * @param {Number} radix (optional, default=10)\n\t * @return ThisExpression\n\t */\n\tfunction fromString (s, radix) {\n\t\tradix = radix || 10\n\n\t\tthis._a00 = 0\n\t\tthis._a16 = 0\n\t\tthis._a32 = 0\n\t\tthis._a48 = 0\n\n\t\t/*\n\t\t\tIn Javascript, bitwise operators only operate on the first 32 bits \n\t\t\tof a number, even though parseInt() encodes numbers with a 53 bits \n\t\t\tmantissa.\n\t\t\tTherefore UINT64(<Number>) can only work on 32 bits.\n\t\t\tThe radix maximum value is 36 (as per ECMA specs) (26 letters + 10 digits)\n\t\t\tmaximum input value is m = 32bits as 1 = 2^32 - 1\n\t\t\tSo the maximum substring length n is:\n\t\t\t36^(n+1) - 1 = 2^32 - 1\n\t\t\t36^(n+1) = 2^32\n\t\t\t(n+1)ln(36) = 32ln(2)\n\t\t\tn = 32ln(2)/ln(36) - 1\n\t\t\tn = 5.189644915687692\n\t\t\tn = 5\n\t\t */\n\t\tvar radixUint = radixPowerCache[radix] || new UINT64( Math.pow(radix, 5) )\n\n\t\tfor (var i = 0, len = s.length; i < len; i += 5) {\n\t\t\tvar size = Math.min(5, len - i)\n\t\t\tvar value = parseInt( s.slice(i, i + size), radix )\n\t\t\tthis.multiply(\n\t\t\t\t\tsize < 5\n\t\t\t\t\t\t? new UINT64( Math.pow(radix, size) )\n\t\t\t\t\t\t: radixUint\n\t\t\t\t)\n\t\t\t\t.add( new UINT64(value) )\n\t\t}\n\n\t\treturn this\n\t}\n\tUINT64.prototype.fromString = fromString\n\n\t/**\n\t * Convert this _UINT64_ to a number (last 32 bits are dropped)\n\t * @method toNumber\n\t * @return {Number} the converted UINT64\n\t */\n\tUINT64.prototype.toNumber = function () {\n\t\treturn (this._a16 * 65536) + this._a00\n\t}\n\n\t/**\n\t * Convert this _UINT64_ to a string\n\t * @method toString\n\t * @param {Number} radix (optional, default=10)\n\t * @return {String} the converted UINT64\n\t */\n\tUINT64.prototype.toString = function (radix) {\n\t\tradix = radix || 10\n\t\tvar radixUint = radixCache[radix] || new UINT64(radix)\n\n\t\tif ( !this.gt(radixUint) ) return this.toNumber().toString(radix)\n\n\t\tvar self = this.clone()\n\t\tvar res = new Array(64)\n\t\tfor (var i = 63; i >= 0; i--) {\n\t\t\tself.div(radixUint)\n\t\t\tres[i] = self.remainder.toNumber().toString(radix)\n\t\t\tif ( !self.gt(radixUint) ) break\n\t\t}\n\t\tres[i-1] = self.toNumber().toString(radix)\n\n\t\treturn res.join('')\n\t}\n\n\t/**\n\t * Add two _UINT64_. The current _UINT64_ stores the result\n\t * @method add\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.add = function (other) {\n\t\tvar a00 = this._a00 + other._a00\n\n\t\tvar a16 = a00 >>> 16\n\t\ta16 += this._a16 + other._a16\n\n\t\tvar a32 = a16 >>> 16\n\t\ta32 += this._a32 + other._a32\n\n\t\tvar a48 = a32 >>> 16\n\t\ta48 += this._a48 + other._a48\n\n\t\tthis._a00 = a00 & 0xFFFF\n\t\tthis._a16 = a16 & 0xFFFF\n\t\tthis._a32 = a32 & 0xFFFF\n\t\tthis._a48 = a48 & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Subtract two _UINT64_. The current _UINT64_ stores the result\n\t * @method subtract\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.subtract = function (other) {\n\t\treturn this.add( other.clone().negate() )\n\t}\n\n\t/**\n\t * Multiply two _UINT64_. The current _UINT64_ stores the result\n\t * @method multiply\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.multiply = function (other) {\n\t\t/*\n\t\t\ta = a00 + a16 + a32 + a48\n\t\t\tb = b00 + b16 + b32 + b48\n\t\t\ta*b = (a00 + a16 + a32 + a48)(b00 + b16 + b32 + b48)\n\t\t\t\t= a00b00 + a00b16 + a00b32 + a00b48\n\t\t\t\t+ a16b00 + a16b16 + a16b32 + a16b48\n\t\t\t\t+ a32b00 + a32b16 + a32b32 + a32b48\n\t\t\t\t+ a48b00 + a48b16 + a48b32 + a48b48\n\n\t\t\ta16b48, a32b32, a48b16, a48b32 and a48b48 overflow the 64 bits\n\t\t\tso it comes down to:\n\t\t\ta*b\t= a00b00 + a00b16 + a00b32 + a00b48\n\t\t\t\t+ a16b00 + a16b16 + a16b32\n\t\t\t\t+ a32b00 + a32b16\n\t\t\t\t+ a48b00\n\t\t\t\t= a00b00\n\t\t\t\t+ a00b16 + a16b00\n\t\t\t\t+ a00b32 + a16b16 + a32b00\n\t\t\t\t+ a00b48 + a16b32 + a32b16 + a48b00\n\t\t */\n\t\tvar a00 = this._a00\n\t\tvar a16 = this._a16\n\t\tvar a32 = this._a32\n\t\tvar a48 = this._a48\n\t\tvar b00 = other._a00\n\t\tvar b16 = other._a16\n\t\tvar b32 = other._a32\n\t\tvar b48 = other._a48\n\n\t\tvar c00 = a00 * b00\n\n\t\tvar c16 = c00 >>> 16\n\t\tc16 += a00 * b16\n\t\tvar c32 = c16 >>> 16\n\t\tc16 &= 0xFFFF\n\t\tc16 += a16 * b00\n\n\t\tc32 += c16 >>> 16\n\t\tc32 += a00 * b32\n\t\tvar c48 = c32 >>> 16\n\t\tc32 &= 0xFFFF\n\t\tc32 += a16 * b16\n\t\tc48 += c32 >>> 16\n\t\tc32 &= 0xFFFF\n\t\tc32 += a32 * b00\n\n\t\tc48 += c32 >>> 16\n\t\tc48 += a00 * b48\n\t\tc48 &= 0xFFFF\n\t\tc48 += a16 * b32\n\t\tc48 &= 0xFFFF\n\t\tc48 += a32 * b16\n\t\tc48 &= 0xFFFF\n\t\tc48 += a48 * b00\n\n\t\tthis._a00 = c00 & 0xFFFF\n\t\tthis._a16 = c16 & 0xFFFF\n\t\tthis._a32 = c32 & 0xFFFF\n\t\tthis._a48 = c48 & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Divide two _UINT64_. The current _UINT64_ stores the result.\n\t * The remainder is made available as the _remainder_ property on\n\t * the _UINT64_ object. It can be null, meaning there are no remainder.\n\t * @method div\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.div = function (other) {\n\t\tif ( (other._a16 == 0) && (other._a32 == 0) && (other._a48 == 0) ) {\n\t\t\tif (other._a00 == 0) throw Error('division by zero')\n\n\t\t\t// other == 1: this\n\t\t\tif (other._a00 == 1) {\n\t\t\t\tthis.remainder = new UINT64(0)\n\t\t\t\treturn this\n\t\t\t}\n\t\t}\n\n\t\t// other > this: 0\n\t\tif ( other.gt(this) ) {\n\t\t\tthis.remainder = this.clone()\n\t\t\tthis._a00 = 0\n\t\t\tthis._a16 = 0\n\t\t\tthis._a32 = 0\n\t\t\tthis._a48 = 0\n\t\t\treturn this\n\t\t}\n\t\t// other == this: 1\n\t\tif ( this.eq(other) ) {\n\t\t\tthis.remainder = new UINT64(0)\n\t\t\tthis._a00 = 1\n\t\t\tthis._a16 = 0\n\t\t\tthis._a32 = 0\n\t\t\tthis._a48 = 0\n\t\t\treturn this\n\t\t}\n\n\t\t// Shift the divisor left until it is higher than the dividend\n\t\tvar _other = other.clone()\n\t\tvar i = -1\n\t\twhile ( !this.lt(_other) ) {\n\t\t\t// High bit can overflow the default 16bits\n\t\t\t// Its ok since we right shift after this loop\n\t\t\t// The overflown bit must be kept though\n\t\t\t_other.shiftLeft(1, true)\n\t\t\ti++\n\t\t}\n\n\t\t// Set the remainder\n\t\tthis.remainder = this.clone()\n\t\t// Initialize the current result to 0\n\t\tthis._a00 = 0\n\t\tthis._a16 = 0\n\t\tthis._a32 = 0\n\t\tthis._a48 = 0\n\t\tfor (; i >= 0; i--) {\n\t\t\t_other.shiftRight(1)\n\t\t\t// If shifted divisor is smaller than the dividend\n\t\t\t// then subtract it from the dividend\n\t\t\tif ( !this.remainder.lt(_other) ) {\n\t\t\t\tthis.remainder.subtract(_other)\n\t\t\t\t// Update the current result\n\t\t\t\tif (i >= 48) {\n\t\t\t\t\tthis._a48 |= 1 << (i - 48)\n\t\t\t\t} else if (i >= 32) {\n\t\t\t\t\tthis._a32 |= 1 << (i - 32)\n\t\t\t\t} else if (i >= 16) {\n\t\t\t\t\tthis._a16 |= 1 << (i - 16)\n\t\t\t\t} else {\n\t\t\t\t\tthis._a00 |= 1 << i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Negate the current _UINT64_\n\t * @method negate\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.negate = function () {\n\t\tvar v = ( ~this._a00 & 0xFFFF ) + 1\n\t\tthis._a00 = v & 0xFFFF\n\t\tv = (~this._a16 & 0xFFFF) + (v >>> 16)\n\t\tthis._a16 = v & 0xFFFF\n\t\tv = (~this._a32 & 0xFFFF) + (v >>> 16)\n\t\tthis._a32 = v & 0xFFFF\n\t\tthis._a48 = (~this._a48 + (v >>> 16)) & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\n\t * @method eq\n\t * @param {Object} other UINT64\n\t * @return {Boolean}\n\t */\n\tUINT64.prototype.equals = UINT64.prototype.eq = function (other) {\n\t\treturn (this._a48 == other._a48) && (this._a00 == other._a00)\n\t\t\t && (this._a32 == other._a32) && (this._a16 == other._a16)\n\t}\n\n\t/**\n\t * Greater than (strict)\n\t * @method gt\n\t * @param {Object} other UINT64\n\t * @return {Boolean}\n\t */\n\tUINT64.prototype.greaterThan = UINT64.prototype.gt = function (other) {\n\t\tif (this._a48 > other._a48) return true\n\t\tif (this._a48 < other._a48) return false\n\t\tif (this._a32 > other._a32) return true\n\t\tif (this._a32 < other._a32) return false\n\t\tif (this._a16 > other._a16) return true\n\t\tif (this._a16 < other._a16) return false\n\t\treturn this._a00 > other._a00\n\t}\n\n\t/**\n\t * Less than (strict)\n\t * @method lt\n\t * @param {Object} other UINT64\n\t * @return {Boolean}\n\t */\n\tUINT64.prototype.lessThan = UINT64.prototype.lt = function (other) {\n\t\tif (this._a48 < other._a48) return true\n\t\tif (this._a48 > other._a48) return false\n\t\tif (this._a32 < other._a32) return true\n\t\tif (this._a32 > other._a32) return false\n\t\tif (this._a16 < other._a16) return true\n\t\tif (this._a16 > other._a16) return false\n\t\treturn this._a00 < other._a00\n\t}\n\n\t/**\n\t * Bitwise OR\n\t * @method or\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.or = function (other) {\n\t\tthis._a00 |= other._a00\n\t\tthis._a16 |= other._a16\n\t\tthis._a32 |= other._a32\n\t\tthis._a48 |= other._a48\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise AND\n\t * @method and\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.and = function (other) {\n\t\tthis._a00 &= other._a00\n\t\tthis._a16 &= other._a16\n\t\tthis._a32 &= other._a32\n\t\tthis._a48 &= other._a48\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise XOR\n\t * @method xor\n\t * @param {Object} other UINT64\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.xor = function (other) {\n\t\tthis._a00 ^= other._a00\n\t\tthis._a16 ^= other._a16\n\t\tthis._a32 ^= other._a32\n\t\tthis._a48 ^= other._a48\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise NOT\n\t * @method not\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.not = function() {\n\t\tthis._a00 = ~this._a00 & 0xFFFF\n\t\tthis._a16 = ~this._a16 & 0xFFFF\n\t\tthis._a32 = ~this._a32 & 0xFFFF\n\t\tthis._a48 = ~this._a48 & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise shift right\n\t * @method shiftRight\n\t * @param {Number} number of bits to shift\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.shiftRight = UINT64.prototype.shiftr = function (n) {\n\t\tn %= 64\n\t\tif (n >= 48) {\n\t\t\tthis._a00 = this._a48 >> (n - 48)\n\t\t\tthis._a16 = 0\n\t\t\tthis._a32 = 0\n\t\t\tthis._a48 = 0\n\t\t} else if (n >= 32) {\n\t\t\tn -= 32\n\t\t\tthis._a00 = ( (this._a32 >> n) | (this._a48 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a16 = (this._a48 >> n) & 0xFFFF\n\t\t\tthis._a32 = 0\n\t\t\tthis._a48 = 0\n\t\t} else if (n >= 16) {\n\t\t\tn -= 16\n\t\t\tthis._a00 = ( (this._a16 >> n) | (this._a32 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a16 = ( (this._a32 >> n) | (this._a48 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a32 = (this._a48 >> n) & 0xFFFF\n\t\t\tthis._a48 = 0\n\t\t} else {\n\t\t\tthis._a00 = ( (this._a00 >> n) | (this._a16 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a16 = ( (this._a16 >> n) | (this._a32 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a32 = ( (this._a32 >> n) | (this._a48 << (16-n)) ) & 0xFFFF\n\t\t\tthis._a48 = (this._a48 >> n) & 0xFFFF\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise shift left\n\t * @method shiftLeft\n\t * @param {Number} number of bits to shift\n\t * @param {Boolean} allow overflow\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.shiftLeft = UINT64.prototype.shiftl = function (n, allowOverflow) {\n\t\tn %= 64\n\t\tif (n >= 48) {\n\t\t\tthis._a48 = this._a00 << (n - 48)\n\t\t\tthis._a32 = 0\n\t\t\tthis._a16 = 0\n\t\t\tthis._a00 = 0\n\t\t} else if (n >= 32) {\n\t\t\tn -= 32\n\t\t\tthis._a48 = (this._a16 << n) | (this._a00 >> (16-n))\n\t\t\tthis._a32 = (this._a00 << n) & 0xFFFF\n\t\t\tthis._a16 = 0\n\t\t\tthis._a00 = 0\n\t\t} else if (n >= 16) {\n\t\t\tn -= 16\n\t\t\tthis._a48 = (this._a32 << n) | (this._a16 >> (16-n))\n\t\t\tthis._a32 = ( (this._a16 << n) | (this._a00 >> (16-n)) ) & 0xFFFF\n\t\t\tthis._a16 = (this._a00 << n) & 0xFFFF\n\t\t\tthis._a00 = 0\n\t\t} else {\n\t\t\tthis._a48 = (this._a48 << n) | (this._a32 >> (16-n))\n\t\t\tthis._a32 = ( (this._a32 << n) | (this._a16 >> (16-n)) ) & 0xFFFF\n\t\t\tthis._a16 = ( (this._a16 << n) | (this._a00 >> (16-n)) ) & 0xFFFF\n\t\t\tthis._a00 = (this._a00 << n) & 0xFFFF\n\t\t}\n\t\tif (!allowOverflow) {\n\t\t\tthis._a48 &= 0xFFFF\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise rotate left\n\t * @method rotl\n\t * @param {Number} number of bits to rotate\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.rotateLeft = UINT64.prototype.rotl = function (n) {\n\t\tn %= 64\n\t\tif (n == 0) return this\n\t\tif (n >= 32) {\n\t\t\t// A.B.C.D\n\t\t\t// B.C.D.A rotl(16)\n\t\t\t// C.D.A.B rotl(32)\n\t\t\tvar v = this._a00\n\t\t\tthis._a00 = this._a32\n\t\t\tthis._a32 = v\n\t\t\tv = this._a48\n\t\t\tthis._a48 = this._a16\n\t\t\tthis._a16 = v\n\t\t\tif (n == 32) return this\n\t\t\tn -= 32\n\t\t}\n\n\t\tvar high = (this._a48 << 16) | this._a32\n\t\tvar low = (this._a16 << 16) | this._a00\n\n\t\tvar _high = (high << n) | (low >>> (32 - n))\n\t\tvar _low = (low << n) | (high >>> (32 - n))\n\n\t\tthis._a00 = _low & 0xFFFF\n\t\tthis._a16 = _low >>> 16\n\t\tthis._a32 = _high & 0xFFFF\n\t\tthis._a48 = _high >>> 16\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise rotate right\n\t * @method rotr\n\t * @param {Number} number of bits to rotate\n\t * @return ThisExpression\n\t */\n\tUINT64.prototype.rotateRight = UINT64.prototype.rotr = function (n) {\n\t\tn %= 64\n\t\tif (n == 0) return this\n\t\tif (n >= 32) {\n\t\t\t// A.B.C.D\n\t\t\t// D.A.B.C rotr(16)\n\t\t\t// C.D.A.B rotr(32)\n\t\t\tvar v = this._a00\n\t\t\tthis._a00 = this._a32\n\t\t\tthis._a32 = v\n\t\t\tv = this._a48\n\t\t\tthis._a48 = this._a16\n\t\t\tthis._a16 = v\n\t\t\tif (n == 32) return this\n\t\t\tn -= 32\n\t\t}\n\n\t\tvar high = (this._a48 << 16) | this._a32\n\t\tvar low = (this._a16 << 16) | this._a00\n\n\t\tvar _high = (high >>> n) | (low << (32 - n))\n\t\tvar _low = (low >>> n) | (high << (32 - n))\n\n\t\tthis._a00 = _low & 0xFFFF\n\t\tthis._a16 = _low >>> 16\n\t\tthis._a32 = _high & 0xFFFF\n\t\tthis._a48 = _high >>> 16\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Clone the current _UINT64_\n\t * @method clone\n\t * @return {Object} cloned UINT64\n\t */\n\tUINT64.prototype.clone = function () {\n\t\treturn new UINT64(this._a00, this._a16, this._a32, this._a48)\n\t}\n\n\tif (typeof define != 'undefined' && define.amd) {\n\t\t// AMD / RequireJS\n\t\tdefine([], function () {\n\t\t\treturn UINT64\n\t\t})\n\t} else if (typeof module != 'undefined' && module.exports) {\n\t\t// Node.js\n\t\tmodule.exports = UINT64\n\t} else {\n\t\t// Browser\n\t\troot['UINT64'] = UINT64\n\t}\n\n})(this)\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/cuint/lib/uint64.js","\"use strict\";\n\nvar _map = require(\"babel-runtime/core-js/map\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Container for entities which are known by the client\n * It's needed for deduplication when client obtain the same object several times\n */\n\nvar EntitiesCache = function () {\n    function EntitiesCache() {\n        (0, _classCallCheck3.default)(this, EntitiesCache);\n\n        this.names = new _map2.default();\n        this.entities = new _map2.default();\n    }\n\n    (0, _createClass3.default)(EntitiesCache, [{\n        key: \"store\",\n        value: function store(entity) {\n            var stored = this.entities.get(entity.sid);\n            if (stored) {\n                return stored;\n            }\n            this.entities.set(entity.sid, entity);\n            if (entity.uniqueName) {\n                this.names.set(entity.type + '::' + entity.uniqueName, entity.sid);\n            }\n            return entity;\n        }\n    }, {\n        key: \"getResolved\",\n        value: function getResolved(id, type) {\n            var resolvedSid = this.names.get(type + '::' + id);\n            return resolvedSid ? this.entities.get(resolvedSid) : null;\n        }\n    }, {\n        key: \"get\",\n        value: function get(id, type) {\n            return this.entities.get(id) || this.getResolved(id, type) || null;\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(sid) {\n            var cached = this.entities.get(sid);\n            if (cached) {\n                this.entities.delete(sid);\n                if (cached.uniqueName) {\n                    this.names.delete(cached.type + '::' + cached.uniqueName);\n                }\n            }\n        }\n    }]);\n    return EntitiesCache;\n}();\n\nexports.EntitiesCache = EntitiesCache;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/entitiesCache.js","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/ieee754/index.js","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nmodule.exports = require('../modules/_core').Map;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/map.js","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_an-instance.js","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_enum-bug-keys.js","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/symbol/index.js","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/promise.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = require('babel-runtime/core-js/object/freeze');\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _set2 = require('babel-runtime/core-js/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _javascriptStateMachine = require('javascript-state-machine');\n\nvar _javascriptStateMachine2 = _interopRequireDefault(_javascriptStateMachine);\n\nvar _backoff = require('backoff');\n\nvar _backoff2 = _interopRequireDefault(_backoff);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toArray(_set) {\n  var arr = [];\n  _set.forEach(function (v) {\n    return arr.push(v);\n  });\n  return arr;\n}\n\n/**\n * Creates new instance of the ERS registrar\n *\n * @class RegistrarConnector\n * @classdesc Manages the registrations on ERS service.\n * It deduplicates registrations and manages them automatically\n *\n * @param Object configuration\n * @param string notificationId\n * @param string channelType\n * @param Array messageTypes\n */\n\nvar RegistrarConnector = function (_EventEmitter) {\n  (0, _inherits3.default)(RegistrarConnector, _EventEmitter);\n\n  function RegistrarConnector(context, transport, config, channelType) {\n    (0, _classCallCheck3.default)(this, RegistrarConnector);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (RegistrarConnector.__proto__ || (0, _getPrototypeOf2.default)(RegistrarConnector)).call(this));\n\n    var fsm = _javascriptStateMachine2.default.create({\n      initial: { state: 'unregistered', event: 'init', defer: true },\n      events: [{ name: 'userUpdate', from: ['unregistered'], to: 'registering' }, { name: 'userUpdate', from: ['registered'], to: 'unregistering' }, { name: 'registered', from: ['registering', 'retrying'], to: 'registered' }, { name: 'unregistered', from: ['unregistering'], to: 'unregistered' }, { name: 'retry', from: ['retrying'], to: 'retrying' }, { name: 'failure', from: ['registering'], to: 'retrying' }, { name: 'failure', from: ['retrying'], to: 'retrying' }, { name: 'failure', from: ['unregistering'], to: 'unregistered' }],\n      callbacks: {\n        onregistering: function onregistering(event, from, to, arg) {\n          return _this._register(arg);\n        },\n        onunregistering: function onunregistering() {\n          return _this._unregister();\n        },\n        onregistered: function onregistered() {\n          return _this._onRegistered();\n        },\n        onunregistered: function onunregistered() {\n          return _this._onUnregistered();\n        },\n        onretrying: function onretrying(event, from, to, arg) {\n          return _this._initRetry(arg);\n        },\n        onfailure: function onfailure(event, from, to, arg) {\n          if (from === 'retrying') {\n            _this._initRetry(arg);\n          }\n        }\n      }\n    });\n\n    var backoff = _backoff2.default.exponential({\n      randomisationFactor: 0.2,\n      initialDelay: 2 * 1000,\n      maxDelay: 2 * 60 * 1000\n    });\n\n    backoff.on('ready', function () {\n      _this._retry();\n    });\n\n    (0, _defineProperties2.default)(_this, {\n      _transport: { value: transport },\n      _context: { value: context },\n      _url: { value: config.registrarUri, writable: false },\n      _config: { value: config },\n      _fsm: { value: fsm },\n      _backoff: { value: backoff },\n      _channelType: { value: channelType },\n      _registrationId: { value: false, writable: true },\n      _notificationId: { value: false, writable: true },\n      _messageTypes: { value: new _set3.default(), writable: true },\n      _pendingUpdate: { value: null, writable: true }\n    });\n\n    fsm.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(RegistrarConnector, [{\n    key: 'setNotificationId',\n    value: function setNotificationId(notificationId) {\n      if (this._notificationId === notificationId) {\n        return;\n      }\n\n      this._notificationId = notificationId;\n      this._updateRegistration();\n    }\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      return this._updateRegistration();\n    }\n  }, {\n    key: 'has',\n    value: function has(messageType) {\n      return this._messageTypes.has(messageType);\n    }\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType) {\n      if (this._messageTypes.has(messageType)) {\n        _logger2.default.debug('Message type already registered ', messageType);\n        return false;\n      }\n\n      this._messageTypes.add(messageType);\n      this._updateRegistration();\n      return true;\n    }\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType) {\n      if (!this._messageTypes.has(messageType)) {\n        return false;\n      }\n\n      this._messageTypes.delete(messageType);\n\n      if (this._messageTypes.size > 0) {\n        this._updateRegistration();\n      } else {\n        this._removeRegistration();\n      }\n      return true;\n    }\n  }, {\n    key: '_updateRegistration',\n    value: function _updateRegistration() {\n      if (this._notificationId) {\n        this._update(this._notificationId, toArray(this._messageTypes));\n      }\n    }\n  }, {\n    key: '_removeRegistration',\n    value: function _removeRegistration() {\n      if (this._notificationId) {\n        this._update(this._notificationId, toArray(this._messageTypes));\n      }\n    }\n\n    /**\n     * Update service registration\n     * @param {Array} messageTypes Array of message type names\n     * @private\n     */\n\n  }, {\n    key: '_update',\n    value: function _update(notificationId, messageTypes) {\n      var regData = { notificationId: notificationId, messageTypes: messageTypes };\n\n      if (this._fsm.is('unregistered')) {\n        if (regData.notificationId && regData.messageTypes.length > 0) {\n          this._fsm.userUpdate(regData);\n        }\n      } else if (this._fsm.is('registered')) {\n        this._fsm.userUpdate(regData);\n        this._setPendingUpdate(regData);\n      } else {\n        this._setPendingUpdate(regData);\n      }\n    }\n  }, {\n    key: '_setPendingUpdate',\n    value: function _setPendingUpdate(regData) {\n      this._pendingUpdate = regData;\n    }\n  }, {\n    key: '_checkPendingUpdate',\n    value: function _checkPendingUpdate() {\n      if (!this._pendingUpdate) {\n        return;\n      }\n\n      var pendingUpdate = this._pendingUpdate;\n      this._pendingUpdate = null;\n\n      this._updateRegistration(pendingUpdate.notificationId, pendingUpdate.messageTypes);\n    }\n  }, {\n    key: '_initRetry',\n    value: function _initRetry(regData) {\n      if (!this._pendingUpdate) {\n        this._setPendingUpdate(regData);\n      }\n\n      this._backoff.backoff();\n    }\n  }, {\n    key: '_retry',\n    value: function _retry() {\n      if (!this._pendingUpdate) {\n        return;\n      }\n\n      var pendingUpdate = this._pendingUpdate;\n      this._pendingUpdate = null;\n\n      this._register(pendingUpdate);\n    }\n  }, {\n    key: '_onRegistered',\n    value: function _onRegistered() {\n      this._backoff.reset();\n      this.emit('stateChanged', 'registered');\n      this._checkPendingUpdate();\n    }\n  }, {\n    key: '_onUnregistered',\n    value: function _onUnregistered() {\n      this._backoff.reset();\n      this.emit('stateChanged', 'unregistered');\n      this._checkPendingUpdate();\n    }\n  }, {\n    key: '_register',\n    value: function _register(regData) {\n      var _this2 = this;\n\n      /* eslint-disable camelcase */\n      var registrarRequest = {\n        endpoint_platform: this._context.platform,\n        channel_type: this._channelType,\n        version: '2',\n        message_types: regData.messageTypes,\n        data: {},\n        ttl: 'PT24H'\n      };\n\n      if (this._channelType === 'twilsock') {\n        registrarRequest.data.url = regData.notificationId;\n      } else {\n        registrarRequest.data.registration_id = regData.notificationId;\n      }\n\n      var uri = this._url + '?productId=' + this._context.productId;\n      var headers = {\n        'Content-Type': 'application/json',\n        'X-Twilio-Token': this._config.token\n      };\n      /* eslint-enable camelcase */\n\n      _logger2.default.trace('Creating registration for channel ', this._channelType);\n      return this._transport.post(uri, headers, registrarRequest).then(function (response) {\n        _this2._registrationId = response.body.id;\n        _this2._registrationData = regData;\n\n        _logger2.default.debug('Registration created: ', response);\n        _this2._fsm.registered();\n      }).catch(function (error) {\n        _logger2.default.error('Registration failed: ', error);\n        _this2._fsm.failure(regData);\n        return error;\n      });\n    }\n  }, {\n    key: '_unregister',\n    value: function _unregister() {\n      var _this3 = this;\n\n      if (!this._registrationId) {\n        return _promise2.default.resolve();\n      }\n\n      var uri = this._url + '/' + this._registrationId + '?productId=' + this._context.productId;\n      var headers = {\n        'Content-Type': 'application/json',\n        'X-Twilio-Token': this._config.token\n      };\n\n      _logger2.default.trace('Removing registration for ', this._channelType);\n      return this._transport.delete(uri, headers).then(function () {\n        _logger2.default.debug('Registration removed for ', _this3._channelType);\n        _this3._registrationId = false;\n        _this3._fsm.unregistered();\n      }).catch(function (reason) {\n        // failure to remove registration since being treated as \"unregistered\" state\n        // because it is indicates that something wrong with server/connection\n        _logger2.default.error('Failed to remove of registration ', _this3.channelType, reason);\n        _this3._fsm.failure();\n        return reason;\n      });\n    }\n  }]);\n  return RegistrarConnector;\n}(_events2.default);\n\nexports.default = RegistrarConnector;\n\n\n(0, _freeze2.default)(RegistrarConnector);\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/registrar.connector.js","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_array-includes.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = require(\"events\");\nvar operation_retrier_1 = require(\"operation-retrier\");\nvar configuration_1 = require(\"./configuration\");\nvar logger_1 = require(\"./logger\");\nvar persistentState_1 = require(\"./persistentState\");\nvar twilio_transport_1 = require(\"twilio-transport\");\nfunction createPromise() {\n    var pd = { promise: null, resolve: null, reject: null };\n    pd.promise = new _promise2.default(function (resolve, reject) {\n        pd.resolve = resolve;\n        pd.reject = reject;\n    });\n    return pd;\n}\n\nvar TokenRequest = function TokenRequest() {\n    (0, _classCallCheck3.default)(this, TokenRequest);\n};\n/**\n * Client for Twilio Endpoint Management service (EMS).\n */\n\n\nvar EmsClient = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(EmsClient, _events_1$EventEmitte);\n\n    /**\n     * @param config Configuration structure\n     */\n    function EmsClient(config) {\n        (0, _classCallCheck3.default)(this, EmsClient);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EmsClient.__proto__ || (0, _getPrototypeOf2.default)(EmsClient)).call(this));\n\n        config = config || {};\n        config.transport = config.transport || new twilio_transport_1.Transport(config.twilsockClient || null);\n        _this.state = new persistentState_1.PersistentState();\n        _this.config = new configuration_1.default(config);\n        _this.twilsock = config.twilsockClient;\n        _this.transport = config.transport;\n        return _this;\n    }\n    /**\n     * Set new FPA token\n     * @param fpaToken <String> new FPA token to use\n     * @return Promise<EMSClient#TokenInfo>\n     */\n\n\n    (0, _createClass3.default)(EmsClient, [{\n        key: \"setToken\",\n        value: function setToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var oldTokenRequest;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.currentFpaToken !== fpaToken) {\n                                    this.currentFpaToken = fpaToken;\n                                    oldTokenRequest = this.currentTokenRequest;\n\n                                    this.currentTokenRequest = this.establishToken(fpaToken);\n                                    this.notifyRejected(oldTokenRequest);\n                                }\n                                return _context.abrupt(\"return\", this.currentTokenRequest.promise);\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n    }, {\n        key: \"notifyRejected\",\n        value: function notifyRejected(request) {\n            if (request) {\n                setTimeout(function () {\n                    return request.reject(new Error('Operation has been cancelled by next token'));\n                }, 0);\n            }\n        }\n    }, {\n        key: \"establishToken\",\n        value: function establishToken(fpaToken) {\n            var _this2 = this;\n\n            var tokenRequest = new TokenRequest();\n            var promise = new _promise2.default(function (resolve, reject) {\n                _this2.establishTokenImpl(fpaToken).then(resolve).catch(reject);\n                tokenRequest.resolve = resolve;\n                tokenRequest.reject = reject;\n            });\n            tokenRequest.promise = promise;\n            return tokenRequest;\n        }\n    }, {\n        key: \"establishTokenImpl\",\n        value: function establishTokenImpl(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var _this3 = this;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                return _context2.abrupt(\"return\", new operation_retrier_1.default({ min: 500, max: 2000 }).run(function () {\n                                    return _this3.requestRtdToken(fpaToken);\n                                }).then(function (res) {\n                                    if (res.status != 'ok') {\n                                        throw res.exception;\n                                    }\n                                    if (_this3.currentFpaToken !== fpaToken) {\n                                        // user has already set new token. ignoring\n                                        return;\n                                    }\n                                    _this3.state.continuationToken = res.response.continuation_token;\n                                    var rtdToken = res.response.twilio_rtd_token;\n                                    if (res.response.status.status === 'NEW') {\n                                        _this3.emit('tokenCreated', rtdToken);\n                                    } else {\n                                        _this3.emit('tokenUpdated', rtdToken);\n                                    }\n                                    _this3.emit('token', rtdToken);\n                                    var response = {\n                                        token: res.response.twilio_rtd_token,\n                                        ttl: res.response.ttl,\n                                        status: res.response.status.status,\n                                        reason: res.response.status.reason || null,\n                                        identity: res.response.identity || null,\n                                        accountSid: res.response.account_sid,\n                                        serviceSids: res.response.instance_sids\n                                    };\n                                    _this3.emit('response', response);\n                                    return response;\n                                }).catch(function (e) {\n                                    logger_1.default.error(e);\n                                    throw e;\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n    }, {\n        key: \"requestRtdToken\",\n        value: function requestRtdToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var headers, body, response;\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                headers = { 'Content-Type': 'application/json' };\n                                body = {\n                                    fpa_token: fpaToken,\n                                    continuation_token: this.state.continuationToken\n                                };\n\n                                logger_1.default.debug('Token request', body);\n                                _context3.prev = 3;\n                                _context3.next = 6;\n                                return this.transport.post(this.config.url, headers, body);\n\n                            case 6:\n                                response = _context3.sent;\n\n                                logger_1.default.debug('Token response:', response);\n                                return _context3.abrupt(\"return\", { status: 'ok', token: fpaToken, response: response.body });\n\n                            case 11:\n                                _context3.prev = 11;\n                                _context3.t0 = _context3[\"catch\"](3);\n\n                                if (!(_context3.t0.status === 401 || _context3.t0.status === 403)) {\n                                    _context3.next = 16;\n                                    break;\n                                }\n\n                                // map transport error\n                                // TODO: remove me when transport fixed\n                                if (!(_context3.t0 instanceof Error)) {\n                                    if (_context3.t0.body) {\n                                        _context3.t0 = new Error(_context3.t0.body.message);\n                                    } else if (_context3.t0.description) {\n                                        _context3.t0 = new Error(_context3.t0.description);\n                                    }\n                                }\n                                return _context3.abrupt(\"return\", { status: 'denied', exception: _context3.t0, token: null, response: null });\n\n                            case 16:\n                                throw _context3.t0;\n\n                            case 17:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[3, 11]]);\n            }));\n        }\n    }]);\n    return EmsClient;\n}(events_1.EventEmitter);\n\nexports.EmsClient = EmsClient;\n/**\n * This structure describes an RTD token\n * @typedef {Object} EMSClient#TokenInfo\n * @property {String} token - RTD token generated for given FPA token\n * @property {Number} ttl - ttl to calculate expiration token time\n * @property {String} status - Indicates did server generated new token or extended existing. Valid values are ['NEW', 'UPDATED'].\n * @property {String} reason - If service issued a new RTD token, this field describes a reason\n */\n// for backward compatibility\nvar EMSClient = EmsClient;\nexports.EMSClient = EMSClient;\nexports.default = EMSClient;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-ems-client/browser/client.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/define-properties.js","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iter-detect.js","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/get-iterator.js","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-integer.js","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-index.js","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.array.from.js","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_shared.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class Paginator\n * @classdesc Pagination helper class\n *\n * @property {Array} items Array of elements on current page\n * @property {boolean} hasNextPage Indicates the existence of next page\n * @property {boolean} hasPrevPage Indicates the existence of previous page\n */\n\nvar Paginator = function () {\n    /*\n    * @constructor\n    * @param {Array} items Array of element for current page\n    * @param {Object} params\n    * @private\n    */\n    function Paginator(items, source, prevToken, nextToken) {\n        (0, _classCallCheck3.default)(this, Paginator);\n\n        this.prevToken = prevToken;\n        this.nextToken = nextToken;\n        this.items = items;\n        this.source = source;\n    }\n\n    (0, _createClass3.default)(Paginator, [{\n        key: \"nextPage\",\n\n        /**\n         * Request next page.\n         * Does not modify existing object\n         * @return {Promise<Paginator>}\n         */\n        value: function nextPage() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.hasNextPage) {\n                                    _context.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('No next page');\n\n                            case 2:\n                                return _context.abrupt(\"return\", this.source(this.nextToken));\n\n                            case 3:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Request previous page.\n         * Does not modify existing object\n         * @return {Promise<Paginator>}\n         */\n\n    }, {\n        key: \"prevPage\",\n        value: function prevPage() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (this.hasPrevPage) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('No previous page');\n\n                            case 2:\n                                return _context2.abrupt(\"return\", this.source(this.prevToken));\n\n                            case 3:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n    }, {\n        key: \"hasNextPage\",\n        get: function get() {\n            return !!this.nextToken;\n        }\n    }, {\n        key: \"hasPrevPage\",\n        get: function get() {\n            return !!this.prevToken;\n        }\n    }]);\n    return Paginator;\n}();\n\nexports.Paginator = Paginator;\nexports.default = Paginator;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/paginator.js","/**\nxxHash implementation in pure Javascript\n\nCopyright (C) 2013, Pierre Curto\nMIT license\n*/\nvar UINT32 = require('cuint').UINT32\n\n/*\n\tMerged this sequence of method calls as it speeds up\n\tthe calculations by a factor of 2\n */\n// this.v1.add( other.multiply(PRIME32_2) ).rotl(13).multiply(PRIME32_1);\nUINT32.prototype.xxh_update = function (low, high) {\n\tvar b00 = PRIME32_2._low\n\tvar b16 = PRIME32_2._high\n\n\tvar c16, c00\n\tc00 = low * b00\n\tc16 = c00 >>> 16\n\n\tc16 += high * b00\n\tc16 &= 0xFFFF\t\t// Not required but improves performance\n\tc16 += low * b16\n\n\tvar a00 = this._low + (c00 & 0xFFFF)\n\tvar a16 = a00 >>> 16\n\n\ta16 += this._high + (c16 & 0xFFFF)\n\n\tvar v = (a16 << 16) | (a00 & 0xFFFF)\n\tv = (v << 13) | (v >>> 19)\n\n\ta00 = v & 0xFFFF\n\ta16 = v >>> 16\n\n\tb00 = PRIME32_1._low\n\tb16 = PRIME32_1._high\n\n\tc00 = a00 * b00\n\tc16 = c00 >>> 16\n\n\tc16 += a16 * b00\n\tc16 &= 0xFFFF\t\t// Not required but improves performance\n\tc16 += a00 * b16\n\n\tthis._low = c00 & 0xFFFF\n\tthis._high = c16 & 0xFFFF\n}\n\n/*\n * Constants\n */\nvar PRIME32_1 = UINT32( '2654435761' )\nvar PRIME32_2 = UINT32( '2246822519' )\nvar PRIME32_3 = UINT32( '3266489917' )\nvar PRIME32_4 = UINT32(  '668265263' )\nvar PRIME32_5 = UINT32(  '374761393' )\n\n/**\n* Convert string to proper UTF-8 array\n* @param str Input string\n* @returns {Uint8Array} UTF8 array is returned as uint8 array\n*/\nfunction toUTF8Array (str) {\n\tvar utf8 = []\n\tfor (var i=0, n=str.length; i < n; i++) {\n\t\tvar charcode = str.charCodeAt(i)\n\t\tif (charcode < 0x80) utf8.push(charcode)\n\t\telse if (charcode < 0x800) {\n\t\t\tutf8.push(0xc0 | (charcode >> 6),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t\telse if (charcode < 0xd800 || charcode >= 0xe000) {\n\t\t\tutf8.push(0xe0 | (charcode >> 12),\n\t\t\t0x80 | ((charcode>>6) & 0x3f),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t\t// surrogate pair\n\t\telse {\n\t\t\ti++;\n\t\t\t// UTF-16 encodes 0x10000-0x10FFFF by\n\t\t\t// subtracting 0x10000 and splitting the\n\t\t\t// 20 bits of 0x0-0xFFFFF into two halves\n\t\t\tcharcode = 0x10000 + (((charcode & 0x3ff)<<10)\n\t\t\t| (str.charCodeAt(i) & 0x3ff))\n\t\t\tutf8.push(0xf0 | (charcode >>18),\n\t\t\t0x80 | ((charcode>>12) & 0x3f),\n\t\t\t0x80 | ((charcode>>6) & 0x3f),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t}\n\n\treturn new Uint8Array(utf8)\n}\n\n/**\n * XXH object used as a constructor or a function\n * @constructor\n * or\n * @param {Object|String} input data\n * @param {Number|UINT32} seed\n * @return ThisExpression\n * or\n * @return {UINT32} xxHash\n */\nfunction XXH () {\n\tif (arguments.length == 2)\n\t\treturn new XXH( arguments[1] ).update( arguments[0] ).digest()\n\n\tif (!(this instanceof XXH))\n\t\treturn new XXH( arguments[0] )\n\n\tinit.call(this, arguments[0])\n}\n\n/**\n * Initialize the XXH instance with the given seed\n * @method init\n * @param {Number|Object} seed as a number or an unsigned 32 bits integer\n * @return ThisExpression\n */\n function init (seed) {\n\tthis.seed = seed instanceof UINT32 ? seed.clone() : UINT32(seed)\n\tthis.v1 = this.seed.clone().add(PRIME32_1).add(PRIME32_2)\n\tthis.v2 = this.seed.clone().add(PRIME32_2)\n\tthis.v3 = this.seed.clone()\n\tthis.v4 = this.seed.clone().subtract(PRIME32_1)\n\tthis.total_len = 0\n\tthis.memsize = 0\n\tthis.memory = null\n\n\treturn this\n}\nXXH.prototype.init = init\n\n/**\n * Add data to be computed for the XXH hash\n * @method update\n * @param {String|Buffer|ArrayBuffer} input as a string or nodejs Buffer or ArrayBuffer\n * @return ThisExpression\n */\nXXH.prototype.update = function (input) {\n\tvar isString = typeof input == 'string'\n\tvar isArrayBuffer\n\n\t// Convert all strings to utf-8 first (issue #5)\n\tif (isString) {\n\t\tinput = toUTF8Array(input)\n\t\tisString = false\n\t\tisArrayBuffer = true\n\t}\n\n\tif (typeof ArrayBuffer !== \"undefined\" && input instanceof ArrayBuffer)\n\t{\n\t\tisArrayBuffer = true\n\t\tinput = new Uint8Array(input);\n\t}\n\n\tvar p = 0\n\tvar len = input.length\n\tvar bEnd = p + len\n\n\tif (len == 0) return this\n\n\tthis.total_len += len\n\n\tif (this.memsize == 0)\n\t{\n\t\tif (isString) {\n\t\t\tthis.memory = ''\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory = new Uint8Array(16)\n\t\t} else {\n\t\t\tthis.memory = new Buffer(16)\n\t\t}\n\t}\n\n\tif (this.memsize + len < 16)   // fill in tmp buffer\n\t{\n\t\t// XXH_memcpy(this.memory + this.memsize, input, len)\n\t\tif (isString) {\n\t\t\tthis.memory += input\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(0, len), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, 0, len )\n\t\t}\n\n\t\tthis.memsize += len\n\t\treturn this\n\t}\n\n\tif (this.memsize > 0)   // some data left from previous update\n\t{\n\t\t// XXH_memcpy(this.memory + this.memsize, input, 16-this.memsize);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(0, 16 - this.memsize)\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(0, 16 - this.memsize), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, 0, 16 - this.memsize )\n\t\t}\n\n\t\tvar p32 = 0\n\t\tif (isString) {\n\t\t\tthis.v1.xxh_update(\n\t\t\t\t(this.memory.charCodeAt(p32+1) << 8) | this.memory.charCodeAt(p32)\n\t\t\t,\t(this.memory.charCodeAt(p32+3) << 8) | this.memory.charCodeAt(p32+2)\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v2.xxh_update(\n\t\t\t\t(this.memory.charCodeAt(p32+1) << 8) | this.memory.charCodeAt(p32)\n\t\t\t,\t(this.memory.charCodeAt(p32+3) << 8) | this.memory.charCodeAt(p32+2)\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v3.xxh_update(\n\t\t\t\t(this.memory.charCodeAt(p32+1) << 8) | this.memory.charCodeAt(p32)\n\t\t\t,\t(this.memory.charCodeAt(p32+3) << 8) | this.memory.charCodeAt(p32+2)\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v4.xxh_update(\n\t\t\t\t(this.memory.charCodeAt(p32+1) << 8) | this.memory.charCodeAt(p32)\n\t\t\t,\t(this.memory.charCodeAt(p32+3) << 8) | this.memory.charCodeAt(p32+2)\n\t\t\t)\n\t\t} else {\n\t\t\tthis.v1.xxh_update(\n\t\t\t\t(this.memory[p32+1] << 8) | this.memory[p32]\n\t\t\t,\t(this.memory[p32+3] << 8) | this.memory[p32+2]\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v2.xxh_update(\n\t\t\t\t(this.memory[p32+1] << 8) | this.memory[p32]\n\t\t\t,\t(this.memory[p32+3] << 8) | this.memory[p32+2]\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v3.xxh_update(\n\t\t\t\t(this.memory[p32+1] << 8) | this.memory[p32]\n\t\t\t,\t(this.memory[p32+3] << 8) | this.memory[p32+2]\n\t\t\t)\n\t\t\tp32 += 4\n\t\t\tthis.v4.xxh_update(\n\t\t\t\t(this.memory[p32+1] << 8) | this.memory[p32]\n\t\t\t,\t(this.memory[p32+3] << 8) | this.memory[p32+2]\n\t\t\t)\n\t\t}\n\n\t\tp += 16 - this.memsize\n\t\tthis.memsize = 0\n\t\tif (isString) this.memory = ''\n\t}\n\n\tif (p <= bEnd - 16)\n\t{\n\t\tvar limit = bEnd - 16\n\n\t\tdo\n\t\t{\n\t\t\tif (isString) {\n\t\t\t\tthis.v1.xxh_update(\n\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v2.xxh_update(\n\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v3.xxh_update(\n\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v4.xxh_update(\n\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tthis.v1.xxh_update(\n\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v2.xxh_update(\n\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v3.xxh_update(\n\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t)\n\t\t\t\tp += 4\n\t\t\t\tthis.v4.xxh_update(\n\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t)\n\t\t\t}\n\t\t\tp += 4\n\t\t} while (p <= limit)\n\t}\n\n\tif (p < bEnd)\n\t{\n\t\t// XXH_memcpy(this.memory, p, bEnd-p);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(p)\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(p, bEnd), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, p, bEnd )\n\t\t}\n\n\t\tthis.memsize = bEnd - p\n\t}\n\n\treturn this\n}\n\n/**\n * Finalize the XXH computation. The XXH instance is ready for reuse for the given seed\n * @method digest\n * @return {UINT32} xxHash\n */\nXXH.prototype.digest = function () {\n\tvar input = this.memory\n\tvar isString = typeof input == 'string'\n\tvar p = 0\n\tvar bEnd = this.memsize\n\tvar h32, h\n\tvar u = new UINT32\n\n\tif (this.total_len >= 16)\n\t{\n\t\th32 = this.v1.rotl(1).add( this.v2.rotl(7).add( this.v3.rotl(12).add( this.v4.rotl(18) ) ) )\n\t}\n\telse\n\t{\n\t\th32  = this.seed.clone().add( PRIME32_5 )\n\t}\n\n\th32.add( u.fromNumber(this.total_len) )\n\n\twhile (p <= bEnd - 4)\n\t{\n\t\tif (isString) {\n\t\t\tu.fromBits(\n\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t)\n\t\t} else {\n\t\t\tu.fromBits(\n\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t)\n\t\t}\n\t\th32\n\t\t\t.add( u.multiply(PRIME32_3) )\n\t\t\t.rotl(17)\n\t\t\t.multiply( PRIME32_4 )\n\t\tp += 4\n\t}\n\n\twhile (p < bEnd)\n\t{\n\t\tu.fromBits( isString ? input.charCodeAt(p++) : input[p++], 0 )\n\t\th32\n\t\t\t.add( u.multiply(PRIME32_5) )\n\t\t\t.rotl(11)\n\t\t\t.multiply(PRIME32_1)\n\t}\n\n\th = h32.clone().shiftRight(15)\n\th32.xor(h).multiply(PRIME32_2)\n\n\th = h32.clone().shiftRight(13)\n\th32.xor(h).multiply(PRIME32_3)\n\n\th = h32.clone().shiftRight(16)\n\th32.xor(h)\n\n\t// Reset the state\n\tthis.init( this.seed )\n\n\treturn h32\n}\n\nmodule.exports = XXH\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/xxhashjs/lib/xxhash.js","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-gopn.js","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/array/from.js","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_redefine-all.js","/**\nxxHash64 implementation in pure Javascript\n\nCopyright (C) 2016, Pierre Curto\nMIT license\n*/\nvar UINT64 = require('cuint').UINT64\n\n/*\n * Constants\n */\nvar PRIME64_1 = UINT64( '11400714785074694791' )\nvar PRIME64_2 = UINT64( '14029467366897019727' )\nvar PRIME64_3 = UINT64(  '1609587929392839161' )\nvar PRIME64_4 = UINT64(  '9650029242287828579' )\nvar PRIME64_5 = UINT64(  '2870177450012600261' )\n\n/**\n* Convert string to proper UTF-8 array\n* @param str Input string\n* @returns {Uint8Array} UTF8 array is returned as uint8 array\n*/\nfunction toUTF8Array (str) {\n\tvar utf8 = []\n\tfor (var i=0, n=str.length; i < n; i++) {\n\t\tvar charcode = str.charCodeAt(i)\n\t\tif (charcode < 0x80) utf8.push(charcode)\n\t\telse if (charcode < 0x800) {\n\t\t\tutf8.push(0xc0 | (charcode >> 6),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t\telse if (charcode < 0xd800 || charcode >= 0xe000) {\n\t\t\tutf8.push(0xe0 | (charcode >> 12),\n\t\t\t0x80 | ((charcode>>6) & 0x3f),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t\t// surrogate pair\n\t\telse {\n\t\t\ti++;\n\t\t\t// UTF-16 encodes 0x10000-0x10FFFF by\n\t\t\t// subtracting 0x10000 and splitting the\n\t\t\t// 20 bits of 0x0-0xFFFFF into two halves\n\t\t\tcharcode = 0x10000 + (((charcode & 0x3ff)<<10)\n\t\t\t| (str.charCodeAt(i) & 0x3ff))\n\t\t\tutf8.push(0xf0 | (charcode >>18),\n\t\t\t0x80 | ((charcode>>12) & 0x3f),\n\t\t\t0x80 | ((charcode>>6) & 0x3f),\n\t\t\t0x80 | (charcode & 0x3f))\n\t\t}\n\t}\n\n\treturn new Uint8Array(utf8)\n}\n\n/**\n * XXH64 object used as a constructor or a function\n * @constructor\n * or\n * @param {Object|String} input data\n * @param {Number|UINT64} seed\n * @return ThisExpression\n * or\n * @return {UINT64} xxHash\n */\nfunction XXH64 () {\n\tif (arguments.length == 2)\n\t\treturn new XXH64( arguments[1] ).update( arguments[0] ).digest()\n\n\tif (!(this instanceof XXH64))\n\t\treturn new XXH64( arguments[0] )\n\n\tinit.call(this, arguments[0])\n}\n\n/**\n * Initialize the XXH64 instance with the given seed\n * @method init\n * @param {Number|Object} seed as a number or an unsigned 32 bits integer\n * @return ThisExpression\n */\n function init (seed) {\n\tthis.seed = seed instanceof UINT64 ? seed.clone() : UINT64(seed)\n\tthis.v1 = this.seed.clone().add(PRIME64_1).add(PRIME64_2)\n\tthis.v2 = this.seed.clone().add(PRIME64_2)\n\tthis.v3 = this.seed.clone()\n\tthis.v4 = this.seed.clone().subtract(PRIME64_1)\n\tthis.total_len = 0\n\tthis.memsize = 0\n\tthis.memory = null\n\n\treturn this\n}\nXXH64.prototype.init = init\n\n/**\n * Add data to be computed for the XXH64 hash\n * @method update\n * @param {String|Buffer|ArrayBuffer} input as a string or nodejs Buffer or ArrayBuffer\n * @return ThisExpression\n */\nXXH64.prototype.update = function (input) {\n\tvar isString = typeof input == 'string'\n\tvar isArrayBuffer\n\n\t// Convert all strings to utf-8 first (issue #5)\n\tif (isString) {\n\t\tinput = toUTF8Array(input)\n\t\tisString = false\n\t\tisArrayBuffer = true\n\t}\n\n\tif (typeof ArrayBuffer !== \"undefined\" && input instanceof ArrayBuffer)\n\t{\n\t\tisArrayBuffer = true\n\t\tinput = new Uint8Array(input);\n\t}\n\n\tvar p = 0\n\tvar len = input.length\n\tvar bEnd = p + len\n\n\tif (len == 0) return this\n\n\tthis.total_len += len\n\n\tif (this.memsize == 0)\n\t{\n\t\tif (isString) {\n\t\t\tthis.memory = ''\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory = new Uint8Array(32)\n\t\t} else {\n\t\t\tthis.memory = new Buffer(32)\n\t\t}\n\t}\n\n\tif (this.memsize + len < 32)   // fill in tmp buffer\n\t{\n\t\t// XXH64_memcpy(this.memory + this.memsize, input, len)\n\t\tif (isString) {\n\t\t\tthis.memory += input\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(0, len), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, 0, len )\n\t\t}\n\n\t\tthis.memsize += len\n\t\treturn this\n\t}\n\n\tif (this.memsize > 0)   // some data left from previous update\n\t{\n\t\t// XXH64_memcpy(this.memory + this.memsize, input, 16-this.memsize);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(0, 32 - this.memsize)\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(0, 32 - this.memsize), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, 0, 32 - this.memsize )\n\t\t}\n\n\t\tvar p64 = 0\n\t\tif (isString) {\n\t\t\tvar other\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory.charCodeAt(p64+1) << 8) | this.memory.charCodeAt(p64)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+3) << 8) | this.memory.charCodeAt(p64+2)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+5) << 8) | this.memory.charCodeAt(p64+4)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+7) << 8) | this.memory.charCodeAt(p64+6)\n\t\t\t\t)\n\t\t\tthis.v1.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory.charCodeAt(p64+1) << 8) | this.memory.charCodeAt(p64)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+3) << 8) | this.memory.charCodeAt(p64+2)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+5) << 8) | this.memory.charCodeAt(p64+4)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+7) << 8) | this.memory.charCodeAt(p64+6)\n\t\t\t\t)\n\t\t\tthis.v2.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory.charCodeAt(p64+1) << 8) | this.memory.charCodeAt(p64)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+3) << 8) | this.memory.charCodeAt(p64+2)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+5) << 8) | this.memory.charCodeAt(p64+4)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+7) << 8) | this.memory.charCodeAt(p64+6)\n\t\t\t\t)\n\t\t\tthis.v3.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory.charCodeAt(p64+1) << 8) | this.memory.charCodeAt(p64)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+3) << 8) | this.memory.charCodeAt(p64+2)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+5) << 8) | this.memory.charCodeAt(p64+4)\n\t\t\t\t,\t(this.memory.charCodeAt(p64+7) << 8) | this.memory.charCodeAt(p64+6)\n\t\t\t\t)\n\t\t\tthis.v4.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t} else {\n\t\t\tvar other\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory[p64+1] << 8) | this.memory[p64]\n\t\t\t\t,\t(this.memory[p64+3] << 8) | this.memory[p64+2]\n\t\t\t\t,\t(this.memory[p64+5] << 8) | this.memory[p64+4]\n\t\t\t\t,\t(this.memory[p64+7] << 8) | this.memory[p64+6]\n\t\t\t\t)\n\t\t\tthis.v1.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory[p64+1] << 8) | this.memory[p64]\n\t\t\t\t,\t(this.memory[p64+3] << 8) | this.memory[p64+2]\n\t\t\t\t,\t(this.memory[p64+5] << 8) | this.memory[p64+4]\n\t\t\t\t,\t(this.memory[p64+7] << 8) | this.memory[p64+6]\n\t\t\t\t)\n\t\t\tthis.v2.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory[p64+1] << 8) | this.memory[p64]\n\t\t\t\t,\t(this.memory[p64+3] << 8) | this.memory[p64+2]\n\t\t\t\t,\t(this.memory[p64+5] << 8) | this.memory[p64+4]\n\t\t\t\t,\t(this.memory[p64+7] << 8) | this.memory[p64+6]\n\t\t\t\t)\n\t\t\tthis.v3.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\tp64 += 8\n\t\t\tother = UINT64(\n\t\t\t\t\t(this.memory[p64+1] << 8) | this.memory[p64]\n\t\t\t\t,\t(this.memory[p64+3] << 8) | this.memory[p64+2]\n\t\t\t\t,\t(this.memory[p64+5] << 8) | this.memory[p64+4]\n\t\t\t\t,\t(this.memory[p64+7] << 8) | this.memory[p64+6]\n\t\t\t\t)\n\t\t\tthis.v4.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t}\n\n\t\tp += 32 - this.memsize\n\t\tthis.memsize = 0\n\t\tif (isString) this.memory = ''\n\t}\n\n\tif (p <= bEnd - 32)\n\t{\n\t\tvar limit = bEnd - 32\n\n\t\tdo\n\t\t{\n\t\t\tif (isString) {\n\t\t\t\tvar other\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t\t,\t(input.charCodeAt(p+5) << 8) | input.charCodeAt(p+4)\n\t\t\t\t\t,\t(input.charCodeAt(p+7) << 8) | input.charCodeAt(p+6)\n\t\t\t\t\t)\n\t\t\t\tthis.v1.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t\t,\t(input.charCodeAt(p+5) << 8) | input.charCodeAt(p+4)\n\t\t\t\t\t,\t(input.charCodeAt(p+7) << 8) | input.charCodeAt(p+6)\n\t\t\t\t\t)\n\t\t\t\tthis.v2.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t\t,\t(input.charCodeAt(p+5) << 8) | input.charCodeAt(p+4)\n\t\t\t\t\t,\t(input.charCodeAt(p+7) << 8) | input.charCodeAt(p+6)\n\t\t\t\t\t)\n\t\t\t\tthis.v3.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t\t\t,\t(input.charCodeAt(p+5) << 8) | input.charCodeAt(p+4)\n\t\t\t\t\t,\t(input.charCodeAt(p+7) << 8) | input.charCodeAt(p+6)\n\t\t\t\t\t)\n\t\t\t\tthis.v4.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t} else {\n\t\t\t\tvar other\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t\t,\t(input[p+5] << 8) | input[p+4]\n\t\t\t\t\t,\t(input[p+7] << 8) | input[p+6]\n\t\t\t\t\t)\n\t\t\t\tthis.v1.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t\t,\t(input[p+5] << 8) | input[p+4]\n\t\t\t\t\t,\t(input[p+7] << 8) | input[p+6]\n\t\t\t\t\t)\n\t\t\t\tthis.v2.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t\t,\t(input[p+5] << 8) | input[p+4]\n\t\t\t\t\t,\t(input[p+7] << 8) | input[p+6]\n\t\t\t\t\t)\n\t\t\t\tthis.v3.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t\tp += 8\n\t\t\t\tother = UINT64(\n\t\t\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t\t\t,\t(input[p+5] << 8) | input[p+4]\n\t\t\t\t\t,\t(input[p+7] << 8) | input[p+6]\n\t\t\t\t\t)\n\t\t\t\tthis.v4.add( other.multiply(PRIME64_2) ).rotl(31).multiply(PRIME64_1);\n\t\t\t}\n\t\t\tp += 8\n\t\t} while (p <= limit)\n\t}\n\n\tif (p < bEnd)\n\t{\n\t\t// XXH64_memcpy(this.memory, p, bEnd-p);\n\t\tif (isString) {\n\t\t\tthis.memory += input.slice(p)\n\t\t} else if (isArrayBuffer) {\n\t\t\tthis.memory.set( input.subarray(p, bEnd), this.memsize )\n\t\t} else {\n\t\t\tinput.copy( this.memory, this.memsize, p, bEnd )\n\t\t}\n\n\t\tthis.memsize = bEnd - p\n\t}\n\n\treturn this\n}\n\n/**\n * Finalize the XXH64 computation. The XXH64 instance is ready for reuse for the given seed\n * @method digest\n * @return {UINT64} xxHash\n */\nXXH64.prototype.digest = function () {\n\tvar input = this.memory\n\tvar isString = typeof input == 'string'\n\tvar p = 0\n\tvar bEnd = this.memsize\n\tvar h64, h\n\tvar u = new UINT64\n\n\tif (this.total_len >= 32)\n\t{\n\t\th64 = this.v1.clone().rotl(1)\n\t\th64.add( this.v2.clone().rotl(7) )\n\t\th64.add( this.v3.clone().rotl(12) )\n\t\th64.add( this.v4.clone().rotl(18) )\n\n\t\th64.xor( this.v1.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1) )\n\t\th64.multiply(PRIME64_1).add(PRIME64_4)\n\n\t\th64.xor( this.v2.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1) )\n\t\th64.multiply(PRIME64_1).add(PRIME64_4)\n\n\t\th64.xor( this.v3.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1) )\n\t\th64.multiply(PRIME64_1).add(PRIME64_4)\n\n\t\th64.xor( this.v4.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1) )\n\t\th64.multiply(PRIME64_1).add(PRIME64_4)\n\t}\n\telse\n\t{\n\t\th64  = this.seed.clone().add( PRIME64_5 )\n\t}\n\n\th64.add( u.fromNumber(this.total_len) )\n\n\twhile (p <= bEnd - 8)\n\t{\n\t\tif (isString) {\n\t\t\tu.fromBits(\n\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t,\t(input.charCodeAt(p+5) << 8) | input.charCodeAt(p+4)\n\t\t\t,\t(input.charCodeAt(p+7) << 8) | input.charCodeAt(p+6)\n\t\t\t)\n\t\t} else {\n\t\t\tu.fromBits(\n\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t,\t(input[p+5] << 8) | input[p+4]\n\t\t\t,\t(input[p+7] << 8) | input[p+6]\n\t\t\t)\n\t\t}\n\t\tu.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)\n\t\th64\n\t\t\t.xor(u)\n\t\t\t.rotl(27)\n\t\t\t.multiply( PRIME64_1 )\n\t\t\t.add( PRIME64_4 )\n\t\tp += 8\n\t}\n\n\tif (p + 4 <= bEnd) {\n\t\tif (isString) {\n\t\t\tu.fromBits(\n\t\t\t\t(input.charCodeAt(p+1) << 8) | input.charCodeAt(p)\n\t\t\t,\t(input.charCodeAt(p+3) << 8) | input.charCodeAt(p+2)\n\t\t\t,\t0\n\t\t\t,\t0\n\t\t\t)\n\t\t} else {\n\t\t\tu.fromBits(\n\t\t\t\t(input[p+1] << 8) | input[p]\n\t\t\t,\t(input[p+3] << 8) | input[p+2]\n\t\t\t,\t0\n\t\t\t,\t0\n\t\t\t)\n\t\t}\n\t\th64\n\t\t\t.xor( u.multiply(PRIME64_1) )\n\t\t\t.rotl(23)\n\t\t\t.multiply( PRIME64_2 )\n\t\t\t.add( PRIME64_3 )\n\t\tp += 4\n\t}\n\n\twhile (p < bEnd)\n\t{\n\t\tu.fromBits( isString ? input.charCodeAt(p++) : input[p++], 0, 0, 0 )\n\t\th64\n\t\t\t.xor( u.multiply(PRIME64_5) )\n\t\t\t.rotl(11)\n\t\t\t.multiply(PRIME64_1)\n\t}\n\n\th = h64.clone().shiftRight(33)\n\th64.xor(h).multiply(PRIME64_2)\n\n\th = h64.clone().shiftRight(29)\n\th64.xor(h).multiply(PRIME64_3)\n\n\th = h64.clone().shiftRight(32)\n\th64.xor(h)\n\n\t// Reset the state\n\tthis.init( this.seed )\n\n\treturn h64\n}\n\nmodule.exports = XXH64\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/xxhashjs/lib/xxhash64.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"./logger\");\nvar SYNC_DOCUMENT_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.document';\nvar SYNC_LIST_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.list';\nvar SYNC_MAP_NOTIFICATION_TYPE = 'com.twilio.rtd.cds.map';\nvar SYNC_NOTIFICATION_TYPE = 'twilio.sync.event';\n/**\n * @class Router\n * @classdesc Routes all incoming messages to the consumers\n */\n\nvar Router = function () {\n    function Router(params) {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Router);\n\n        this.config = params.config;\n        this.subscriptions = params.subscriptions;\n        this.notifications = params.notifications;\n        this.notifications.subscribe(SYNC_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_DOCUMENT_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_LIST_NOTIFICATION_TYPE);\n        this.notifications.subscribe(SYNC_MAP_NOTIFICATION_TYPE);\n        this.notifications.on('message', function (messageType, payload) {\n            return _this.onMessage(messageType, payload);\n        });\n        this.notifications.on('transportReady', function (isConnected) {\n            return _this.onConnectionStateChanged(isConnected);\n        });\n    }\n    /**\n     * Entry point for all incoming messages\n     * @param {String} type - Type of incoming message\n     * @param {Object} message - Message to route\n     */\n\n\n    (0, _createClass3.default)(Router, [{\n        key: \"onMessage\",\n        value: function onMessage(type, message) {\n            logger_1.default.trace('Notification type:', type, 'content:', message);\n            switch (type) {\n                case SYNC_DOCUMENT_NOTIFICATION_TYPE:\n                case SYNC_LIST_NOTIFICATION_TYPE:\n                case SYNC_MAP_NOTIFICATION_TYPE:\n                    this.subscriptions.acceptMessage(message, false);\n                    break;\n                case SYNC_NOTIFICATION_TYPE:\n                    this.subscriptions.acceptMessage(message, true);\n                    break;\n            }\n        }\n        /**\n         * Subscribe for events\n         */\n\n    }, {\n        key: \"subscribe\",\n        value: function subscribe(sid, entity) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.subscriptions.add(sid, entity);\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Unsubscribe from events\n         */\n\n    }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe(sid, entity) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return this.subscriptions.remove(sid);\n\n                            case 2:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Handle transport establishing event\n         * If we have any subscriptions - we should check object for modifications\n         */\n\n    }, {\n        key: \"onConnectionStateChanged\",\n        value: function onConnectionStateChanged(isConnected) {\n            this.subscriptions.onConnectionStateChanged(isConnected);\n        }\n    }]);\n    return Router;\n}();\n\nexports.Router = Router;\nexports.default = Router;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/router.js","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.array.iterator.js","exports.f = Object.getOwnPropertySymbols;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-gops.js","exports.UINT32 = require('./lib/uint32')\nexports.UINT64 = require('./lib/uint64')\n\n\n// WEBPACK FOOTER //\n// ../node_modules/cuint/index.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Deep-clone an object. Note that this does not work on object containing\n * functions.\n * @param {object} obj - the object to deep-clone\n * @returns {object}\n */\nfunction deepClone(obj) {\n    return JSON.parse((0, _stringify2.default)(obj));\n}\nexports.deepClone = deepClone;\n/**\n * Construct URI with query parameters\n */\n\nvar UriBuilder = function () {\n    function UriBuilder(base) {\n        (0, _classCallCheck3.default)(this, UriBuilder);\n\n        this.base = base;\n        this.args = new Array();\n        this.paths = new Array();\n    }\n\n    (0, _createClass3.default)(UriBuilder, [{\n        key: \"pathSegment\",\n        value: function pathSegment(name) {\n            this.paths.push(encodeURIComponent(name));\n            return this;\n        }\n    }, {\n        key: \"queryParam\",\n        value: function queryParam(name, value) {\n            if (typeof value !== 'undefined') {\n                this.args.push(encodeURIComponent(name) + '=' + encodeURIComponent(value));\n            }\n            return this;\n        }\n    }, {\n        key: \"build\",\n        value: function build() {\n            var result = this.base;\n            if (this.paths.length) {\n                result += '/' + this.paths.join('/');\n            }\n            if (this.args.length) {\n                result += '?' + this.args.join('&');\n            }\n            return result;\n        }\n    }]);\n    return UriBuilder;\n}();\n\nexports.UriBuilder = UriBuilder;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/utils.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar Backoff = require('./lib/backoff');\nvar ExponentialBackoffStrategy = require('./lib/strategy/exponential');\nvar FibonacciBackoffStrategy = require('./lib/strategy/fibonacci');\nvar FunctionCall = require('./lib/function_call.js');\n\nmodule.exports.Backoff = Backoff;\nmodule.exports.FunctionCall = FunctionCall;\nmodule.exports.FibonacciStrategy = FibonacciBackoffStrategy;\nmodule.exports.ExponentialStrategy = ExponentialBackoffStrategy;\n\n// Constructs a Fibonacci backoff.\nmodule.exports.fibonacci = function(options) {\n    return new Backoff(new FibonacciBackoffStrategy(options));\n};\n\n// Constructs an exponential backoff.\nmodule.exports.exponential = function(options) {\n    return new Backoff(new ExponentialBackoffStrategy(options));\n};\n\n// Constructs a FunctionCall for the given function and arguments.\nmodule.exports.call = function(fn, vargs, callback) {\n    var args = Array.prototype.slice.call(arguments);\n    fn = args[0];\n    vargs = args.slice(1, args.length - 1);\n    callback = args[args.length - 1];\n    return new FunctionCall(fn, vargs, callback);\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/index.js","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/json/stringify.js","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/regenerator-runtime/runtime.js","// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g =\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this;\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/regenerator-runtime/runtime-module.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class\n * @classdesc Map item\n * Represents a data for each element in a collection\n * @alias MapItem\n * @property {String} key  - identifier of an item\n * @property {Object} value - value of an item\n */\n\nvar MapItem = function () {\n  /**\n   * @private\n   * @constructor\n   * @param {Object} data Item descriptor\n   * @param {String} data.key Item identifier\n   * @param {String} data.uri Item URI\n   * @param {Object} data.value Item data\n   */\n  function MapItem(descriptor) {\n    (0, _classCallCheck3.default)(this, MapItem);\n\n    this.descriptor = descriptor;\n  }\n\n  (0, _createClass3.default)(MapItem, [{\n    key: \"update\",\n\n    /**\n     * Update item data\n     * @param {Number} EventId Update event id\n     * @param {String} Revision Updated item revision\n     * @param {Object} Value Updated item data\n     * @private\n     */\n    value: function update(eventId, revision, value) {\n      this.descriptor.last_event_id = eventId;\n      this.descriptor.revision = revision;\n      this.descriptor.data = value;\n      return this;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      return this.descriptor.url;\n    }\n  }, {\n    key: \"revision\",\n    get: function get() {\n      return this.descriptor.revision;\n    }\n  }, {\n    key: \"lastEventId\",\n    get: function get() {\n      return this.descriptor.last_event_id;\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this.descriptor.key;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.descriptor.data;\n    }\n  }]);\n  return MapItem;\n}();\n\nexports.MapItem = MapItem;\nexports.default = MapItem;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/mapitem.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar platform = require(\"platform\");\n\nvar ClientInfo = function ClientInfo(version) {\n    (0, _classCallCheck3.default)(this, ClientInfo);\n\n    this.sdk = 'js';\n    this.sdkVer = version;\n    this.os = platform.os.family;\n    this.osVer = platform.os.version;\n    this.pl = platform.name;\n    this.plVer = platform.version;\n};\n\nexports.ClientInfo = ClientInfo;\nexports.default = ClientInfo;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/clientInfo.js","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_ie8-dom-define.js","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/isarray/index.js","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-length.js","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.map.js","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_cof.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/extends.js","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    function realMethod(methodName) {\n        if (typeof console === undefinedType) {\n            return false; // We can't build a real method without a console to log to\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // these private functions always need `this` to be set properly\n\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n    }\n\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public API\n       *\n       */\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Package-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    return defaultLogger;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/loglevel/lib/loglevel.js","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_array-species-create.js","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/is-iterable.js","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-create.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _configuration = require('./configuration');\n\nvar _configuration2 = _interopRequireDefault(_configuration);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _bottleneck = require('bottleneck');\n\nvar _bottleneck2 = _interopRequireDefault(_bottleneck);\n\nvar _registrar = require('./registrar');\n\nvar _registrar2 = _interopRequireDefault(_registrar);\n\nvar _twilsock = require('twilsock');\n\nvar _twilsock2 = _interopRequireDefault(_twilsock);\n\nvar _twilioTransport = require('twilio-transport');\n\nvar _twilioTransport2 = _interopRequireDefault(_twilioTransport);\n\nvar _twilioEmsClient = require('twilio-ems-client');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction limit(fn, to, per) {\n  // overflow since no token is passed to arguments\n  var limiter = new _bottleneck2.default(to, per, 1, _bottleneck2.default.strategy.LEAK);\n  return function () {\n    var args = Array.prototype.slice.call(arguments, 0);\n    args.unshift(fn);\n    return limiter.schedule.apply(limiter, args);\n  };\n}\n\n/**\n * @class\n * @alias Notifications\n * @classdesc The helper library for the notification service.\n * Provides high level api for creating and managing notification subscriptions and receiving messages\n * Creates the instance of Notification helper library\n *\n * @constructor\n * @param {string} token - Twilio access token\n * @param {Notifications#ClientOptions} options - Options to customize client behavior\n */\n\nvar Client = function (_EventEmitter) {\n  (0, _inherits3.default)(Client, _EventEmitter);\n\n  function Client(fpaToken, options) {\n    (0, _classCallCheck3.default)(this, Client);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Client.__proto__ || (0, _getPrototypeOf2.default)(Client)).call(this));\n\n    if (!fpaToken) {\n      throw new Error('Token is required for Notifications client');\n    }\n\n    options = options || {};\n\n    options.logLevel = options.logLevel || 'error';\n    _logger2.default.setLevel(options.logLevel);\n\n    var minTokenRefreshInterval = options.minTokenRefreshInterval || 10000;\n    var productId = options.productId || 'notifications';\n\n    options.twilsockClient = options.twilsockClient || new _twilsock2.default(fpaToken, options);\n    options.transport = options.transport || new _twilioTransport2.default(options.twilsockClient);\n    options.emsClient = options.emsClient || new _twilioEmsClient.EMSClient(options);\n\n    var twilsock = options.twilsockClient;\n    var transport = options.transport;\n\n    var reliableTransportState = {\n      overall: false,\n      transport: false,\n      registration: false,\n      lastEmitted: null\n    };\n\n    var config = new _configuration2.default(null, options);\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _emsClient: { value: options.emsClient },\n      _registrar: { value: new _registrar2.default(productId, transport, twilsock, config) },\n      _twilsock: { value: twilsock },\n      _reliableTransportState: { value: reliableTransportState },\n\n      updateToken: { value: limit(_this._updateToken.bind(_this), 1, minTokenRefreshInterval), enumerable: true },\n      connectionState: {\n        get: function get() {\n          if (_this._twilsock.state === 'disconnected') {\n            return 'disconnected';\n          } else if (_this._twilsock.state === 'disconnecting') {\n            return 'disconnecting';\n          } else if (_this._twilsock.state === 'connected' && _this._reliableTransportState.registration) {\n            return 'connected';\n          } else if (_this._twilsock.state === 'rejected') {\n            return 'denied';\n          }\n\n          return 'connecting';\n        }\n      }\n    });\n\n    _this._emsClient.setToken(fpaToken).then(function (response) {\n      _this._config.updateToken(response.token);\n      _this._registrar.updateToken();\n    }).catch(function (e) {\n      _logger2.default.warn('Failed to set token', e);\n    });\n\n    _this._onTransportStateChange(_this._twilsock.connected);\n\n    _this._registrar.on('transportReady', function (state) {\n      _this._onRegistrationStateChange(state ? 'registered' : '');\n    });\n    _this._registrar.on('stateChanged', function (state) {\n      _this._onRegistrationStateChange(state);\n    });\n    _this._registrar.on('needReliableTransport', _this._onNeedReliableTransport.bind(_this));\n\n    _this._twilsock.on('message', function (type, message) {\n      return _this._routeMessage(type, message);\n    });\n    _this._twilsock.on('connected', function (notificationId) {\n      _this._onTransportStateChange(true);\n      _this._registrar.setNotificationId('twilsock', notificationId);\n    });\n    _this._twilsock.on('disconnected', function () {\n      _this._onTransportStateChange(false);\n    });\n    return _this;\n  }\n\n  /**\n   * Routes messages to the external subscribers\n   * @private\n   */\n\n\n  (0, _createClass3.default)(Client, [{\n    key: '_routeMessage',\n    value: function _routeMessage(type, message) {\n      _logger2.default.trace('Message arrived: ', type, message);\n      this.emit('message', type, message);\n    }\n  }, {\n    key: '_onNeedReliableTransport',\n    value: function _onNeedReliableTransport(isNeeded) {\n      if (isNeeded) {\n        this._twilsock.connect();\n      } else {\n        this._twilsock.disconnect();\n      }\n    }\n  }, {\n    key: '_onRegistrationStateChange',\n    value: function _onRegistrationStateChange(state) {\n      this._reliableTransportState.registration = state === 'registered';\n      this._updateTransportState();\n    }\n  }, {\n    key: '_onTransportStateChange',\n    value: function _onTransportStateChange(connected) {\n      this._reliableTransportState.transport = connected;\n      this._updateTransportState();\n    }\n  }, {\n    key: '_updateTransportState',\n    value: function _updateTransportState() {\n      var overallState = this._reliableTransportState.transport && this._reliableTransportState.registration;\n\n      if (this._reliableTransportState.overall !== overallState) {\n        this._reliableTransportState.overall = overallState;\n\n        _logger2.default.info('Transport ready ' + overallState);\n        this.emit('transportReady', overallState);\n      }\n\n      if (this._reliableTransportState.lastEmitted !== this.connectionState) {\n        this._reliableTransportState.lastEmitted = this.connectionState;\n        this.emit('connectionStateChanged', this.connectionState);\n      }\n    }\n\n    /**\n     * Adds the subscription for the given message type\n     * @param {string} messageType The type of message that you want to receive\n     * @param {string} channelType. Supported are 'twilsock', 'gcm' and 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(messageType, channelType) {\n      channelType = channelType || 'twilsock';\n      _logger2.default.trace('Add subscriptions for message type: ', messageType, channelType);\n\n      return this._registrar.subscribe(messageType, channelType);\n    }\n\n    /**\n     * Remove the subscription for the particular message type\n     * @param {string} messageType The type of message that you don't want to receive anymore\n     * @param {string} channelType. Supported are 'twilsock', 'gcm' and 'fcm'\n     * @public\n     */\n\n  }, {\n    key: 'unsubscribe',\n    value: function unsubscribe(messageType, channelType) {\n      channelType = channelType || 'twilsock';\n      _logger2.default.trace('Remove subscriptions for message type: ', messageType, channelType);\n\n      return this._registrar.unsubscribe(messageType, channelType);\n    }\n\n    /**\n     * Handle incoming push notification.\n     * Client application should call this method when it receives push notifications and pass the received data\n     * @param {Object} msg - push message object\n     * @public\n     */\n\n  }, {\n    key: 'handlePushNotification',\n    value: function handlePushNotification(msg) {\n      _logger2.default.warn('Push message passed, but no functionality implemented yet: ' + msg);\n    }\n\n    /**\n     * Set GCM/FCM token to enable application register for a push messages\n     * @param {string} gcmToken/fcmToken Token received from GCM/FCM system\n     * @public\n     */\n\n  }, {\n    key: 'setPushRegistrationId',\n    value: function setPushRegistrationId(registrationId, type) {\n      this._registrar.setNotificationId(type || 'gcm', registrationId);\n    }\n\n    /**\n     * Updates auth token for registration\n     * @param {string} token Authentication token for registrations\n     * @alias updateToken\n     * @public\n     */\n\n  }, {\n    key: '_updateToken',\n    value: function _updateToken(fpaToken) {\n      var _this2 = this;\n\n      _logger2.default.info('authTokenUpdated');\n      if (this._fpaToken === fpaToken) {\n        return _promise2.default.resolve();\n      }\n\n      this._twilsock.updateToken(fpaToken);\n      return this._emsClient.setToken(fpaToken).then(function (response) {\n        return response.token;\n      }).then(function (token) {\n        _this2._config.updateToken(token);\n        _this2._registrar.updateToken();\n      });\n    }\n  }]);\n  return Client;\n}(_events2.default);\n\n/**\n * Fired when new message arrived.\n * @param {Object} message`\n * @event NotificationsClient#message\n */\n\n/**\n * Fired when transport state has changed\n * @param {boolean} transport state\n * @event NotificationsClient#transportReady\n */\n\n/**\n * Fired when transport state has been changed\n * @param {string} transport state\n * @event NotificationsClient#connectionStateChanged\n */\n\n/**\n * These options can be passed to Client constructor\n * @typedef {Object} Notifications#ClientOptions\n * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n */\n\n\nexports.default = Client;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/client.js","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_defined.js","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_wks.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar events = require('events');\nvar precond = require('precond');\nvar util = require('util');\n\nvar Backoff = require('./backoff');\nvar FibonacciBackoffStrategy = require('./strategy/fibonacci');\n\n// Wraps a function to be called in a backoff loop.\nfunction FunctionCall(fn, args, callback) {\n    events.EventEmitter.call(this);\n\n    precond.checkIsFunction(fn, 'Expected fn to be a function.');\n    precond.checkIsArray(args, 'Expected args to be an array.');\n    precond.checkIsFunction(callback, 'Expected callback to be a function.');\n\n    this.function_ = fn;\n    this.arguments_ = args;\n    this.callback_ = callback;\n    this.lastResult_ = [];\n    this.numRetries_ = 0;\n\n    this.backoff_ = null;\n    this.strategy_ = null;\n    this.failAfter_ = -1;\n    this.retryPredicate_ = FunctionCall.DEFAULT_RETRY_PREDICATE_;\n\n    this.state_ = FunctionCall.State_.PENDING;\n}\nutil.inherits(FunctionCall, events.EventEmitter);\n\n// States in which the call can be.\nFunctionCall.State_ = {\n    // Call isn't started yet.\n    PENDING: 0,\n    // Call is in progress.\n    RUNNING: 1,\n    // Call completed successfully which means that either the wrapped function\n    // returned successfully or the maximal number of backoffs was reached.\n    COMPLETED: 2,\n    // The call was aborted.\n    ABORTED: 3\n};\n\n// The default retry predicate which considers any error as retriable.\nFunctionCall.DEFAULT_RETRY_PREDICATE_ = function(err) {\n  return true;\n};\n\n// Checks whether the call is pending.\nFunctionCall.prototype.isPending = function() {\n    return this.state_ == FunctionCall.State_.PENDING;\n};\n\n// Checks whether the call is in progress.\nFunctionCall.prototype.isRunning = function() {\n    return this.state_ == FunctionCall.State_.RUNNING;\n};\n\n// Checks whether the call is completed.\nFunctionCall.prototype.isCompleted = function() {\n    return this.state_ == FunctionCall.State_.COMPLETED;\n};\n\n// Checks whether the call is aborted.\nFunctionCall.prototype.isAborted = function() {\n    return this.state_ == FunctionCall.State_.ABORTED;\n};\n\n// Sets the backoff strategy to use. Can only be called before the call is\n// started otherwise an exception will be thrown.\nFunctionCall.prototype.setStrategy = function(strategy) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.strategy_ = strategy;\n    return this; // Return this for chaining.\n};\n\n// Sets the predicate which will be used to determine whether the errors\n// returned from the wrapped function should be retried or not, e.g. a\n// network error would be retriable while a type error would stop the\n// function call.\nFunctionCall.prototype.retryIf = function(retryPredicate) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.retryPredicate_ = retryPredicate;\n    return this;\n};\n\n// Returns all intermediary results returned by the wrapped function since\n// the initial call.\nFunctionCall.prototype.getLastResult = function() {\n    return this.lastResult_.concat();\n};\n\n// Returns the number of times the wrapped function call was retried.\nFunctionCall.prototype.getNumRetries = function() {\n    return this.numRetries_;\n};\n\n// Sets the backoff limit.\nFunctionCall.prototype.failAfter = function(maxNumberOfRetry) {\n    precond.checkState(this.isPending(), 'FunctionCall in progress.');\n    this.failAfter_ = maxNumberOfRetry;\n    return this; // Return this for chaining.\n};\n\n// Aborts the call.\nFunctionCall.prototype.abort = function() {\n    if (this.isCompleted() || this.isAborted()) {\n      return;\n    }\n\n    if (this.isRunning()) {\n        this.backoff_.reset();\n    }\n\n    this.state_ = FunctionCall.State_.ABORTED;\n    this.lastResult_ = [new Error('Backoff aborted.')];\n    this.emit('abort');\n    this.doCallback_();\n};\n\n// Initiates the call to the wrapped function. Accepts an optional factory\n// function used to create the backoff instance; used when testing.\nFunctionCall.prototype.start = function(backoffFactory) {\n    precond.checkState(!this.isAborted(), 'FunctionCall is aborted.');\n    precond.checkState(this.isPending(), 'FunctionCall already started.');\n\n    var strategy = this.strategy_ || new FibonacciBackoffStrategy();\n\n    this.backoff_ = backoffFactory ?\n        backoffFactory(strategy) :\n        new Backoff(strategy);\n\n    this.backoff_.on('ready', this.doCall_.bind(this, true /* isRetry */));\n    this.backoff_.on('fail', this.doCallback_.bind(this));\n    this.backoff_.on('backoff', this.handleBackoff_.bind(this));\n\n    if (this.failAfter_ > 0) {\n        this.backoff_.failAfter(this.failAfter_);\n    }\n\n    this.state_ = FunctionCall.State_.RUNNING;\n    this.doCall_(false /* isRetry */);\n};\n\n// Calls the wrapped function.\nFunctionCall.prototype.doCall_ = function(isRetry) {\n    if (isRetry) {\n        this.numRetries_++;\n    }\n    var eventArgs = ['call'].concat(this.arguments_);\n    events.EventEmitter.prototype.emit.apply(this, eventArgs);\n    var callback = this.handleFunctionCallback_.bind(this);\n    this.function_.apply(null, this.arguments_.concat(callback));\n};\n\n// Calls the wrapped function's callback with the last result returned by the\n// wrapped function.\nFunctionCall.prototype.doCallback_ = function() {\n    this.callback_.apply(null, this.lastResult_);\n};\n\n// Handles wrapped function's completion. This method acts as a replacement\n// for the original callback function.\nFunctionCall.prototype.handleFunctionCallback_ = function() {\n    if (this.isAborted()) {\n        return;\n    }\n\n    var args = Array.prototype.slice.call(arguments);\n    this.lastResult_ = args; // Save last callback arguments.\n    events.EventEmitter.prototype.emit.apply(this, ['callback'].concat(args));\n\n    var err = args[0];\n    if (err && this.retryPredicate_(err)) {\n        this.backoff_.backoff(err);\n    } else {\n        this.state_ = FunctionCall.State_.COMPLETED;\n        this.doCallback_();\n    }\n};\n\n// Handles the backoff event by reemitting it.\nFunctionCall.prototype.handleBackoff_ = function(number, delay, err) {\n    this.emit('backoff', number, delay, err);\n};\n\nmodule.exports = FunctionCall;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/lib/function_call.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/possibleConstructorReturn.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = require(\"events\");\nvar xxhashjs_1 = require(\"xxhashjs\");\nvar Twilsock = require(\"twilsock\");\nvar twilio_transport_1 = require(\"twilio-transport\");\nvar twilio_ems_client_1 = require(\"twilio-ems-client\");\nvar Notifications = require(\"twilio-notifications\");\nvar utils_1 = require(\"./utils\");\nvar logger_1 = require(\"./logger\");\nvar configuration_1 = require(\"./configuration\");\nvar subscriptions_1 = require(\"./subscriptions\");\nvar router_1 = require(\"./router\");\nvar network_1 = require(\"./network\");\nvar syncdocument_1 = require(\"./syncdocument\");\nvar synclist_1 = require(\"./synclist\");\nvar syncmap_1 = require(\"./syncmap\");\nvar clientInfo_1 = require(\"./clientInfo\");\nvar entitiesCache_1 = require(\"./entitiesCache\");\nvar storage_1 = require(\"./services/storage\");\nvar utils_2 = require(\"./utils\");\n// TODO: Pick some small library and use it instead\nvar deferred_1 = require(\"./utils/deferred\");\nvar syncerror_1 = require(\"./syncerror\");\nvar SYNC_PRODUCT_ID = 'data_sync';\nvar SDK_VERSION = require('../package.json').version;\nfunction subscribe(subscribable) {\n    subscribable._subscribe();\n    return subscribable;\n}\nfunction createPayload(name, purpose, context, data) {\n    return { unique_name: name,\n        purpose: purpose,\n        context: context,\n        data: data };\n}\nfunction decompose(arg) {\n    if (!arg) {\n        return { id: null, purpose: null, data: null, context: null, mode: null, optimistic: false };\n    }\n    if (typeof arg === 'string') {\n        return { id: arg, purpose: null, data: null, context: null, mode: null, optimistic: false };\n    }\n    return { id: arg.uniqueName || arg.sid || arg.id,\n        purpose: arg.purpose,\n        data: arg.data,\n        context: arg.context,\n        mode: arg.mode,\n        optimistic: !!arg.optimistic };\n}\n/**\n * @class Client\n * @classdesc\n * Client for the Twilio Sync service\n *\n * @property {Client#ConnectionState} connectionState - Contains current service connection state.\n * Valid options are ['connecting', 'connected', 'disconnecting', 'disconnected', 'denied', 'error'].\n */\n\nvar SyncClient = function (_events_1$EventEmitte) {\n    (0, _inherits3.default)(SyncClient, _events_1$EventEmitte);\n\n    /*\n     * @constructor\n     * @param {string} Token Twilio access token\n     * @param {Client#ClientOptions} options - Options to customize the Client\n     */\n    function SyncClient(fpaToken) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        (0, _classCallCheck3.default)(this, SyncClient);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncClient.__proto__ || (0, _getPrototypeOf2.default)(SyncClient)).call(this));\n\n        if (!fpaToken) {\n            throw new Error('Sync library needs a valid Twilio token to be passed');\n        }\n        if (options.hasOwnProperty('logLevel')) {\n            logger_1.default.setLevel(options.logLevel);\n        }\n        _this.productId = options.productId = options.productId || SYNC_PRODUCT_ID;\n        var twilsock = options.twilsockClient = options.twilsockClient || new Twilsock(fpaToken, options);\n        var transport = options.transport = options.transport || new twilio_transport_1.Transport(options.twilsockClient, { concurrentHttpRequestLimit: 20 });\n        var emsClient = options.emsClient = options.emsClient || new twilio_ems_client_1.EmsClient(options);\n        var notifications = options.notificationsClient = options.notificationsClient || new Notifications(fpaToken, options);\n        var config = new configuration_1.Configuration(null, options);\n        var network = new network_1.Network(_this.productId, new clientInfo_1.ClientInfo(SDK_VERSION), config, transport);\n        var storage = new storage_1.SessionStorage(config);\n        _this.localStorageId = null;\n        _this.fpaToken = fpaToken;\n        _this.authData = new deferred_1.Deferred();\n        _this.authData.promise.then(function (response) {\n            return _this.handleEmsResponse(response);\n        });\n        emsClient.once('response', function (response) {\n            return _this.authData.update(response);\n        });\n        emsClient.setToken(fpaToken).catch(function (e) {\n            logger_1.default.warn('Failed to set token', e);\n        });\n        twilsock.connect();\n        _this.services = {\n            config: config,\n            twilsock: twilsock,\n            notifications: notifications,\n            network: network,\n            emsClient: emsClient,\n            storage: storage,\n            router: null,\n            subscriptions: null\n        };\n        var subscriptions = new subscriptions_1.Subscriptions(_this.services);\n        var router = new router_1.Router({ config: config, subscriptions: subscriptions, notifications: notifications });\n        _this.services.router = router;\n        _this.services.subscriptions = subscriptions;\n        _this.entities = new entitiesCache_1.EntitiesCache();\n        notifications.on('connectionStateChanged', function () {\n            _this.emit('connectionStateChanged', _this.services.notifications.connectionState);\n        });\n        return _this;\n    }\n    /**\n     * Current version of Sync client.\n     * @name Client#version\n     * @type String\n     * @readonly\n     */\n\n\n    (0, _createClass3.default)(SyncClient, [{\n        key: \"handleEmsResponse\",\n        value: function handleEmsResponse(response) {\n            this.services.config.updateToken(response.token);\n            try {\n                var identity = response.identity;\n                var serviceSid = response.serviceSids[this.productId];\n                var storageId = xxhashjs_1.h64().update(\"TW::\" + identity + \"::\" + serviceSid).digest().toString(16);\n                this.services.storage.updateStorageId(storageId);\n            } catch (e) {\n                logger_1.default.error('Failed to initialize persistent storage', e);\n            }\n        }\n        /**\n         * Returns promise which resolves when library is correctly initialized\n         * Or throws if initialization is impossible\n         */\n\n    }, {\n        key: \"ensureReady\",\n        value: function ensureReady() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.authData.promise;\n\n                            case 2:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n    }, {\n        key: \"storeRootInSessionCache\",\n        value: function storeRootInSessionCache(type, id, value) {\n            // can't store without id\n            if (!this.services.config.sessionStorageEnabled || !id) {\n                return;\n            }\n            var valueToStore = utils_2.deepClone(value);\n            if (type !== syncdocument_1.SyncDocument.type) {\n                valueToStore['last_event_id'] = null;\n                delete valueToStore['items'];\n            }\n            this.services.storage.store(type, id, valueToStore);\n        }\n    }, {\n        key: \"readRootFromSessionCache\",\n        value: function readRootFromSessionCache(type, id) {\n            if (!this.services.config.sessionStorageEnabled || !id) {\n                return null;\n            }\n            return this.services.storage.read(type, id);\n        }\n    }, {\n        key: \"_get\",\n        value: function _get(baseUri, id) {\n            var optimistic = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var uri, response;\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (id) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", null);\n\n                            case 2:\n                                uri = new utils_1.UriBuilder(baseUri).pathSegment(id).queryParam('Include', optimistic ? 'items' : undefined).build();\n                                _context2.prev = 3;\n                                _context2.next = 6;\n                                return this.services.network.get(uri);\n\n                            case 6:\n                                response = _context2.sent;\n                                return _context2.abrupt(\"return\", response.body);\n\n                            case 10:\n                                _context2.prev = 10;\n                                _context2.t0 = _context2[\"catch\"](3);\n\n                                if (!(_context2.t0.status === 404)) {\n                                    _context2.next = 14;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", null);\n\n                            case 14:\n                                throw _context2.t0;\n\n                            case 15:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this, [[3, 10]]);\n            }));\n        }\n    }, {\n        key: \"_createDocument\",\n        value: function _createDocument(id, data) {\n            var requestBody = {\n                unique_name: id,\n                data: data\n            };\n            return this.services.network.post(this.services.config.documentsUri, requestBody).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getDocument\",\n        value: function _getDocument(id) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                return _context3.abrupt(\"return\", this.readRootFromSessionCache(syncdocument_1.SyncDocument.type, id) || this._get(this.services.config.documentsUri, id));\n\n                            case 1:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this);\n            }));\n        }\n    }, {\n        key: \"_createList\",\n        value: function _createList(id, purpose, context) {\n            var payload = createPayload(id, purpose, context);\n            return this.services.network.post(this.services.config.listsUri, payload).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getList\",\n        value: function _getList(id) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                return _context4.abrupt(\"return\", this.readRootFromSessionCache(synclist_1.SyncList.type, id) || this._get(this.services.config.listsUri, id));\n\n                            case 1:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n    }, {\n        key: \"_createMap\",\n        value: function _createMap(id) {\n            var requestBody = {\n                unique_name: id\n            };\n            return this.services.network.post(this.services.config.mapsUri, requestBody).then(function (response) {\n                return response.body;\n            });\n        }\n    }, {\n        key: \"_getMap\",\n        value: function _getMap(id) {\n            var optimistic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                return _context5.abrupt(\"return\", this.readRootFromSessionCache(syncmap_1.SyncMap.type, id) || this._get(this.services.config.mapsUri, id, optimistic));\n\n                            case 1:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n    }, {\n        key: \"getCached\",\n        value: function getCached(id, type) {\n            if (id) {\n                return this.entities.get(id, type) || null;\n            }\n            return null;\n        }\n    }, {\n        key: \"removeFromCacheAndSession\",\n        value: function removeFromCacheAndSession(type, sid, uniqueName) {\n            this.entities.remove(sid);\n            if (this.services.config.sessionStorageEnabled) {\n                this.services.storage.remove(type, sid, uniqueName);\n            }\n        }\n        /**\n         * Open a SyncDocument by identifier, or create one if none exists\n         * @param {string} id Document identifier. Unique name or sid.\n         * @return {Promise<Document>}\n         * @public\n         */\n\n    }, {\n        key: \"document\",\n        value: function document(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                var _this2 = this;\n\n                var _decompose, id, data, mode, docFromInMemoryCache, docDescriptor, syncDocument;\n\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                _context6.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose = decompose(arg), id = _decompose.id, data = _decompose.data, mode = _decompose.mode;\n                                docFromInMemoryCache = this.getCached(id, 'document');\n\n                                if (!docFromInMemoryCache) {\n                                    _context6.next = 8;\n                                    break;\n                                }\n\n                                return _context6.abrupt(\"return\", docFromInMemoryCache);\n\n                            case 8:\n                                _context6.next = 10;\n                                return this._getDocument(id);\n\n                            case 10:\n                                docDescriptor = _context6.sent;\n\n                                if (docDescriptor) {\n                                    _context6.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context6.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context6.prev = 16;\n                                _context6.next = 19;\n                                return this._createDocument(id, data);\n\n                            case 19:\n                                docDescriptor = _context6.sent;\n                                _context6.next = 29;\n                                break;\n\n                            case 22:\n                                _context6.prev = 22;\n                                _context6.t0 = _context6[\"catch\"](16);\n\n                                if (!(_context6.t0.status === 409)) {\n                                    _context6.next = 28;\n                                    break;\n                                }\n\n                                return _context6.abrupt(\"return\", this.document(arg));\n\n                            case 28:\n                                throw _context6.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(syncdocument_1.SyncDocument.type, id, docDescriptor);\n                                syncDocument = new syncdocument_1.SyncDocument(this.services, docDescriptor, function (type, sid, uniqueName) {\n                                    return _this2.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncDocument = this.entities.store(syncDocument);\n                                return _context6.abrupt(\"return\", subscribe(syncDocument));\n\n                            case 33:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Open a Map by identifier, or create one if none exists\n         * @param {string} id Map identifier. Unique name or sid.\n         * @return {Promise<Map>}\n         * @public\n         */\n\n    }, {\n        key: \"map\",\n        value: function map(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var _this3 = this;\n\n                var _decompose2, id, mode, optimistic, mapFromInMemoryCache, mapDescriptor, syncMap;\n\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                _context7.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose2 = decompose(arg), id = _decompose2.id, mode = _decompose2.mode, optimistic = _decompose2.optimistic;\n                                mapFromInMemoryCache = this.getCached(id, 'map');\n\n                                if (!mapFromInMemoryCache) {\n                                    _context7.next = 8;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", mapFromInMemoryCache);\n\n                            case 8:\n                                _context7.next = 10;\n                                return this._getMap(id, optimistic);\n\n                            case 10:\n                                mapDescriptor = _context7.sent;\n\n                                if (mapDescriptor) {\n                                    _context7.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context7.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context7.prev = 16;\n                                _context7.next = 19;\n                                return this._createMap(id);\n\n                            case 19:\n                                mapDescriptor = _context7.sent;\n                                _context7.next = 29;\n                                break;\n\n                            case 22:\n                                _context7.prev = 22;\n                                _context7.t0 = _context7[\"catch\"](16);\n\n                                if (!(_context7.t0.status === 409)) {\n                                    _context7.next = 28;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", this.map(arg));\n\n                            case 28:\n                                throw _context7.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(syncmap_1.SyncMap.type, id, mapDescriptor);\n                                syncMap = new syncmap_1.SyncMap(this.services, mapDescriptor, function (type, sid, uniqueName) {\n                                    return _this3.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncMap = this.entities.store(syncMap);\n                                return _context7.abrupt(\"return\", subscribe(syncMap));\n\n                            case 33:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Open a List by identifier, or create one if none exists\n         * @param {string} id List identifier. Unique name or sid.\n         * @return {Promise<List>}\n         * @public\n         */\n\n    }, {\n        key: \"list\",\n        value: function list(arg) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var _this4 = this;\n\n                var _decompose3, id, purpose, context, mode, listFromInMemoryCache, listDescriptor, syncList;\n\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                _context8.next = 2;\n                                return this.ensureReady();\n\n                            case 2:\n                                _decompose3 = decompose(arg), id = _decompose3.id, purpose = _decompose3.purpose, context = _decompose3.context, mode = _decompose3.mode;\n                                listFromInMemoryCache = this.getCached(id, 'list');\n\n                                if (!listFromInMemoryCache) {\n                                    _context8.next = 8;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", listFromInMemoryCache);\n\n                            case 8:\n                                _context8.next = 10;\n                                return this._getList(id);\n\n                            case 10:\n                                listDescriptor = _context8.sent;\n\n                                if (listDescriptor) {\n                                    _context8.next = 29;\n                                    break;\n                                }\n\n                                if (!(mode === 'open')) {\n                                    _context8.next = 16;\n                                    break;\n                                }\n\n                                throw new syncerror_1.default('Not found', 404);\n\n                            case 16:\n                                _context8.prev = 16;\n                                _context8.next = 19;\n                                return this._createList(id, purpose, context);\n\n                            case 19:\n                                listDescriptor = _context8.sent;\n                                _context8.next = 29;\n                                break;\n\n                            case 22:\n                                _context8.prev = 22;\n                                _context8.t0 = _context8[\"catch\"](16);\n\n                                if (!(_context8.t0.status === 409)) {\n                                    _context8.next = 28;\n                                    break;\n                                }\n\n                                return _context8.abrupt(\"return\", this.list(arg));\n\n                            case 28:\n                                throw _context8.t0;\n\n                            case 29:\n                                this.storeRootInSessionCache(synclist_1.SyncList.type, id, listDescriptor);\n                                syncList = new synclist_1.SyncList(this.services, listDescriptor, function (type, sid, uniqueName) {\n                                    return _this4.removeFromCacheAndSession(type, sid, uniqueName);\n                                });\n\n                                syncList = this.entities.store(syncList);\n                                return _context8.abrupt(\"return\", subscribe(syncList));\n\n                            case 33:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this, [[16, 22]]);\n            }));\n        }\n        /**\n         * Gracefully shutdown the libray\n         * Currently it is not properly implemented and being used only in tests\n         * But should be made a part of public API\n         * @private\n         */\n\n    }, {\n        key: \"shutdown\",\n        value: function shutdown() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                _context9.next = 2;\n                                return this.services.subscriptions.shutdown();\n\n                            case 2:\n                                _context9.next = 4;\n                                return this.services.twilsock.disconnect();\n\n                            case 4:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Set new auth token\n         * @param {string} token New token to set\n         * @return {Promise}\n         * @public\n         */\n\n    }, {\n        key: \"updateToken\",\n        value: function updateToken(fpaToken) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var response;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                _context10.next = 2;\n                                return this.services.emsClient.setToken(fpaToken);\n\n                            case 2:\n                                response = _context10.sent;\n                                this.services.config.updateToken(response.token);\n                                _context10.next = 6;\n                                return _promise2.default.all([this.services.notifications.updateToken(fpaToken), this.services.twilsock.updateToken(fpaToken)]);\n\n                            case 6:\n                                this.fpaToken = fpaToken;\n\n                            case 7:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n    }, {\n        key: \"connectionState\",\n        get: function get() {\n            return this.services.notifications.connectionState;\n        }\n    }], [{\n        key: \"version\",\n        get: function get() {\n            return SDK_VERSION;\n        }\n    }]);\n    return SyncClient;\n}(events_1.EventEmitter);\n\nexports.SyncClient = SyncClient;\nexports.Client = SyncClient;\nexports.default = SyncClient;\n/**\n * Indicates current state of connection between the client and Sync service.\n * <p>Valid options are as follows:\n * <li>'connecting' - client is offline and connection attempt is in process.\n * <li>'connected' - client is online and ready.\n * <li>'disconnecting' - client is going offline as disconnection is in process.\n * <li>'disconnected' - client is offline and no connection attempt is in process.\n * <li>'denied' - client connection is denied because of invalid JWT access token. User must refresh token in order to proceed.\n * <li>'error' - client connection is in a permanent erroneous state. Client re-initialization is required.\n * @typedef {String} Client#ConnectionState\n */\n/**\n * These options can be passed to Client constructor\n * @typedef {Object} Client#ClientOptions\n * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n */\n/**\n * Fired when connection state has been changed.\n * @param {Client#ConnectionState} connectionState Contains current service connection state.\n * @event Client#connectionStateChanged\n */\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/client.js","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/array/from.js","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-iobject.js","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_uid.js","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/get-iterator.js","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Set', {toJSON: require('./_collection-to-json')('Set')});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es7.set.to-json.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar util = require('util');\n\nvar BackoffStrategy = require('./strategy');\n\n// Fibonacci backoff strategy.\nfunction FibonacciBackoffStrategy(options) {\n    BackoffStrategy.call(this, options);\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n}\nutil.inherits(FibonacciBackoffStrategy, BackoffStrategy);\n\nFibonacciBackoffStrategy.prototype.next_ = function() {\n    var backoffDelay = Math.min(this.nextBackoffDelay_, this.getMaxDelay());\n    this.nextBackoffDelay_ += this.backoffDelay_;\n    this.backoffDelay_ = backoffDelay;\n    return backoffDelay;\n};\n\nFibonacciBackoffStrategy.prototype.reset_ = function() {\n    this.nextBackoffDelay_ = this.getInitialDelay();\n    this.backoffDelay_ = 0;\n};\n\nmodule.exports = FibonacciBackoffStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/lib/strategy/fibonacci.js","\"use strict\";\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Generic SyncLibrary error class\n */\n\nvar SyncError = function (_Error) {\n    (0, _inherits3.default)(SyncError, _Error);\n\n    function SyncError(message) {\n        var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        (0, _classCallCheck3.default)(this, SyncError);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncError.__proto__ || (0, _getPrototypeOf2.default)(SyncError)).call(this));\n\n        _this.name = _this.constructor.name;\n        _this.message = message;\n        _this.status = status;\n        _this.code = code;\n        return _this;\n    }\n\n    return SyncError;\n}(Error);\n\nexports.SyncError = SyncError;\nexports.default = SyncError;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/syncerror.js","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.assign.js","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_array-from-iterable.js","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/map.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Configuration = function Configuration(config) {\n    (0, _classCallCheck3.default)(this, Configuration);\n\n    var emsConfig = config.emsClient || {};\n    var realm = config.realm || 'us1';\n    var DEFAULT_EMS_HOST = \"https://ems.\" + realm + \".twilio.com\";\n    var EMS_PATH = '/v1/token';\n    var host = emsConfig.url || emsConfig.emsUri || emsConfig.emsUrl || DEFAULT_EMS_HOST + EMS_PATH;\n    this.url = host;\n};\n\nexports.default = Configuration;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-ems-client/browser/configuration.js","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_classof.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/inherits.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar karibu_1 = require(\"karibu\");\n\nvar Entry = function () {\n    function Entry(value, revision) {\n        (0, _classCallCheck3.default)(this, Entry);\n\n        this.value = value;\n        this.revision = revision || 0;\n    }\n\n    (0, _createClass3.default)(Entry, [{\n        key: \"isValid\",\n        get: function get() {\n            return true;\n        }\n    }]);\n    return Entry;\n}();\n\nvar Tombstone = function () {\n    function Tombstone(revision) {\n        (0, _classCallCheck3.default)(this, Tombstone);\n\n        this.revision = revision;\n    }\n\n    (0, _createClass3.default)(Tombstone, [{\n        key: \"isValid\",\n        get: function get() {\n            return false;\n        }\n    }]);\n    return Tombstone;\n}();\n\nvar Cache = function () {\n    function Cache() {\n        (0, _classCallCheck3.default)(this, Cache);\n\n        this.items = new karibu_1.TreeMap();\n    }\n\n    (0, _createClass3.default)(Cache, [{\n        key: \"store\",\n        value: function store(key, value, revision) {\n            var entry = this.items.get(key);\n            if (entry && entry.revision > revision) {\n                if (entry.isValid) {\n                    return entry.value;\n                }\n                return null;\n            }\n            this.items.set(key, new Entry(value, revision));\n            return value;\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(key, revision) {\n            var curr = this.items.get(key);\n            if (!curr || curr.revision < revision) {\n                this.items.set(key, new Tombstone(revision));\n            }\n        }\n    }, {\n        key: \"isKnown\",\n        value: function isKnown(key, revision) {\n            var curr = this.items.get(key);\n            return curr && curr.revision >= revision;\n        }\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            var entry = this.items.get(key);\n            if (entry && entry.isValid) {\n                return entry.value;\n            }\n            return null;\n        }\n    }, {\n        key: \"has\",\n        value: function has(key) {\n            var entry = this.items.get(key);\n            return entry && entry.isValid;\n        }\n    }]);\n    return Cache;\n}();\n\nexports.Cache = Cache;\nexports.default = Cache;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/cache.js","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_set-proto.js","exports.f = require('./_wks');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_wks-ext.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/regenerator/index.js","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_is-array-iter.js","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_hide.js","\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar entity_1 = require(\"./entity\");\nvar retryingqueue_1 = require(\"./retryingqueue\");\nvar mapitem_1 = require(\"./mapitem\");\nvar paginator_1 = require(\"./paginator\");\nvar cache_1 = require(\"./cache\");\n/**\n * @class\n * @alias Map\n * @classdesc Map collection to store a set of Key:Value pairs\n * @property {String} sid - Map unique id\n * @property {String} uniqueName - Map unique name\n *\n * @fires Map#itemAdded\n * @fires Map#itemAddedRemotely\n * @fires Map#itemUpdated\n * @fires Map#itemUpdatedRemotely\n * @fires Map#itemRemoved\n * @fires Map#itemRemovedRemotely\n * @fires Map#collectionRemoved\n * @fires Map#collectionRemovedRemotely\n */\n\nvar SyncMap = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncMap, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncMap(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncMap);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncMap.__proto__ || (0, _getPrototypeOf2.default)(SyncMap)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.cache = new cache_1.Cache();\n        _this.descriptor = descriptor;\n        if (descriptor.items) {\n            descriptor.items.forEach(function (itemDescriptor) {\n                _this.cache.store(itemDescriptor.key, new mapitem_1.MapItem(itemDescriptor), itemDescriptor.last_event_id);\n            });\n        }\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncMap, [{\n        key: \"_get\",\n        value: function _get(key) {\n            return this.queryItems({ key: key }).then(function (result) {\n                if (result.items.length < 1) {\n                    throw new Error('No item with key ' + key + ' found');\n                }\n                return result.items[0];\n            });\n        }\n    }, {\n        key: \"__set\",\n        value: function __set(location, param) {\n            return this.services.network.post(location, { data: param.data }, param.revision).then(function (response) {\n                response = response.body;\n                response.data = param.data;\n                return response;\n            });\n        }\n        /**\n         * Update known existing element\n         * @private\n         */\n\n    }, {\n        key: \"_set\",\n        value: function _set(location, keyValue, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                var _this2 = this;\n\n                var _resolver;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (resolver) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\", this.__set(location, { data: keyValue.data }));\n\n                            case 2:\n                                _resolver = function _resolver(err) {\n                                    return __awaiter(_this2, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                                        var item;\n                                        return _regenerator2.default.wrap(function _callee$(_context) {\n                                            while (1) {\n                                                switch (_context.prev = _context.next) {\n                                                    case 0:\n                                                        if (!(err.status === 412)) {\n                                                            _context.next = 5;\n                                                            break;\n                                                        }\n\n                                                        _context.next = 3;\n                                                        return this._get(keyValue.key);\n\n                                                    case 3:\n                                                        item = _context.sent;\n                                                        return _context.abrupt(\"return\", {\n                                                            revision: item.revision,\n                                                            data: resolver(utils_1.deepClone(item.value))\n                                                        });\n\n                                                    case 5:\n                                                        throw err;\n\n                                                    case 6:\n                                                    case \"end\":\n                                                        return _context.stop();\n                                                }\n                                            }\n                                        }, _callee, this);\n                                    }));\n                                };\n\n                                return _context2.abrupt(\"return\", this.actionQueue.add(this.__set.bind(this), location, { revision: keyValue.revision, data: keyValue.data }, _resolver));\n\n                            case 4:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Create element or update if already existing\n         * @private\n         */\n\n    }, {\n        key: \"_tryAddOrUpdate\",\n        value: function _tryAddOrUpdate(uri, keyValue, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var response, existingItemLocation, value, _response, resolvedData, _value;\n\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                _context3.prev = 0;\n                                _context3.next = 3;\n                                return this.services.network.post(uri, keyValue);\n\n                            case 3:\n                                response = _context3.sent;\n\n                                response.body.data = keyValue.data;\n                                return _context3.abrupt(\"return\", { added: true, value: response.body });\n\n                            case 8:\n                                _context3.prev = 8;\n                                _context3.t0 = _context3[\"catch\"](0);\n\n                                if (!(_context3.t0.status !== 409)) {\n                                    _context3.next = 12;\n                                    break;\n                                }\n\n                                throw _context3.t0;\n\n                            case 12:\n                                existingItemLocation = _context3.t0.body.links.item;\n\n                                if (resolver) {\n                                    _context3.next = 20;\n                                    break;\n                                }\n\n                                _context3.next = 16;\n                                return this._set(existingItemLocation, keyValue, resolver);\n\n                            case 16:\n                                value = _context3.sent;\n                                return _context3.abrupt(\"return\", { added: false, value: value });\n\n                            case 20:\n                                _context3.next = 22;\n                                return this.services.network.get(existingItemLocation);\n\n                            case 22:\n                                _response = _context3.sent;\n                                resolvedData = resolver(utils_1.deepClone(_response.body.data));\n                                _context3.next = 26;\n                                return this._set(existingItemLocation, {\n                                    key: _response.body.key,\n                                    revision: _response.body.revision,\n                                    data: resolvedData\n                                }, resolver);\n\n                            case 26:\n                                _value = _context3.sent;\n                                return _context3.abrupt(\"return\", { added: false, value: _value });\n\n                            case 28:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[0, 8]]);\n            }));\n        }\n        /**\n         * @return Promise<Object> Context of collection\n         * @private\n         */\n\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                var response;\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                if (!(typeof this.context !== 'undefined')) {\n                                    _context4.next = 2;\n                                    break;\n                                }\n\n                                return _context4.abrupt(\"return\", this.context);\n\n                            case 2:\n                                _context4.next = 4;\n                                return this.services.network.get(this.links.context);\n\n                            case 4:\n                                response = _context4.sent;\n\n                                this.context = response.body.data;\n                                return _context4.abrupt(\"return\", this.context);\n\n                            case 7:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n        /**\n         * @param context {Object} New context value\n         * @returns {Promise}\n         * @private\n         */\n\n    }, {\n        key: \"updateContext\",\n        value: function updateContext(context) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee5() {\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                _context5.next = 2;\n                                return this.services.network.post(this.links.context, { data: context });\n\n                            case 2:\n                                this.context = context;\n                                this.emit('contextUpdated', context, true);\n\n                            case 4:\n                            case \"end\":\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this);\n            }));\n        }\n        /**\n         * Set key and value pair in map\n         * @param {String} key  Key identifier\n         * @param {Object} value Value to set\n         * @returns {Promise<Item>}\n         * @public\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(key, value) {\n            return this._actualSet(key, value);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(key, value, resolver) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee6() {\n                var descriptor, added, item, arg, addOrUpdateResult;\n                return _regenerator2.default.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                descriptor = void 0;\n                                added = void 0;\n                                item = this.cache.get(key);\n\n                                if (!item) {\n                                    _context6.next = 11;\n                                    break;\n                                }\n\n                                arg = { key: key, data: value, revision: item.revision || undefined };\n                                _context6.next = 7;\n                                return this._set(item.uri, arg, resolver);\n\n                            case 7:\n                                descriptor = _context6.sent;\n\n                                added = false;\n                                _context6.next = 16;\n                                break;\n\n                            case 11:\n                                _context6.next = 13;\n                                return this._tryAddOrUpdate(this.links.items, { key: key, data: value }, resolver);\n\n                            case 13:\n                                addOrUpdateResult = _context6.sent;\n\n                                descriptor = addOrUpdateResult.value;\n                                added = addOrUpdateResult.added;\n\n                            case 16:\n                                item = this.cache.get(key);\n                                if (item && descriptor.last_event_id > item.lastEventId) {\n                                    item.update(descriptor.last_event_id, descriptor.revision, descriptor.data);\n                                    this.emit('itemUpdated', item, true);\n                                } else if (!item) {\n                                    item = this.cache.store(key, new mapitem_1.MapItem(descriptor), descriptor.last_event_id);\n                                    if (added) {\n                                        this.emit('itemAdded', item, true);\n                                    } else {\n                                        this.emit('itemUpdated', item, true);\n                                    }\n                                }\n                                return _context6.abrupt(\"return\", item);\n\n                            case 19:\n                            case \"end\":\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this);\n            }));\n        }\n        /**\n         * @param {String} key String identifier of entity in a map\n         * @return {Promise<Item>}\n         * @public\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee7() {\n                var result;\n                return _regenerator2.default.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                if (!this.cache.has(key)) {\n                                    _context7.next = 2;\n                                    break;\n                                }\n\n                                return _context7.abrupt(\"return\", this.cache.get(key));\n\n                            case 2:\n                                _context7.next = 4;\n                                return this.queryItems({ key: key });\n\n                            case 4:\n                                result = _context7.sent;\n\n                                if (!(result.items.length < 1)) {\n                                    _context7.next = 7;\n                                    break;\n                                }\n\n                                throw new Error('No item with key ' + key + ' found');\n\n                            case 7:\n                                return _context7.abrupt(\"return\", result.items[0]);\n\n                            case 8:\n                            case \"end\":\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this);\n            }));\n        }\n        /**\n         * @param {String} Key Item key\n         * @param {Map~Mutator} Mutator Function performing value mutation\n         * @return {Promise<Item>}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(key, mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee8() {\n                var value;\n                return _regenerator2.default.wrap(function _callee8$(_context8) {\n                    while (1) {\n                        switch (_context8.prev = _context8.next) {\n                            case 0:\n                                _context8.next = 2;\n                                return this.get(key).then(function (item) {\n                                    return item.value;\n                                }).catch(function () {\n                                    return {};\n                                });\n\n                            case 2:\n                                value = _context8.sent;\n                                return _context8.abrupt(\"return\", this._actualSet(key, mutator(utils_1.deepClone(value)), mutator));\n\n                            case 4:\n                            case \"end\":\n                                return _context8.stop();\n                        }\n                    }\n                }, _callee8, this);\n            }));\n        }\n        /**\n         * @param {String} key Item key\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Item>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(key, obj) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee9() {\n                return _regenerator2.default.wrap(function _callee9$(_context9) {\n                    while (1) {\n                        switch (_context9.prev = _context9.next) {\n                            case 0:\n                                return _context9.abrupt(\"return\", this.mutate(key, function (remote) {\n                                    return (0, _extends3.default)(remote, obj);\n                                }));\n\n                            case 1:\n                            case \"end\":\n                                return _context9.stop();\n                        }\n                    }\n                }, _callee9, this);\n            }));\n        }\n        /**\n         * Delete an entity by given key\n         * @return {Promise}\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(key) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee10() {\n                var item, response;\n                return _regenerator2.default.wrap(function _callee10$(_context10) {\n                    while (1) {\n                        switch (_context10.prev = _context10.next) {\n                            case 0:\n                                if (!(typeof key === 'undefined')) {\n                                    _context10.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('Key argument is invalid');\n\n                            case 2:\n                                _context10.next = 4;\n                                return this.get(key);\n\n                            case 4:\n                                item = _context10.sent;\n                                _context10.next = 7;\n                                return this.services.network.delete(item.uri);\n\n                            case 7:\n                                response = _context10.sent;\n\n                                this.cache.delete(key, response.body.last_event_id);\n                                this.emit('itemRemoved', key, true);\n\n                            case 10:\n                            case \"end\":\n                                return _context10.stop();\n                        }\n                    }\n                }, _callee10, this);\n            }));\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"queryItems\",\n        value: function queryItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee11() {\n                var _this3 = this;\n\n                var uri, response, items, meta;\n                return _regenerator2.default.wrap(function _callee11$(_context11) {\n                    while (1) {\n                        switch (_context11.prev = _context11.next) {\n                            case 0:\n                                args = args || {};\n                                uri = new utils_1.UriBuilder(this.links.items).queryParam('From', args.from).queryParam('PageSize', args.limit).queryParam('Key', args.key).queryParam('PageToken', args.pageToken).queryParam('Order', args.order).build();\n                                _context11.next = 4;\n                                return this.services.network.get(uri);\n\n                            case 4:\n                                response = _context11.sent;\n                                items = response.body.items.map(function (el) {\n                                    var itemInCache = _this3.cache.get(el.key);\n                                    if (itemInCache) {\n                                        _this3._handleItemUpdated(el.key, el.url, el.last_event_id, el.revision, el.data);\n                                    } else {\n                                        _this3.cache.store(el.key, new mapitem_1.MapItem(el), el.last_event_id);\n                                    }\n                                    return _this3.cache.get(el.key);\n                                });\n                                meta = response.body.meta;\n                                return _context11.abrupt(\"return\", new paginator_1.Paginator(items, function (pageToken) {\n                                    return _this3.queryItems({ pageToken: pageToken });\n                                }, meta.previous_token, meta.next_token));\n\n                            case 8:\n                            case \"end\":\n                                return _context11.stop();\n                        }\n                    }\n                }, _callee11, this);\n            }));\n        }\n        /**\n         * Get a list of items from the Map\n         * @param {Object} args Arguments for query\n         * @param {String} args.from Item, which should be used as an anchor. If undefined, starts from the beginning or end depending on args.order\n         * @param {Number} args.pageSize Result page size\n         * @param {String} args.order Order of results, should be 'asc' or 'desc'\n         * @return {Promise<Paginator>}\n         * @public\n         */\n\n    }, {\n        key: \"getItems\",\n        value: function getItems(args) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee12() {\n                return _regenerator2.default.wrap(function _callee12$(_context12) {\n                    while (1) {\n                        switch (_context12.prev = _context12.next) {\n                            case 0:\n                                args = args || {};\n                                args.limit = args.pageSize || args.limit || 50;\n                                args.order = args.order || 'asc';\n                                return _context12.abrupt(\"return\", this.queryItems(args));\n\n                            case 4:\n                            case \"end\":\n                                return _context12.stop();\n                        }\n                    }\n                }, _callee12, this);\n            }));\n        }\n        /**\n         * Enumerate through all of maps items\n         * It always triggers server interaction when being called for the first time for an object, so could be slow\n         * This method not supported now and not meant to be used externally\n         * @param {Function} handler Function to handle each argument\n         * @private\n         */\n\n    }, {\n        key: \"forEach\",\n        value: function forEach(handler) {\n            var _this4 = this;\n\n            return new _promise2.default(function (resolve, reject) {\n                function processPage(page) {\n                    page.items.forEach(function (x) {\n                        return handler(x);\n                    });\n                    if (page.hasNextPage) {\n                        page.nextPage().then(processPage).catch(reject);\n                    } else {\n                        resolve();\n                    }\n                }\n                _this4.queryItems().then(processPage).catch(reject);\n            });\n        }\n    }, {\n        key: \"shouldIgnoreEvent\",\n        value: function shouldIgnoreEvent(key, eventId) {\n            return this.cache.isKnown(key, eventId);\n        }\n        /**\n         * Handle update from the server\n         * @private\n         */\n\n    }, {\n        key: \"_update\",\n        value: function _update(update, isStrictlyOrdered) {\n            switch (update.type) {\n                case 'map_item_added':\n                    {\n                        this._handleItemAdded(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'map_item_updated':\n                    {\n                        this._handleItemUpdated(update.item_key, update.item_url, update.id, update.item_revision, update.item_data);\n                    }\n                    break;\n                case 'map_item_removed':\n                    {\n                        this._handleItemRemoved(update.item_key, update.id);\n                    }\n                    break;\n                case 'map_context_updated':\n                    {\n                        this._handleContextUpdate(update.context_data, update.id);\n                    }\n                    break;\n                case 'map_removed':\n                    {\n                        this.onRemoved(false);\n                    }\n                    break;\n            }\n            if (isStrictlyOrdered) {\n                this._advanceLastEventId(update.id, update.map_revision);\n            }\n        }\n    }, {\n        key: \"_advanceLastEventId\",\n        value: function _advanceLastEventId(eventId, revision) {\n            if (this.lastEventId < eventId) {\n                this.descriptor.last_event_id = eventId;\n                if (revision) {\n                    this.descriptor.revision = revision;\n                }\n            }\n        }\n        /**\n         * Handle entity insertion event, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemAdded\",\n        value: function _handleItemAdded(key, url, eventId, revision, value) {\n            if (!this.cache.has(key) && !this.shouldIgnoreEvent(key, eventId)) {\n                var item = new mapitem_1.MapItem({ key: key, url: url, last_event_id: eventId, revision: revision, data: value });\n                this.cache.store(key, item, eventId);\n                this.emit('itemAdded', item, false);\n                this.emit('itemAddedRemotely', item);\n            }\n        }\n        /**\n         * Handle new value of entity, coming from server\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemUpdated\",\n        value: function _handleItemUpdated(key, url, eventId, revision, value) {\n            var item = this.cache.get(key);\n            if (!item && !this.shouldIgnoreEvent(key, eventId)) {\n                item = new mapitem_1.MapItem({ key: key, url: url, last_event_id: eventId, revision: revision, data: value });\n                this.cache.store(key, item, eventId);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            } else if (item && eventId > item.lastEventId) {\n                item.update(eventId, revision, value);\n                this.emit('itemUpdated', item, false);\n                this.emit('itemUpdatedRemotely', item);\n            }\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_handleItemRemoved\",\n        value: function _handleItemRemoved(key, eventId) {\n            this.cache.delete(key, eventId);\n            this.emit('itemRemoved', key, false);\n            this.emit('itemRemovedRemotely', key);\n        }\n    }, {\n        key: \"_handleContextUpdate\",\n        value: function _handleContextUpdate(data, eventId) {\n            if (this.lastEventId < eventId) {\n                this.context = data;\n                this.emit('contextUpdated', data, false);\n                this.emit('contextUpdatedRemotely', data);\n            }\n        }\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            //\n            // Should also do some cleanup here\n            this.emit('collectionRemoved', locally);\n            if (!locally) {\n                this.emit('collectionRemovedRemotely');\n            }\n        }\n        /**\n         * Delete map from server. It will be impossible to restore it.\n         * @return {Promise} Promise to delete the collection\n         * @public\n         */\n\n    }, {\n        key: \"removeMap\",\n        value: function removeMap() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee13() {\n                return _regenerator2.default.wrap(function _callee13$(_context13) {\n                    while (1) {\n                        switch (_context13.prev = _context13.next) {\n                            case 0:\n                                _context13.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context13.stop();\n                        }\n                    }\n                }, _callee13, this);\n            }));\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"links\",\n        get: function get() {\n            return this.descriptor.links;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'map';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'map';\n        }\n    }]);\n    return SyncMap;\n}(entity_1.SyncEntity);\n\nexports.SyncMap = SyncMap;\n// export { SyncMap, MapDescriptor, Mutator };\nexports.default = SyncMap;\n/**\n * Applies a transformation to the item value\n * @callback Map~Mutator\n * @param {Object} data current value of an item\n * @return {Object} Modified data for an item\n */\n/**\n * Fired when item is added to the Map\n * @event Map#itemAdded\n * @type {Item} Added item\n */\n/**\n * Fired when item is added to the Map by remote actor\n * @event Map#itemAddedRemotely\n * @type {Item} Added item\n */\n/**\n * Fired when item is updated\n * @event Map#itemUpdated\n * @type {Item} Updated item\n */\n/**\n * Fired when item is updated by remote actor\n * @event Map#itemUpdatedRemotely\n * @type {Item} Updated item\n */\n/**\n * Fired when item is removed from the Map\n * @event Map#itemRemoved\n * @type {String} item key\n */\n/**\n * Fired when item is removed from the Map by remote actor\n * @event Map#itemRemovedRemotely\n * @type {String} item key\n */\n/**\n * Fired when Map is removed from server\n * @event Map#collectionRemoved\n */\n/**\n * Fired when Map is removed from server by remote actor\n * @event Map#collectionRemovedRemotely\n */\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/syncmap.js","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_is-array.js","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.rfc6902 = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\nvar _toConsumableArray = function (arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } };\n\nexports.isDestructive = isDestructive;\n\n/**\nsubtract(a, b) returns the keys in `a` that are not in `b`.\n*/\nexports.subtract = subtract;\n\n/**\nintersection(objects) returns the keys that shared by all given `objects`.\n*/\nexports.intersection = intersection;\nexports.objectType = objectType;\n\n/**\nArray-diffing smarter (levenshtein-like) diffing here\n\nTo get from the input ABC to the output AZ we could just delete all the input\nand say \"insert A, insert Z\" and be done with it. That's what we do if the\ninput is empty. But we can be smarter.\n\n          output\n               A   Z\n               -   -\n          [0]  1   2\ninput A |  1  [0]  1\n      B |  2  [1]  1\n      C |  3   2  [2]\n\n1) start at 0,0 (+0)\n2) keep A (+0)\n3) remove B (+1)\n4) replace C with Z (+1)\n\nif input (source) is empty, they'll all be in the top row, just a bunch of\nadditions. If the output is empty, everything will be in the left column, as a\nbunch of deletions.\n*/\nexports.diffArrays = diffArrays;\nexports.diffObjects = diffObjects;\nexports.diffValues = diffValues;\nexports.diffAny = diffAny;\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar compare = _dereq_(\"./equal\").compare;\n\nfunction isDestructive(_ref) {\n    var op = _ref.op;\n\n    return op === \"remove\" || op === \"replace\" || op === \"copy\" || op === \"move\";\n}\n\nfunction subtract(a, b) {\n    var obj = {};\n    for (var add_key in a) {\n        obj[add_key] = 1;\n    }\n    for (var del_key in b) {\n        delete obj[del_key];\n    }\n    return Object.keys(obj);\n}\n\nfunction intersection(objects) {\n    // initialize like union()\n    var key_counts = {};\n    objects.forEach(function (object) {\n        for (var key in object) {\n            key_counts[key] = (key_counts[key] || 0) + 1;\n        }\n    });\n    // but then, extra requirement: delete less commonly-seen keys\n    var threshold = objects.length;\n    for (var key in key_counts) {\n        if (key_counts[key] < threshold) {\n            delete key_counts[key];\n        }\n    }\n    return Object.keys(key_counts);\n}\n\nfunction objectType(object) {\n    if (object === undefined) {\n        return \"undefined\";\n    }\n    if (object === null) {\n        return \"null\";\n    }\n    if (Array.isArray(object)) {\n        return \"array\";\n    }\n    return typeof object;\n}\n\nfunction isArrayAdd(array_operation) {\n    return array_operation.op === \"add\";\n}\nfunction isArrayRemove(array_operation) {\n    return array_operation.op === \"remove\";\n}\nfunction isArrayReplace(array_operation) {\n    return array_operation.op === \"replace\";\n}\nfunction diffArrays(input, output, ptr) {\n    // set up cost matrix (very simple initialization: just a map)\n    var memo = {\n        \"0,0\": { operations: [], cost: 0 }\n    };\n    /**\n    input[i's] -> output[j's]\n       Given the layout above, i is the row, j is the col\n       returns a list of Operations needed to get to from input.slice(0, i) to\n    output.slice(0, j), the each marked with the total cost of getting there.\n    `cost` is a non-negative integer.\n    Recursive.\n    */\n    function dist(i, j) {\n        // memoized\n        var memoized = memo[i + \",\" + j];\n        if (memoized === undefined) {\n            if (compare(input[i - 1], output[j - 1])) {\n                // equal (no operations => no cost)\n                memoized = dist(i - 1, j - 1);\n            } else {\n                var alternatives = [];\n                if (i > 0) {\n                    // NOT topmost row\n                    var remove_alternative = dist(i - 1, j);\n                    alternatives.push({\n                        // the new operation must be pushed on the end\n                        operations: remove_alternative.operations.concat({\n                            op: \"remove\",\n                            index: i - 1 }),\n                        cost: remove_alternative.cost + 1 });\n                }\n                if (j > 0) {\n                    // NOT leftmost column\n                    var add_alternative = dist(i, j - 1);\n                    alternatives.push({\n                        operations: add_alternative.operations.concat({\n                            op: \"add\",\n                            index: i - 1,\n                            value: output[j - 1] }),\n                        cost: add_alternative.cost + 1 });\n                }\n                if (i > 0 && j > 0) {\n                    // TABLE MIDDLE\n                    // supposing we replaced it, compute the rest of the costs:\n                    var replace_alternative = dist(i - 1, j - 1);\n                    // okay, the general plan is to replace it, but we can be smarter,\n                    // recursing into the structure and replacing only part of it if\n                    // possible, but to do so we'll need the original value\n                    alternatives.push({\n                        operations: replace_alternative.operations.concat({\n                            op: \"replace\",\n                            index: i - 1,\n                            original: input[i - 1],\n                            value: output[j - 1] }),\n                        cost: replace_alternative.cost + 1 });\n                }\n                // the only other case, i === 0 && j === 0, has already been memoized\n                // the meat of the algorithm:\n                // sort by cost to find the lowest one (might be several ties for lowest)\n                // [4, 6, 7, 1, 2].sort((a, b) => a - b); -> [ 1, 2, 4, 6, 7 ]\n                var best = alternatives.sort(function (a, b) {\n                    return a.cost - b.cost;\n                })[0];\n                memoized = best;\n            }\n            memo[i + \",\" + j] = memoized;\n        }\n        return memoized;\n    }\n    // handle weird objects masquerading as Arrays that don't have proper length\n    // properties by using 0 for everything but positive numbers\n    var input_length = isNaN(input.length) || input.length <= 0 ? 0 : input.length;\n    var output_length = isNaN(output.length) || output.length <= 0 ? 0 : output.length;\n    var array_operations = dist(input_length, output_length).operations;\n\n    var _array_operations$reduce = array_operations.reduce(function (_ref, array_operation) {\n        var _ref2 = _slicedToArray(_ref, 2);\n\n        var operations = _ref2[0];\n        var padding = _ref2[1];\n\n        if (isArrayAdd(array_operation)) {\n            var padded_index = array_operation.index + 1 + padding;\n            var index_token = padded_index < input_length + padding ? String(padded_index) : \"-\";\n            var operation = {\n                op: array_operation.op,\n                path: ptr.add(index_token).toString(),\n                value: array_operation.value };\n            // padding++; // maybe only if array_operation.index > -1 ?\n            return [operations.concat(operation), padding + 1];\n        } else if (isArrayRemove(array_operation)) {\n            var operation = {\n                op: array_operation.op,\n                path: ptr.add(String(array_operation.index + padding)).toString() };\n            // padding--;\n            return [operations.concat(operation), padding - 1];\n        } else {\n            var replace_ptr = ptr.add(String(array_operation.index + padding));\n            var replace_operations = diffAny(array_operation.original, array_operation.value, replace_ptr);\n            return [operations.concat.apply(operations, _toConsumableArray(replace_operations)), padding];\n        }\n    }, [[], 0]);\n\n    var _array_operations$reduce2 = _slicedToArray(_array_operations$reduce, 2);\n\n    var operations = _array_operations$reduce2[0];\n    var padding = _array_operations$reduce2[1];\n\n    return operations;\n}\n\nfunction diffObjects(input, output, ptr) {\n    // if a key is in input but not output -> remove it\n    var operations = [];\n    subtract(input, output).forEach(function (key) {\n        operations.push({ op: \"remove\", path: ptr.add(key).toString() });\n    });\n    // if a key is in output but not input -> add it\n    subtract(output, input).forEach(function (key) {\n        operations.push({ op: \"add\", path: ptr.add(key).toString(), value: output[key] });\n    });\n    // if a key is in both, diff it recursively\n    intersection([input, output]).forEach(function (key) {\n        operations.push.apply(operations, _toConsumableArray(diffAny(input[key], output[key], ptr.add(key))));\n    });\n    return operations;\n}\n\nfunction diffValues(input, output, ptr) {\n    if (!compare(input, output)) {\n        return [{ op: \"replace\", path: ptr.toString(), value: output }];\n    }\n    return [];\n}\n\nfunction diffAny(input, output, ptr) {\n    var input_type = objectType(input);\n    var output_type = objectType(output);\n    if (input_type == \"array\" && output_type == \"array\") {\n        return diffArrays(input, output, ptr);\n    }\n    if (input_type == \"object\" && output_type == \"object\") {\n        return diffObjects(input, output, ptr);\n    }\n    // only pairs of arrays and objects can go down a path to produce a smaller\n    // diff; everything else must be wholesale replaced if inequal\n    return diffValues(input, output, ptr);\n}\n\n},{\"./equal\":2}],2:[function(_dereq_,module,exports){\n\n/**\n`compare()` returns true if `left` and `right` are materially equal\n(i.e., would produce equivalent JSON), false otherwise.\n\n> Here, \"equal\" means that the value at the target location and the\n> value conveyed by \"value\" are of the same JSON type, and that they\n> are considered equal by the following rules for that type:\n> o  strings: are considered equal if they contain the same number of\n>    Unicode characters and their code points are byte-by-byte equal.\n> o  numbers: are considered equal if their values are numerically\n>    equal.\n> o  arrays: are considered equal if they contain the same number of\n>    values, and if each value can be considered equal to the value at\n>    the corresponding position in the other array, using this list of\n>    type-specific rules.\n> o  objects: are considered equal if they contain the same number of\n>    members, and if each member can be considered equal to a member in\n>    the other object, by comparing their keys (as strings) and their\n>    values (using this list of type-specific rules).\n> o  literals (false, true, and null): are considered equal if they are\n>    the same.\n*/\n\"use strict\";\n\nexports.compare = compare;\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\nzip(a, b) assumes that a.length === b.length.\n*/\nfunction zip(a, b) {\n    var zipped = [];\n    for (var i = 0, l = a.length; i < l; i++) {\n        zipped.push([a[i], b[i]]);\n    }\n    return zipped;\n}\n/**\ncompareArrays(left, right) assumes that `left` and `right` are both Arrays.\n*/\nfunction compareArrays(left, right) {\n    if (left.length !== right.length) {\n        return false;\n    }return zip(left, right).every(function (pair) {\n        return compare(pair[0], pair[1]);\n    });\n}\n/**\ncompareObjects(left, right) assumes that `left` and `right` are both Objects.\n*/\nfunction compareObjects(left, right) {\n    var left_keys = Object.keys(left);\n    var right_keys = Object.keys(right);\n    if (!compareArrays(left_keys, right_keys)) {\n        return false;\n    }return left_keys.every(function (key) {\n        return compare(left[key], right[key]);\n    });\n}\nfunction compare(left, right) {\n    // strict equality handles literals, numbers, and strings (a sufficient but not necessary cause)\n    if (left === right) {\n        return true;\n    } // check arrays\n    if (Array.isArray(left) && Array.isArray(right)) {\n        return compareArrays(left, right);\n    }\n    // check objects\n    if (Object(left) === left && Object(right) === right) {\n        return compareObjects(left, right);\n    }\n    // mismatched arrays & objects, etc., are always inequal\n    return false;\n}\n\n},{}],3:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar MissingError = exports.MissingError = (function (_Error) {\n    function MissingError(path) {\n        _classCallCheck(this, MissingError);\n\n        _get(Object.getPrototypeOf(MissingError.prototype), \"constructor\", this).call(this, \"Value required at path: \" + path);\n        this.path = path;\n        this.name = this.constructor.name;\n    }\n\n    _inherits(MissingError, _Error);\n\n    return MissingError;\n})(Error);\n\nvar InvalidOperationError = exports.InvalidOperationError = (function (_Error2) {\n    function InvalidOperationError(op) {\n        _classCallCheck(this, InvalidOperationError);\n\n        _get(Object.getPrototypeOf(InvalidOperationError.prototype), \"constructor\", this).call(this, \"Invalid operation: \" + op);\n        this.op = op;\n        this.name = this.constructor.name;\n    }\n\n    _inherits(InvalidOperationError, _Error2);\n\n    return InvalidOperationError;\n})(Error);\n\nvar TestError = exports.TestError = (function (_Error3) {\n    function TestError(actual, expected) {\n        _classCallCheck(this, TestError);\n\n        _get(Object.getPrototypeOf(TestError.prototype), \"constructor\", this).call(this, \"Test failed: \" + actual + \" != \" + expected);\n        this.actual = actual;\n        this.expected = expected;\n        this.name = this.constructor.name;\n        this.actual = actual;\n        this.expected = expected;\n    }\n\n    _inherits(TestError, _Error3);\n\n    return TestError;\n})(Error);\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\n/**\nApply a 'application/json-patch+json'-type patch to an object.\n\n`patch` *must* be an array of operations.\n\n> Operation objects MUST have exactly one \"op\" member, whose value\n> indicates the operation to perform.  Its value MUST be one of \"add\",\n> \"remove\", \"replace\", \"move\", \"copy\", or \"test\"; other values are\n> errors.\n\nThis method currently operates on the target object in-place.\n\nReturns list of results, one for each operation.\n  - `null` indicated success.\n  - otherwise, the result will be an instance of one of the Error classe\n    defined in errors.js.\n*/\nexports.applyPatch = applyPatch;\n\n/**\nProduce a 'application/json-patch+json'-type patch to get from one object to\nanother.\n\nThis does not alter `input` or `output` unless they have a property getter with\nside-effects (which is not a good idea anyway).\n\nReturns list of operations to perform on `input` to produce `output`.\n*/\nexports.createPatch = createPatch;\n\n/**\nProduce an 'application/json-patch+json'-type list of tests, to verify that\nexisting values in an object are identical to the those captured at some\ncheckpoint (whenever this function is called).\n\nThis does not alter `input` or `output` unless they have a property getter with\nside-effects (which is not a good idea anyway).\n\nReturns list of test operations.\n*/\nexports.createTests = createTests;\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar InvalidOperationError = _dereq_(\"./errors\").InvalidOperationError;\n\nvar Pointer = _dereq_(\"./pointer\").Pointer;\n\nvar operationFunctions = _interopRequireWildcard(_dereq_(\"./patch\"));\n\nvar _diff = _dereq_(\"./diff\");\n\nvar diffAny = _diff.diffAny;\nvar isDestructive = _diff.isDestructive;\n\nfunction applyPatch(object, patch) {\n    return patch.map(function (operation) {\n        var operationFunction = operationFunctions[operation.op];\n        // speedy exit if we don't recognize the operation name\n        if (operationFunction === undefined) {\n            return new InvalidOperationError(operation.op);\n        }\n        return operationFunction(object, operation);\n    });\n}\n\nfunction createPatch(input, output) {\n    var ptr = new Pointer();\n    // a new Pointer gets a default path of [''] if not specified\n    return diffAny(input, output, ptr);\n}\n\nfunction createTest(input, path) {\n    var endpoint = Pointer.fromJSON(path).evaluate(input);\n    if (endpoint !== undefined) {\n        return { op: \"test\", path: path, value: endpoint.value };\n    }\n}\nfunction createTests(input, patch) {\n    var tests = new Array();\n    patch.filter(isDestructive).forEach(function (operation) {\n        var pathTest = createTest(input, operation.path);\n        if (pathTest) tests.push(pathTest);\n        if (\"from\" in operation) {\n            var fromTest = createTest(input, operation.from);\n            if (fromTest) tests.push(fromTest);\n        }\n    });\n    return tests;\n}\n\n},{\"./diff\":1,\"./errors\":3,\"./patch\":5,\"./pointer\":6}],5:[function(_dereq_,module,exports){\n\n/**\n>  o  If the target location specifies an array index, a new value is\n>     inserted into the array at the specified index.\n>  o  If the target location specifies an object member that does not\n>     already exist, a new member is added to the object.\n>  o  If the target location specifies an object member that does exist,\n>     that member's value is replaced.\n*/\n\"use strict\";\n\nexports.add = add;\n\n/**\n> The \"remove\" operation removes the value at the target location.\n> The target location MUST exist for the operation to be successful.\n*/\nexports.remove = remove;\n\n/**\n> The \"replace\" operation replaces the value at the target location\n> with a new value.  The operation object MUST contain a \"value\" member\n> whose content specifies the replacement value.\n> The target location MUST exist for the operation to be successful.\n\n> This operation is functionally identical to a \"remove\" operation for\n> a value, followed immediately by an \"add\" operation at the same\n> location with the replacement value.\n\nEven more simply, it's like the add operation with an existence check.\n*/\nexports.replace = replace;\n\n/**\n> The \"move\" operation removes the value at a specified location and\n> adds it to the target location.\n> The operation object MUST contain a \"from\" member, which is a string\n> containing a JSON Pointer value that references the location in the\n> target document to move the value from.\n> This operation is functionally identical to a \"remove\" operation on\n> the \"from\" location, followed immediately by an \"add\" operation at\n> the target location with the value that was just removed.\n\n> The \"from\" location MUST NOT be a proper prefix of the \"path\"\n> location; i.e., a location cannot be moved into one of its children.\n\nTODO: throw if the check described in the previous paragraph fails.\n*/\nexports.move = move;\n\n/**\n> The \"copy\" operation copies the value at a specified location to the\n> target location.\n> The operation object MUST contain a \"from\" member, which is a string\n> containing a JSON Pointer value that references the location in the\n> target document to copy the value from.\n> The \"from\" location MUST exist for the operation to be successful.\n\n> This operation is functionally identical to an \"add\" operation at the\n> target location using the value specified in the \"from\" member.\n\nAlternatively, it's like 'move' without the 'remove'.\n*/\nexports.copy = copy;\n\n/**\n> The \"test\" operation tests that a value at the target location is\n> equal to a specified value.\n> The operation object MUST contain a \"value\" member that conveys the\n> value to be compared to the target location's value.\n> The target location MUST be equal to the \"value\" value for the\n> operation to be considered successful.\n*/\nexports.test = test;\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar Pointer = _dereq_(\"./pointer\").Pointer;\n\nvar compare = _dereq_(\"./equal\").compare;\n\nvar _errors = _dereq_(\"./errors\");\n\nvar MissingError = _errors.MissingError;\nvar TestError = _errors.TestError;\n\nfunction _add(object, key, value) {\n    if (Array.isArray(object)) {\n        // `key` must be an index\n        if (key == \"-\") {\n            object.push(value);\n        } else {\n            object.splice(key, 0, value);\n        }\n    } else {\n        object[key] = value;\n    }\n}\nfunction _remove(object, key) {\n    if (Array.isArray(object)) {\n        // '-' syntax doesn't make sense when removing\n        object.splice(key, 1);\n    } else {\n        // not sure what the proper behavior is when path = ''\n        delete object[key];\n    }\n}\nfunction add(object, operation) {\n    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    // it's not exactly a \"MissingError\" in the same way that `remove` is -- more like a MissingParent, or something\n    if (endpoint.parent === undefined) {\n        return new MissingError(operation.path);\n    }\n    _add(endpoint.parent, endpoint.key, operation.value);\n    return null;\n}\n\nfunction remove(object, operation) {\n    // endpoint has parent, key, and value properties\n    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    if (endpoint.value === undefined) {\n        return new MissingError(operation.path);\n    }\n    // not sure what the proper behavior is when path = ''\n    _remove(endpoint.parent, endpoint.key);\n    return null;\n}\n\nfunction replace(object, operation) {\n    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    if (endpoint.value === undefined) {\n        return new MissingError(operation.path);\n    }endpoint.parent[endpoint.key] = operation.value;\n    return null;\n}\n\nfunction move(object, operation) {\n    var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);\n    if (from_endpoint.value === undefined) {\n        return new MissingError(operation.from);\n    }var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    if (endpoint.parent === undefined) {\n        return new MissingError(operation.path);\n    }_remove(from_endpoint.parent, from_endpoint.key);\n    _add(endpoint.parent, endpoint.key, from_endpoint.value);\n    return null;\n}\n\nfunction copy(object, operation) {\n    var from_endpoint = Pointer.fromJSON(operation.from).evaluate(object);\n    if (from_endpoint.value === undefined) {\n        return new MissingError(operation.from);\n    }var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    if (endpoint.parent === undefined) {\n        return new MissingError(operation.path);\n    }_remove(from_endpoint.parent, from_endpoint.key);\n    _add(endpoint.parent, endpoint.key, from_endpoint.value);\n    return null;\n}\n\nfunction test(object, operation) {\n    var endpoint = Pointer.fromJSON(operation.path).evaluate(object);\n    var result = compare(endpoint.value, operation.value);\n    if (!result) {\n        return new TestError(endpoint.value, operation.value);\n    }return null;\n}\n\n},{\"./equal\":2,\"./errors\":3,\"./pointer\":6}],6:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\nUnescape token part of a JSON Pointer string\n\n`token` should *not* contain any '/' characters.\n\n> Evaluation of each reference token begins by decoding any escaped\n> character sequence.  This is performed by first transforming any\n> occurrence of the sequence '~1' to '/', and then transforming any\n> occurrence of the sequence '~0' to '~'.  By performing the\n> substitutions in this order, an implementation avoids the error of\n> turning '~01' first into '~1' and then into '/', which would be\n> incorrect (the string '~01' correctly becomes '~1' after\n> transformation).\n\nHere's my take:\n\n~1 is unescaped with higher priority than ~0 because it is a lower-order escape character.\nI say \"lower order\" because '/' needs escaping due to the JSON Pointer serialization technique.\nWhereas, '~' is escaped because escaping '/' uses the '~' character.\n*/\nfunction unescape(token) {\n    return token.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\n/** Escape token part of a JSON Pointer string\n\n> '~' needs to be encoded as '~0' and '/'\n> needs to be encoded as '~1' when these characters appear in a\n> reference token.\n\nThis is the exact inverse of `unescape()`, so the reverse replacements must take place in reverse order.\n*/\nfunction escape(token) {\n    return token.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\nJSON Pointer representation\n*/\n\nvar Pointer = exports.Pointer = (function () {\n    function Pointer() {\n        var tokens = arguments[0] === undefined ? [\"\"] : arguments[0];\n\n        _classCallCheck(this, Pointer);\n\n        this.tokens = tokens;\n    }\n\n    _createClass(Pointer, {\n        toString: {\n            value: function toString() {\n                return this.tokens.map(escape).join(\"/\");\n            }\n        },\n        evaluate: {\n            /**\n            Returns an object with 'parent', 'key', and 'value' properties.\n            In the special case that pointer = \"\", parent and key will be null, and `value = obj`\n            Otherwise, parent will be the such that `parent[key] == value`\n            */\n\n            value: function evaluate(object) {\n                var parent = null;\n                var token = null;\n                for (var i = 1, l = this.tokens.length; i < l; i++) {\n                    parent = object;\n                    token = this.tokens[i];\n                    // not sure if this the best way to handle non-existant paths...\n                    object = (parent || {})[token];\n                }\n                return {\n                    parent: parent,\n                    key: token,\n                    value: object };\n            }\n        },\n        push: {\n            value: function push(token) {\n                // mutable\n                this.tokens.push(token);\n            }\n        },\n        add: {\n            /**\n            `token` should be a String. It'll be coerced to one anyway.\n               immutable (shallowly)\n            */\n\n            value: function add(token) {\n                var tokens = this.tokens.concat(String(token));\n                return new Pointer(tokens);\n            }\n        }\n    }, {\n        fromJSON: {\n            /**\n            `path` *must* be a properly escaped string.\n            */\n\n            value: function fromJSON(path) {\n                var tokens = path.split(\"/\").map(unescape);\n                if (tokens[0] !== \"\") throw new Error(\"Invalid JSON Pointer: \" + path);\n                return new Pointer(tokens);\n            }\n        }\n    });\n\n    return Pointer;\n})();\n\n},{}]},{},[4])(4)\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/rfc6902/rfc6902.js","//      Copyright (c) 2012 Mathieu Turcotte\n//      Licensed under the MIT license.\n\nvar util = require('util');\nvar precond = require('precond');\n\nvar BackoffStrategy = require('./strategy');\n\n// Exponential backoff strategy.\nfunction ExponentialBackoffStrategy(options) {\n    BackoffStrategy.call(this, options);\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n    this.factor_ = ExponentialBackoffStrategy.DEFAULT_FACTOR;\n\n    if (options && options.factor !== undefined) {\n        precond.checkArgument(options.factor > 1,\n            'Exponential factor should be greater than 1 but got %s.',\n            options.factor);\n        this.factor_ = options.factor;\n    }\n}\nutil.inherits(ExponentialBackoffStrategy, BackoffStrategy);\n\n// Default multiplication factor used to compute the next backoff delay from\n// the current one. The value can be overridden by passing a custom factor as\n// part of the options.\nExponentialBackoffStrategy.DEFAULT_FACTOR = 2;\n\nExponentialBackoffStrategy.prototype.next_ = function() {\n    this.backoffDelay_ = Math.min(this.nextBackoffDelay_, this.getMaxDelay());\n    this.nextBackoffDelay_ = this.backoffDelay_ * this.factor_;\n    return this.backoffDelay_;\n};\n\nExponentialBackoffStrategy.prototype.reset_ = function() {\n    this.backoffDelay_ = 0;\n    this.nextBackoffDelay_ = this.getInitialDelay();\n};\n\nmodule.exports = ExponentialBackoffStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/backoff/lib/strategy/exponential.js","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.set-prototype-of.js","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iter-create.js","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_wks-define.js","require('./_wks-define')('asyncIterator');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es7.symbol.async-iterator.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _slicedToArray2 = require(\"babel-runtime/helpers/slicedToArray\");\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _map = require(\"babel-runtime/core-js/map\");\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable key-spacing */\nvar Backoff = require(\"backoff\");\nvar logger_1 = require(\"./logger\");\nvar syncerror_1 = require(\"./syncerror\");\nvar twilio_transport_1 = require(\"twilio-transport\");\n/**\n * A data container used by the Subscriptions class to track subscribed entities' local\n * representations and their state.\n */\n\nvar SubscribedEntity = function () {\n    function SubscribedEntity(entity) {\n        (0, _classCallCheck3.default)(this, SubscribedEntity);\n\n        this.localObject = entity;\n        this.pendingCorrelationId = null;\n        this.established = false;\n        this.retryCount = 0;\n    }\n\n    (0, _createClass3.default)(SubscribedEntity, [{\n        key: \"update\",\n        value: function update(event, isStrictlyOrderd) {\n            this.localObject._update(event, isStrictlyOrderd);\n        }\n    }, {\n        key: \"reset\",\n        value: function reset() {\n            this.pendingCorrelationId = null;\n            this.retryCount = 0;\n            this.established = false;\n        }\n    }, {\n        key: \"markAsFailed\",\n        value: function markAsFailed(message) {\n            this.rejectedWithError = message.error;\n            this.pendingCorrelationId = null;\n            this.localObject.reportFailure(new syncerror_1.SyncError(\"Failed to subscribe on service events: \" + message.error.message, message.error.status, message.error.code));\n        }\n    }, {\n        key: \"complete\",\n        value: function complete(eventId) {\n            this.pendingCorrelationId = null;\n            this.established = true;\n            this.localObject._advanceLastEventId(eventId);\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.localObject.sid;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return this.localObject.type;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.localObject.lastEventId;\n        }\n    }, {\n        key: \"isInTransition\",\n        get: function get() {\n            return this.pendingCorrelationId !== null;\n        }\n    }, {\n        key: \"isEstablished\",\n        get: function get() {\n            return this.established;\n        }\n    }]);\n    return SubscribedEntity;\n}();\n/**\n * @class Subscriptions\n * @classdesc A manager which, in batches of varying size, continuously persists the\n *      subscription intent of the caller to the Sync backend until it achieves a\n *      converged state.\n */\n\n\nvar Subscriptions = function () {\n    /**\n     * @constructor\n     * Prepares a new Subscriptions manager object with zero subscribed or persisted subscriptions.\n     *\n     * @param {object} config may include a key 'backoffConfig', wherein any of the parameters\n     *      of Backoff.exponential (from npm 'backoff') are valid and will override the defaults.\n     *\n     * @param {Network} must be a viable running Sync Network object, useful for routing requests.\n     */\n    function Subscriptions(services) {\n        var _this = this;\n\n        (0, _classCallCheck3.default)(this, Subscriptions);\n\n        this.isConnected = false;\n        this.maxBatchSize = 100;\n        this.services = services;\n        this.subscriptions = new _map2.default();\n        this.persisted = new _map2.default();\n        this.latestPokeResponseArrivalTimestampByCorrelationId = new _map2.default();\n        var defaultBackoffConfig = {\n            randomisationFactor: 0.2,\n            initialDelay: 100,\n            maxDelay: 2 * 60 * 1000\n        };\n        this.backoff = Backoff.exponential((0, _extends3.default)(defaultBackoffConfig, this.services.config.backoffConfig));\n        // This block is triggered by #_persist. Every request is executed in a series of (ideally 1)\n        // backoff 'ready' event, at which point a new subscription set is calculated.\n        this.backoff.on('ready', function () {\n            var _getSubscriptionUpdat = _this.getSubscriptionUpdateBatch(),\n                action = _getSubscriptionUpdat.action,\n                subscriptionRequests = _getSubscriptionUpdat.subscriptions;\n\n            if (action) {\n                _this.applyNewSubscriptionUpdateBatch(action, subscriptionRequests);\n            } else {\n                _this.backoff.reset();\n                logger_1.default.info('All subscriptions resolved.');\n            }\n        });\n    }\n\n    (0, _createClass3.default)(Subscriptions, [{\n        key: \"getSubscriptionUpdateBatch\",\n        value: function getSubscriptionUpdateBatch() {\n            function substract(these, those, ignoreCurrentOp, limit) {\n                var result = [];\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = (0, _getIterator3.default)(these), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var _step$value = (0, _slicedToArray3.default)(_step.value, 2),\n                            thisKey = _step$value[0],\n                            thisValue = _step$value[1];\n\n                        var otherValue = those.get(thisKey);\n                        if (!otherValue && (ignoreCurrentOp || !thisValue.isInTransition) && !thisValue.rejectedWithError) {\n                            result.push(thisValue);\n                            if (limit && result.length >= limit) {\n                                break;\n                            }\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n\n                return result;\n            }\n            var listToAdd = substract(this.subscriptions, this.persisted, false, this.maxBatchSize);\n            if (listToAdd.length > 0) {\n                return { action: 'establish', subscriptions: listToAdd };\n            }\n            var listToRemove = substract(this.persisted, this.subscriptions, true, this.maxBatchSize);\n            if (listToRemove.length > 0) {\n                return { action: 'cancel', subscriptions: listToRemove };\n            }\n            return { action: null, subscriptions: null };\n        }\n    }, {\n        key: \"persist\",\n        value: function persist() {\n            try {\n                this.backoff.backoff();\n            } catch (e) {} // eslint-disable-line no-empty\n        }\n    }, {\n        key: \"applyNewSubscriptionUpdateBatch\",\n        value: function applyNewSubscriptionUpdateBatch(action, requests) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                var _this2 = this;\n\n                var correlationId, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, subscribed, response, newMaxBatchSize, estimatedDeliveryInMs, isNumeric, isValidTimeout, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, attemptedSubscription;\n\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.isConnected) {\n                                    _context.next = 4;\n                                    break;\n                                }\n\n                                logger_1.default.debug(\"Twilsock connection (required for subscription) not ready; waiting\\u2026\");\n                                this.backoff.reset();\n                                return _context.abrupt(\"return\");\n\n                            case 4:\n                                // Keeping in mind that events may begin flowing _before_ we receive the response\n                                requests = this.processLocalActions(action, requests);\n                                correlationId = new Date().getTime();\n                                _iteratorNormalCompletion2 = true;\n                                _didIteratorError2 = false;\n                                _iteratorError2 = undefined;\n                                _context.prev = 9;\n\n                                for (_iterator2 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                                    subscribed = _step2.value;\n\n                                    this.recordActionAttemptOn(subscribed, action, correlationId);\n                                }\n                                // Send this batch to the service\n                                _context.next = 17;\n                                break;\n\n                            case 13:\n                                _context.prev = 13;\n                                _context.t0 = _context[\"catch\"](9);\n                                _didIteratorError2 = true;\n                                _iteratorError2 = _context.t0;\n\n                            case 17:\n                                _context.prev = 17;\n                                _context.prev = 18;\n\n                                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                    _iterator2.return();\n                                }\n\n                            case 20:\n                                _context.prev = 20;\n\n                                if (!_didIteratorError2) {\n                                    _context.next = 23;\n                                    break;\n                                }\n\n                                throw _iteratorError2;\n\n                            case 23:\n                                return _context.finish(20);\n\n                            case 24:\n                                return _context.finish(17);\n\n                            case 25:\n                                _context.prev = 25;\n                                _context.next = 28;\n                                return this.request(action, correlationId, requests);\n\n                            case 28:\n                                response = _context.sent;\n                                newMaxBatchSize = response.body.max_batch_size;\n\n                                if (!isNaN(parseInt(newMaxBatchSize)) && isFinite(newMaxBatchSize) && newMaxBatchSize > 0) {\n                                    this.maxBatchSize = newMaxBatchSize;\n                                }\n                                if (action === 'establish') {\n                                    estimatedDeliveryInMs = response.body.estimated_delivery_in_ms;\n                                    isNumeric = !isNaN(parseFloat(estimatedDeliveryInMs)) && isFinite(estimatedDeliveryInMs);\n                                    isValidTimeout = isNumeric && estimatedDeliveryInMs > 0;\n\n                                    if (isValidTimeout) {\n                                        setTimeout(function () {\n                                            return _this2.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests);\n                                        }, estimatedDeliveryInMs);\n                                    } else {\n                                        logger_1.default.error(\"Invalid timeout: \" + estimatedDeliveryInMs);\n                                    }\n                                }\n                                this.backoff.reset();\n                                _context.next = 57;\n                                break;\n\n                            case 35:\n                                _context.prev = 35;\n                                _context.t1 = _context[\"catch\"](25);\n                                _iteratorNormalCompletion3 = true;\n                                _didIteratorError3 = false;\n                                _iteratorError3 = undefined;\n                                _context.prev = 40;\n\n                                for (_iterator3 = (0, _getIterator3.default)(requests); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                                    attemptedSubscription = _step3.value;\n\n                                    this.recordActionFailureOn(attemptedSubscription, action);\n                                }\n                                _context.next = 48;\n                                break;\n\n                            case 44:\n                                _context.prev = 44;\n                                _context.t2 = _context[\"catch\"](40);\n                                _didIteratorError3 = true;\n                                _iteratorError3 = _context.t2;\n\n                            case 48:\n                                _context.prev = 48;\n                                _context.prev = 49;\n\n                                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                                    _iterator3.return();\n                                }\n\n                            case 51:\n                                _context.prev = 51;\n\n                                if (!_didIteratorError3) {\n                                    _context.next = 54;\n                                    break;\n                                }\n\n                                throw _iteratorError3;\n\n                            case 54:\n                                return _context.finish(51);\n\n                            case 55:\n                                return _context.finish(48);\n\n                            case 56:\n                                if (_context.t1 instanceof twilio_transport_1.TwilsockUnavailableError) {\n                                    logger_1.default.debug(\"Twilsock connection (required for subscription) not ready (c:\" + correlationId + \"); waiting\\u2026\");\n                                    this.backoff.reset();\n                                } else {\n                                    logger_1.default.debug(\"Failed an attempt to \" + action + \" subscriptions (c:\" + correlationId + \"); retrying\", _context.t1);\n                                    this.persist();\n                                }\n\n                            case 57:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[9, 13, 17, 25], [18,, 20, 24], [25, 35], [40, 44, 48, 56], [49,, 51, 55]]);\n            }));\n        }\n    }, {\n        key: \"verifyPokeDelivery\",\n        value: function verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests) {\n            var _this3 = this;\n\n            var lastReceived = this.latestPokeResponseArrivalTimestampByCorrelationId.get(correlationId);\n            var silencePeriod = lastReceived ? new Date().getTime() - lastReceived : estimatedDeliveryInMs;\n            if (silencePeriod >= estimatedDeliveryInMs) {\n                // If we haven't received _any_ responses from that poke request for the duration of estimated_delivery_in_ms, poke again\n                requests.filter(function (r) {\n                    return r.pendingCorrelationId === correlationId;\n                }).forEach(function (r) {\n                    r.pendingCorrelationId = null;\n                    r.retryCount++;\n                    _this3.persisted.delete(r.sid);\n                });\n                this.persist();\n                this.latestPokeResponseArrivalTimestampByCorrelationId.delete(correlationId);\n            } else {\n                // Otherwise, the poke responses are probably in transit and we should wait for them\n                var timeoutExtension = estimatedDeliveryInMs - silencePeriod;\n                setTimeout(function () {\n                    return _this3.verifyPokeDelivery(correlationId, estimatedDeliveryInMs, requests);\n                }, timeoutExtension);\n            }\n        }\n    }, {\n        key: \"processLocalActions\",\n        value: function processLocalActions(action, requests) {\n            if (action === 'cancel') {\n                return requests.filter(function (request) {\n                    return !request.rejectedWithError;\n                });\n            }\n            return requests;\n        }\n    }, {\n        key: \"recordActionAttemptOn\",\n        value: function recordActionAttemptOn(attemptedSubscription, action, correlationId) {\n            if (action === 'establish') {\n                this.persisted.set(attemptedSubscription.sid, attemptedSubscription);\n                attemptedSubscription.pendingCorrelationId = correlationId;\n            } else {\n                var persistedSubscription = this.persisted.get(attemptedSubscription.sid);\n                if (persistedSubscription) {\n                    persistedSubscription.pendingCorrelationId = correlationId;\n                }\n            }\n        }\n    }, {\n        key: \"recordActionFailureOn\",\n        value: function recordActionFailureOn(attemptedSubscription, action) {\n            attemptedSubscription.pendingCorrelationId = null;\n            if (action === 'establish') {\n                this.persisted.delete(attemptedSubscription.sid);\n            }\n        }\n    }, {\n        key: \"request\",\n        value: function request(action, correlationId, objects) {\n            var requests = objects.map(function (object) {\n                return {\n                    object_sid: object.sid,\n                    object_type: object.type,\n                    last_event_id: action === 'establish' ? object.lastEventId : undefined // eslint-disable-line no-undefined, camelcase\n                };\n            });\n            var retriedRequests = objects.filter(function (a) {\n                return a.retryCount > 0;\n            }).length;\n            logger_1.default.debug(\"Attempting '\" + action + \"' request (c:\" + correlationId + \"):\", requests);\n            /* eslint-disable camelcase */\n            var requestBody = {\n                event_protocol_version: 3,\n                action: action,\n                correlation_id: correlationId,\n                retried_requests: retriedRequests,\n                requests: requests\n            };\n            /* eslint-enable camelcase */\n            return this.services.network.post(this.services.config.subscriptionsUri, requestBody, null, true);\n        }\n        /**\n         * Establishes intent to be subscribed to this entity. That subscription will be effected\n         * asynchronously.\n         * If subscription to the given sid already exists, it will be overwritten.\n         *\n         * @param {string} sid should be a well-formed SID, uniquely identifying a single instance of a Sync entity.\n         * @param {object} entity should represent the (singular) local representation of this entity.\n         *      Incoming events and modifications to the entity will be directed at the _update() function\n         *      of this provided reference.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"add\",\n        value: function add(sid, entity) {\n            logger_1.default.debug(\"Establishing intent to subscribe to \" + sid);\n            var existingSubscription = this.subscriptions.get(sid);\n            if (existingSubscription && existingSubscription.lastEventId === entity.lastEventId) {\n                // If last event id is the same as before - we're fine\n                return;\n            }\n            this.persisted.delete(sid);\n            this.subscriptions.set(sid, new SubscribedEntity(entity));\n            this.persist();\n        }\n        /**\n         * Establishes the caller's intent to no longer be subscribed to this entity. Following this\n         * call, no further events shall be routed to the local representation of the entity, even\n         * though a server-side subscription may take more time to actually terminate.\n         *\n         * @param {string} sid should be any well-formed SID, uniquely identifying a Sync entity.\n         *      This call only has meaningful effect if that entity is subscribed at the\n         *      time of call. Otherwise does nothing.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(sid) {\n            logger_1.default.debug(\"Establishing intent to unsubscribe from \" + sid);\n            var removed = this.subscriptions.delete(sid);\n            if (removed) {\n                this.persist();\n            }\n        }\n        /**\n         * The point of ingestion for remote incoming messages (e.g. new data was written to a map\n         * to which we are subscribed).\n         *\n         * @param {object} message is the full, unaltered body of the incoming notification.\n         *\n         * @return undefined\n         */\n\n    }, {\n        key: \"acceptMessage\",\n        value: function acceptMessage(message, isStrictlyOrdered) {\n            logger_1.default.trace('Subscriptions received', message);\n            if (message.correlation_id) {\n                this.latestPokeResponseArrivalTimestampByCorrelationId.set(message.correlation_id, new Date().getTime());\n            }\n            switch (message.event_type) {\n                case 'subscription_established':\n                    this.applySubscriptionEstablishedMessage(message.event, message.correlation_id);\n                    break;\n                case 'subscription_canceled':\n                    this.applySubscriptionCancelledMessage(message.event, message.correlation_id);\n                    break;\n                case 'subscription_failed':\n                    this.applySubscriptionFailedMessage(message.event, message.correlation_id);\n                    break;\n                case (message.event_type.match(/^(?:map|list|document)_/) || {}).input:\n                    {\n                        var typedSid = function typedSid() {\n                            if (message.event_type.match(/^map_/)) {\n                                return message.event.map_sid;\n                            } else if (message.event_type.match(/^list_/)) {\n                                return message.event.list_sid;\n                            } else if (message.event_type.match(/^document_/)) {\n                                return message.event.document_sid;\n                            } else {\n                                return undefined;\n                            }\n                        };\n\n                        ;\n                        this.applyEventToSubscribedEntity(typedSid(), message, isStrictlyOrdered);\n                    }\n                    break;\n                default:\n                    logger_1.default.debug(\"Dropping unknown message type \" + message.event_type);\n                    break;\n            }\n        }\n    }, {\n        key: \"applySubscriptionEstablishedMessage\",\n        value: function applySubscriptionEstablishedMessage(message, correlationId) {\n            var sid = message.object_sid;\n            var subscriptionIntent = this.persisted.get(message.object_sid);\n            if (subscriptionIntent && subscriptionIntent.pendingCorrelationId === correlationId) {\n                if (message.replay_status === 'interrupted') {\n                    logger_1.default.debug(\"Event Replay for subscription to \" + sid + \" (c:\" + correlationId + \") interrupted; continuing eagerly.\");\n                    subscriptionIntent.pendingCorrelationId = null;\n                    this.persisted.delete(subscriptionIntent.sid);\n                    this.backoff.reset();\n                } else if (message.replay_status === 'completed') {\n                    logger_1.default.debug(\"Event Replay for subscription to \" + sid + \" (c:\" + correlationId + \") completed. Subscription is ready.\");\n                    subscriptionIntent.complete(message.last_event_id);\n                    this.persisted.set(message.object_sid, subscriptionIntent);\n                    this.backoff.reset();\n                }\n            } else {\n                logger_1.default.debug(\"Late message for \" + message.object_sid + \" (c:\" + correlationId + \") dropped.\");\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applySubscriptionCancelledMessage\",\n        value: function applySubscriptionCancelledMessage(message, correlationId) {\n            var persistedSubscription = this.persisted.get(message.object_sid);\n            if (persistedSubscription && persistedSubscription.pendingCorrelationId === correlationId) {\n                persistedSubscription.pendingCorrelationId = null;\n                this.persisted.delete(message.object_sid);\n            } else {\n                logger_1.default.debug(\"Late message for \" + message.object_sid + \" (c:\" + correlationId + \") dropped.\");\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applySubscriptionFailedMessage\",\n        value: function applySubscriptionFailedMessage(message, correlationId) {\n            var sid = message.object_sid;\n            var subscriptionIntent = this.subscriptions.get(sid);\n            var subscription = this.persisted.get(sid);\n            if (subscriptionIntent && subscription) {\n                if (subscription.pendingCorrelationId === correlationId) {\n                    logger_1.default.error(\"Failed to subscribe on \" + subscription.sid, message.error);\n                    subscription.markAsFailed(message);\n                }\n            } else if (!subscriptionIntent && subscription) {\n                this.persisted.delete(sid);\n            }\n            this.persist();\n        }\n    }, {\n        key: \"applyEventToSubscribedEntity\",\n        value: function applyEventToSubscribedEntity(sid, message, isStrictlyOrdered) {\n            var _this4 = this;\n\n            if (!sid) {\n                return;\n            }\n            // Looking for subscription descriptor to check if poke has been completed\n            isStrictlyOrdered = isStrictlyOrdered || function () {\n                var subscription = _this4.persisted.get(sid);\n                return subscription && subscription.isEstablished;\n            }();\n            // Still searching for subscriptionIntents. User could remove subscription already\n            var subscriptionIntent = this.subscriptions.get(sid);\n            if (subscriptionIntent) {\n                message.event.type = message.event_type;\n                subscriptionIntent.update(message.event, isStrictlyOrdered);\n            } else {\n                logger_1.default.debug(\"Message dropped for SID '\" + sid + \"', for which there is no subscription.\");\n            }\n        }\n    }, {\n        key: \"onConnectionStateChanged\",\n        value: function onConnectionStateChanged(isConnected) {\n            this.isConnected = isConnected;\n            if (isConnected) {\n                this.poke();\n            }\n        }\n        /**\n         * Prompts a playback of any missed changes made to any subscribed object. This method\n         * should be invoked whenever the connectivity layer has experienced cross-cutting\n         * delivery failures that would affect the entire local sync set. Any tangible result\n         * of this operation will result in calls to the _update() function of subscribed\n         * Sync entities.\n         */\n\n    }, {\n        key: \"poke\",\n        value: function poke() {\n            logger_1.default.info('Triggering event replay for all subscriptions.');\n            var failedSubscriptions = [];\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = (0, _getIterator3.default)(this.persisted.values()), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var it = _step4.value;\n\n                    it.reset();\n                    if (it.rejectedWithError) {\n                        failedSubscriptions.push(it);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            this.persisted.clear();\n            var _iteratorNormalCompletion5 = true;\n            var _didIteratorError5 = false;\n            var _iteratorError5 = undefined;\n\n            try {\n                for (var _iterator5 = (0, _getIterator3.default)(failedSubscriptions), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                    var _it = _step5.value;\n\n                    this.persisted.set(_it.sid, _it);\n                }\n            } catch (err) {\n                _didIteratorError5 = true;\n                _iteratorError5 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                        _iterator5.return();\n                    }\n                } finally {\n                    if (_didIteratorError5) {\n                        throw _iteratorError5;\n                    }\n                }\n            }\n\n            this.persist();\n        }\n        /**\n         * Stops all communication, clears any subscription intent, and returns.\n         */\n\n    }, {\n        key: \"shutdown\",\n        value: function shutdown() {\n            this.backoff.reset();\n            this.subscriptions.clear();\n        }\n    }]);\n    return Subscriptions;\n}();\n\nexports.Subscriptions = Subscriptions;\nexports.default = Subscriptions;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/subscriptions.js","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-sap.js","'use strict';\nvar global         = require('./_global')\n  , $export        = require('./_export')\n  , meta           = require('./_meta')\n  , fails          = require('./_fails')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , forOf          = require('./_for-of')\n  , anInstance     = require('./_an-instance')\n  , isObject       = require('./_is-object')\n  , setToStringTag = require('./_set-to-string-tag')\n  , dP             = require('./_object-dp').f\n  , each           = require('./_array-methods')(0)\n  , DESCRIPTORS    = require('./_descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function(target, iterable){\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        anInstance(this, C, KEY);\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)dP(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_collection.js","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/create.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/classCallCheck.js","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/uuid/lib/bytesToUuid.js","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar client_1 = require(\"./client\");\nexports.SyncClient = client_1.SyncClient;\nvar syncdocument_1 = require(\"./syncdocument\");\nexports.SyncDocument = syncdocument_1.SyncDocument;\nvar synclist_1 = require(\"./synclist\");\nexports.SyncList = synclist_1.SyncList;\nvar listitem_1 = require(\"./listitem\");\nexports.SyncListItem = listitem_1.ListItem;\nvar syncmap_1 = require(\"./syncmap\");\nexports.SyncMap = syncmap_1.SyncMap;\nvar mapitem_1 = require(\"./mapitem\");\nexports.SyncMapItem = mapitem_1.MapItem;\nexports.default = client_1.SyncClient;\n\nmodule.exports = client_1.SyncClient;\nmodule.exports.SyncClient = client_1.SyncClient;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/index.js","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/set-prototype-of.js","module.exports = {};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iterators.js","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_meta.js","\"use strict\";\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar syncerror_1 = require(\"./syncerror\");\n\nvar SyncNetworkError = function (_syncerror_1$SyncErro) {\n    (0, _inherits3.default)(SyncNetworkError, _syncerror_1$SyncErro);\n\n    function SyncNetworkError(message) {\n        var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var body = arguments[3];\n        (0, _classCallCheck3.default)(this, SyncNetworkError);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncNetworkError.__proto__ || (0, _getPrototypeOf2.default)(SyncNetworkError)).call(this, message, status, code));\n\n        _this.body = body;\n        return _this;\n    }\n\n    return SyncNetworkError;\n}(syncerror_1.SyncError);\n\nexports.SyncNetworkError = SyncNetworkError;\nexports.default = SyncNetworkError;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/syncNetworkError.js","module.exports = require('./_global').document && document.documentElement;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_html.js","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/uuid/lib/rng-browser.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _map = require('babel-runtime/core-js/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar REQUEST_TIMEOUT = 30000;\n\nfunction isHttpSuccess(code) {\n  return code >= 200 && code < 300;\n}\n\nfunction isHttpReply(packet) {\n  return packet && packet.header && packet.header.http_status;\n}\n\nvar PacketInterface = function () {\n  function PacketInterface(socket) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, PacketInterface);\n\n    (0, _defineProperties2.default)(this, {\n      _activeRequests: { value: new _map2.default() },\n      _socket: { value: socket }\n    });\n\n    this._socket.on('reply', this._processReply.bind(this));\n    this._socket.on('disconnected', function () {\n      _this._activeRequests.forEach(function (descriptor) {\n        clearTimeout(descriptor.timeout);\n        descriptor.reject(new Error('Twilsock disconnected'));\n      });\n      _this._activeRequests.clear();\n    });\n  }\n\n  (0, _createClass3.default)(PacketInterface, [{\n    key: '_processReply',\n    value: function _processReply(reply) {\n      var request = this._activeRequests.get(reply.id);\n      if (request) {\n        clearTimeout(request.timeout);\n        this._activeRequests.delete(reply.id);\n\n        setTimeout(function () {\n          // User shouldn't intercept connection handling, thus making it asynchronous\n          if (!isHttpSuccess(reply.status.code)) {\n            request.reject(new Error('Transport failure: ' + reply.status.status));\n          } else if (isHttpReply(reply) && !isHttpSuccess(reply.header.http_status.code)) {\n            request.reject({\n              status: reply.header.http_status.code,\n              description: reply.header.http_status.status,\n              body: reply.body\n            });\n          } else {\n            request.resolve(reply);\n          }\n        }, 0);\n      }\n    }\n  }, {\n    key: '_storeRequest',\n    value: function _storeRequest(id, resolve, reject) {\n      var requestDescriptor = {\n        resolve: resolve,\n        reject: reject,\n        timeout: setTimeout(function () {\n          _logger2.default.debug('request', id, 'is timed out');\n          reject(new Error('Twilsock: request timeout: ' + id));\n        }, REQUEST_TIMEOUT)\n      };\n      this._activeRequests.set(id, requestDescriptor);\n    }\n  }, {\n    key: 'send',\n    value: function send(address, headers, body) {\n      var _this2 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this2._socket.isConnected) {\n          _logger2.default.info('Can not send upstream message. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var id = _this2._socket.sendUpstreamMessage(address, headers, body);\n        _logger2.default.trace('message sent: ', { id: id, address: address, headers: headers, body: body });\n        _this2._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'putNotificationContext',\n    value: function putNotificationContext(contextId, context) {\n      var _this3 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this3._socket.isConnected) {\n          _logger2.default.info('Can not send put notification context. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var header = { method: 'put_notification_ctx', notification_ctx_id: contextId }; // eslint-disable-line camelcase\n        var id = _this3._socket.send(header, context);\n        _this3._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'deleteNotificationContext',\n    value: function deleteNotificationContext(contextId) {\n      var _this4 = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        if (!_this4._socket.isConnected) {\n          _logger2.default.info('Can not send delete notification context. Twilsock is not in connected state');\n          reject(new Error('Twilsock is not connected'));\n        }\n\n        var packet = { method: 'delete_notification_ctx', notification_ctx_id: contextId }; // eslint-disable-line camelcase\n        var id = _this4._socket.send(packet);\n        _this4._storeRequest(id, resolve, reject);\n      });\n    }\n  }, {\n    key: 'shutdown',\n    value: function shutdown() {\n      this._activeRequests.forEach(function (descriptor) {\n        clearTimeout(descriptor.timeout);\n        descriptor.reject(new Error('Twilsock: request cancelled by user'));\n      });\n      this._activeRequests.clear();\n    }\n  }]);\n  return PacketInterface;\n}();\n\nexports.default = PacketInterface;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/packetinterface.js","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.1\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.1\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n\n\n// WEBPACK FOOTER //\n// ../node_modules/bluebird/js/browser/bluebird.js","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_a-function.js","/*\n * Copyright (c) 2012 Mathieu Turcotte\n * Licensed under the MIT license.\n */\n\nvar util = require('util');\n\nvar errors = module.exports = require('./errors');\n\nfunction failCheck(ExceptionConstructor, callee, messageFormat, formatArgs) {\n    messageFormat = messageFormat || '';\n    var message = util.format.apply(this, [messageFormat].concat(formatArgs));\n    var error = new ExceptionConstructor(message);\n    Error.captureStackTrace(error, callee);\n    throw error;\n}\n\nfunction failArgumentCheck(callee, message, formatArgs) {\n    failCheck(errors.IllegalArgumentError, callee, message, formatArgs);\n}\n\nfunction failStateCheck(callee, message, formatArgs) {\n    failCheck(errors.IllegalStateError, callee, message, formatArgs);\n}\n\nmodule.exports.checkArgument = function(value, message) {\n    if (!value) {\n        failArgumentCheck(arguments.callee, message,\n            Array.prototype.slice.call(arguments, 2));\n    }\n};\n\nmodule.exports.checkState = function(value, message) {\n    if (!value) {\n        failStateCheck(arguments.callee, message,\n            Array.prototype.slice.call(arguments, 2));\n    }\n};\n\nmodule.exports.checkIsDef = function(value, message) {\n    if (value !== undefined) {\n        return value;\n    }\n\n    failArgumentCheck(arguments.callee, message ||\n        'Expected value to be defined but was undefined.',\n        Array.prototype.slice.call(arguments, 2));\n};\n\nmodule.exports.checkIsDefAndNotNull = function(value, message) {\n    // Note that undefined == null.\n    if (value != null) {\n        return value;\n    }\n\n    failArgumentCheck(arguments.callee, message ||\n        'Expected value to be defined and not null but got \"' +\n        typeOf(value) + '\".', Array.prototype.slice.call(arguments, 2));\n};\n\n// Fixed version of the typeOf operator which returns 'null' for null values\n// and 'array' for arrays.\nfunction typeOf(value) {\n    var s = typeof value;\n    if (s == 'object') {\n        if (!value) {\n            return 'null';\n        } else if (value instanceof Array) {\n            return 'array';\n        }\n    }\n    return s;\n}\n\nfunction typeCheck(expect) {\n    return function(value, message) {\n        var type = typeOf(value);\n\n        if (type == expect) {\n            return value;\n        }\n\n        failArgumentCheck(arguments.callee, message ||\n            'Expected \"' + expect + '\" but got \"' + type + '\".',\n            Array.prototype.slice.call(arguments, 2));\n    };\n}\n\nmodule.exports.checkIsString = typeCheck('string');\nmodule.exports.checkIsArray = typeCheck('array');\nmodule.exports.checkIsNumber = typeCheck('number');\nmodule.exports.checkIsBoolean = typeCheck('boolean');\nmodule.exports.checkIsFunction = typeCheck('function');\nmodule.exports.checkIsObject = typeCheck('object');\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/precond/lib/checks.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/assign.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/util/util.js","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-dps.js","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/is-iterable.js","module.exports = require('./_hide');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_redefine.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/webpack/buildin/global.js","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iter-call.js","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/uuid/v1.js","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/uuid/v4.js","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.define-property.js","\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = _promise2.default))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"./logger\");\nvar entity_1 = require(\"./entity\");\nvar rfc6902_1 = require(\"rfc6902\");\nvar retryingqueue_1 = require(\"./retryingqueue\");\nvar utils_1 = require(\"./utils\");\n/**\n * @class\n * @alias Document\n * @classdesc\n * Primitive to store a single document in DataSync service\n * @property {String} sid SyncDocument unique id\n * @property {String} uniqueName Unique name of a document\n * @property {Object} value Value of a document\n *\n * @fires Document#updated\n * @fires Document#updatedRemotely\n * @fires Document#removed\n * @fires Document#removedRemotely\n */\n\nvar SyncDocument = function (_entity_1$SyncEntity) {\n    (0, _inherits3.default)(SyncDocument, _entity_1$SyncEntity);\n\n    /**\n     * @private\n     */\n    function SyncDocument(services, descriptor, removalHandler) {\n        (0, _classCallCheck3.default)(this, SyncDocument);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SyncDocument.__proto__ || (0, _getPrototypeOf2.default)(SyncDocument)).call(this, services, removalHandler));\n\n        _this.actionQueue = new retryingqueue_1.RetryingQueue();\n        _this.descriptor = descriptor;\n        _this.descriptor.data = _this.descriptor.data || {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(SyncDocument, [{\n        key: \"_update\",\n\n        /**\n         * Update data entity with new data\n         * @private\n         */\n        value: function _update(update) {\n            switch (update.type) {\n                case 'document_updated':\n                    if (update.id > this.lastEventId) {\n                        var originalData = this.descriptor.data;\n                        this.descriptor.last_event_id = update.id;\n                        this.descriptor.revision = update.document_revision;\n                        this.descriptor.data = update.document_data;\n                        this.traverse(originalData, update.document_data, false);\n                        this.emit('updated', update.document_data, false);\n                        this.emit('updatedRemotely', update.document_data);\n                        this.services.storage.update(this.type, this.sid, this.uniqueName, { last_event_id: update.id, revision: update.document_revision, data: update.document_data });\n                    }\n                    break;\n                case 'document_removed':\n                    this.onRemoved(false);\n                    break;\n            }\n        }\n        /**\n         * Calculate diff between old and new data\n         * @private\n         */\n\n    }, {\n        key: \"traverse\",\n        value: function traverse(originalData, updatedData, isLocalEvent) {\n            var _this2 = this;\n\n            var diff = rfc6902_1.createPatch(originalData, updatedData);\n            diff.forEach(function (row) {\n                if (row.op === 'add') {\n                    _this2.emit('keyAdded', row.path, row.value, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyAddedRemotely', row.path, row.value);\n                    }\n                } else if (row.op === 'replace') {\n                    _this2.emit('keyUpdated', row.path, row.value, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyUpdatedRemotely', row.path, row.value);\n                    }\n                } else if (row.op === 'remove') {\n                    _this2.emit('keyRemoved', row.path, isLocalEvent);\n                    if (!isLocalEvent) {\n                        _this2.emit('keyRemovedRemotely', row.path);\n                    }\n                }\n            });\n        }\n        /**\n         * @returns {Object} Internal data of entity\n         * For now use a 'value' property instead\n         * @private\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(path) {\n            // return !path ? this.value : this.value(path);\n            return this.value;\n        }\n        /**\n         * Set new value for the document\n         * @param {Object} value New value for the document\n         * @param {Boolean} [conditional=false] Check for remote modification when updating.\n         * If true, promise will be rejected if value was remotely modified\n         * @returns {Promise}\n         */\n\n    }, {\n        key: \"set\",\n        value: function set(value, conditional) {\n            return this._actualSet(value, conditional ? function () {\n                throw new Error('Revision mismatch');\n            } : null);\n        }\n        /**\n         * @private\n         */\n\n    }, {\n        key: \"_actualSet\",\n        value: function _actualSet(data, conflictResolver) {\n            var _this3 = this;\n\n            var resolver = void 0;\n            var arg = { data: data,\n                revision: conflictResolver ? this.revision : undefined };\n            if (conflictResolver) {\n                resolver = function resolver(err) {\n                    return __awaiter(_this3, void 0, void 0, _regenerator2.default.mark(function _callee() {\n                        return _regenerator2.default.wrap(function _callee$(_context) {\n                            while (1) {\n                                switch (_context.prev = _context.next) {\n                                    case 0:\n                                        if (!(err.status === 412)) {\n                                            _context.next = 4;\n                                            break;\n                                        }\n\n                                        _context.next = 3;\n                                        return this.softSync();\n\n                                    case 3:\n                                        return _context.abrupt(\"return\", { revision: this.revision,\n                                            data: conflictResolver(utils_1.deepClone(this.value)) });\n\n                                    case 4:\n                                        throw err;\n\n                                    case 5:\n                                    case \"end\":\n                                        return _context.stop();\n                                }\n                            }\n                        }, _callee, this);\n                    }));\n                };\n            }\n            return this.actionQueue.add(this._set.bind(this), this.uri, arg, resolver).then(function (result) {\n                if (result.last_event_id > _this3.descriptor.last_event_id) {\n                    // Ignore returned value if we already got a newer one\n                    _this3.descriptor.revision = result.revision;\n                    _this3.descriptor.data = result.data;\n                    _this3.descriptor.last_event_id = result.last_event_id;\n                    _this3.services.storage.update(_this3.type, _this3.sid, _this3.uniqueName, { last_event_id: result.last_event_id, revision: result.revision, data: result.data });\n                }\n                _this3.emit('updated', _this3.value, true);\n                return _this3.value;\n            });\n        }\n        /**\n         * @param {Document~Mutator} mutator Function to apply to current data in order to modify it.\n         * Can be called multiple times if same data modified remotely at the same time.\n         * @return {Promise<Object>}\n         */\n\n    }, {\n        key: \"mutate\",\n        value: function mutate(mutator) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                return _context2.abrupt(\"return\", this._actualSet(mutator(utils_1.deepClone(this.value)), mutator));\n\n                            case 1:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * @param {Object} update Set of fields to update\n         * @return {Promise<Object>} Result data\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(obj) {\n            return this.mutate(function (remote) {\n                return (0, _extends3.default)(remote, obj);\n            });\n        }\n    }, {\n        key: \"_set\",\n        value: function _set(context, param) {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee3() {\n                var response;\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                _context3.next = 2;\n                                return this.services.network.post(this.uri, { data: param.data }, param.revision);\n\n                            case 2:\n                                response = _context3.sent;\n                                return _context3.abrupt(\"return\", { revision: response.body.revision, data: param.data, last_event_id: response.body.last_event_id });\n\n                            case 4:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this);\n            }));\n        }\n        /**\n         * Get new data from server\n         * @private\n         */\n\n    }, {\n        key: \"softSync\",\n        value: function softSync() {\n            var _this4 = this;\n\n            return this.services.network.get(this.uri).then(function (response) {\n                _this4._update({ type: 'document_updated',\n                    id: response.body.last_event_id,\n                    document_revision: response.body.revision,\n                    document_data: response.body.data }); // eslint-disable-line camelcase\n                return _this4;\n            }).catch(function (err) {\n                if (err.status === 404) {\n                    _this4.onRemoved(false);\n                } else {\n                    logger_1.default.error(\"Can't get updates for \" + _this4.sid + \":\", err);\n                }\n            });\n        }\n        /**\n         * Get value by given path\n         * @param {string} path JSON path\n         * @private\n         */\n        /*\n        _value(path) {\n          let result;\n          try {\n            let pathArr = path.replace(/^\\/|\\/$/gm, '').split('/');\n            let obj = this.data;\n            pathArr.forEach((el) => { obj = obj[el]; });\n            result = obj;\n          } catch (e) {\n            log.warn('Failed to get value:', e);\n          }\n          return result;\n        }\n        */\n\n    }, {\n        key: \"onRemoved\",\n        value: function onRemoved(locally) {\n            this._unsubscribe();\n            this.removalHandler(this.type, this.sid, this.uniqueName);\n            // Should also do some cleanup here\n            this.emit('removed', locally);\n            if (!locally) {\n                this.emit('removedRemotely');\n            }\n        }\n        /**\n         * Removes document from service\n         * @return {Promise}\n         * @public\n         */\n\n    }, {\n        key: \"removeDocument\",\n        value: function removeDocument() {\n            return __awaiter(this, void 0, void 0, _regenerator2.default.mark(function _callee4() {\n                return _regenerator2.default.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.next = 2;\n                                return this.services.network.delete(this.uri);\n\n                            case 2:\n                                this.onRemoved(true);\n\n                            case 3:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n        }\n    }, {\n        key: \"uri\",\n        get: function get() {\n            return this.descriptor.url;\n        }\n    }, {\n        key: \"revision\",\n        get: function get() {\n            return this.descriptor.revision;\n        }\n    }, {\n        key: \"lastEventId\",\n        get: function get() {\n            return this.descriptor.last_event_id;\n        }\n    }, {\n        key: \"sid\",\n        get: function get() {\n            return this.descriptor.sid;\n        }\n    }, {\n        key: \"value\",\n        get: function get() {\n            return this.descriptor.data;\n        }\n    }, {\n        key: \"uniqueName\",\n        get: function get() {\n            return this.descriptor.unique_name || null;\n        }\n    }, {\n        key: \"type\",\n        get: function get() {\n            return 'document';\n        }\n    }], [{\n        key: \"type\",\n        get: function get() {\n            return 'document';\n        }\n    }]);\n    return SyncDocument;\n}(entity_1.SyncEntity);\n\nexports.SyncDocument = SyncDocument;\nexports.default = SyncDocument;\n/**\n * Applies a transformation to the document value\n * @callback Document~Mutator\n * @param {Object} data current value\n * @return {Object} Modified value\n */\n/**\n* Fired when document value changed\n* @event Document#updated\n* @type {Object}\n*/\n/**\n* Fired when document value changed remotely\n* @event Document#updatedRemotely\n* @type {Object}\n*/\n/**\n* Fired when document removed from server\n* @event Document#removed\n*/\n/**\n* Fired when document removed from server remotely\n* @event Document#removedRemotely\n*/\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/syncdocument.js","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.string.iterator.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = require(\"events\");\n/**\n * Provides retrier service\n */\nvar Retrier = /** @class */ (function (_super) {\n    __extends(Retrier, _super);\n    /**\n     * Creates a new Retrier instance\n     */\n    function Retrier(options) {\n        var _this = _super.call(this) || this;\n        _this.minDelay = options.min;\n        _this.maxDelay = options.max;\n        _this.initialDelay = options.initial || 0;\n        _this.maxAttemptsCount = options.maxAttemptsCount || 0;\n        _this.maxAttemptsTime = options.maxAttemptsTime || 0;\n        _this.randomness = options.randomness || 0;\n        _this.inProgress = false;\n        _this.attemptNum = 0;\n        _this.prevDelay = 0;\n        _this.currDelay = 0;\n        return _this;\n    }\n    Retrier.prototype.attempt = function () {\n        clearTimeout(this.timeout);\n        this.attemptNum++;\n        this.timeout = null;\n        this.emit(\"attempt\", this);\n    };\n    Retrier.prototype.nextDelay = function (delayOverride) {\n        if (typeof delayOverride === 'number') {\n            this.prevDelay = 0;\n            this.currDelay = delayOverride;\n            return delayOverride;\n        }\n        if (this.attemptNum == 0) {\n            return this.initialDelay;\n        }\n        if (this.attemptNum == 1) {\n            this.currDelay = this.minDelay;\n            return this.currDelay;\n        }\n        var delay = this.currDelay + this.prevDelay;\n        this.prevDelay = this.currDelay;\n        this.currDelay = delay;\n        return delay;\n    };\n    Retrier.prototype.randomize = function (delay) {\n        var area = delay * this.randomness;\n        var corr = Math.round(Math.random() * area * 2 - area);\n        return Math.max(0, delay + corr);\n    };\n    Retrier.prototype.scheduleAttempt = function (delayOverride) {\n        var _this = this;\n        if (this.maxAttemptsCount && this.attemptNum >= this.maxAttemptsCount) {\n            this.cleanup();\n            this.emit('failed', new Error('Maximum attempt count limit reached'));\n            this.reject(new Error('Maximum attempt count reached'));\n            return;\n        }\n        var delay = this.nextDelay(delayOverride);\n        delay = this.randomize(delay);\n        if (this.maxAttemptsTime && (this.startTimestamp + this.maxAttemptsTime < Date.now() + delay)) {\n            this.cleanup();\n            this.emit('failed', new Error('Maximum attempt time limit reached'));\n            this.reject(new Error('Maximum attempt time limit reached'));\n        }\n        this.timeout = setTimeout(function () { return _this.attempt(); }, delay);\n    };\n    Retrier.prototype.cleanup = function () {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n        this.inProgress = false;\n        this.attemptNum = 0;\n        this.prevDelay = 0;\n        this.currDelay = 0;\n    };\n    Retrier.prototype.start = function () {\n        var _this = this;\n        if (this.inProgress) {\n            throw new Error('Retrier is already in progress');\n        }\n        this.inProgress = true;\n        return new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n            _this.startTimestamp = Date.now();\n            _this.scheduleAttempt(_this.initialDelay);\n        });\n    };\n    Retrier.prototype.cancel = function () {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n            this.inProgress = false;\n            this.emit(\"cancelled\");\n            this.reject(new Error(\"Cancelled\"));\n        }\n    };\n    Retrier.prototype.succeeded = function (arg) {\n        this.emit(\"succeeded\", arg);\n        this.resolve(arg);\n    };\n    Retrier.prototype.failed = function (err, nextAttemptDelayOverride) {\n        if (this.timeout) {\n            throw new Error(\"Retrier attempt is already in progress\");\n        }\n        this.scheduleAttempt(nextAttemptDelayOverride);\n    };\n    Retrier.prototype.run = function (handler) {\n        var _this = this;\n        this.on('attempt', function () {\n            handler().then(function (v) { return _this.succeeded(v); }).catch(function (e) { return _this.failed(e); });\n        });\n        return this.start();\n    };\n    return Retrier;\n}(events_1.EventEmitter));\nexports.Retrier = Retrier;\nexports.default = Retrier;\n//# sourceMappingURL=retrier.js.map\n\n\n// WEBPACK FOOTER //\n// ../node_modules/operation-retrier/lib/retrier.js","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_global.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar XHR = typeof XMLHttpRequest === 'undefined' ? require('xmlhttprequest').XMLHttpRequest : XMLHttpRequest;\n\nfunction parseResponseHeaders(headerString) {\n  if (!headerString) {\n    return {};\n  }\n\n  return headerString.split('\\r\\n').map(function (el) {\n    return el.split(': ');\n  }).filter(function (el) {\n    return el.length === 2 && el[1].length > 0;\n  }).reduce(function (prev, curr) {\n    prev[curr[0]] = curr[1];return prev;\n  }, {});\n}\n\nfunction extractBody(xhr) {\n  var contentType = xhr.getResponseHeader('Content-Type');\n  if (!contentType || contentType.indexOf('application/json') !== 0 || xhr.responseText.length === 0) {\n    return xhr.responseText;\n  }\n\n  try {\n    return JSON.parse(xhr.responseText);\n  } catch (e) {\n    return xhr.responseText;\n  }\n}\n\n/**\n * Use XMLHttpRequest to get a network resource.\n * @param {String} method - HTTP Method\n * @param {Object} params - Request parameters\n * @param {String} params.url - URL of the resource\n * @param {Array}  params.headers - An array of headers to pass [{ headerName : headerBody }]\n * @param {Object} params.body - A JSON body to send to the resource\n * @returns {Promise}\n **/\n\nvar Request = function () {\n  function Request() {\n    _classCallCheck(this, Request);\n  }\n\n  _createClass(Request, null, [{\n    key: 'request',\n    value: function request(method, params) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XHR();\n        xhr.open(method, params.url, true);\n\n        xhr.onreadystatechange = function onreadystatechange() {\n          if (xhr.readyState !== 4) {\n            return;\n          }\n\n          var headers = parseResponseHeaders(xhr.getAllResponseHeaders());\n          var body = extractBody(xhr);\n\n          if (200 <= xhr.status && xhr.status < 300) {\n            resolve({ status: xhr.status, headers: headers, body: body });\n          } else {\n            reject({ status: xhr.status, description: xhr.statusText, headers: headers, body: body });\n          }\n        };\n\n        for (var headerName in params.headers) {\n          xhr.setRequestHeader(headerName, params.headers[headerName]);\n          if (headerName === 'Content-Type' && params.headers[headerName] === 'application/json') {\n            params.body = JSON.stringify(params.body);\n          }\n        }\n\n        xhr.send(params.body);\n      });\n    }\n\n    /**\n     * Sugar function for request('GET', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'get',\n    value: function get(params) {\n      return this.request('GET', params);\n    }\n\n    /**\n     * Sugar function for request('POST', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'post',\n    value: function post(params) {\n      return this.request('POST', params);\n    }\n\n    /**\n     * Sugar function for request('PUT', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'put',\n    value: function put(params) {\n      return this.request('PUT', params);\n    }\n\n    /**\n     * Sugar function for request('DELETE', params);\n     * @param {Object} params - Request parameters\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete(params) {\n      return this.request('DELETE', params);\n    }\n  }]);\n\n  return Request;\n}();\n\nexports.default = Request;\n\n\nmodule.exports = Request;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-transport/lib/httprequest.js","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/symbol.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/createClass.js","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-keys.js","/*!\n * Platform.js <https://mths.be/platform>\n * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>\n * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>\n * Available under MIT license <https://mths.be/mit>\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': 'Edge' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Waterfox',\n      'WebPositive',\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chrome',\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : '8');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n       * \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    define(function() {\n      return platform;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/platform/platform.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _freeze = require('babel-runtime/core-js/object/freeze');\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = require('babel-runtime/core-js/get-iterator');\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _map = require('babel-runtime/core-js/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _backoff = require('backoff');\n\nvar _backoff2 = _interopRequireDefault(_backoff);\n\nvar _javascriptStateMachine = require('javascript-state-machine');\n\nvar _javascriptStateMachine2 = _interopRequireDefault(_javascriptStateMachine);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar WebSocket = global.WebSocket || global.MozWebSocket || require('ws');\n\nvar ACTIVITY_CHECK_INTERVAL = 5000;\nvar ACTIVITY_TIMEOUT = 43000;\n\nvar INIT_TIMEOUT = 5000;\nvar UPDATE_TIMEOUT = 5000;\nvar DISCONNECTING_TIMEOUT = 3000;\n\nfunction byteLength(s) {\n  var escstr = encodeURIComponent(s);\n  var binstr = escstr.replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  });\n  return binstr.length;\n}\n\nfunction stringToUint8Array(s) {\n  var escstr = encodeURIComponent(s);\n  var binstr = escstr.replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  });\n  var ua = new Uint8Array(binstr.length);\n  Array.prototype.forEach.call(binstr, function (ch, i) {\n    ua[i] = ch.charCodeAt(0);\n  });\n  return ua;\n}\n\nfunction uint8ArrayToString(ua) {\n  var binstr = Array.prototype.map.call(ua, function (ch) {\n    return String.fromCharCode(ch);\n  }).join('');\n  var escstr = binstr.replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  });\n  return decodeURIComponent(escstr);\n}\n\nfunction getMagic(buffer) {\n  var strMagic = '';\n  var idx = 0;\n  for (; idx < buffer.length; ++idx) {\n    var chr = String.fromCharCode(buffer[idx]);\n    strMagic += chr;\n    if (chr === '\\r') {\n      idx += 2;\n      break;\n    }\n  }\n\n  var magics = strMagic.split(' ');\n  return {\n    size: idx,\n    protocol: magics[0],\n    version: magics[1],\n    headerSize: Number(magics[2])\n  };\n}\n\n/**\n * Makes sure that body is properly stringified\n */\nfunction preparePayload(payload) {\n  switch (typeof payload === 'undefined' ? 'undefined' : (0, _typeof3.default)(payload)) {\n    case 'undefined':\n      return '';\n    case 'object':\n      return (0, _stringify2.default)(payload);\n    default:\n      return payload;\n  }\n}\n\n/**\n * @param {Uint8Array} array\n * @returns {Object}\n */\nfunction getJsonObject(array) {\n  var str = uint8ArrayToString(array);\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    _logger2.default.error('failed to parse input: ', str);\n    throw e;\n  }\n}\n\n/**\n * @class TwilsockChannel\n * @classdesc Twilsock connection\n *\n * @param config\n */\n\nvar TwilsockChannel = function (_EventEmitter) {\n  (0, _inherits3.default)(TwilsockChannel, _EventEmitter);\n\n  function TwilsockChannel(config) {\n    (0, _classCallCheck3.default)(this, TwilsockChannel);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TwilsockChannel.__proto__ || (0, _getPrototypeOf2.default)(TwilsockChannel)).call(this));\n\n    if (config.logLevel) {\n      _logger2.default.setLevel(config.logLevel);\n    }\n\n    var backoff = _backoff2.default.exponential({\n      randomisationFactor: 0.2,\n      initialDelay: 2 * 1000,\n      maxDelay: 2 * 60 * 1000\n    });\n\n    backoff.on('ready', function () {\n      _this._retry();\n    });\n    _this.on('reply', function (reply) {\n      _this._processReply(reply);\n    });\n\n    (0, _defineProperties2.default)(_this, {\n      _config: { value: config },\n      _transportReady: { value: false, writable: true },\n      _disconnectedPromiseResolve: { value: null, writable: true },\n      _backoffDefault: { value: backoff },\n      _backoff: { value: backoff, writable: true },\n      _fsm: { value: null, writable: true },\n      _watchTimer: { value: null, writable: true },\n      _timestamp: { value: 0, writable: true },\n      _socket: { value: null, writable: true },\n      _activeToken: { value: null, writable: true },\n      activeToken: { enumerable: true, get: function get() {\n          return _this._activeToken;\n        } },\n      state: { enumberable: true, get: function get() {\n          return _this._getState();\n        } },\n      isConnected: { enumberable: true, get: function get() {\n          return _this._isConnected();\n        } },\n      _activeRequests: { value: new _map2.default() },\n      _disconnectingTimer: { value: null, writable: true },\n      _isDeferredUpdate: { value: false, writable: true }\n    });\n\n    _this._fsm = _javascriptStateMachine2.default.create({\n      initial: 'disconnected',\n      events: [{ name: 'userConnect', from: ['disconnected', 'rejected'], to: 'connecting' }, { name: 'userConnect', from: ['connecting', 'connected'] }, // ignore event\n      { name: 'userDisconnect', from: ['connecting', 'initialising', 'connected', 'updating', 'retrying', 'rejected', 'waitSocketClosed', 'waitOffloadSocketClosed'], to: 'disconnecting' }, { name: 'userRetry', from: ['retrying'], to: 'connecting' }, { name: 'socketConnected', from: ['connecting'], to: 'initialising' }, { name: 'socketClosed', from: ['connecting', 'initialising', 'connected', 'updating', 'error', 'waitOffloadSocketClosed'], to: 'retrying' }, { name: 'socketClosed', from: ['disconnecting'], to: 'disconnected' }, { name: 'socketClosed', from: ['waitSocketClosed'], to: 'disconnected' }, { name: 'socketClosed', from: ['rejected'], to: 'rejected' }, { name: 'initSuccess', from: ['initialising'], to: 'connected' }, { name: 'initError', from: ['initialising'], to: 'error' }, { name: 'tokenRejected', from: ['initialising', 'updating'], to: 'rejected' }, { name: 'protocolError', from: ['initialising', 'connected', 'updating'], to: 'error' }, { name: 'receiveClose', from: ['initialising', 'connected', 'updating'], to: 'waitSocketClosed' }, { name: 'receiveOffload', from: ['initialising', 'connected', 'updating'], to: 'waitOffloadSocketClosed' }, { name: 'unsupportedProtocol', from: ['initialising', 'connected', 'updating'], to: 'unsupported' }, { name: 'receiveFatalClose', from: ['initialising', 'connected', 'updating'], to: 'unsupported' }, { name: 'userUpdateToken', from: ['disconnected', 'rejected', 'connecting', 'retrying'], to: 'connecting' }, { name: 'userUpdateToken', from: ['connected'], to: 'updating' }, { name: 'updateSuccess', from: ['updating'], to: 'connected' }, { name: 'updateError', from: ['updating'], to: 'error' }],\n      callbacks: {\n        onconnecting: function onconnecting() {\n          _this._startWatchdogTimer();\n          _this._setupSocket();\n          _this.emit('connecting');\n        },\n        onenterinitialising: function onenterinitialising() {\n          _this._sendInit();\n        },\n        onleaveinitialising: function onleaveinitialising() {\n          _this._cancelInit();\n        },\n        onenterupdating: function onenterupdating() {\n          _this._sendUpdate();\n        },\n        onleaveupdating: function onleaveupdating() {\n          _this._cancelUpdate();\n        },\n        onenterretrying: function onenterretrying() {\n          _this._initRetry();\n          _this.emit('connecting');\n        },\n        onenterconnected: function onenterconnected() {\n          _this._resetBackoff();\n          _this._onConnected();\n        },\n        onuserUpdateToken: function onuserUpdateToken() {\n          _this._resetBackoff();\n        },\n        ontokenRejected: function ontokenRejected() {\n          _this._resetBackoff();\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onuserDisconnect: function onuserDisconnect() {\n          _this._closeSocket();\n        },\n        onenterdisconnecting: function onenterdisconnecting() {\n          _this._startDisconnectTimer();\n        },\n        onleavedisconnecting: function onleavedisconnecting() {\n          _this._cancelDisconnectTimer();\n        },\n        onenterwaitSocketClosed: function onenterwaitSocketClosed() {\n          _this._startDisconnectTimer();\n        },\n        onleavewaitSocketClosed: function onleavewaitSocketClosed() {\n          _this._cancelDisconnectTimer();\n        },\n        onenterwaitOffloadSocketClosed: function onenterwaitOffloadSocketClosed() {\n          _this._startDisconnectTimer();\n        },\n        onleavewaitOffloadSocketClosed: function onleavewaitOffloadSocketClosed() {\n          _this._cancelDisconnectTimer();\n        },\n        ondisconnected: function ondisconnected() {\n          _this._resetBackoff();\n          _this._finalizeSocket();\n        },\n        onreceiveClose: function onreceiveClose(event, from, to, args) {\n          _logger2.default.debug('onreceiveClose: ', args);\n          _this._onCloseReceived(args);\n        },\n        onreceiveOffload: function onreceiveOffload(event, from, to, args) {\n          _logger2.default.debug('onreceiveoffload: ', args);\n          _this._modifyBackoff(args.body);\n          _this._onCloseReceived(args.status);\n        },\n        onunsupported: function onunsupported() {\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onerror: function onerror() {\n          _this._closeSocket();\n          _this._finalizeSocket();\n        },\n        onenterstate: function onenterstate(event, from, to) {\n          _this._changeState(event, from, to);\n        }\n      },\n      error: function error() {\n        _logger2.default.warn('FSM: unexpected transition', arguments);\n      }\n    });\n\n    return _this;\n  }\n\n  (0, _createClass3.default)(TwilsockChannel, [{\n    key: '_changeState',\n    value: function _changeState(event, from, to) {\n      var _this2 = this;\n\n      _logger2.default.debug('FSM: ', event, ': ', from, '>>', to);\n\n      this.emit('stateChanged', this.state);\n\n      if (this._isDeferredUpdate) {\n        this._isDeferredUpdate = false;\n        setTimeout(function () {\n          _this2.updateToken();\n        }, 0);\n      }\n    }\n  }, {\n    key: '_resetBackoff',\n    value: function _resetBackoff() {\n      _logger2.default.trace('_resetBackoff');\n      this._backoff = this._backoffDefault;\n      this._backoff.reset();\n    }\n  }, {\n    key: '_modifyBackoff',\n    value: function _modifyBackoff(body) {\n      var _this3 = this;\n\n      _logger2.default.trace('_modifyBackoff', body);\n\n      var backoffPolicy = body ? body.backoff_policy : null;\n\n      if (backoffPolicy) {\n        var min = backoffPolicy.reconnect_min_ms || 2 * 1000;\n        var max = backoffPolicy.reconnect_max_ms || 2 * 60 * 1000;\n\n        _logger2.default.debug('new backoff policy', min, max);\n\n        this._backoff = _backoff2.default.exponential({\n          randomisationFactor: 0.2,\n          initialDelay: min,\n          maxDelay: max\n        });\n        this._backoff.on('ready', function () {\n          _this3._retry();\n        });\n      }\n    }\n  }, {\n    key: '_startDisconnectTimer',\n    value: function _startDisconnectTimer() {\n      var _this4 = this;\n\n      _logger2.default.trace('_startDisconnectTimer');\n\n      if (this._disconnectingTimer) {\n        clearTimeout(this._disconnectingTimer);\n        this._disconnectingTimer = null;\n      }\n\n      this._disconnectingTimer = setTimeout(function () {\n        _logger2.default.debug('disconnecting is timed out');\n        _this4._closeSocket();\n      }, DISCONNECTING_TIMEOUT);\n    }\n  }, {\n    key: '_cancelDisconnectTimer',\n    value: function _cancelDisconnectTimer() {\n      _logger2.default.trace('_cancelDisconnectTimer');\n\n      if (this._disconnectingTimer) {\n        clearTimeout(this._disconnectingTimer);\n        this._disconnectingTimer = null;\n      }\n    }\n  }, {\n    key: '_processReply',\n    value: function _processReply(reply) {\n      _logger2.default.debug('receive reply:', reply);\n\n      var request = this._activeRequests.get(reply.id);\n      if (request) {\n        clearTimeout(request.timeout);\n        this._activeRequests.delete(reply.id);\n\n        switch (request.reqType) {\n          case 'init':\n            if (reply.status.code >= 200 && reply.status.code < 300) {\n              this._fsm.initSuccess(reply.body);\n            } else if (reply.status.code === 401 || reply.status.code === 403) {\n              this._fsm.tokenRejected(reply.status);\n            } else if (reply.status.code === 429) {\n              this._modifyBackoff(reply.body);\n              this._fsm.initError(reply.status);\n            } else {\n              this._fsm.initError(reply.status);\n            }\n            break;\n          case 'update':\n            if (reply.status.code >= 200 && reply.status.code < 300) {\n              this._fsm.updateSuccess(reply.body);\n            } else if (reply.status.code === 401 || reply.status.code === 403) {\n              this._fsm.tokenRejected(reply.status);\n            } else if (reply.status.code === 429) {\n              this._modifyBackoff(reply.body);\n              this._fsm.updateError(reply.status);\n            } else {\n              this._fsm.updateError(reply.status);\n            }\n            break;\n          default:\n            _logger2.default.error('unexpected reply');\n        }\n      }\n    }\n  }, {\n    key: '_storeRequest',\n    value: function _storeRequest(id, type, timeoutMs) {\n      var _this5 = this;\n\n      _logger2.default.trace('_storeRequest');\n\n      var requestDescriptor = {\n        reqType: type,\n        timeout: setTimeout(function () {\n          _logger2.default.debug('request', type, ': ', id, 'is timed out');\n\n          if (type !== 'init' && type !== 'update') {\n            _logger2.default.error('unknown request type', type);\n          }\n\n          _this5._closeSocket();\n        }, timeoutMs)\n      };\n\n      this._activeRequests.set(id, requestDescriptor);\n    }\n\n    /**\n     * Checks if connection established\n     * @public\n     */\n\n  }, {\n    key: '_isConnected',\n    value: function _isConnected() {\n      return this.state === TwilsockChannel.state.CONNECTED && this._socket && this._socket.readyState === 1;\n    }\n\n    /**\n     * @returns {Number} Connection state\n     * @public\n     */\n\n  }, {\n    key: '_getState',\n    value: function _getState() {\n      if (!this._fsm) {\n        return TwilsockChannel.state.DISCONNECTED;\n      }\n\n      switch (this._fsm.current) {\n        case 'connecting':\n        case 'initialising':\n        case 'retrying':\n        case 'error':\n          return TwilsockChannel.state.CONNECTING;\n        case 'updating':\n        case 'connected':\n          return TwilsockChannel.state.CONNECTED;\n        case 'rejected':\n          return TwilsockChannel.state.REJECTED;\n        case 'disconnecting':\n        case 'waitSocketClosed':\n        case 'waitOffloadSocketClosed':\n          return TwilsockChannel.state.DISCONNECTING;\n        case 'disconnected':\n        default:\n          return TwilsockChannel.state.DISCONNECTED;\n      }\n    }\n  }, {\n    key: '_initRetry',\n    value: function _initRetry() {\n      _logger2.default.trace('_initRetry');\n\n      this._backoff.backoff();\n    }\n  }, {\n    key: '_retry',\n    value: function _retry() {\n      _logger2.default.trace('_retry');\n\n      this._socket = null;\n      this._activeToken = null;\n      this._fsm.userRetry();\n    }\n  }, {\n    key: '_onConnected',\n    value: function _onConnected() {\n      this.emit('connected');\n    }\n  }, {\n    key: '_finalizeSocket',\n    value: function _finalizeSocket() {\n      _logger2.default.trace('_finalizeSocket');\n\n      this._stopWatchdogTimer();\n      this._onDisconnected();\n\n      if (this._disconnectedPromiseResolve) {\n        var resolve = this._disconnectedPromiseResolve;\n        this._disconnectedPromiseResolve = null;\n        resolve();\n      }\n    }\n  }, {\n    key: '_onDisconnected',\n    value: function _onDisconnected() {\n      this._socket = null;\n      this._activeToken = null;\n      this.emit('disconnected');\n    }\n  }, {\n    key: '_setupSocket',\n    value: function _setupSocket() {\n      _logger2.default.trace('_setupSocket:', this._config.token);\n\n      var self = this;\n      var uri = this._config.twilsockUri;\n\n      _logger2.default.debug('try to connect to:', uri);\n\n      var socket = new WebSocket(uri);\n      socket.binaryType = 'arraybuffer';\n\n      socket.onopen = function () {\n        _logger2.default.info('socket opened');\n        self._fsm.socketConnected();\n      };\n\n      socket.onclose = function (e) {\n        _logger2.default.info('socket closed', e);\n        self._fsm.socketClosed();\n      };\n\n      socket.onerror = function (e) {\n        _logger2.default.error('error: ', e);\n      };\n\n      socket.onmessage = function (message) {\n        _logger2.default.trace('data: ', message.data);\n\n        var fieldMargin = 2;\n\n        var dataView = new Uint8Array(message.data);\n        var magic = getMagic(dataView);\n        if (magic.protocol !== 'TWILSOCK' || magic.version !== 'V3.0') {\n          _logger2.default.error('unsupported protocol: ' + magic.protocol + ' ver ' + magic.version);\n          self._fsm.unsupportedProtocol();\n          return;\n        }\n\n        var header = null;\n        try {\n          header = getJsonObject(dataView.subarray(magic.size, magic.size + magic.headerSize));\n        } catch (e) {\n          _logger2.default.error('failed to parse message header', e, message);\n          self._fsm.protocolError();\n          return;\n        }\n        _logger2.default.trace('message received: ', header);\n\n        var payload = null;\n        if (header.payload_size > 0) {\n          var payloadOffset = fieldMargin + magic.size + magic.headerSize;\n          var payloadSize = header.payload_size;\n\n          if (!header.hasOwnProperty('payload_type') || header.payload_type.indexOf('application/json') === 0) {\n            try {\n              payload = getJsonObject(dataView.subarray(payloadOffset, payloadOffset + payloadSize));\n            } catch (e) {\n              _logger2.default.error('failed to parse message body', e, message);\n              self._fsm.protocolError();\n              return;\n            }\n          } else if (header.payload_type.indexOf('text/plain') === 0) {\n            payload = uint8ArrayToString(dataView.subarray(payloadOffset, payloadOffset + payloadSize));\n          }\n        }\n\n        self._updateActivityTimestamp();\n\n        if (header.method === 'notification') {\n          self._confirmReceiving(header);\n          self.emit('message', header.message_type, payload);\n        } else if (header.method === 'reply') {\n          self.emit('reply', {\n            id: header.id,\n            status: header.status,\n            header: header,\n            body: payload\n          });\n        } else if (header.method === 'ping') {\n          self._confirmReceiving(header);\n        } else if (header.method === 'close') {\n          _logger2.default.trace('connection close initated by server');\n          self._confirmReceiving(header);\n\n          if (header.status.code === 308) {\n            _logger2.default.info('connection has been offloaded');\n            self._fsm.receiveOffload({ status: header.status.status, body: payload });\n          } else if (header.status.code === 406) {\n            // Not acceptable message\n            _logger2.default.error('connection has been rejected because server can not parse protocol');\n            self._fsm.receiveFatalClose();\n          } else if (header.status.code === 417) {\n            // Protocol error\n            _logger2.default.info('connection has been rejected because server could not understand client`s reply');\n            self._fsm.receiveFatalClose(header.status.status);\n          } else if (header.status.code === 410) {\n            // Expired connection\n            _logger2.default.info('connection has expired');\n            self._fsm.receiveClose(header.status.status);\n          } else if (header.status.code === 401) {\n            // Authentication fail\n            _logger2.default.info('connection is not authenticate');\n            self._fsm.receiveClose(header.status.status);\n          } else {\n            _logger2.default.error('unexpected close: ', header.status);\n            // Try to reconnect\n            self._fsm.receiveOffload({ status: header.status.status, body: null });\n          }\n        }\n      };\n\n      this._activeToken = this._config.token;\n      this._socket = socket;\n    }\n  }, {\n    key: '_sendInit',\n    value: function _sendInit() {\n      _logger2.default.trace('_sendInit');\n\n      var header = {\n        id: _uuid2.default.v4(),\n        method: 'init',\n        token: this._activeToken\n      };\n\n      this._sendPacket(header);\n      this._storeRequest(header.id, 'init', INIT_TIMEOUT);\n    }\n  }, {\n    key: '_sendUpdate',\n    value: function _sendUpdate() {\n      _logger2.default.trace('_sendUpdate');\n\n      var header = {\n        id: _uuid2.default.v4(),\n        method: 'update',\n        token: this._activeToken\n      };\n\n      this._sendPacket(header);\n      this._storeRequest(header.id, 'update', UPDATE_TIMEOUT);\n    }\n  }, {\n    key: '_cancelInit',\n    value: function _cancelInit() {\n      _logger2.default.trace('_cancelInit');\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = (0, _getIterator3.default)(this._activeRequests), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = (0, _slicedToArray3.default)(_step.value, 2),\n              id = _step$value[0],\n              request = _step$value[1];\n\n          if (request && request.reqType === 'init') {\n            clearTimeout(request.timeout);\n            this._activeRequests.delete(id);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: '_cancelUpdate',\n    value: function _cancelUpdate() {\n      _logger2.default.trace('_cancelUpdate');\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = (0, _getIterator3.default)(this._activeRequests), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _step2$value = (0, _slicedToArray3.default)(_step2.value, 2),\n              id = _step2$value[0],\n              request = _step2$value[1];\n\n          if (request && request.reqType === 'update') {\n            clearTimeout(request.timeout);\n            this._activeRequests.delete(id);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n\n    /**\n     * Should be called for each message to confirm it received\n     */\n\n  }, {\n    key: '_confirmReceiving',\n    value: function _confirmReceiving(messageHeader) {\n      _logger2.default.trace('_confirmReceiving');\n\n      var header = {\n        method: 'reply',\n        id: messageHeader.id,\n        payload_type: 'application/json', // eslint-disable-line camelcase\n        status: { code: 200, status: 'OK' }\n      };\n\n      try {\n        this._sendPacket(header);\n      } catch (e) {\n        _logger2.default.debug('failed to confirm packet receiving', e);\n      }\n    }\n\n    /**\n     * Prepare binary packet and send it over the network\n     */\n\n  }, {\n    key: '_sendPacket',\n    value: function _sendPacket(header, payload) {\n      var payloadString = preparePayload(payload);\n\n      header.payload_size = byteLength(payloadString); // eslint-disable-line camelcase\n      var headerString = (0, _stringify2.default)(header) + '\\r\\n';\n      var magicString = 'TWILSOCK V3.0 ' + (byteLength(headerString) - 2) + '\\r\\n';\n\n      _logger2.default.debug('send request:', magicString + headerString + payloadString);\n\n      var message = stringToUint8Array(magicString + headerString + payloadString);\n\n      try {\n        this._socket.send(message.buffer);\n      } catch (e) {\n        _logger2.default.info('failed to send ', header, e);\n        _logger2.default.info(e.stack);\n        throw e;\n      }\n    }\n\n    /**\n     * Shutdown connection\n     * @private\n     */\n\n  }, {\n    key: '_closeSocket',\n    value: function _closeSocket() {\n      _logger2.default.trace('_closeSocket');\n\n      if (this._socket) {\n        this._socket.onopen = null;\n        this._socket.onclose = null;\n        this._socket.onerror = null;\n        this._socket.onmessage = null;\n\n        this._socket.close();\n      }\n      this._fsm.socketClosed();\n    }\n\n    /**\n     * Initiate the twilsock connection\n     * If already connected, it does nothing\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect() {\n      _logger2.default.trace('connect');\n      this._fsm.userConnect();\n    }\n\n    /**\n     * Retry the twilsock connection\n     */\n\n  }, {\n    key: 'reconnect',\n    value: function reconnect() {\n      _logger2.default.trace('reconnect');\n      this._resetBackoff();\n      this._fsm.userRetry();\n    }\n\n    /**\n     * Check twilsock is in retry state\n     */\n\n  }, {\n    key: 'isRetrying',\n    value: function isRetrying() {\n      return this._fsm.current === 'retrying';\n    }\n\n    /**\n     * Close twilsock connection\n     * If already disconnected, it does nothing\n     */\n\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      var _this6 = this;\n\n      _logger2.default.trace('disconnect');\n\n      if (this._fsm.is('disconnected')) {\n        return _promise2.default.resolve();\n      }\n\n      return new _promise2.default(function (resolve) {\n        _this6._disconnectedPromiseResolve = resolve;\n        _this6._fsm.userDisconnect();\n      });\n    }\n\n    /**\n     * Update fpa token for twilsock connection\n     */\n\n  }, {\n    key: 'updateToken',\n    value: function updateToken() {\n      _logger2.default.trace('updateToken:', this._config.token);\n\n      if (this._fsm.current === 'initialising' || this._fsm.current === 'updating' || this._fsm.current === 'waitSocketClosed' || this._fsm.current === 'waitOffloadSocketClosed') {\n\n        _logger2.default.debug('defer updateToken because of', this._fsm.current, 'is in progress');\n        this._isDeferredUpdate = true;\n        return;\n      }\n\n      this._isDeferredUpdate = false;\n\n      this._activeToken = this._config.token;\n      this._fsm.userUpdateToken();\n    }\n\n    /**\n     * Send upstream message\n     * @returns {String} id of sent message\n     */\n\n  }, {\n    key: 'sendUpstreamMessage',\n    value: function sendUpstreamMessage(address, headers, body) {\n      var id = _uuid2.default.v4();\n\n      var httpRequest = {\n        host: address.host,\n        path: address.path,\n        method: address.method\n      };\n\n      if (address.hasOwnProperty('params')) {\n        httpRequest.params = address.params;\n      }\n\n      /* eslint-disable camelcase */\n      var twilsockHeader = {\n        method: 'message',\n        id: id,\n        http_request: httpRequest\n      };\n\n      if (headers) {\n        twilsockHeader.http_request.headers = headers;\n      }\n\n      if (headers && headers.hasOwnProperty('Content-Type')) {\n        twilsockHeader.payload_type = headers['Content-Type'];\n      }\n\n      this._sendPacket(twilsockHeader, body);\n      return id;\n      /* eslint-enable camelcase */\n    }\n  }, {\n    key: 'send',\n    value: function send(header, body) {\n      header.id = header.id || _uuid2.default.v4();\n      this._sendPacket(header, body);\n      return header.id;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_onCloseReceived',\n    value: function _onCloseReceived(reason) {\n      _logger2.default.trace('_onCloseReceived');\n      _logger2.default.info('connection closed by server, reason is', reason);\n\n      // Waiting for server close connection. All others events are skipped\n      if (this._socket) {\n        this._socket.onopen = null;\n        this._socket.onerror = null;\n        this._socket.onmessage = null;\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_startWatchdogTimer',\n    value: function _startWatchdogTimer() {\n      var _this7 = this;\n\n      _logger2.default.trace('_startWatchdogTimer');\n\n      this._timestamp = Date.now();\n      this._watchTimer = setInterval(function () {\n        if (Date.now() - _this7._timestamp > ACTIVITY_TIMEOUT && _this7._socket) {\n          _this7._socket.close();\n        }\n      }, ACTIVITY_CHECK_INTERVAL);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_stopWatchdogTimer',\n    value: function _stopWatchdogTimer() {\n      _logger2.default.trace('_stopWatchdogTimer');\n\n      clearInterval(this._watchTimer);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_updateActivityTimestamp',\n    value: function _updateActivityTimestamp() {\n      _logger2.default.trace('_updateActivityTimestamp');\n\n      this._timestamp = Date.now();\n    }\n  }]);\n  return TwilsockChannel;\n}(_events2.default);\n/**\n * Enum for connection state values.\n * @readonly\n * @enum {number}\n */\n\n\nexports.default = TwilsockChannel;\nTwilsockChannel.state = {\n  DISCONNECTED: 'disconnected',\n  CONNECTING: 'connecting',\n  CONNECTED: 'connected',\n  DISCONNECTING: 'disconnecting',\n  ERROR: 'error',\n  REJECTED: 'rejected'\n};\n(0, _freeze2.default)(TwilsockChannel.state);\n\n(0, _freeze2.default)(TwilsockChannel);\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/twilsock.js","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/get-prototype-of.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/webpack/buildin/module.js","\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _iterator2 = require(\"babel-runtime/core-js/symbol/iterator\");\n\nvar _iterator3 = _interopRequireDefault(_iterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n\nvar Node = function () {\n    function Node(key, value) {\n        (0, _classCallCheck3.default)(this, Node);\n\n        this.balanceFactor = 0;\n        this.key = key;\n        this.value = value;\n        this.parent = null;\n        this.left = null;\n        this.right = null;\n    }\n\n    (0, _createClass3.default)(Node, [{\n        key: \"update\",\n        value: function update(value) {\n            this.value = value;\n        }\n    }, {\n        key: \"replace\",\n        value: function replace(target, replacement) {\n            if (!target) {\n                return;\n            }\n            if (this.left === replacement) {\n                this.left = replacement;\n            } else if (this.right === replacement) {\n                this.right = replacement;\n            }\n        }\n    }, {\n        key: \"isRoot\",\n        get: function get() {\n            return this.parent === null;\n        }\n    }, {\n        key: \"isLeaf\",\n        get: function get() {\n            return this.left === null && this.right === null;\n        }\n    }, {\n        key: \"isLeftChild\",\n        get: function get() {\n            return this.parent.left === this;\n        }\n    }]);\n    return Node;\n}();\n/**\n * @property length\n */\n\n\nvar TreeMap = function () {\n    function TreeMap(less, equal) {\n        (0, _classCallCheck3.default)(this, TreeMap);\n\n        this.isLessThan = less || function (x, y) {\n            return x < y;\n        };\n        this.isEqual = equal || function (x, y) {\n            return x === y;\n        };\n        this.root = null;\n        this.count = null;\n    }\n\n    (0, _createClass3.default)(TreeMap, [{\n        key: \"clear\",\n        value: function clear() {\n            this.root = null;\n            this.count = 0;\n        }\n    }, {\n        key: \"set\",\n        value: function set(key, value) {\n            var node = this.getNode(key);\n            if (node) {\n                node.update(value);\n            } else {\n                this.insert(key, value);\n            }\n            // return node;\n        }\n    }, {\n        key: \"insert\",\n        value: function insert(key, value) {\n            var node = new Node(key, value);\n            this.count++;\n            if (!this.root) {\n                this.root = node;\n                // return node;\n                return;\n            }\n            var currNode = this.root;\n            for (;;) {\n                if (this.isLessThan(key, currNode.key)) {\n                    if (currNode.left) {\n                        currNode = currNode.left;\n                    } else {\n                        currNode.left = node;\n                        break;\n                    }\n                } else {\n                    if (currNode.right) {\n                        currNode = currNode.right;\n                    } else {\n                        currNode.right = node;\n                        break;\n                    }\n                }\n            }\n            node.parent = currNode;\n            currNode = node;\n            while (currNode.parent) {\n                var parent = currNode.parent;\n                var prevBalanceFactor = parent.balanceFactor;\n                if (currNode.isLeftChild) {\n                    parent.balanceFactor++;\n                } else {\n                    parent.balanceFactor--;\n                }\n                if (Math.abs(parent.balanceFactor) < Math.abs(prevBalanceFactor)) {\n                    break;\n                }\n                if (parent.balanceFactor < -1 || parent.balanceFactor > 1) {\n                    this.rebalance(parent);\n                    break;\n                }\n                currNode = parent;\n            }\n            // return node;\n        }\n    }, {\n        key: \"get\",\n        value: function get(key) {\n            var currentNode = this.root;\n            while (currentNode) {\n                if (this.isEqual(key, currentNode.key)) {\n                    return currentNode.value;\n                }\n                if (this.isLessThan(key, currentNode.key)) {\n                    currentNode = currentNode.left;\n                } else {\n                    currentNode = currentNode.right;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"delete\",\n        value: function _delete(key) {\n            // update this algorithm and remove any\n            var node = this.getNode(key);\n            if (!node || node.key !== key) {\n                return null;\n            }\n            var parent = node.parent;\n            var left = node.left;\n            var right = node.right;\n            if (!!left !== !!right) {\n                var child = left || right;\n                if (!parent && !child) {\n                    this.root = null;\n                } else if (parent && !child) {\n                    this.root = child;\n                } else {\n                    parent.replace(node, null);\n                    this.rebalance(parent);\n                }\n            } else {\n                var maxLeft = node.left;\n                while (maxLeft.right) {\n                    maxLeft = maxLeft.right;\n                }\n                if (node.left === maxLeft) {\n                    if (node.isRoot) {\n                        this.root = maxLeft;\n                        maxLeft.parent = null;\n                    } else {\n                        if (node.isLeftChild) {\n                            node.parent.left = maxLeft;\n                        } else {\n                            node.parent.right = maxLeft;\n                        }\n                        maxLeft.parent = node.parent;\n                    }\n                    maxLeft.right = node.right;\n                    maxLeft.right.parent = maxLeft;\n                    maxLeft.balanceFactor = node.balanceFactor;\n                    node = {\n                        parent: maxLeft, isLeftChild: true\n                    };\n                } else {\n                    var mlParent = maxLeft.parent;\n                    var mlLeft = maxLeft.left;\n                    mlParent.right = mlLeft;\n                    if (mlLeft) {\n                        mlLeft.parent = mlParent;\n                    }\n                    if (node.isRoot) {\n                        this.root = maxLeft;\n                        maxLeft.parent = null;\n                    } else {\n                        if (node.isLeftChild) {\n                            node.parent.left = maxLeft;\n                        } else {\n                            node.parent.right = maxLeft;\n                        }\n                        maxLeft.parent = node.parent;\n                    }\n                    maxLeft.right = node.right;\n                    maxLeft.right.parent = maxLeft;\n                    maxLeft.left = node.left;\n                    maxLeft.left.parent = maxLeft;\n                    maxLeft.balanceFactor = node.balanceFactor;\n                    node = {\n                        parent: mlParent, isLeftChild: false\n                    };\n                }\n            }\n            this.count--;\n            while (node.parent) {\n                var _parent = node.parent;\n                var prevBalanceFactor = _parent.balanceFactor;\n                if (node.isLeftChild) {\n                    _parent.balanceFactor -= 1;\n                } else {\n                    _parent.balanceFactor += 1;\n                }\n                if (Math.abs(_parent.balanceFactor) > Math.abs(prevBalanceFactor)) {\n                    if (_parent.balanceFactor < -1 || _parent.balanceFactor > 1) {\n                        this.rebalance(_parent);\n                        if (_parent.parent.balanceFactor === 0) {\n                            node = _parent.parent;\n                        } else {\n                            break;\n                        }\n                    } else {\n                        break;\n                    }\n                } else {\n                    node = _parent;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"getNode\",\n        value: function getNode(key) {\n            var currentNode = this.root;\n            while (currentNode) {\n                if (this.isEqual(key, currentNode.key)) {\n                    return currentNode;\n                }\n                if (this.isLessThan(key, currentNode.key)) {\n                    currentNode = currentNode.left;\n                } else {\n                    currentNode = currentNode.right;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"rebalance\",\n        value: function rebalance(node) {\n            if (node.balanceFactor < 0) {\n                if (node.right.balanceFactor > 0) {\n                    this.rotateRight(node.right);\n                    this.rotateLeft(node);\n                } else {\n                    this.rotateLeft(node);\n                }\n            } else if (node.balanceFactor > 0) {\n                if (node.left.balanceFactor < 0) {\n                    this.rotateLeft(node.left);\n                    this.rotateRight(node);\n                } else {\n                    this.rotateRight(node);\n                }\n            }\n        }\n    }, {\n        key: \"rotateLeft\",\n        value: function rotateLeft(pivot) {\n            var root = pivot.right;\n            pivot.right = root.left;\n            if (root.left !== null) {\n                root.left.parent = pivot;\n            }\n            root.parent = pivot.parent;\n            if (root.parent === null) {\n                this.root = root;\n            } else if (pivot.isLeftChild) {\n                root.parent.left = root;\n            } else {\n                root.parent.right = root;\n            }\n            root.left = pivot;\n            pivot.parent = root;\n            pivot.balanceFactor = pivot.balanceFactor + 1 - Math.min(root.balanceFactor, 0);\n            root.balanceFactor = root.balanceFactor + 1 - Math.max(pivot.balanceFactor, 0);\n        }\n    }, {\n        key: \"rotateRight\",\n        value: function rotateRight(pivot) {\n            var root = pivot.left;\n            pivot.left = root.right;\n            if (root.right !== null) {\n                root.right.parent = pivot;\n            }\n            root.parent = pivot.parent;\n            if (root.parent === null) {\n                this.root = root;\n            } else if (pivot.isLeftChild) {\n                root.parent.left = root;\n            } else {\n                root.parent.right = root;\n            }\n            root.right = pivot;\n            pivot.parent = root;\n            pivot.balanceFactor = pivot.balanceFactor - 1 - Math.min(root.balanceFactor, 0);\n            root.balanceFactor = root.balanceFactor - 1 - Math.max(pivot.balanceFactor, 0);\n        }\n    }, {\n        key: _iterator3.default,\n        value: _regenerator2.default.mark(function value() {\n            var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, iter;\n\n            return _regenerator2.default.wrap(function value$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _iteratorNormalCompletion = true;\n                            _didIteratorError = false;\n                            _iteratorError = undefined;\n                            _context.prev = 3;\n                            _iterator = (0, _getIterator3.default)(this.getIterator());\n\n                        case 5:\n                            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                                _context.next = 12;\n                                break;\n                            }\n\n                            iter = _step.value;\n                            _context.next = 9;\n                            return iter;\n\n                        case 9:\n                            _iteratorNormalCompletion = true;\n                            _context.next = 5;\n                            break;\n\n                        case 12:\n                            _context.next = 18;\n                            break;\n\n                        case 14:\n                            _context.prev = 14;\n                            _context.t0 = _context[\"catch\"](3);\n                            _didIteratorError = true;\n                            _iteratorError = _context.t0;\n\n                        case 18:\n                            _context.prev = 18;\n                            _context.prev = 19;\n\n                            if (!_iteratorNormalCompletion && _iterator.return) {\n                                _iterator.return();\n                            }\n\n                        case 21:\n                            _context.prev = 21;\n\n                            if (!_didIteratorError) {\n                                _context.next = 24;\n                                break;\n                            }\n\n                            throw _iteratorError;\n\n                        case 24:\n                            return _context.finish(21);\n\n                        case 25:\n                            return _context.finish(18);\n\n                        case 26:\n                        case \"end\":\n                            return _context.stop();\n                    }\n                }\n            }, value, this, [[3, 14, 18, 26], [19,, 21, 25]]);\n        })\n    }, {\n        key: \"getIterator\",\n        value: _regenerator2.default.mark(function getIterator() {\n            var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n            var currentNode, fromleft;\n            return _regenerator2.default.wrap(function getIterator$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            currentNode = this.root;\n\n                        case 1:\n                            if (!currentNode) {\n                                _context2.next = 7;\n                                break;\n                            }\n\n                            if (!(this.isEqual(key, currentNode.key) || key === null && !currentNode.left)) {\n                                _context2.next = 4;\n                                break;\n                            }\n\n                            return _context2.abrupt(\"break\", 7);\n\n                        case 4:\n                            if (this.isLessThan(key, currentNode.key) || key === null) {\n                                currentNode = currentNode.left;\n                            } else {\n                                currentNode = currentNode.right;\n                            }\n                            _context2.next = 1;\n                            break;\n\n                        case 7:\n                            if (currentNode) {\n                                _context2.next = 9;\n                                break;\n                            }\n\n                            return _context2.abrupt(\"return\", null);\n\n                        case 9:\n                            fromleft = true;\n\n                        case 10:\n                            if (!fromleft) {\n                                _context2.next = 28;\n                                break;\n                            }\n\n                            _context2.next = 13;\n                            return [currentNode.key, currentNode.value];\n\n                        case 13:\n                            fromleft = false;\n\n                            if (!currentNode.right) {\n                                _context2.next = 20;\n                                break;\n                            }\n\n                            currentNode = currentNode.right;\n                            while (currentNode.left) {\n                                currentNode = currentNode.left;\n                            }\n                            fromleft = true;\n                            _context2.next = 26;\n                            break;\n\n                        case 20:\n                            if (!currentNode.parent) {\n                                _context2.next = 25;\n                                break;\n                            }\n\n                            fromleft = currentNode.parent.left === currentNode;\n                            currentNode = currentNode.parent;\n                            _context2.next = 26;\n                            break;\n\n                        case 25:\n                            return _context2.abrupt(\"break\", 36);\n\n                        case 26:\n                            _context2.next = 34;\n                            break;\n\n                        case 28:\n                            if (!currentNode.parent) {\n                                _context2.next = 33;\n                                break;\n                            }\n\n                            fromleft = currentNode.parent.left === currentNode;\n                            currentNode = currentNode.parent;\n                            _context2.next = 34;\n                            break;\n\n                        case 33:\n                            return _context2.abrupt(\"break\", 36);\n\n                        case 34:\n                            _context2.next = 10;\n                            break;\n\n                        case 36:\n                            return _context2.abrupt(\"return\", null);\n\n                        case 37:\n                        case \"end\":\n                            return _context2.stop();\n                    }\n                }\n            }, getIterator, this);\n        })\n    }, {\n        key: \"getReverseIterator\",\n        value: _regenerator2.default.mark(function getReverseIterator() {\n            var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n            var currentNode, fromright;\n            return _regenerator2.default.wrap(function getReverseIterator$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            currentNode = this.root;\n\n                        case 1:\n                            if (!currentNode) {\n                                _context3.next = 7;\n                                break;\n                            }\n\n                            if (!(this.isEqual(key, currentNode.key) || key === null && !currentNode.right)) {\n                                _context3.next = 4;\n                                break;\n                            }\n\n                            return _context3.abrupt(\"break\", 7);\n\n                        case 4:\n                            if (!this.isLessThan(key, currentNode.key) || key === null) {\n                                currentNode = currentNode.right;\n                            } else {\n                                currentNode = currentNode.left;\n                            }\n                            _context3.next = 1;\n                            break;\n\n                        case 7:\n                            if (currentNode) {\n                                _context3.next = 9;\n                                break;\n                            }\n\n                            return _context3.abrupt(\"return\", null);\n\n                        case 9:\n                            fromright = true;\n\n                        case 10:\n                            if (!fromright) {\n                                _context3.next = 28;\n                                break;\n                            }\n\n                            _context3.next = 13;\n                            return [currentNode.key, currentNode.value];\n\n                        case 13:\n                            fromright = false;\n\n                            if (!currentNode.left) {\n                                _context3.next = 20;\n                                break;\n                            }\n\n                            currentNode = currentNode.left;\n                            while (currentNode.right) {\n                                currentNode = currentNode.right;\n                            }\n                            fromright = true;\n                            _context3.next = 26;\n                            break;\n\n                        case 20:\n                            if (!currentNode.parent) {\n                                _context3.next = 25;\n                                break;\n                            }\n\n                            fromright = currentNode.parent.right === currentNode;\n                            currentNode = currentNode.parent;\n                            _context3.next = 26;\n                            break;\n\n                        case 25:\n                            return _context3.abrupt(\"break\", 36);\n\n                        case 26:\n                            _context3.next = 34;\n                            break;\n\n                        case 28:\n                            if (!currentNode.parent) {\n                                _context3.next = 33;\n                                break;\n                            }\n\n                            fromright = currentNode.parent.right === currentNode;\n                            currentNode = currentNode.parent;\n                            _context3.next = 34;\n                            break;\n\n                        case 33:\n                            return _context3.abrupt(\"break\", 36);\n\n                        case 34:\n                            _context3.next = 10;\n                            break;\n\n                        case 36:\n                            return _context3.abrupt(\"return\", null);\n\n                        case 37:\n                        case \"end\":\n                            return _context3.stop();\n                    }\n                }\n            }, getReverseIterator, this);\n        })\n    }, {\n        key: \"size\",\n        get: function get() {\n            return this.count;\n        }\n    }]);\n    return TreeMap;\n}();\n\nexports.TreeMap = TreeMap;\n//# sourceMappingURL=tree.js.map\n\n\n// WEBPACK FOOTER //\n// ../node_modules/karibu/browser/tree.js","\"use strict\";\n\nvar _from = require(\"babel-runtime/core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar log = require(\"loglevel\");\nfunction prepareLine(prefix, args) {\n    return [prefix].concat((0, _from2.default)(args));\n}\nexports.default = {\n    setLevel: function setLevel(level) {\n        log.setLevel(level);\n    },\n    trace: function trace() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        log.trace.apply(null, prepareLine('EMS T:', args));\n    },\n    debug: function debug() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        log.debug.apply(null, prepareLine('EMS D:', args));\n    },\n    info: function info() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        log.info.apply(null, prepareLine('EMS I:', args));\n    },\n    warn: function warn() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n        }\n\n        log.warn.apply(null, prepareLine('EMS W:', args));\n    },\n    error: function error() {\n        for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n        }\n\n        log.error.apply(null, prepareLine('EMS E:', args));\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-ems-client/browser/logger.js","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_string-at.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/helpers/slicedToArray.js","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_to-object.js","/**\n\tC-like unsigned 32 bits integers in Javascript\n\tCopyright (C) 2013, Pierre Curto\n\tMIT license\n */\n;(function (root) {\n\n\t// Local cache for typical radices\n\tvar radixPowerCache = {\n\t\t36: UINT32( Math.pow(36, 5) )\n\t,\t16: UINT32( Math.pow(16, 7) )\n\t,\t10: UINT32( Math.pow(10, 9) )\n\t,\t2:  UINT32( Math.pow(2, 30) )\n\t}\n\tvar radixCache = {\n\t\t36: UINT32(36)\n\t,\t16: UINT32(16)\n\t,\t10: UINT32(10)\n\t,\t2:  UINT32(2)\n\t}\n\n\t/**\n\t *\tRepresents an unsigned 32 bits integer\n\t * @constructor\n\t * @param {Number|String|Number} low bits     | integer as a string \t\t | integer as a number\n\t * @param {Number|Number|Undefined} high bits | radix (optional, default=10)\n\t * @return \n\t */\n\tfunction UINT32 (l, h) {\n\t\tif ( !(this instanceof UINT32) )\n\t\t\treturn new UINT32(l, h)\n\n\t\tthis._low = 0\n\t\tthis._high = 0\n\t\tthis.remainder = null\n\t\tif (typeof h == 'undefined')\n\t\t\treturn fromNumber.call(this, l)\n\n\t\tif (typeof l == 'string')\n\t\t\treturn fromString.call(this, l, h)\n\n\t\tfromBits.call(this, l, h)\n\t}\n\n\t/**\n\t * Set the current _UINT32_ object with its low and high bits\n\t * @method fromBits\n\t * @param {Number} low bits\n\t * @param {Number} high bits\n\t * @return ThisExpression\n\t */\n\tfunction fromBits (l, h) {\n\t\tthis._low = l | 0\n\t\tthis._high = h | 0\n\n\t\treturn this\n\t}\n\tUINT32.prototype.fromBits = fromBits\n\n\t/**\n\t * Set the current _UINT32_ object from a number\n\t * @method fromNumber\n\t * @param {Number} number\n\t * @return ThisExpression\n\t */\n\tfunction fromNumber (value) {\n\t\tthis._low = value & 0xFFFF\n\t\tthis._high = value >>> 16\n\n\t\treturn this\n\t}\n\tUINT32.prototype.fromNumber = fromNumber\n\n\t/**\n\t * Set the current _UINT32_ object from a string\n\t * @method fromString\n\t * @param {String} integer as a string\n\t * @param {Number} radix (optional, default=10)\n\t * @return ThisExpression\n\t */\n\tfunction fromString (s, radix) {\n\t\tvar value = parseInt(s, radix || 10)\n\n\t\tthis._low = value & 0xFFFF\n\t\tthis._high = value >>> 16\n\n\t\treturn this\n\t}\n\tUINT32.prototype.fromString = fromString\n\n\t/**\n\t * Convert this _UINT32_ to a number\n\t * @method toNumber\n\t * @return {Number} the converted UINT32\n\t */\n\tUINT32.prototype.toNumber = function () {\n\t\treturn (this._high * 65536) + this._low\n\t}\n\n\t/**\n\t * Convert this _UINT32_ to a string\n\t * @method toString\n\t * @param {Number} radix (optional, default=10)\n\t * @return {String} the converted UINT32\n\t */\n\tUINT32.prototype.toString = function (radix) {\n\t\treturn this.toNumber().toString(radix || 10)\n\t}\n\n\t/**\n\t * Add two _UINT32_. The current _UINT32_ stores the result\n\t * @method add\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.add = function (other) {\n\t\tvar a00 = this._low + other._low\n\t\tvar a16 = a00 >>> 16\n\n\t\ta16 += this._high + other._high\n\n\t\tthis._low = a00 & 0xFFFF\n\t\tthis._high = a16 & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Subtract two _UINT32_. The current _UINT32_ stores the result\n\t * @method subtract\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.subtract = function (other) {\n\t\t//TODO inline\n\t\treturn this.add( other.clone().negate() )\n\t}\n\n\t/**\n\t * Multiply two _UINT32_. The current _UINT32_ stores the result\n\t * @method multiply\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.multiply = function (other) {\n\t\t/*\n\t\t\ta = a00 + a16\n\t\t\tb = b00 + b16\n\t\t\ta*b = (a00 + a16)(b00 + b16)\n\t\t\t\t= a00b00 + a00b16 + a16b00 + a16b16\n\n\t\t\ta16b16 overflows the 32bits\n\t\t */\n\t\tvar a16 = this._high\n\t\tvar a00 = this._low\n\t\tvar b16 = other._high\n\t\tvar b00 = other._low\n\n/* Removed to increase speed under normal circumstances (i.e. not multiplying by 0 or 1)\n\t\t// this == 0 or other == 1: nothing to do\n\t\tif ((a00 == 0 && a16 == 0) || (b00 == 1 && b16 == 0)) return this\n\n\t\t// other == 0 or this == 1: this = other\n\t\tif ((b00 == 0 && b16 == 0) || (a00 == 1 && a16 == 0)) {\n\t\t\tthis._low = other._low\n\t\t\tthis._high = other._high\n\t\t\treturn this\n\t\t}\n*/\n\n\t\tvar c16, c00\n\t\tc00 = a00 * b00\n\t\tc16 = c00 >>> 16\n\n\t\tc16 += a16 * b00\n\t\tc16 &= 0xFFFF\t\t// Not required but improves performance\n\t\tc16 += a00 * b16\n\n\t\tthis._low = c00 & 0xFFFF\n\t\tthis._high = c16 & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Divide two _UINT32_. The current _UINT32_ stores the result.\n\t * The remainder is made available as the _remainder_ property on\n\t * the _UINT32_ object. It can be null, meaning there are no remainder.\n\t * @method div\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.div = function (other) {\n\t\tif ( (other._low == 0) && (other._high == 0) ) throw Error('division by zero')\n\n\t\t// other == 1\n\t\tif (other._high == 0 && other._low == 1) {\n\t\t\tthis.remainder = new UINT32(0)\n\t\t\treturn this\n\t\t}\n\n\t\t// other > this: 0\n\t\tif ( other.gt(this) ) {\n\t\t\tthis.remainder = this.clone()\n\t\t\tthis._low = 0\n\t\t\tthis._high = 0\n\t\t\treturn this\n\t\t}\n\t\t// other == this: 1\n\t\tif ( this.eq(other) ) {\n\t\t\tthis.remainder = new UINT32(0)\n\t\t\tthis._low = 1\n\t\t\tthis._high = 0\n\t\t\treturn this\n\t\t}\n\n\t\t// Shift the divisor left until it is higher than the dividend\n\t\tvar _other = other.clone()\n\t\tvar i = -1\n\t\twhile ( !this.lt(_other) ) {\n\t\t\t// High bit can overflow the default 16bits\n\t\t\t// Its ok since we right shift after this loop\n\t\t\t// The overflown bit must be kept though\n\t\t\t_other.shiftLeft(1, true)\n\t\t\ti++\n\t\t}\n\n\t\t// Set the remainder\n\t\tthis.remainder = this.clone()\n\t\t// Initialize the current result to 0\n\t\tthis._low = 0\n\t\tthis._high = 0\n\t\tfor (; i >= 0; i--) {\n\t\t\t_other.shiftRight(1)\n\t\t\t// If shifted divisor is smaller than the dividend\n\t\t\t// then subtract it from the dividend\n\t\t\tif ( !this.remainder.lt(_other) ) {\n\t\t\t\tthis.remainder.subtract(_other)\n\t\t\t\t// Update the current result\n\t\t\t\tif (i >= 16) {\n\t\t\t\t\tthis._high |= 1 << (i - 16)\n\t\t\t\t} else {\n\t\t\t\t\tthis._low |= 1 << i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Negate the current _UINT32_\n\t * @method negate\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.negate = function () {\n\t\tvar v = ( ~this._low & 0xFFFF ) + 1\n\t\tthis._low = v & 0xFFFF\n\t\tthis._high = (~this._high + (v >>> 16)) & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Equals\n\t * @method eq\n\t * @param {Object} other UINT32\n\t * @return {Boolean}\n\t */\n\tUINT32.prototype.equals = UINT32.prototype.eq = function (other) {\n\t\treturn (this._low == other._low) && (this._high == other._high)\n\t}\n\n\t/**\n\t * Greater than (strict)\n\t * @method gt\n\t * @param {Object} other UINT32\n\t * @return {Boolean}\n\t */\n\tUINT32.prototype.greaterThan = UINT32.prototype.gt = function (other) {\n\t\tif (this._high > other._high) return true\n\t\tif (this._high < other._high) return false\n\t\treturn this._low > other._low\n\t}\n\n\t/**\n\t * Less than (strict)\n\t * @method lt\n\t * @param {Object} other UINT32\n\t * @return {Boolean}\n\t */\n\tUINT32.prototype.lessThan = UINT32.prototype.lt = function (other) {\n\t\tif (this._high < other._high) return true\n\t\tif (this._high > other._high) return false\n\t\treturn this._low < other._low\n\t}\n\n\t/**\n\t * Bitwise OR\n\t * @method or\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.or = function (other) {\n\t\tthis._low |= other._low\n\t\tthis._high |= other._high\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise AND\n\t * @method and\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.and = function (other) {\n\t\tthis._low &= other._low\n\t\tthis._high &= other._high\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise NOT\n\t * @method not\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.not = function() {\n\t\tthis._low = ~this._low & 0xFFFF\n\t\tthis._high = ~this._high & 0xFFFF\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise XOR\n\t * @method xor\n\t * @param {Object} other UINT32\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.xor = function (other) {\n\t\tthis._low ^= other._low\n\t\tthis._high ^= other._high\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise shift right\n\t * @method shiftRight\n\t * @param {Number} number of bits to shift\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.shiftRight = UINT32.prototype.shiftr = function (n) {\n\t\tif (n > 16) {\n\t\t\tthis._low = this._high >> (n - 16)\n\t\t\tthis._high = 0\n\t\t} else if (n == 16) {\n\t\t\tthis._low = this._high\n\t\t\tthis._high = 0\n\t\t} else {\n\t\t\tthis._low = (this._low >> n) | ( (this._high << (16-n)) & 0xFFFF )\n\t\t\tthis._high >>= n\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise shift left\n\t * @method shiftLeft\n\t * @param {Number} number of bits to shift\n\t * @param {Boolean} allow overflow\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.shiftLeft = UINT32.prototype.shiftl = function (n, allowOverflow) {\n\t\tif (n > 16) {\n\t\t\tthis._high = this._low << (n - 16)\n\t\t\tthis._low = 0\n\t\t\tif (!allowOverflow) {\n\t\t\t\tthis._high &= 0xFFFF\n\t\t\t}\n\t\t} else if (n == 16) {\n\t\t\tthis._high = this._low\n\t\t\tthis._low = 0\n\t\t} else {\n\t\t\tthis._high = (this._high << n) | (this._low >> (16-n))\n\t\t\tthis._low = (this._low << n) & 0xFFFF\n\t\t\tif (!allowOverflow) {\n\t\t\t\t// Overflow only allowed on the high bits...\n\t\t\t\tthis._high &= 0xFFFF\n\t\t\t}\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise rotate left\n\t * @method rotl\n\t * @param {Number} number of bits to rotate\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.rotateLeft = UINT32.prototype.rotl = function (n) {\n\t\tvar v = (this._high << 16) | this._low\n\t\tv = (v << n) | (v >>> (32 - n))\n\t\tthis._low = v & 0xFFFF\n\t\tthis._high = v >>> 16\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Bitwise rotate right\n\t * @method rotr\n\t * @param {Number} number of bits to rotate\n\t * @return ThisExpression\n\t */\n\tUINT32.prototype.rotateRight = UINT32.prototype.rotr = function (n) {\n\t\tvar v = (this._high << 16) | this._low\n\t\tv = (v >>> n) | (v << (32 - n))\n\t\tthis._low = v & 0xFFFF\n\t\tthis._high = v >>> 16\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Clone the current _UINT32_\n\t * @method clone\n\t * @return {Object} cloned UINT32\n\t */\n\tUINT32.prototype.clone = function () {\n\t\treturn new UINT32(this._low, this._high)\n\t}\n\n\tif (typeof define != 'undefined' && define.amd) {\n\t\t// AMD / RequireJS\n\t\tdefine([], function () {\n\t\t\treturn UINT32\n\t\t})\n\t} else if (typeof module != 'undefined' && module.exports) {\n\t\t// Node.js\n\t\tmodule.exports = UINT32\n\t} else {\n\t\t// Browser\n\t\troot['UINT32'] = UINT32\n\t}\n\n})(this)\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/cuint/lib/uint32.js","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/symbol/iterator.js","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_invoke.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _from = require('babel-runtime/core-js/array/from');\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction prepareLine(prefix, args) {\n  return [prefix].concat((0, _from2.default)(args));\n}\n\nexports.default = {\n  setLevel: function setLevel(level) {\n    _loglevel2.default.setLevel(level);\n  },\n\n  trace: function trace() {\n    _loglevel2.default.trace.apply(null, prepareLine('Twilsock T:', arguments));\n  },\n  debug: function debug() {\n    _loglevel2.default.debug.apply(null, prepareLine('Twilsock D:', arguments));\n  },\n  info: function info() {\n    _loglevel2.default.info.apply(null, prepareLine('Twilsock I:', arguments));\n  },\n  warn: function warn() {\n    _loglevel2.default.warn.apply(null, prepareLine('Twilsock W:', arguments));\n  },\n  error: function error() {\n    _loglevel2.default.error.apply(null, prepareLine('Twilsock E:', arguments));\n  }\n};\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilsock/lib/logger.js","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_for-of.js","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_keyof.js","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/node-libs-browser/node_modules/buffer/index.js","module.exports = {\"_from\":\"twilio-sync@0.5.8\",\"_id\":\"twilio-sync@0.5.8\",\"_inBundle\":false,\"_integrity\":\"sha1-8k4W1ffyRW2J3/Vi5ZDr7h4TCNo=\",\"_location\":\"/twilio-sync\",\"_phantomChildren\":{},\"_requested\":{\"type\":\"version\",\"registry\":true,\"raw\":\"twilio-sync@0.5.8\",\"name\":\"twilio-sync\",\"escapedName\":\"twilio-sync\",\"rawSpec\":\"0.5.8\",\"saveSpec\":null,\"fetchSpec\":\"0.5.8\"},\"_requiredBy\":[\"#USER\",\"/\"],\"_resolved\":\"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.8.tgz\",\"_shasum\":\"f24e16d5f7f2456d89dff562e590ebee1e1308da\",\"_spec\":\"twilio-sync@0.5.8\",\"_where\":\"/Users/lsiegle/Desktop/web/twilio-barista\",\"author\":{\"name\":\"Twilio\"},\"browser\":\"browser/index.js\",\"bundleDependencies\":false,\"dependencies\":{\"babel-runtime\":\"^6.23.0\",\"karibu\":\"^1.0.1\",\"loglevel\":\"^1.4.1\",\"operation-retrier\":\"^1.1.2\",\"platform\":\"^1.3.3\",\"rfc6902\":\"^1.3.0\",\"twilio-ems-client\":\"^0.2.0\",\"twilio-notifications\":\"^0.4.0\",\"twilio-transport\":\"^0.1.2\",\"twilsock\":\"^0.3.0\",\"uuid\":\"^3.0.1\",\"xxhashjs\":\"^0.2.1\"},\"deprecated\":false,\"description\":\"Twilio Sync client library\",\"devDependencies\":{\"@types/chai\":\"^3.4.35\",\"@types/chai-as-promised\":\"0.0.29\",\"@types/loglevel\":\"^1.4.29\",\"@types/mocha\":\"^2.2.39\",\"@types/node\":\"^7.0.5\",\"@types/sinon\":\"^1.16.35\",\"@types/sinon-as-promised\":\"^4.0.5\",\"@types/sinon-chai\":\"^2.7.27\",\"async-test-tools\":\"^1.0.6\",\"babel-cli\":\"^6.23.0\",\"babel-plugin-add-module-exports\":\"^0.2.1\",\"babel-plugin-array-includes\":\"^2.0.3\",\"babel-plugin-transform-object-assign\":\"^6.22.0\",\"babel-plugin-transform-runtime\":\"^6.23.0\",\"babel-preset-es2015\":\"^6.22.0\",\"babelify\":\"^7.3.0\",\"backoff\":\"^2.5.0\",\"browserify\":\"^14.1.0\",\"chai\":\"^3.5.0\",\"chai-as-promised\":\"^6.0.0\",\"cheerio\":\"^0.22.0\",\"del\":\"^2.2.2\",\"gulp\":\"^3.9.1\",\"gulp-babel\":\"^6.1.2\",\"gulp-derequire\":\"^2.1.0\",\"gulp-exit\":\"0.0.2\",\"gulp-insert\":\"^0.5.0\",\"gulp-istanbul\":\"^1.1.1\",\"gulp-mocha\":\"^4.0.1\",\"gulp-rename\":\"^1.2.2\",\"gulp-replace\":\"^0.5.4\",\"gulp-tap\":\"^0.1.3\",\"gulp-tslint\":\"^7.1.0\",\"gulp-typescript\":\"^3.1.5\",\"gulp-uglify\":\"^2.0.1\",\"gulp-util\":\"^3.0.8\",\"ink-docstrap\":\"^1.3.0\",\"isparta\":\"^4.0.0\",\"jsdoc\":\"^3.4.3\",\"jsonwebtoken\":\"^7.3.0\",\"karma\":\"^1.5.0\",\"karma-browserify\":\"^5.1.1\",\"karma-browserstack-launcher\":\"^1.2.0\",\"karma-mocha\":\"^1.3.0\",\"karma-mocha-reporter\":\"^2.2.2\",\"run-sequence\":\"^1.2.2\",\"sinon\":\"^1.17.7\",\"sinon-as-promised\":\"^4.0.2\",\"sinon-chai\":\"^2.8.0\",\"ts-node\":\"^3.0.0\",\"tslint\":\"^4.5.1\",\"twilio\":\"^3.3.0-edge\",\"typescript\":\"2.2.1\",\"underscore\":\"^1.8.3\",\"vinyl-buffer\":\"^1.0.0\",\"vinyl-source-stream\":\"^1.1.0\",\"watchify\":\"^3.9.0\"},\"engines\":{\"node\":\">=6\"},\"license\":\"MIT\",\"main\":\"lib/index.js\",\"name\":\"twilio-sync\",\"scripts\":{\"prepublish\":\"gulp build\",\"test\":\"gulp unit-test\"},\"version\":\"0.5.8\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/twilio-sync/package.json\n// module id = qEFr\n// module chunks = 5 6","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/uuid/index.js","\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @class\n * @classdesc List item\n * Represents a data for each element in a collection\n * @alias ListItem\n * @property {Number} index  - identifier of an item\n * @property {Object} value - value of an item\n */\n\nvar ListItem = function () {\n  /**\n   * @private\n   * @constructor\n   * @param {Object} data Item descriptor\n   * @param {Number} data.index Item identifier\n   * @param {String} data.uri Item URI\n   * @param {Object} data.value Item data\n   */\n  function ListItem(data) {\n    (0, _classCallCheck3.default)(this, ListItem);\n\n    this.data = data;\n  }\n\n  (0, _createClass3.default)(ListItem, [{\n    key: \"update\",\n\n    /**\n     * Update item data\n     * @param {Number} EventId Update event id\n     * @param {String} Revision Updated item revision\n     * @param {Object} Value Updated item data\n     * @private\n     */\n    value: function update(eventId, revision, value) {\n      this.data.lastEventId = eventId;\n      this.data.revision = revision;\n      this.data.value = value;\n      return this;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      return this.data.uri;\n    }\n  }, {\n    key: \"revision\",\n    get: function get() {\n      return this.data.revision;\n    }\n  }, {\n    key: \"lastEventId\",\n    get: function get() {\n      return this.data.lastEventId;\n    }\n  }, {\n    key: \"index\",\n    get: function get() {\n      return this.data.index;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.data.value;\n    }\n  }]);\n  return ListItem;\n}();\n\nexports.ListItem = ListItem;\nexports.default = ListItem;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-sync/browser/listitem.js","module.exports = {\n\th32: require(\"./xxhash\")\n,\th64: require(\"./xxhash64\")\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/xxhashjs/lib/index.js","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-gopn-ext.js","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-gopd.js","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_array-methods.js","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/util/node_modules/inherits/inherits_browser.js","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D){\n  return $Object.defineProperties(T, D);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/define-properties.js","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iter-define.js","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/core.get-iterator.js","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-assign.js","/*\n\n  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine\n\n  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors\n  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE\n\n*/\n\n(function () {\n\n  var StateMachine = {\n\n    //---------------------------------------------------------------------------\n\n    VERSION: \"2.4.0\",\n\n    //---------------------------------------------------------------------------\n\n    Result: {\n      SUCCEEDED:    1, // the event transitioned successfully from one state to another\n      NOTRANSITION: 2, // the event was successfull but no state transition was necessary\n      CANCELLED:    3, // the event was cancelled by the caller in a beforeEvent callback\n      PENDING:      4  // the event is asynchronous and the caller is in control of when the transition occurs\n    },\n\n    Error: {\n      INVALID_TRANSITION: 100, // caller tried to fire an event that was innapropriate in the current state\n      PENDING_TRANSITION: 200, // caller tried to fire an event while an async transition was still pending\n      INVALID_CALLBACK:   300 // caller provided callback function threw an exception\n    },\n\n    WILDCARD: '*',\n    ASYNC: 'async',\n\n    //---------------------------------------------------------------------------\n\n    create: function(cfg, target) {\n\n      var initial      = (typeof cfg.initial == 'string') ? { state: cfg.initial } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }\n      var terminal     = cfg.terminal || cfg['final'];\n      var fsm          = target || cfg.target  || {};\n      var events       = cfg.events || [];\n      var callbacks    = cfg.callbacks || {};\n      var map          = {}; // track state transitions allowed for an event { event: { from: [ to ] } }\n      var transitions  = {}; // track events allowed from a state            { state: [ event ] }\n\n      var add = function(e) {\n        var from = Array.isArray(e.from) ? e.from : (e.from ? [e.from] : [StateMachine.WILDCARD]); // allow 'wildcard' transition if 'from' is not specified\n        map[e.name] = map[e.name] || {};\n        for (var n = 0 ; n < from.length ; n++) {\n          transitions[from[n]] = transitions[from[n]] || [];\n          transitions[from[n]].push(e.name);\n\n          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified\n        }\n        if (e.to)\n          transitions[e.to] = transitions[e.to] || [];\n      };\n\n      if (initial) {\n        initial.event = initial.event || 'startup';\n        add({ name: initial.event, from: 'none', to: initial.state });\n      }\n\n      for(var n = 0 ; n < events.length ; n++)\n        add(events[n]);\n\n      for(var name in map) {\n        if (map.hasOwnProperty(name))\n          fsm[name] = StateMachine.buildEvent(name, map[name]);\n      }\n\n      for(var name in callbacks) {\n        if (callbacks.hasOwnProperty(name))\n          fsm[name] = callbacks[name]\n      }\n\n      fsm.current     = 'none';\n      fsm.is          = function(state) { return Array.isArray(state) ? (state.indexOf(this.current) >= 0) : (this.current === state); };\n      fsm.can         = function(event) { return !this.transition && (map[event] !== undefined) && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD)); }\n      fsm.cannot      = function(event) { return !this.can(event); };\n      fsm.transitions = function()      { return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || []); };\n      fsm.isFinished  = function()      { return this.is(terminal); };\n      fsm.error       = cfg.error || function(name, from, to, args, error, msg, e) { throw e || msg; }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)\n      fsm.states      = function() { return Object.keys(transitions).sort() };\n\n      if (initial && !initial.defer)\n        fsm[initial.event]();\n\n      return fsm;\n\n    },\n\n    //===========================================================================\n\n    doCallback: function(fsm, func, name, from, to, args) {\n      if (func) {\n        try {\n          return func.apply(fsm, [name, from, to].concat(args));\n        }\n        catch(e) {\n          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, \"an exception occurred in a caller-provided callback function\", e);\n        }\n      }\n    },\n\n    beforeAnyEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbeforeevent'],                       name, from, to, args); },\n    afterAnyEvent:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'],      name, from, to, args); },\n    leaveAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleavestate'],                        name, from, to, args); },\n    enterAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'],      name, from, to, args); },\n    changeState:     function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onchangestate'],                       name, from, to, args); },\n\n    beforeThisEvent: function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbefore' + name],                     name, from, to, args); },\n    afterThisEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafter'  + name] || fsm['on' + name], name, from, to, args); },\n    leaveThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleave'  + from],                     name, from, to, args); },\n    enterThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenter'  + to]   || fsm['on' + to],   name, from, to, args); },\n\n    beforeEvent: function(fsm, name, from, to, args) {\n      if ((false === StateMachine.beforeThisEvent(fsm, name, from, to, args)) ||\n          (false === StateMachine.beforeAnyEvent( fsm, name, from, to, args)))\n        return false;\n    },\n\n    afterEvent: function(fsm, name, from, to, args) {\n      StateMachine.afterThisEvent(fsm, name, from, to, args);\n      StateMachine.afterAnyEvent( fsm, name, from, to, args);\n    },\n\n    leaveState: function(fsm, name, from, to, args) {\n      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),\n          general  = StateMachine.leaveAnyState( fsm, name, from, to, args);\n      if ((false === specific) || (false === general))\n        return false;\n      else if ((StateMachine.ASYNC === specific) || (StateMachine.ASYNC === general))\n        return StateMachine.ASYNC;\n    },\n\n    enterState: function(fsm, name, from, to, args) {\n      StateMachine.enterThisState(fsm, name, from, to, args);\n      StateMachine.enterAnyState( fsm, name, from, to, args);\n    },\n\n    //===========================================================================\n\n    buildEvent: function(name, map) {\n      return function() {\n\n        var from  = this.current;\n        var to    = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from;\n        var args  = Array.prototype.slice.call(arguments); // turn arguments into pure array\n\n        if (this.transition)\n          return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, \"event \" + name + \" inappropriate because previous transition did not complete\");\n\n        if (this.cannot(name))\n          return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, \"event \" + name + \" inappropriate in current state \" + this.current);\n\n        if (false === StateMachine.beforeEvent(this, name, from, to, args))\n          return StateMachine.Result.CANCELLED;\n\n        if (from === to) {\n          StateMachine.afterEvent(this, name, from, to, args);\n          return StateMachine.Result.NOTRANSITION;\n        }\n\n        // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)\n        var fsm = this;\n        this.transition = function() {\n          fsm.transition = null; // this method should only ever be called once\n          fsm.current = to;\n          StateMachine.enterState( fsm, name, from, to, args);\n          StateMachine.changeState(fsm, name, from, to, args);\n          StateMachine.afterEvent( fsm, name, from, to, args);\n          return StateMachine.Result.SUCCEEDED;\n        };\n        this.transition.cancel = function() { // provide a way for caller to cancel async transition if desired (issue #22)\n          fsm.transition = null;\n          StateMachine.afterEvent(fsm, name, from, to, args);\n        }\n\n        var leave = StateMachine.leaveState(this, name, from, to, args);\n        if (false === leave) {\n          this.transition = null;\n          return StateMachine.Result.CANCELLED;\n        }\n        else if (StateMachine.ASYNC === leave) {\n          return StateMachine.Result.PENDING;\n        }\n        else {\n          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC\n            return this.transition();\n        }\n\n      };\n    }\n\n  }; // StateMachine\n\n  //===========================================================================\n\n  //======\n  // NODE\n  //======\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = StateMachine;\n    }\n    exports.StateMachine = StateMachine;\n  }\n  //============\n  // AMD/REQUIRE\n  //============\n  else if (typeof define === 'function' && define.amd) {\n    define(function(require) { return StateMachine; });\n  }\n  //========\n  // BROWSER\n  //========\n  else if (typeof window !== 'undefined') {\n    window.StateMachine = StateMachine;\n  }\n  //===========\n  // WEB WORKER\n  //===========\n  else if (typeof self !== 'undefined') {\n    self.StateMachine = StateMachine;\n  }\n\n}());\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/javascript-state-machine/state-machine.js","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_task.js","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_export.js","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_create-property.js","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/object/assign.js","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/util/support/isBufferBrowser.js","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nmodule.exports = require('../modules/_core').Set;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/fn/set.js","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_fails.js","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_collection-to-json.js","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_iter-step.js","// Generated by CoffeeScript 1.11.0\n(function() {\n  module.exports = require(\"./Bottleneck\");\n\n  if (global.window != null) {\n    global.window.Bottleneck = module.exports;\n  }\n\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/bottleneck/lib/index.js","var $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/es6.object.create.js","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_has.js","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_enum-keys.js","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n// WEBPACK FOOTER //\n// ../node_modules/babel-runtime/core-js/object/create.js","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/base64-js/index.js","exports.f = {}.propertyIsEnumerable;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_object-pie.js","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_core.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperties = require('babel-runtime/core-js/object/define-properties');\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ERS_URI = 'https://ers.twilio.com';\nvar ERS_PATH = '/v1/registrations';\n\nvar NotificationConfig = function () {\n  function NotificationConfig(token, options) {\n    var _this = this;\n\n    (0, _classCallCheck3.default)(this, NotificationConfig);\n\n    options = (options || {}).Notification || {};\n    var uri = options.ersUri || ERS_URI;\n\n    (0, _defineProperties2.default)(this, {\n      _registrarUri: { value: uri + ERS_PATH },\n      _token: { value: token, writable: true },\n\n      registrarUri: { get: function get() {\n          return _this._registrarUri;\n        } },\n      token: { get: function get() {\n          return _this._token;\n        } }\n    });\n  }\n\n  (0, _createClass3.default)(NotificationConfig, [{\n    key: 'updateToken',\n    value: function updateToken(token) {\n      this._token = token;\n    }\n  }]);\n  return NotificationConfig;\n}();\n\nexports.default = NotificationConfig;\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/twilio-notifications/lib/configuration.js","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/core-js/library/modules/_an-object.js"],"sourceRoot":""}